1449481547593:getwd()
1449499435635:source('~/Documents/r projects/data_import/functions and pckg.R')
1449499817053:library(RODBC)
1449499842954:library(Rodbc)
1449499854947:install.packages("RODBC")
1449499884901:library(RODBC)
1449499900809:install.packages("RODBC")
1449499959453:library(RODBC)
1449500027540:install.packages("RODBC")
1449500808585:is.installed <- function(mypkg){
1449500808586:is.element(mypkg, installed.packages()[,1])
1449500808587:}
1449500808588:for(i in 1:length(pckg)) {
1449500808588:if (!is.installed(pckg[i])){
1449500808589:install.packages(pckg[i])
1449500808589:}
1449500808589:library(pckg[i], character.only = T)
1449500808590:}
1449500810171:### given a dataframe and an array of names to drop,
1449500810172:### drop these names and rename the df from alphabetically
1449500810172:drop_and_rename = function(df, drops = NA){
1449500810173:names(df) = LETTERS[1:length(names(df))]
1449500810173:df = df[, !(names(df) %in% drops)]
1449500810173:names(df) = LETTERS[1:length(names(df))]
1449500810174:return(df)
1449500810174:}
1449500810175:## data import
1449500810175:fc = file('pampac0601.txt')
1449500810176:mylist = strsplit(readLines(fc), ";")
1449500811833:close(fc)
1449500811833:options(stringAsFactors=F)
1449500811834:l2 = lapply(mylist, t)
1449500811958:l3 = lapply(l2, as.data.frame)
1449500848962:d = as.data.frame(rbindlist(l3, fill = T),stringAsFactors = F)
1449500849956:d1 = d[d$V6 == "0",] #plaintiff
1449500850581:d2 = d[d$V6 == "1",] #attorney
1449500850588:d3 = d[d$V6 == "3",] #apn
1449500930048:setwd("~/Documents/data/nj tax data/")
1449500975335:f = function(x) {
1449500975336:x1 = substring(x, startnum, endnum)
1449500975336:names(x1) = name
1449500975336:return(x1)
1449500975337:}
1449500975338:output = function(filename) {
1449500975338:# create a function to truncate the string with
1449500975339:startnum = c(1, 5, 10, 14, 19, 23, 59, 176)
1449500975339:endnum = c(4, 9, 13, 18, 22, 33, 83, 210)
1449500975340:name = c("muni", "blk", "blk_suffix", "lot", "lot_suffix", "qual", "address", "owner")
1449500975340:con = file(filename)
1449500975341:l = strsplit(readLines(con), "\n")
1449500975342:close(con)
1449500975343:l1 = lapply(l, f)
1449500975343:l2 = lapply(l1, t)
1449500975344:d1 = do.call("rbind", l2)
1449500975344:d2 = as.data.frame(d1, stringsAsFactors = F)
1449500975345:return(d2)
1449500975345:}
1449500980082:county = list()
1449500982417:county = list()
1449500984295:for (i in 1:length(dir())) {
1449500985281:county[[i]] = output(dir()[i])
1449500985984:}
1449502599805:startnum = c(1, 5, 10, 14, 19, 23, 59, 176)
1449502600354:startnum = c(1, 5, 10, 14, 19, 23, 59, 176)
1449502602421:startnum = c(1, 5, 10, 14, 19, 23, 59, 176)
1449502602921:endnum = c(4, 9, 13, 18, 22, 33, 83, 210)
1449502615520:# read the txt file, return a dataframe
1449502615558:f = function(x) {
1449502615559:x1 = substring(x, startnum, endnum)
1449502615560:names(x1) = name
1449502615560:return(x1)
1449502615561:}
1449502615563:output = function(filename) {
1449502615563:# create a function to truncate the string with
1449502615564:startnum = c(1, 5, 10, 14, 19, 23, 59, 176)
1449502615564:endnum = c(4, 9, 13, 18, 22, 33, 83, 210)
1449502615564:name = c("muni", "blk", "blk_suffix", "lot", "lot_suffix", "qual", "address", "owner")
1449502615565:con = file(filename)
1449502615565:l = strsplit(readLines(con), "\n")
1449502615566:close(con)
1449502615566:l1 = lapply(l, f)
1449502615567:l2 = lapply(l1, t)
1449502615567:d1 = do.call("rbind", l2)
1449502615569:d2 = as.data.frame(d1, stringsAsFactors = F)
1449502615570:return(d2)
1449502615571:}
1449502615572:#atlantic = output("Atlantic15.txt")
1449502615573:county = list()
1449502615574:for (i in 1:length(dir())) {
1449502615574:county[[i]] = output(dir()[i])
1449502615575:}
1449502632813:nj = rbindlist(county)
1449502632816:nj = apply(nj, 2, as.character)
1449502632823:nj = apply(nj, 2, trimws)
1449502632825:nj = as.data.frame(nj, stringsAsFactors = F)
1449502632826:nj.temp = nj
1449502632826:nj = nj.temp
1449502692774:startnum = c(1, 5, 10, 14, 19, 23, 59, 176)
1449502692887:endnum = c(4, 9, 13, 18, 22, 33, 83, 210)
1449502692888:name = c("muni", "blk", "blk_suffix", "lot", "lot_suffix", "qual", "address", "owner")
1449502702958:output = function(filename) {
1449502702998:# create a function to truncate the string with
1449502702998:con = file(filename)
1449502702999:l = strsplit(readLines(con), "\n")
1449502703000:close(con)
1449502703000:l1 = lapply(l, f)
1449502703001:l2 = lapply(l1, t)
1449502703002:d1 = do.call("rbind", l2)
1449502703002:d2 = as.data.frame(d1, stringsAsFactors = F)
1449502703003:return(d2)
1449502703004:}
1449502711425:#atlantic = output("Atlantic15.txt")
1449502711463:county = list()
1449502711464:for (i in 1:length(dir())) {
1449502711464:county[[i]] = output(dir()[i])
1449502711465:}
1449503397423:nj = rbindlist(county)
1449503400414:nj = apply(nj, 2, as.character)
1449503428639:nj = apply(nj, 2, trimws)
1449503468839:nj = as.data.frame(nj, stringsAsFactors = F)
1449503484073:nj.temp = nj
1449503484073:nj = nj.temp
1449504654543:install.packages("RODBC")
1449504701034:y
1449504735616:install.packages("RODBC",type = "source")
1449504758732:library(RODBC)
1449504985600:dir()
1449504998184:output = function(filename) {
1449504998223:# create a function to truncate the string with
1449504998224:con = file(filename)
1449504998225:l = strsplit(readLines(con), "\n")
1449504998226:close(con)
1449504998226:l1 = lapply(l, f)
1449504998226:l2 = lapply(l1, t)
1449504998227:d1 = do.call("rbind", l2)
1449504998227:d2 = as.data.frame(d1, stringsAsFactors = F)
1449504998228:return(d2)
1449504998228:}
1449504998229:#atlantic = output("Atlantic15.txt")
1449504998230:county = list()
1449504998231:for (i in 1:length(dir())) {
1449504998232:county[[i]] = output(dir()[i])
1449504998232:}
1449505695993:nj = rbindlist(county)
1449505707022:nj = apply(nj, 2, as.character)
1449505741178:nj = apply(nj, 2, trimws)
1449505777736:nj = as.data.frame(nj, stringsAsFactors = F)
1449505788280:nj.temp = nj
1449505788281:nj = nj.temp
1449505788283:# bind the blk and blk su
1449505792443:# bind the blk and blk suffix, lot and lot suffix
1449505792445:#nj$blk_suffix = gsub("^$|^ *$", "", nj$blk_suffix)
1449505792445:#nj$lot_suffix = gsub("^$|^ *$", "", nj$lot_suffix)
1449505792447:#nj$qual = gsub("^$|^ *$", "", nj$qual)
1449505792451:nj$blk = as.character(as.numeric(nj$blk))
1449505795293:nj$lot = as.character(as.numeric(nj$lot))
1449505798067:nj$blk = gsub("( +)","", nj$blk)
1449505799845:nj$lot = gsub("( +)", "", nj$lot)
1449505801461:nj$blk_suffix = trimws(nj$blk_suffix)
1449505803027:nj$lot_suffix = trimws(nj$lot_suffix)
1449505804616:nj[which(nj$blk_suffix != ""),c("blk_suffix")] = paste(".", nj[which(nj$blk_suffix != ""),c("blk_suffix")], sep = "")
1449505807778:nj$lot_suffix[which(nj$lot_suffix != "")] = paste(".", nj$lot_suffix[which(nj$lot_suffix != "")], sep = "")
1449505808116:nj$blk = paste(nj$blk, nj$blk_suffix, sep = "")
1449505808801:nj$lot = paste(nj$lot, nj$lot_suffix, sep= "")
1449505809513:drops = c("blk_suffix","lot_suffix")
1449505809514:nj = nj[,!(names(nj) %in% drops)]
1449505811136:nj$lotqual = paste(nj$lot,nj$qual,sep = "")
1449505816952:blk = d3s$G
1449505817236:lot = d3s$H
1449505818151:## clean blk
1449505818401:blkpattern1 = "(^\\d+\\b)(\\s+)([0]\\d+\\b)"
1449505818602:blkpattern2 = "(^\\d+[.]*\\d*)(\\s*)(((FKA)|(F/K/A)|(QUAL)|(AKA)|(A/K/A)|(FK)|(F/K)|(AND))(.*))"
1449505818904:blk1 = gsub(blkpattern1, "\\1.\\3", blk)
1449505819201:blk2 = gsub(blkpattern2, "\\1", blk1)
1449505821359:blkn = blk2
1449505823620:lotpattern1 = "(F/K/A.*)|(AKA.*)|(A/K/A.*)|(FK.*)|(F/K.*)|(AND.*)|(&.*)|(THRU.*))|(:)|(QUAL)|(\\()|(\\))|[,]"
1449505823870:lotpattern2 = "(^\\d+\\b)(\\s+)([0]\\d+.*\\b)"
1449505824053:lotpattern3 = "(^\\d+\\b)(\\s+)(\\d+\\b)(\\s+)(\\d+\\b)"
1449505824466:lot1 = gsub(lotpattern1, "", lot)
1449505824713:lot2 = gsub(lotpattern2, "\\1.\\3", lot1)
1449505825046:lot3 = gsub(lotpattern3, "\\1", lot2)
1449505825419:lotn = gsub(" ", "", lot3)
1449505826034:## search blk
1449505826459:apn = cbind.data.frame(d3s$J, blkn, lotn)
1449505827103:names(apn) = c("muni","blk","lotnqual")
1449505827335:apn$blk.n = rep(NA)
1449505827784:# apn = apply(apn, 2, as.character) #?why return a matrix
1449505828055:f = function(x){
1449505828223:a = which(x$blk %in% nj[which(nj$muni == x$muni),]$blk)
1449505828648:x$blk.n[a] = as.character(x$blk[a])
1449505829175:return(x)
1449505868363:d3s = drop_and_rename(d3, drops = c("B","C","F","G","H","I","M","N","O","P","Q","R"))
1449505868364:#head(d3s)
1449505868365:# trim all columns (including column D, E, F)
1449505868365:d3s = data.frame(apply(d3s, 2, trimws), stringsAsFactors = F)
1449505868366:### remove rows have no address (D)
1449505868366:# View(d3s1[order(d3s1$D),])
1449505868367:d3s$D = gsub("^$|^ *$", NA, d3s$D) #replace blanks address as NA
1449505868367:d3s = (d3s[!(is.na(d3s$D) | d3s$D==""), ]) # delete rows with address = NA
1449505868368:## remove duplicates
1449505868369:dup = which(d3s$B %in% d3s[duplicated(d3s[,"B"]),]$B) ## duplicated records in B
1449505868369:dup.lev = d3s[duplicated(d3s[,"B"]),]$B #duplicated docket numbers
1449505868370:## remove these records without blk and lot numbers in duplicates
1449505868371:d3s[dup,c("G","H")] = apply(d3s[dup,c("G","H")], 2, function(x) gsub("^ *$", NA, x)) #replace blanks in G, H as NA
1449505868371:#View(d3s[dup,])
1449505868372:d3s = d3s[!(is.na(d3s$G) | is.na(d3s$G)), ]
1449505877333:d3s = drop_and_rename(d3, drops = c("B","C","F","G","H","I","M","N","O","P","Q","R"))
1449505877337:#head(d3s)
1449505877339:# trim all columns (including column D, E, F)
1449505877339:d3s = data.frame(apply(d3s, 2, trimws), stringsAsFactors = F)
1449505877748:### remove rows have no address (D)
1449505877749:# View(d3s1[order(d3s1$D),])
1449505877749:d3s$D = gsub("^$|^ *$", NA, d3s$D) #replace blanks address as NA
1449505877754:d3s = (d3s[!(is.na(d3s$D) | d3s$D==""), ]) # delete rows with address = NA
1449505877762:## remove duplicates
1449505877764:dup = which(d3s$B %in% d3s[duplicated(d3s[,"B"]),]$B) ## duplicated records in B
1449505877771:dup.lev = d3s[duplicated(d3s[,"B"]),]$B #duplicated docket numbers
1449505877773:## remove these records without blk and lot numbers in duplicates
1449505877773:d3s[dup,c("G","H")] = apply(d3s[dup,c("G","H")], 2, function(x) gsub("^ *$", NA, x)) #replace blanks in G, H as NA
1449505877780:#View(d3s[dup,])
1449505877780:d3s = d3s[!(is.na(d3s$G) | is.na(d3s$G)), ]
1449505901515:blk = d3s$G
1449505901517:lot = d3s$H
1449505901517:## clean blk
1449505901518:blkpattern1 = "(^\\d+\\b)(\\s+)([0]\\d+\\b)"
1449505901518:blkpattern2 = "(^\\d+[.]*\\d*)(\\s*)(((FKA)|(F/K/A)|(QUAL)|(AKA)|(A/K/A)|(FK)|(F/K)|(AND))(.*))"
1449505901519:blk1 = gsub(blkpattern1, "\\1.\\3", blk)
1449505901524:blk2 = gsub(blkpattern2, "\\1", blk1)
1449505901542:View(cbind(blk2, blk1, blk))
1449505901676:blkn = blk2
1449505901677:# clean lot$qual
1449505901677:View(cbind(lot3, lot2, lot1, lot))
1449505901679:lotpattern1 = "(F/K/A.*)|(AKA.*)|(A/K/A.*)|(FK.*)|(F/K.*)|(AND.*)|(&.*)|(THRU.*))|(:)|(QUAL)|(\\()|(\\))|[,]"
1449505901679:lotpattern2 = "(^\\d+\\b)(\\s+)([0]\\d+.*\\b)"
1449505901680:lotpattern3 = "(^\\d+\\b)(\\s+)(\\d+\\b)(\\s+)(\\d+\\b)"
1449505901680:lot1 = gsub(lotpattern1, "", lot)
1449505901691:lot2 = gsub(lotpattern2, "\\1.\\3", lot1)
1449505901693:lot3 = gsub(lotpattern3, "\\1", lot2)
1449505901697:lotn = gsub(" ", "", lot3)
1449505901703:## search blk
1449505901704:apn = cbind.data.frame(d3s$J, blkn, lotn)
1449505901721:names(apn) = c("muni","blk","lotnqual")
1449505901722:apn$blk.n = rep(NA)
1449505901723:# apn = apply(apn, 2, as.character) #?why return a matrix
1449505901724:f = function(x){
1449505901724:a = which(x$blk %in% nj[which(nj$muni == x$muni),]$blk)
1449505901725:x$blk.n[a] = as.character(x$blk[a])
1449505901725:return(x)
1449505901725:}
1449505913174:test = apply(apn, 1, f)
1449519234242:head(apn)
1449519239773:class(apn)
1449519352418:nj = nj.temp
1449519362626:# bind the blk and blk suffix, lot and lot suffix
1449519362631:#nj$blk_suffix = gsub("^$|^ *$", "", nj$blk_suffix)
1449519362635:#nj$lot_suffix = gsub("^$|^ *$", "", nj$lot_suffix)
1449519362639:#nj$qual = gsub("^$|^ *$", "", nj$qual)
1449519362648:nj$blkraw = nj$blk
1449519364833:nj$lotraw = nj$lot
1449519367630:nj$blk = as.character(as.numeric(nj$blk))
1449519370333:nj$lot = as.character(as.numeric(nj$lot))
1449519374686:nj$lot = gsub("( +)", "", nj$lot)
1449519378639:nj$blk_suffix = trimws(nj$blk_suffix)
1449519382721:nj$blk = gsub("( +)","", nj$blk)
1449519385841:nj$lot_suffix = trimws(nj$lot_suffix)
1449519555440:nj = nj.temp
1449519560943:nj = nj.temp
1449519560949:# bind the blk and blk suffix, lot and lot suffix
1449519560950:#nj$blk_suffix = gsub("^$|^ *$", "", nj$blk_suffix)
1449519560952:#nj$lot_suffix = gsub("^$|^ *$", "", nj$lot_suffix)
1449519560954:#nj$qual = gsub("^$|^ *$", "", nj$qual)
1449519560956:nj$blkraw = nj$blk
1449519562296:nj$blk = as.character(as.numeric(nj$blk))
1449519566754:nj$blk = gsub("( +)","", nj$blk)
1449519571070:nj$qual = trimws(nj$qual)
1449519573868:nj$blk_suffix = trimws(nj$blk_suffix)
1449519577502:nj$lot = as.character(as.numeric(nj$lot))
1449519581900:nj$lot[which(nj$lot_suffix != "")] = paste(nj$lot[which(nj$lot_suffix != "")], ".", sep = "")
1449519585105:nj$lot_suffix = trimws(nj$lot_suffix)
1449519588970:nj$lotraw = nj$lot
1449519591264:nj$blk = paste(nj$blk, nj$blk_suffix, sep = "")
1449519594535:nj$blk[which(nj$blk_suffix != "")] = paste(nj$blk[which(nj$blk_suffix != "")], ".", sep = "")
1449519596151:nj$lotqual = paste(nj$lot,nj$qual,sep = "")
1449519599260:nj$lot = gsub("( +)", "", nj$lot)
1449519602355:nj$lot = paste(nj$lot, nj$lot_suffix, sep= "")
1449519642460:nj = nj.temp
1449519642461:# bind the blk and blk suffix, lot and lot suffix
1449519642464:#nj$blk_suffix = gsub("^$|^ *$", "", nj$blk_suffix)
1449519642466:#nj$lot_suffix = gsub("^$|^ *$", "", nj$lot_suffix)
1449519642466:#nj$qual = gsub("^$|^ *$", "", nj$qual)
1449519642468:nj$blkraw = nj$blk
1449519642468:nj$lotraw = nj$lot
1449519642469:nj$blk = as.character(as.numeric(nj$blk))
1449519645361:nj$lot = as.character(as.numeric(nj$lot))
1449519648447:nj$blk = gsub("( +)","", nj$blk)
1449519650306:nj$lot = gsub("( +)", "", nj$lot)
1449519651957:nj$blk_suffix = trimws(nj$blk_suffix)
1449519653677:nj$lot_suffix = trimws(nj$lot_suffix)
1449519655369:nj$qual = trimws(nj$qual)
1449519657035:nj$blk[which(nj$blk_suffix != "")] = paste(nj$blk[which(nj$blk_suffix != "")], ".", sep = "")
1449519659303:nj$lot[which(nj$lot_suffix != "")] = paste(nj$lot[which(nj$lot_suffix != "")], ".", sep = "")
1449519659671:nj$blk = paste(nj$blk, nj$blk_suffix, sep = "")
1449519660331:nj$lot = paste(nj$lot, nj$lot_suffix, sep= "")
1449519661022:#drops = c("blk_suffix","lot_suffix")
1449519661022:#nj = nj[,!(names(nj) %in% drops)]
1449519661022:#View(nj[1:1000,])
1449519661024:nj$lotqual = paste(nj$lot,nj$qual,sep = "")
1449565747955:getwd()
1449566057779:con = file("FBLBusiness_LicenseType_120715a.txt")
1449566073167:file = readLines(con)
1449566094085:head(file)
1449566324872:test = read.table("FBLBusiness_LicenseType_120715a.txt", header = T, sep = "|")
1449566404881:test = read.table("FBLBusiness_LicenseType_120715a.txt", header = T, sep = "\n", )
1449566412314:View(test)
1449566433856:class(file)
1449566461508:file1 = rbindList(file)
1449566486614:library(data.table)
1449566489776:con = file("FBLBusiness_LicenseType_120715a.txt")
1449566490871:file = readLines(con)
1449566492167:file1 = rbindList(file)
1449566496908:file1 = rbindlist(file)
1449566573040:filelist = strsplit(readLines(con), "|")
1449566577737:con = file("FBLBusiness_LicenseType_120715a.txt")
1449566578206:filelist = strsplit(readLines(con), "|")
1449566585619:head(filelist)
1449566598250:filelist = strsplit(readLines(con), sep = "|")
1449566622161:filelist = strsplit(readLines(con), split = "|")
1449566628497:head(filelist)
1449566650568:head(file)
1449566697901:filelist = strsplit(readLines(con), split = "||")
1449566704044:head(filelist)
1449566714568:filelist = strsplit(readLines(con), split = ",")
1449566722943:head(filelist)
1449566765699:strsplit(filelist[1],"|")
1449566770997:strsplit(filelist[[1]],"|")
1449566795605:strsplit(filelist[[1]],"/")
1449566805002:strsplit(filelist[[1]],"\")
1449566856506:gsub("|", ";", filelist[[1]])
1449567013066:gsub("/|", ";", filelist[[1]])
1449567027131:gsub("//|", ";", filelist[[1]])
1449567036651:gsub("//|", "", filelist[[1]])
1449567054279:filelist[[1]][9]
1449567059213:filelist[[1]][10]
1449567062651:filelist[[1]]
1449567071252:filelist[[1],2]
1449567074563:filelist[[1,1]]
1449567081553:filelist[[1]][[1]]
1449567085586:filelist[[1]][[3]]
1449567092692:filelist[[1]][1]
1449567095396:filelist[[1]][2]
1449567101680:filelist[[1]][1][2]
1449567105784:filelist[[1]][1][1]
1449567122821:a = filelist[[1]]
1449567124145:a
1449567127679:class(a)
1449567130095:a[1]
1449567144852:a = as.character(a)
1449567146452:a
1449567149521:a[1]
1449567152651:a[1][1]
1449567155288:a[1][3]
1449567176383:gsub("//|", "", a)
1449567181132:gsub("//|", ".", a)
1449567206241:b = "full_name|first_name|middle_name|last_name|name_suffix|gender|license_no|issue_date|expiration_date|addr_line_1|addr_line_2|addr_city|addr_state|addr_zipcode|addr_county|addr_phone|addr_fax|addr_email|license_status_name|"
1449567206858:b
1449567208783:b[1]
1449567212532:b[2]
1449567222159:c = 'asdf asdf '
1449567223685:c[1]
1449567224709:c
1449567242058:gsub("//|", "", a)
1449567254670:gsub("(//|)", "", a)
1449567258283:gsub("(//|)", ";", a)
1449567280237:con = file("FBLBusiness_LicenseType_120715a.txt")
1449567280721:filelist = strsplit(readLines(con), split = "|")
1449567282729:head(filelist)
1449567309394:test = read.table("FBLBusiness_LicenseType_120715a.txt", header = T, sep = "//|", )
1449567317397:test = read.table("FBLBusiness_LicenseType_120715a.txt", header = T, sep = "|", )
1449567444975:test = read.table("FBLBusiness_LicenseType_120715a.txt", header = T, sep = "|")
1449567604177:FBLBusiness_LicenseType_120715a <- read.csv("~/FBLBusiness_LicenseType_120715a.txt", sep="")
1449567604184:View(FBLBusiness_LicenseType_120715a)
1449567616929:filelist = strsplit(readLines(con), split = "|")
1449567619555:head(filelist)
1449567622791:filelist = strsplit(readLines(con), split = "")
1449567646474:gsub("(//|)", ";", a)
1449567675406:gsub("(/|)", ";", a)
1449567739030:gsub("(//|+)", ";", a)
1449567775737:gsub("(\\|+)", ";", a)
1449567783615:test = read.table("FBLBusiness_LicenseType_120715a.txt", header = T, sep = "\|")
1449567788951:test = read.table("FBLBusiness_LicenseType_120715a.txt", header = T, sep = "\\|")
1449567795309:test = read.table("FBLBusiness_LicenseType_120715a.txt", header = T, sep = "|")
1449567800255:gsub("(\\|+)", ";", a)
1449567850792:filelist = strsplit(readLines(con), split = "\\|")
1449567852357:head(filelist)
1449567866558:file1 = rbindlist(filelist)
1449567908109:m = lapply(filelist, rbind)
1449567914498:m
1449567956858:filelist[1]
1449567965199:class(filelist[1])
1449567979604:class(filelist[[1]])
1449567988771:a = filelist[[1]]
1449567990953:a
1449568005174:b = filelist[[2]]
1449568009602:rbind(a,b)
1449568108241:library(data.table)
1449568108458:con = file("FBLBusiness_LicenseType_120715a.txt")
1449568108459:filelist = strsplit(readLines(con), split = "\\|")
1449568108461:head(filelist)
1449568118131:l2 = lapply(filelist, t)
1449568120392:l3 = lapply(l2, as.data.frame)
1449568122327:l3
1449568129463:d = as.data.frame(rbindlist(l3, fill = T),stringAsFactors = F)
1449568130747:d
1449568136477:View(d)
1449568364852:write.table(d, file = "filename", sep = ",", row.names = F, col.names = F)
1449568374835:write.table(d, file = "filename.csv", sep = ",", row.names = F, col.names = F)
1449568715416:l2
1449568719274:l2[-1]
1449568839845:d
1449568844630:summary(d)
1449568856090:View(d)
1449568928902:con = file("FBLBusiness_LicenseType_120715a.txt")
1449568929397:filelist = strsplit(readLines(con), split = "\\|")
1449568934593:l2 = lapply(filelist, t)
1449568936292:d = as.data.frame(rbindlist(l3, fill = T),stringAsFactors = F)
1449568938507:d
1449568944343:View(d)
1449568948169:summary(d)
1449568964796:d = as.data.frame(rbindlist(l2, fill = T),stringAsFactors = F)
1449568976816:d = as.data.frame(rbindlist(filelist, fill = T),stringAsFactors = F)
1449569049485:filelist = strsplit(readLines(con), split = "\\|")
1449569049721:l2 = lapply(filelist, t)
1449569050104:l3 = lapply(l2, as.character)
1449569050726:d = as.data.frame(rbindlist(l3, fill = T), stringAsFactors = F)
1449569058102:l3
1449569064553:l2
1449569068752:l3
1449569073506:filelist
1449569099021:rbindlist(filelist)
1449569189779:do.call("rbind", filelist)
1449569204255:d1 = do.call("rbind", filelist)
1449569208209:class(d1)
1449569215543:as.data.frame(d1)
1449569225066:summary(as.data.frame(d1))
1449569269197:rbindlist(file.rename)
1449569275255:rbindlist(filelist)
1449569280732:head(filelist)
1449569354862:m = do.call("rbind", filelist)
1449569364612:d = as.data.frame(d, stringAsFactors = F)
1449569370390:summary(c)
1449569372746:summary(d)
1449569386580:m
1449569456555:d = data.frame(d, stringAsFactors = F)
1449569462234:summary(d)
1449569472567:d = data.frame(m, stringAsFactors = F)
1449569474602:summary(d)
1449569501983:d = data.frame(m)
1449569524434:d = apply(d, 2, as.character)
1449569557552:d = apply(d, 2, trimws)
1449569559893:write.table(d, file = "filename.csv", sep = ",", row.names = F, col.names = F)
1449569615244:test = read.table("FBLBusiness_LicenseType_120715a.txt", header = T, sep = "\\|")
1449569619762:test = read.table("FBLBusiness_LicenseType_120715a.txt", header = T, sep = "\|")
1449569623412:test = read.table("FBLBusiness_LicenseType_120715a.txt", header = T, sep = "|")
1449584949986:filename = "FBLBusiness_LicenseType_120715a.txt"
1449584950217:con = file(filename)
1449584950390:filelist = strsplit(readLines(con), split = "\\|")
1449584950574:m = do.call("rbind", filelist)
1449584950755:d = data.frame(m)
1449584950935:d = apply(d, 2, as.character)
1449584951089:d = apply(d, 2, trimws)
1449584953840:d
1449584963163:d[1,]
1449584972121:dim(d)
1449584976014:class(d)
1449584992374:d = data.frame(m)
1449584994959:d = apply(d, 2, as.character)
1449584998455:d = apply(d, 2, trimws)
1449585129111:setwd("~/Documents/dan")
1449585142558:setwd("~/Downloads/dan/")
1449585147313:dir()
1449585209746:filename= dir()
1449585222137:fielename[1]
1449585227969:filename
1449585231349:filename[1]
1449585280057:document= dir()
1449585358896:filelist
1449585455285:document= dir()
1449585457405:i = 1
1449585462017:dir()
1449585465143:filename = document[i]
1449585467514:con = file(filename)
1449585468133:filelist = strsplit(readLines(con), split = "\\|")
1449585468984:header = filelist[[1]]
1449585471567:header
1449585475215:filelist = filelist[-1]
1449585476053:m = do.call("rbind", filelist)
1449585477562:m
1449585488381:View(m)
1449585498101:class(m)
1449585553623:names(m) = header
1449585557675:View(m)
1449585564558:head(m)
1449585571140:names(m)
1449585577536:d = data.frame(m)
1449585584907:names(d) = header
1449585587172:names(d)
1449585592077:header(d)
1449585595244:head(d)
1449585627540:d$sources = filename
1449585630491:View(d)
1449585643539:d = apply(d, 2, trimws)
1449585644061:d = apply(d, 2, as.character)
1449585647014:View(d)
1449585675115:write.table(d, file = gsub("txt", "csv", filename), sep = ",", row.names = F, col.names = F)
1449585809437:for (i in 1:length(document)) {
1449585809437:filename = document[i]
1449585809438:con = file(filename)
1449585809438:filelist = strsplit(readLines(con), split = "\\|")
1449585809438:header = filelist[[1]]
1449585809439:filelist = filelist[-1]
1449585809439:m = do.call("rbind", filelist)
1449585809439:d = data.frame(m)
1449585809440:names(d) = header
1449585809440:d$sources = filename
1449585809441:d = apply(d, 2, trimws)
1449585809441:d = apply(d, 2, as.character)
1449585809441:write.table(d, file = "dan.csv", append = T, sep = ",", row.names = F, col.names = F)
1449585809442:}
1449586355901:for (i in 1:length(document)) {
1449586355904:filename = document[i]
1449586355905:con = file(filename)
1449586355905:filelist = strsplit(readLines(con), split = "\\|")
1449586355906:header = filelist[[1]]
1449586355907:filelist = filelist[-1]
1449586355908:m = do.call("rbind", filelist)
1449586355909:d = data.frame(m)
1449586355910:names(d) = header
1449586355913:d$sources = filename
1449586355913:d = apply(d, 2, trimws)
1449586355915:d = apply(d, 2, as.character)
1449586355916:write.table(d, file = "dan.csv", append = T, sep = ",", row.names = F, col.names = T)
1449586355917:}
1449586397275:library(data.table)
1449586397429:setwd("~/Downloads/dan/")
1449586397429:document= dir()
1449586397430:for (i in 1:length(document)) {
1449586397430:filename = document[i]
1449586397430:con = file(filename)
1449586397431:filelist = strsplit(readLines(con), split = "\\|")
1449586397431:header = filelist[[1]]
1449586397431:filelist = filelist[-1]
1449586397431:m = do.call("rbind", filelist)
1449586397432:d = data.frame(m)
1449586397432:names(d) = header
1449586397432:d$sources = filename
1449586397432:d = apply(d, 2, trimws)
1449586397433:d = apply(d, 2, as.character)
1449586397433:write.table(d, file = "dan.csv", append = T, sep = ",", row.names = F, col.names = T)
1449586397433:}
1449586541617:filename = document[i]
1449586541656:con = file(filename)
1449586541659:filelist = strsplit(readLines(con), split = "\\|")
1449586541796:header = filelist[[1]]
1449586541797:filelist = filelist[-1]
1449586541797:m = do.call("rbind", filelist)
1449586541806:d = data.frame(m)
1449586541874:names(d) = header
1449586541874:d$sources = filename
1449586541875:d = apply(d, 2, trimws)
1449586541925:d = apply(d, 2, as.character)
1449586546160:View(d)
1449586568132:names(d)
1449586585100:d = data.frame(m)
1449586585914:names(d) = header
1449586589950:d$sources = filename
1449586592381:names(d)
1449586595879:d = apply(d, 2, trimws)
1449586596445:d = apply(d, 2, as.character)
1449586599383:names(d)
1449586627982:d = data.frame(m)
1449586628089:d = apply(d, 2, trimws)
1449586628127:d = apply(d, 2, as.character)
1449586628135:names(d) = header
1449586628136:d$sources = filename
1449586636369:names(d)
1449586649683:d = data.frame(m)
1449586650223:d = apply(d, 2, trimws)
1449586650637:d = apply(d, 2, as.character)
1449586667671:d = apply(m, 2, trimws)
1449586672364:d = apply(d, 2, as.character)
1449586673186:d = data.frame(d)
1449586674903:names(d) = header
1449586675218:d$sources = filename
1449586678805:names(d)
1449586684702:class(s)
1449586686617:class(d)
1449586719169:source('~/.active-rstudio-document')
1449586749426:warnings()
1449586883932:View(d)
1449586918754:library(data.table)
1449586918756:setwd("~/Downloads/dan/")
1449586918757:document= dir()
1449586918760:for (i in 1:length(document)) {
1449586918761:filename = document[i]
1449586918761:con = file(filename)
1449586918762:filelist = strsplit(readLines(con), split = "\\|")
1449586918762:header = filelist[[1]]
1449586918763:filelist = filelist[-1]
1449586918763:m = do.call("rbind", filelist)
1449586918764:d = apply(m, 2, trimws)
1449586918764:d = apply(d, 2, as.character)
1449586918765:d = data.frame(d)
1449586918766:names(d) = header
1449586918767:d$sources = filename
1449586918768:write.table(d, file = "dan.csv", append = T, sep = ",", row.names = F, col.names = F)
1449586918769:}
1449586955602:warning()
1449586959872:warnings()
1449587076598:for (i in 1:length(document)) {
1449587076602:filename = document[i]
1449587076603:con = file(filename)
1449587076604:filelist = strsplit(readLines(con), split = "\\|")
1449587076605:header = filelist[[1]]
1449587076606:filelist = filelist[-1]
1449587076608:m = do.call("rbind", filelist)
1449587076611:d = apply(m, 2, trimws)
1449587076613:d = apply(d, 2, as.character)
1449587076613:write.table(d, file = "dan.csv", append = T, sep = ",", row.names = F, col.names = F)
1449587076615:}
1449587190880:View(d)
1449587203619:filename = document[i]
1449587204052:con = file(filename)
1449587204236:filelist = strsplit(readLines(con), split = "\\|")
1449587204386:header = filelist[[1]]
1449587204533:filelist = filelist[-1]
1449587204697:m = do.call("rbind", filelist)
1449587204885:d = apply(m, 2, trimws)
1449587205385:d = apply(d, 2, as.character)
1449587209517:View(d)
1449594100056:library(RODBC)
1449594655768:con = odbcConnect("mysql", uid = "root")
1449603870022:c = c("a","b","c",NA, NA,NA,"ASD","SADF","ASDF",NA,NA,NA,"ASDF","ASDFDD")
1449603875724:a = which(is.na(c1))
1449603880345:c1 = c("a","b","c",NA, NA,NA,"ASD","SADF","ASDF",NA,NA,NA,"ASDF","ASDFDD")
1449603889608:a = which(is.na(c1))
1449603893708:AA
1449603894390:A
1449603895279:a
1449603945442:diff(a)
1449603973847:b = diff(a)
1449603989642:which(b!=1)
1449604028665:c1 = c("a","b","c",NA, NA,NA,"ASD","SADF","ASDF",NA,NA,NA,"ASDF","ASDFDD",NA,NA,NA,'EE','W')
1449604031805:a = which(is.na(c1))
1449604032216:b = diff(a)
1449604032440:which(b!=1)
1449604090268:a = which(!is.na(c1))
1449604091349:b = diff(a)
1449604091665:which(b!=1)
1449604167893:c1[1:4]
1449604170611:c1[1:3]
1449604175614:paste(c1[1:3])
1449604184880:paste(c1[1:3], sep = ",")
1449604219899:a
1449604220349:b
1449604221975:c
1449604224279:c1
1449604225458:a
1449604225815:b
1449604226279:c
1449604230624:clearPushBack()
1449604232697:c1
1449604233466:a
1449604233833:b
1449604234527:c
1449604261381:c1
1449604262232:a
1449604262530:b
1449604280351:which(b!=1)
1449604326772:v = c("a","b","c",NA, NA,NA,"ASD","SADF","ASDF",NA,NA,NA,"ASDF","ASDFDD",NA,NA,NA,'EE','W')
1449604331934:a = which(!is.na(v))
1449604332600:a = which(!is.na(v))
1449604334420:a = which(!is.na(v))
1449604335051:b = diff(a)
1449604335547:c = which(b!=1)
1449604339776:v
1449604340406:a
1449604340889:b
1449604341405:c
1449604491499:a[c[2]] - a[c[1]]+1
1449604572486:a[3] - a[1], a[c[2]] - a[c[1]+1]
1449604581064:c[1]+1
1449604606147:a[c[1]+1]
1449604610355:a[c[2]]
1449604636172:v[a[c[2]] : a[c[1]+1]]
1449605060849:v1 = rep(v,10)
1449605062602:v1
1449605068219:a = which(!is.na(v1))
1449605068656:b = diff(a)
1449605068939:c = which(b!=1)
1449605075025:a
1449605075720:b
1449605076492:c
1449605080782:v1[a[c[2]] : a[c[1]+1]]
1449605250675:i=3
1449605254066:v1[a[c[i+1]] : a[c[i]+1]]
1449629884081:library(xlsx)
1449629891507:install.packages("xlsx")
1449629907995:library(xlsx)
1449630035988:s1 = read.xlsx("Copy of Assignment Sale 2015 (002).xlsx", sheetIndex = "Sheet1")
1449630241876:s1 = read.xlsx("~/Downloads/bhavan.xlsx", sheetIndex = "Sheet1")
1449630463785:v1
1449630465655:a
1449630467170:b
1449630467774:c
1449630977223:5:1
1449630986051:3:5
1449631347748:for (i in length(v):2){
1449631347749:if (is.na(v[i])) i = i-1
1449631347749:else {
1449631347750:v[i-1] = paste(v[i-1], v[i], sep = " ")
1449631347750:v[i] = NA
1449631347751:}
1449631347751:i = i-1
1449631347752:}
1449631350094:v1
1449631355473:v
1449631365303:v
1449631568922:for (i in length(v):2){
1449631568924:if (is.na(v[i-1])) i = i-1
1449631568925:else {
1449631568925:v[i-1] = paste(v[i-1], v[i], sep = " ")
1449631568926:v[i] = NA
1449631568927:}
1449631568927:i = i-1
1449631568928:}
1449631573755:v = c("a","b","c",NA, NA,NA,"ASD","SADF","ASDF",NA,NA,NA,"ASDF","ASDFDD",NA,NA,NA,'EE','W')
1449631577480:for (i in length(v):2){
1449631577481:if (is.na(v[i-1])) i = i-1
1449631577530:else {
1449631577531:v[i-1] = paste(v[i-1], v[i], sep = " ")
1449631577531:v[i] = NA
1449631577531:}
1449631577532:i = i-1
1449631577532:}
1449631578898:v
1449631653416:paste('asdf', NA)
1449631656002:NA
1449631664134:is.na(NA)
1449631670959:is.na(na)
1449631787264:paste2('asdf', NA)
1449631796438:paste0('asdf', NA)
1449631877693:paste3 <- function(...,sep=", ") {
1449631877694:L <- list(...)
1449631877695:L <- lapply(L,function(x) {x[is.na(x)] <- ""; x})
1449631877696:ret <-gsub(paste0("(^",sep,"|",sep,"$)"),"",
1449631877696:gsub(paste0(sep,sep),sep,
1449631877697:do.call(paste,c(L,list(sep=sep)))))
1449631877697:is.na(ret) <- ret==""
1449631877698:ret
1449631877698:}
1449631890911:for (i in length(v):2){
1449631891109:if (is.na(v[i-1])) i = i-1
1449631891110:else {
1449631891111:v[i-1] = paste3(v[i-1], v[i], sep = " ")
1449631891111:v[i] = NA
1449631891112:}
1449631891112:i = i-1
1449631891113:}
1449631891944:v
1449632094280:v = c("a","b","c",NA, NA,NA,"ASD","SADF","ASDF",NA,NA,NA,"ASDF","ASDFDD",NA,NA,NA,'EE','W')
1449632103232:for (i in length(v):2){
1449632103232:if (is.na(v[i-1])) i = i-1
1449632103233:else if (!is.na(v[i]){
1449632103233:v[i-1] = paste(v[i-1], v[i], sep = " ")
1449632103234:v[i] = NA
1449632103234:}
1449632103235:i = i-1
1449632103235:}
1449632113845:for (i in length(v):2){
1449632113846:if (is.na(v[i-1])) i = i-1
1449632113847:else if (!is.na(v[i])){
1449632113847:v[i-1] = paste(v[i-1], v[i], sep = " ")
1449632113848:v[i] = NA
1449632113848:}
1449632113848:i = i-1
1449632113849:}
1449632115516:v
1449632302055:v = c("a","b","c",NA, NA,NA,"ASD","SADF","ASDF",NA,NA,NA,"ASDF","ASDFDD",NA,NA,NA,'EE','W')
1449632304897:for (i in length(v):2){
1449632304899:if (is.na(v[i-1])) i = i-1
1449632304899:else if (!is.na(v[i])){
1449632304900:v[i-1] = paste(v[i-1], v[i], sep = " ")
1449632304900:v[i] = NA
1449632304902:i = i-1
1449632304903:}
1449632304903:i = i-1
1449632304904:}
1449632305822:v
1449632383208:f = function(v) {
1449632383209:for (i in length(v):2){
1449632383209:if (is.na(v[i-1])) i = i-1
1449632383210:else if (!is.na(v[i])){
1449632383210:v[i-1] = paste(v[i-1], v[i], sep = " ")
1449632383210:v[i] = NA
1449632383211:i = i-1
1449632383211:}
1449632383212:i = i-1
1449632383213:}
1449632383213:return(v)
1449632383213:}
1449632393206:View(s1)
1449632403881:c2 = f(c1)
1449632414162:c1 = s1$OWNERS.NAME...ADDRESS
1449632417156:c1 = as.character(c1)
1449632421041:c2 = f(c1)
1449632429800:View(c2)
1449632442091:View(c1)
1449632447673:View(cbind(c1))
1449632454849:View(cbind(c1,c2))
1449632673910:f = function(v) {
1449632673911:for (i in length(v):2){
1449632673912:if (is.na(v[i-1])) i = i-1
1449632673912:else if (!is.na(v[i])){
1449632673914:v[i-1] = paste(v[i-1], v[i], sep = ";")
1449632673915:v[i] = NA
1449632673916:i = i-1
1449632673917:}
1449632673917:i = i-1
1449632673917:}
1449632673918:return(v)
1449632673918:}
1449632714105:c1 = s1$OWNERS.NAME...ADDRESS
1449632714107:c1 = as.character(c1)
1449632714109:a = which(!is.na(c1))
1449632714110:c2 = f(c1)
1449632723441:View(cbind(c1,c2))
1449632740004:library(tidyr)
1449632853506:separate(c2, col = c(owner, add2, add2))
1449632891805:s1$OWNERS.NAME...ADDRESS = c2
1449632934960:separate(s1, col = s1$OWNERS.NAME...ADDRESS, into = c(owner, add2, add2), sep = ";")
1449632946783:head(s2)
1449632950579:str(s2)
1449632953550:c2
1449632964213:head(c2)
1449632972833:View(s1)
1449633048715:c2p1
1449633051397:c2[1]
1449633071384:strsplit(c2[1], sep = ";")
1449633085313:strsplit(c2[1], ";")
1449633108457:str_split(c2[1], ";")
1449633174776:c3 = strsplit(c2[1], ";")
1449633182057:c3
1449633184516:class(c3)
1449633194539:c3[[1]]
1449633211642:c3[[1]][2]
1449633314035:dim(c3[[1]])
1449633318288:length(c3[[1]])
1449633908892:tstsplit(c1, sep = ";")
1449633926716:library(data.table)
1449633927589:tstsplit(c1, sep = ";")
1449633935955:tstrsplit(c1, sep = ";")
1449633953860:tstrsplit(c1, split = ";")
1449633976805:class(tstrsplit(c1, split = ";"))
1449633988274:head(tstrsplit(c1, split = ";"))
1449634101220:separate(data = s1, col = OWNERS.NAME...ADDRESS, into = c("name1", "name2", "add1","add2"),sep = ";")
1449634126788:View(separate(data = s1, col = OWNERS.NAME...ADDRESS, into = c("name1", "name2", "add1","add2"),sep = ";"))
1449634329042:s1 = separate(data = s1, col = OWNERS.NAME...ADDRESS, into = c("n1", "n2", "n3","n4"),sep = ";"))
1449634334660:s1 = separate(data = s1, col = OWNERS.NAME...ADDRESS, into = c("n1", "n2", "n3","n4"),sep = ";"))
1449634359509:s1 = separate(data = s1, col = OWNERS.NAME...ADDRESS, into = c("n1", "n2", "n3","n4"),sep = ";")
1449634368341:s1 = separate(data = s1, col = OWNERS.NAME...ADDRESS, into = c("n1", "n2", "n3","n4"),sep = ";")
1449634375258:s1 = separate(data = s1, col = OWNERS.NAME...ADDRESS, into = c("n1", "n2", "n3","n4"),sep = ";")
1449634395062:View(s1)
1449634451889:s1 = read.xlsx("~/Downloads/bhavan.xlsx", sheetIndex = "Sheet1")
1449634735603:s1 = s1.temp
1449634735969:s1.temp = s1
1449634753414:s1 = s1.temp
1449634756636:c1 = as.character(s1$OWNERS.NAME...ADDRESS)
1449634756990:c2 = as.character(s1$LOCATION...BLOCK.LOT)
1449634761892:s1$OWNERS.NAME...ADDRESS = c1
1449634764498:s1$LOCATION...BLOCK.LOT = c2
1449634786172:c1 = f(c1)
1449634788789:c2 = f(c2)
1449634795403:s1$OWNERS.NAME...ADDRESS = c1
1449634795951:s1$LOCATION...BLOCK.LOT = c2
1449634803291:s1s = separate(data = s1, col = OWNERS.NAME...ADDRESS, into = c("n1", "n2", "n3","n4"),sep = ";")
1449634819865:View(s1)
1449634851006:s1s = separate(data = s1, col = OWNERS.NAME...ADDRESS,sep = ";")
1449634871554:c(A:Z)
1449634880280:c(letters())
1449634885373:c(letters[a:Z]
1449634888651:)
1449634894158:c(letters[a:z])
1449634897470:c(letters[a])
1449634906130:c(letters(a))
1449634918588:letters
1449634952756:s1s = separate(data = s1, col = OWNERS.NAME...ADDRESS, into = letters[1:5],sep = ";")
1449634961942:View(s1)
1449634968922:View(s1s)
1449635042746:s1s = separate(data = s1, col = s1s$LOCATION...BLOCK.LOT, into = LETTERS[1:3],sep = ";")
1449635050515:s1s = separate(data = s1s, col = s1s$LOCATION...BLOCK.LOT, into = LETTERS[1:3],sep = ";")
1449635055993:s1s = separate(data = s1s, col = LOCATION...BLOCK.LOT, into = LETTERS[1:3],sep = ";")
1449635071962:View(s1s)
1449635195821:txt = s1$YEAR.REVENUE.TYPE[1]
1449635197282:txt
1449635220032:txt2 = s1$YEAR.REVENUE.TYPE[9]
1449635222055:txt2
1449635358284:gsub("^[0-9]{4}","",txt)
1449635383680:gsub("(^[0-9]{4})(.*)","//1",txt)
1449635387891:gsub("(^[0-9]{4})(.*)","\\1",txt)
1449635397881:gsub("(^[0-9]{4})(.*)","\\1",txt2)
1449635404093:gsub("(^[0-9]{4})(.*)","\\1",NA)
1449635553090:View(s1)
1449635598958:is.na(s1)
1449635621033:is.na(s1s$e)
1449635629978:which(!is.na(s1s$e))
1449635704863:s2
1449635822524:s2 = separate(s1s, col = YEAR.REVENUE.TYPE, into = c("year", "type"), sep = "(^[0=9]{4})(.*)" )
1449635826499:View(s2)
1449635884126:s2 = separate(s1s, col = YEAR.REVENUE.TYPE, into = c("year", "type"), sep = "(^[0=9]{4})(.*)" , fixed = F)
1449635888097:View(s2)
1449635966189:s2 = separate(s1s, col = YEAR.REVENUE.TYPE, into = c("year", "type"), sep = 4 , fixed = F)
1449636027194:s2 = separate(s1s, col = YEAR.REVENUE.TYPE, into = c("year", "type"), sep = "^[0-9]{4}" , fixed = F)
1449636060302:gsub("(^[0-9]{4})(.*)","\\1",txt2)
1449636063433:gsub("(^[0-9]{4})(.*)","\\1",txt1)
1449636066350:gsub("(^[0-9]{4})(.*)","\\1",txt)
1449636090080:s1s = separate(data = s1, col = OWNERS.NAME...ADDRESS, into = letters[1:5],sep = ";")
1449636091145:s1s = separate(data = s1s, col = LOCATION...BLOCK.LOT, into = LETTERS[1:3],sep = ";")
1449636091962:View(s1s)
1449636132136:s2 = separate(s1s, col = YEAR.REVENUE.TYPE, into = c("year", "type"), sep = "(^[0-9]{4})(.*)" , fixed = F)
1449636151934:View(s1s)
1449636162677:s2 = separate(s1s, col = YEAR.REVENUE.TYPE, into = c("year", "type"), sep = "(^[0-9]{4})" , fixed = F)
1449636173236:s2 = separate(s1s, col = YEAR.REVENUE.TYPE, into = c("year", "type"), sep = 4 , fixed = F)
1449636177181:View(s2)
1449636185447:s2 = separate(s1s, col = YEAR.REVENUE.TYPE, into = c("year", "type"), sep = "(^[0-9]{4})" , fixed = F)
1449636190365:View(s2)
1449636242791:s2 = separate(s1s, col = YEAR.REVENUE.TYPE, into = c("year", "type"), sep = 4 , fixed = F)
1449636245015:View(s2)
1449636270301:s2$year = as.numeric(s2$year)
1449636272514:View(s2)
1449636299137:na.omit(s2)
1449636305748:View(s2)
1449636329647:s2 = s2[!is.na(n2$year),]
1449636333674:s2 = s2[!is.na(s2$year),]
1449636335661:View(s2)
1449636371304:View(s1s)
1449636428810:s1s = separate(data = s1s, col = LOCATION...BLOCK.LOT, into = c("location","blkandlot"),sep = ";")
1449636436003:s1s = separate(data = s1, col = OWNERS.NAME...ADDRESS, into = letters[1:4],sep = ";")
1449636437358:s1s = separate(data = s1s, col = LOCATION...BLOCK.LOT, into = c("location","blkandlot"),sep = ";")
1449636444972:View(s1s)
1449636466173:View(s1)
1449636823176:s1s = separate(data = s1, col = OWNERS.NAME...ADDRESS, into = letters[1:4],sep = ";")
1449636823353:s1s = separate(data = s1s, col = LOCATION...BLOCK.LOT, into = c("location","blkandlot"),sep = ";")
1449636824598:View(s1s)
1449637072509:s1s$a[!is.na(s1s$d)] = paste(s1s$a[!is.na(s1s$d)], s1s$b[!is.na(s1s$b)], sep =" ")
1449637086205:View(s1s)
1449637170464:s1s = separate(data = s1, col = OWNERS.NAME...ADDRESS, into = letters[1:4],sep = ";")
1449637171133:s1s = separate(data = s1s, col = LOCATION...BLOCK.LOT, into = c("location","blkandlot"),sep = ";")
1449637172927:s1s$a[!is.na(s1s$d)] = paste(s1s$a[!is.na(s1s$d)], s1s$b[!is.na(s1s$b)], sep =" ")
1449637176545:View(s1s)
1449637195925:s1s = separate(data = s1, col = OWNERS.NAME...ADDRESS, into = letters[1:4],sep = ";")
1449637198911:s1s = separate(data = s1s, col = LOCATION...BLOCK.LOT, into = c("location","blkandlot"),sep = ";")
1449637201918:View(s1s)
1449637228647:s1s$a[!is.na(s1s$d)]
1449637243831:s1s$b[!is.na(s1s$b)]
1449637262701:s1s$a[!is.na(s1s$d)] = paste(s1s$a[!is.na(s1s$d)], s1s$b[!is.na(s1s$d)], sep =" ")
1449637266967:View(s1s)
1449637301816:s1s$b[!is.na(s1s$d)] = s1s$c[!is.na(s1s$d)]
1449637316946:s1s$c[!is.na(s1s$d)] = s1s$d[!is.na(s1s$d)]
1449637328237:s1s = s1s[-d]
1449637340339:s1s = s1s[-c("d")]
1449637347516:s1s = s1s[,-c("d")]
1449637381725:drop(s1s$d)
1449637387656:View(s1s)
1449637480091:s1s = subset(s1s, d, drop = T)
1449637512514:s1s = subset(s1s, select = c(d), drop = T)
1449637519161:dim(s1s)
1449637530776:s1s = separate(data = s1, col = OWNERS.NAME...ADDRESS, into = letters[1:4],sep = ";")
1449637531133:s1s = separate(data = s1s, col = LOCATION...BLOCK.LOT, into = c("location","blkandlot"),sep = ";")
1449637531262:s1s$a[!is.na(s1s$d)] = paste(s1s$a[!is.na(s1s$d)], s1s$b[!is.na(s1s$d)], sep =" ")
1449637531458:s1s$b[!is.na(s1s$d)] = s1s$c[!is.na(s1s$d)]
1449637531609:s1s$c[!is.na(s1s$d)] = s1s$d[!is.na(s1s$d)]
1449637531992:s1s = subset(s1s, select = c(-d), drop = T)
1449637536538:View(s1s)
1449637579290:s2 = separate(s1s, col = YEAR.REVENUE.TYPE, into = c("year", "type"), sep = 4 , fixed = F)
1449637583388:View(s2)
1449637691189:s1s$b = paste(s1s$b, s1s$c, sep = ", ")
1449637691577:s1s = subset(s1s, select = c(-c), drop = T)
1449637695612:View(s1s)
1449637753149:s1s$b[!is.na(s1s$b)] = paste(s1s$b[!is.na(s1s$b)], s1s$c[!is.na(s1s$c)], sep = ", ")
1449637770414:s1s = separate(data = s1, col = OWNERS.NAME...ADDRESS, into = letters[1:4],sep = ";")
1449637770425:s1s = separate(data = s1s, col = LOCATION...BLOCK.LOT, into = c("location","blkandlot"),sep = ";")
1449637770438:s1s$a[!is.na(s1s$d)] = paste(s1s$a[!is.na(s1s$d)], s1s$b[!is.na(s1s$d)], sep =" ")
1449637770439:s1s$b[!is.na(s1s$d)] = s1s$c[!is.na(s1s$d)]
1449637770440:s1s$c[!is.na(s1s$d)] = s1s$d[!is.na(s1s$d)]
1449637770442:s1s = subset(s1s, select = c(-d), drop = T)
1449637770461:s1s$b[!is.na(s1s$b)] = paste(s1s$b[!is.na(s1s$b)], s1s$c[!is.na(s1s$b)], sep = ", ")
1449637770463:s1s = subset(s1s, select = c(-c), drop = T)
1449637774879:View(s1s)
1449637858657:s2 = separate(s1s, col = YEAR.REVENUE.TYPE, into = c("year", "type"), sep = 4 , fixed = F)
1449637861967:View(s2)
1449637972670:View(s2)
1449637998189:s2$year = as.numeric(s2$year)
1449638048228:s2 = subset(s2, !is.na(s2$year))
1449638051421:View(s2)
1449638177986:is.true
1449638188760:is.na("asdf","Asdf",NA)
1449638200500:is.na(c("asdf","Asdf",NA))
1449638752303:View(s2)
1449638762183:View(s1s)
1449638912973:subset(s2, 1:5)
1449639095121:s3 = separate(s2, col = blkandlot, into = (c("blk","lot"), sep = " "))
1449639123368:s3 = separate(s2, col = blkandlot, into = c("blk","lot"), sep = " ")
1449639128649:View(s3)
1449639143626:s3 = separate(s2, col = blkandlot, into = c("blk","lot"), sep = 5)
1449639146254:View(s3)
1449639182561:View(s3)
1449639256258:s2 = separate(s2, col = blkandlot, into = c("blk","lot"), sep = 5)
1449639311476:for (i in 1:dim(s2)[1]){
1449639311477:if (is.na(s2$REF..NO.[i]) & is.na(s2$WARD) & is.na(s2$DISTRICT)){
1449639311478:s2$REF..NO.[i+1] = s2$REF..NO.[i]
1449639311478:s2$WARD[i+1] = s2$WARD[i]
1449639311478:s2$DISTRICT[i+1] = s2$DISTRICT[i]
1449639311479:s2$a[i+1] = s2$a[i]
1449639311479:s2$location[i+1] = s2$location[i]
1449639311479:s2$blk[i+1] = s2$blk[i]
1449639311480:s2$lot[i+1] = s2$lot[i]
1449639311480:}
1449639311481:}
1449639323724:View(s2)
1449639336386:warnings()
1449639354360:for (i in 1:dim(s2)[1]){
1449639354361:if (is.na(s2$REF..NO.[i]) & is.na(s2$WARD[i]) & is.na(s2$DISTRICT[i])){
1449639354361:s2$REF..NO.[i+1] = s2$REF..NO.[i]
1449639354362:s2$WARD[i+1] = s2$WARD[i]
1449639354362:s2$DISTRICT[i+1] = s2$DISTRICT[i]
1449639354362:s2$a[i+1] = s2$a[i]
1449639354363:s2$location[i+1] = s2$location[i]
1449639354363:s2$blk[i+1] = s2$blk[i]
1449639354364:s2$lot[i+1] = s2$lot[i]
1449639354364:}
1449639354365:}
1449639370599:View(s2)
1449639408062:s2 = separate(s1s, col = YEAR.REVENUE.TYPE, into = c("year", "type"), sep = 4 , fixed = F)
1449639408065:s2$year = as.numeric(s2$year)
1449639408067:s2 = subset(s2, !is.na(s2$year))
1449639408072:s2 = separate(s2, col = blkandlot, into = c("blk","lot"), sep = 5)
1449639412669:for (i in 1:dim(s2)[1]){
1449639412670:if (!is.na(s2$REF..NO.[i]) & !is.na(s2$WARD[i]) & !is.na(s2$DISTRICT[i])){
1449639412708:s2$REF..NO.[i+1] = s2$REF..NO.[i]
1449639412708:s2$WARD[i+1] = s2$WARD[i]
1449639412709:s2$DISTRICT[i+1] = s2$DISTRICT[i]
1449639412709:s2$a[i+1] = s2$a[i]
1449639412710:s2$location[i+1] = s2$location[i]
1449639412712:s2$blk[i+1] = s2$blk[i]
1449639412712:s2$lot[i+1] = s2$lot[i]
1449639412713:}
1449639412713:}
1449639424696:View(s2)
1449639450890:View(s2)
1449639563089:for (i in 1:dim(s2)[1]-1){
1449639563090:if (!is.na(s2$REF..NO.[i]) & !is.na(s2$WARD[i]) & !is.na(s2$DISTRICT[i] & s2$REF..NO.[i] != s2$REF..NO.[i+1])){
1449639563091:s2$REF..NO.[i+1] = s2$REF..NO.[i]
1449639563091:s2$WARD[i+1] = s2$WARD[i]
1449639563092:s2$DISTRICT[i+1] = s2$DISTRICT[i]
1449639563092:s2$a[i+1] = s2$a[i]
1449639563092:s2$b[i+1] = s2b$[i]
1449639563093:s2$location[i+1] = s2$location[i]
1449639563416:s2$blk[i+1] = s2$blk[i]
1449639563575:s2$lot[i+1] = s2$lot[i]
1449639563877:}
1449639563877:}
1449639580548:for (i in 1:dim(s2)[1]-1){
1449639580550:if (!is.na(s2$REF..NO.[i]) & !is.na(s2$WARD[i]) & !is.na(s2$DISTRICT[i] & s2$REF..NO.[i] != s2$REF..NO.[i+1])){
1449639580550:s2$REF..NO.[i+1] = s2$REF..NO.[i]
1449639580550:s2$WARD[i+1] = s2$WARD[i]
1449639580551:s2$DISTRICT[i+1] = s2$DISTRICT[i]
1449639580551:s2$a[i+1] = s2$a[i]
1449639580551:s2$b[i+1] = s2$b[i]
1449639580552:s2$location[i+1] = s2$location[i]
1449639580552:s2$blk[i+1] = s2$blk[i]
1449639580552:s2$lot[i+1] = s2$lot[i]
1449639580553:}
1449639580553:}
1449639606892:for (i in 1:dim(s2)[1]-1){
1449639606893:if (!is.na(s2$REF..NO.[i]) & !is.na(s2$WARD[i]) & !is.na(s2$DISTRICT[i]) & s2$REF..NO.[i] != s2$REF..NO.[i+1]){
1449639606893:s2$REF..NO.[i+1] = s2$REF..NO.[i]
1449639606894:s2$WARD[i+1] = s2$WARD[i]
1449639606894:s2$DISTRICT[i+1] = s2$DISTRICT[i]
1449639606894:s2$a[i+1] = s2$a[i]
1449639606895:s2$b[i+1] = s2$b[i]
1449639606895:s2$location[i+1] = s2$location[i]
1449639606895:s2$blk[i+1] = s2$blk[i]
1449639606896:s2$lot[i+1] = s2$lot[i]
1449639606896:}
1449639606897:}
1449639639094:for (i in 1:dim(s2)[1]-1){
1449639639096:if (!is.na(s2$REF..NO.[i]) & !is.na(s2$WARD[i]) & !is.na(s2$DISTRICT[i]) & (s2$REF..NO.[i] != s2$REF..NO.[i+1])){
1449639639097:s2$REF..NO.[i+1] = s2$REF..NO.[i]
1449639639097:s2$WARD[i+1] = s2$WARD[i]
1449639639098:s2$DISTRICT[i+1] = s2$DISTRICT[i]
1449639639099:s2$a[i+1] = s2$a[i]
1449639639100:s2$b[i+1] = s2$b[i]
1449639639101:s2$location[i+1] = s2$location[i]
1449639639101:s2$blk[i+1] = s2$blk[i]
1449639639102:s2$lot[i+1] = s2$lot[i]
1449639639102:}
1449639639103:}
1449639650995:!is.na(s2$REF..NO.[i]) & !is.na(s2$WARD[i]) & !is.na(s2$DISTRICT[i])
1449639653179:i = 1
1449639654621:!is.na(s2$REF..NO.[i]) & !is.na(s2$WARD[i]) & !is.na(s2$DISTRICT[i])
1449639672725:!is.na(s2$REF..NO.[i]) & !is.na(s2$WARD[i]) & !is.na(s2$DISTRICT[i]) & (s2$REF..NO.[i] != s2$REF..NO.[i+1])
1449639685293:(s2$REF..NO.[i] != s2$REF..NO.[i+1])
1449639692363:View(s2)
1449639701109:s2 = separate(s1s, col = YEAR.REVENUE.TYPE, into = c("year", "type"), sep = 4 , fixed = F)
1449639701115:s2$year = as.numeric(s2$year)
1449639701118:s2 = subset(s2, !is.na(s2$year))
1449639701139:s2 = separate(s2, col = blkandlot, into = c("blk","lot"), sep = 5)
1449639708420:!is.na(s2$REF..NO.[i]) & !is.na(s2$WARD[i]) & !is.na(s2$DISTRICT[i]) & (s2$REF..NO.[i] != s2$REF..NO.[i+1])
1449639720576:(s2$REF..NO.[i] != s2$REF..NO.[i+1])
1449639727986:(s2$REF..NO.[i] == s2$REF..NO.[i+1])
1449639739831:1==1
1449639746356:View(s2)
1449639756635:s2$REF..NO.[i]
1449639771009:s2$REF..NO.[i+1]
1449639780613:1 == NA
1449639814960:1 == ""
1449639846152:NA ==1
1449639892395:s2$REF..NO. = gsub(NA, "", s2$REF..NO.)
1449639895068:View(s2)
1449639904379:s2 = separate(s1s, col = YEAR.REVENUE.TYPE, into = c("year", "type"), sep = 4 , fixed = F)
1449639904392:s2$year = as.numeric(s2$year)
1449639904400:s2 = subset(s2, !is.na(s2$year))
1449639904404:s2 = separate(s2, col = blkandlot, into = c("blk","lot"), sep = 5)
1449639905869:View(s2)
1449639912205:s2$REF..NO. = gsub(NA, "", s2$REF..NO.)
1449639913765:View(s2)
1449639923884:s2 = separate(s1s, col = YEAR.REVENUE.TYPE, into = c("year", "type"), sep = 4 , fixed = F)
1449639923887:s2$year = as.numeric(s2$year)
1449639923890:s2 = subset(s2, !is.na(s2$year))
1449639923901:s2 = separate(s2, col = blkandlot, into = c("blk","lot"), sep = 5)
1449639958651:s2$REF..NO.[is.na(s2$REF..NO.)] = ""
1449639961446:View(s2)
1449639982182:for (i in 1:dim(s2)[1]-1){
1449639982183:if (!is.na(s2$REF..NO.[i]) & !is.na(s2$WARD[i]) & !is.na(s2$DISTRICT[i]) & (s2$REF..NO.[i] != s2$REF..NO.[i+1])){
1449639982183:s2$REF..NO.[i+1] = s2$REF..NO.[i]
1449639982183:s2$WARD[i+1] = s2$WARD[i]
1449639982184:s2$DISTRICT[i+1] = s2$DISTRICT[i]
1449639982184:s2$a[i+1] = s2$a[i]
1449639982185:s2$b[i+1] = s2$b[i]
1449639982185:s2$location[i+1] = s2$location[i]
1449639982185:s2$blk[i+1] = s2$blk[i]
1449639982186:s2$lot[i+1] = s2$lot[i]
1449639982186:}
1449639982187:}
1449639988889:(s2$REF..NO.[i] != s2$REF..NO.[i+1])
1449640005737:"1" ==" "
1449640048722:s2 = separate(s1s, col = YEAR.REVENUE.TYPE, into = c("year", "type"), sep = 4 , fixed = F)
1449640048725:s2$year = as.numeric(s2$year)
1449640048734:s2 = subset(s2, !is.na(s2$year))
1449640048746:s2 = separate(s2, col = blkandlot, into = c("blk","lot"), sep = 5)
1449640054116:for (i in 1:dim(s2)[1]-1){
1449640054117:if (!is.na(s2$REF..NO.[i]) & !is.na(s2$WARD[i]) & !is.na(s2$DISTRICT[i]) & is.na(s2$REF..NO.[i+1])){
1449640054155:s2$REF..NO.[i+1] = s2$REF..NO.[i]
1449640054155:s2$WARD[i+1] = s2$WARD[i]
1449640054155:s2$DISTRICT[i+1] = s2$DISTRICT[i]
1449640054156:s2$a[i+1] = s2$a[i]
1449640054156:s2$b[i+1] = s2$b[i]
1449640054156:s2$location[i+1] = s2$location[i]
1449640054157:s2$blk[i+1] = s2$blk[i]
1449640054157:s2$lot[i+1] = s2$lot[i]
1449640054158:}
1449640054158:}
1449640084325:!is.na(s2$REF..NO.[i]) & !is.na(s2$WARD[i]) & !is.na(s2$DISTRICT[i]) & is.na(s2$REF..NO.[i+1])
1449640091051:!is.na(s2$WARD[i]) & !is.na(s2$DISTRICT[i])
1449640098168:!is.na(s2$DISTRICT[i])
1449640099945:i
1449640105900:i =
1449640107178:1
1449640108654:!is.na(s2$DISTRICT[i])
1449640116914:!is.na(s2$REF..NO.[i]) & !is.na(s2$WARD[i]) & !is.na(s2$DISTRICT[i]) & is.na(s2$REF..NO.[i+1])
1449640135251:View(s2)
1449640142644:for (i in 1:dim(s2)[1]-1){
1449640142645:if (!is.na(s2$REF..NO.[i]) & !is.na(s2$WARD[i]) & !is.na(s2$DISTRICT[i]) & is.na(s2$REF..NO.[i+1])){
1449640142684:s2$REF..NO.[i+1] = s2$REF..NO.[i]
1449640142684:s2$WARD[i+1] = s2$WARD[i]
1449640142685:s2$DISTRICT[i+1] = s2$DISTRICT[i]
1449640142685:s2$a[i+1] = s2$a[i]
1449640142686:s2$b[i+1] = s2$b[i]
1449640142687:s2$location[i+1] = s2$location[i]
1449640142687:s2$blk[i+1] = s2$blk[i]
1449640142687:s2$lot[i+1] = s2$lot[i]
1449640142688:}
1449640142688:}
1449640146391:i
1449640159027:dim(s2)[1]-1
1449640169523:for (i in 1:(dim(s2)[1]-1)){
1449640169524:if (!is.na(s2$REF..NO.[i]) & !is.na(s2$WARD[i]) & !is.na(s2$DISTRICT[i]) & is.na(s2$REF..NO.[i+1])){
1449640169561:s2$REF..NO.[i+1] = s2$REF..NO.[i]
1449640169561:s2$WARD[i+1] = s2$WARD[i]
1449640169561:s2$DISTRICT[i+1] = s2$DISTRICT[i]
1449640169562:s2$a[i+1] = s2$a[i]
1449640169562:s2$b[i+1] = s2$b[i]
1449640169562:s2$location[i+1] = s2$location[i]
1449640169563:s2$blk[i+1] = s2$blk[i]
1449640169563:s2$lot[i+1] = s2$lot[i]
1449640169563:}
1449640169564:}
1449640184418:View(s2)
1449640251310:View(s2)
1449640896198:s1 = s1.temp
1449640896690:View(s1)
1449640991436:head(c2)
1449641006411:as.character(NA)
1449641021701:as.character("NA")
1449641035103:c
1449641036327:c3
1449641050948:c3 = as.character(s1$ADDRESS.QUAL.)
1449641088168:c3 = gsub("NA", "", c3)
1449641091786:head(c3)
1449641098452:c3
1449641264174:c2 = paste(c2, c3, na.skip = T)
1449641266095:c2
1449641354013:c3 = as.character(s1$ADDRESS.QUAL.)
1449641360389:c3
1449641544781:c2 = paste(c2, ifelse(is.na(c3), c3, ""), sep = " ")
1449641546890:c2
1449641564081:c2 = as.character(s1$LOCATION...BLOCK.LOT)
1449641564378:c3 = as.character(s1$ADDRESS.QUAL.)
1449641565129:c2 = paste(c2, ifelse(is.na(c3), c3, ""), sep = " ")
1449641567162:c
1449641568331:c2
1449641622163:c3 = ifelse(is.na(c3), c3, "")
1449641623603:c3
1449641630298:c3 = as.character(s1$ADDRESS.QUAL.)
1449641630621:c3 = ifelse(!is.na(c3), c3, "")
1449641632158:c3
1449641640219:c2 = paste(c2, ifelse(is.na(c3), c3, ""), sep = " ")
1449641641082:c3 = gsub("NA", "", c3)
1449641646071:c2
1449641653096:c1 = as.character(s1$OWNERS.NAME...ADDRESS)
1449641653450:c2 = as.character(s1$LOCATION...BLOCK.LOT)
1449641654133:c3 = as.character(s1$ADDRESS.QUAL.)
1449641654646:c3 = ifelse(!is.na(c3), c3, "")
1449641657073:c2
1449641663535:c2 = paste(c2, c3, sep = " ")
1449641668587:c2
1449641732289:c1 = as.character(s1$OWNERS.NAME...ADDRESS)
1449641733173:c2 = as.character(s1$LOCATION...BLOCK.LOT)
1449641733885:c3 = as.character(s1$ADDRESS.QUAL.)
1449641734305:c3 = ifelse(!is.na(c3), c3, "")
1449641735032:c2 = paste(c2, c3, sep = " ")
1449641736535:c2
1449641739989:c1
1449641741515:c2
1449641746912:c3
1449641785288:c2 = ifsele(!is.na(c2) ,c2, "")
1449641795426:c1 = as.character(s1$OWNERS.NAME...ADDRESS)
1449641795744:c2 = as.character(s1$LOCATION...BLOCK.LOT)
1449641796025:c2 = ifelse(!is.na(c2) ,c2, "")
1449641798639:c3 = as.character(s1$ADDRESS.QUAL.)
1449641798885:c3 = ifelse(!is.na(c3), c3, "")
1449641799586:c2 = paste(c2, c3, sep = " ")
1449641801786:c2
1449641803321:c3
1449641808217:c2
1449641842304:c1 = as.character(s1$OWNERS.NAME...ADDRESS)
1449641842305:c2 = as.character(s1$LOCATION...BLOCK.LOT)
1449641842306:c2 = ifelse(!is.na(c2) ,c2, "")
1449641842312:c3 = as.character(s1$ADDRESS.QUAL.)
1449641842313:c3 = ifelse(!is.na(c3), c3, "")
1449641842320:c2 = paste(c2, c3, sep = "")
1449641846591:s1$OWNERS.NAME...ADDRESS = c1
1449641846863:s1$LOCATION...BLOCK.LOT = c2
1449641857411:View(s1)
1449641873651:c2
1449642001363:s1$OWNERS.NAME...ADDRESS = c1
1449642002741:s1$LOCATION...BLOCK.LOT = c2
1449642007315:View(s1)
1449642117253:c1 = as.character(s1$OWNERS.NAME...ADDRESS)
1449642117255:c2 = as.character(s1$LOCATION...BLOCK.LOT)
1449642117257:c2 = ifelse(!is.na(c2) ,c2, "")
1449642117264:c3 = as.character(s1$ADDRESS.QUAL.)
1449642117265:c3 = ifelse(!is.na(c3), c3, "")
1449642117270:c2 = paste(c2, c3, sep = "")
1449642117276:c1 = f(c1)
1449642118894:c2 = f(c2)
1449642132933:s1$OWNERS.NAME...ADDRESS = c1
1449642132934:s1$LOCATION...BLOCK.LOT = c2
1449642132934:library(tidyr)
1449642132935:s1s = separate(data = s1, col = OWNERS.NAME...ADDRESS, into = letters[1:4],sep = ";")
1449642132946:s1s = separate(data = s1s, col = LOCATION...BLOCK.LOT, into = c("location","blkandlot"),sep = ";")
1449642141503:View(s1s)
1449642182613:View(s1)
1449642197332:c2
1449642226889:gsub("",NA,"")
1449642246156:gsub("",NA,"asdf")
1449642274971:s1 = s1.temp
1449642274972:View(s1)
1449642274981:c1 = as.character(s1$OWNERS.NAME...ADDRESS)
1449642274994:c2 = as.character(s1$LOCATION...BLOCK.LOT)
1449642274999:c2 = ifelse(!is.na(c2) ,c2, "")
1449642275005:c3 = as.character(s1$ADDRESS.QUAL.)
1449642275006:c3 = ifelse(!is.na(c3), c3, "")
1449642275011:c2 = paste(c2, c3, sep = "")
1449642275020:c1 = f(c1)
1449642275121:c2 = f(c2)
1449642477979:s1 = s1.temp
1449642477981:View(s1)
1449642477995:c1 = as.character(s1$OWNERS.NAME...ADDRESS)
1449642478008:c2 = as.character(s1$LOCATION...BLOCK.LOT)
1449642478013:c2 = ifelse(!is.na(c2) ,c2, "")
1449642478020:c3 = as.character(s1$ADDRESS.QUAL.)
1449642478021:c3 = ifelse(!is.na(c3), c3, "")
1449642478026:c2 = paste(c2, c3, sep = "")
1449642555189:c2
1449642755001:c2[c2 == ""] = NA
1449642758268:c2
1449642762937:c1
1449642766345:c1 = f(c1)
1449642766879:c2 = f(c2)
1449642772205:s1$OWNERS.NAME...ADDRESS = c1
1449642772353:s1$LOCATION...BLOCK.LOT = c2
1449642775785:View(s1)
1449642855322:s1 = subset(s1, select = -c(ADDRESS.QUAL.))
1449642860120:View(s1)
1449642875575:s1s = separate(data = s1s, col = LOCATION...BLOCK.LOT, into = c("location","blkandlot"),sep = ";")
1449642891054:s1s = separate(data = s1, col = OWNERS.NAME...ADDRESS, into = letters[1:3],sep = ";")
1449642900821:s1s = separate(data = s1s, col = LOCATION...BLOCK.LOT, into = c("location","blkandlot"),sep = ";")
1449642903370:s1s$a[!is.na(s1s$d)] = paste(s1s$a[!is.na(s1s$d)], s1s$b[!is.na(s1s$d)], sep =" ")
1449642932641:s1 = s1.temp
1449642932642:View(s1)
1449642932646:c1 = as.character(s1$OWNERS.NAME...ADDRESS)
1449642932648:c2 = as.character(s1$LOCATION...BLOCK.LOT)
1449642932649:c2 = ifelse(!is.na(c2) ,c2, "")
1449642932655:c3 = as.character(s1$ADDRESS.QUAL.)
1449642932656:c3 = ifelse(!is.na(c3), c3, "")
1449642932660:c2 = paste(c2, c3, sep = "")
1449642932665:c2[c2 == ""] = NA
1449642932667:c1 = f(c1)
1449642932738:c2 = f(c2)
1449642941376:s1$OWNERS.NAME...ADDRESS = c1
1449642941378:s1$LOCATION...BLOCK.LOT = c2
1449642941379:s1 = subset(s1, select = -c(ADDRESS.QUAL.))
1449642944672:s1s = separate(data = s1, col = OWNERS.NAME...ADDRESS, into = letters[1:4],sep = ";")
1449642949243:s1s = separate(data = s1s, col = LOCATION...BLOCK.LOT, into = c("location","blkandlot"),sep = ";")
1449642951190:s1s$a[!is.na(s1s$d)] = paste(s1s$a[!is.na(s1s$d)], s1s$b[!is.na(s1s$d)], sep =" ")
1449642951511:s1s$b[!is.na(s1s$d)] = s1s$c[!is.na(s1s$d)]
1449642951707:s1s$c[!is.na(s1s$d)] = s1s$d[!is.na(s1s$d)]
1449642952018:s1s = subset(s1s, select = c(-d), drop = T)
1449642952642:s1s$b[!is.na(s1s$b)] = paste(s1s$b[!is.na(s1s$b)], s1s$c[!is.na(s1s$b)], sep = ", ")
1449642954873:s1s = subset(s1s, select = c(-c), drop = T)
1449642955571:View(s1s)
1449642977474:s2 = separate(s1s, col = YEAR.REVENUE.TYPE, into = c("year", "type"), sep = 4 , fixed = F)
1449642977823:s2$year = as.numeric(s2$year)
1449642978123:s2 = subset(s2, !is.na(s2$year))
1449642985411:s2 = separate(s2, col = blkandlot, into = c("blk","lot"), sep = 5)
1449642995021:View(s2)
1449643019441:s2 = separate(s2, col = blkandlot, into = c("blk","lot"), sep = 5)
1449643034620:s2 = separate(s1s, col = YEAR.REVENUE.TYPE, into = c("year", "type"), sep = 4 , fixed = F)
1449643034624:s2$year = as.numeric(s2$year)
1449643034625:s2 = subset(s2, !is.na(s2$year))
1449643038527:s2 = separate(s2, col = blkandlot, into = c("blk","lot"), sep = 5)
1449643049578:View(s2)
1449643103212:s1 = s1.temp
1449643103213:View(s1)
1449643103217:c1 = as.character(s1$OWNERS.NAME...ADDRESS)
1449643103220:c2 = as.character(s1$LOCATION...BLOCK.LOT)
1449643103221:c2 = ifelse(!is.na(c2) ,c2, "")
1449643103228:c3 = as.character(s1$ADDRESS.QUAL.)
1449643103229:c3 = ifelse(!is.na(c3), c3, "")
1449643103233:c2 = paste(c2, c3, sep = "")
1449643103238:c2[c2 == ""] = NA
1449643103241:c1 = f(c1)
1449643103349:c2 = f(c2)
1449643103410:s1$OWNERS.NAME...ADDRESS = c1
1449643103411:s1$LOCATION...BLOCK.LOT = c2
1449643103411:s1 = subset(s1, select = -c(ADDRESS.QUAL.))
1449643103415:library(tidyr)
1449643103416:s1s = separate(data = s1, col = OWNERS.NAME...ADDRESS, into = letters[1:4],sep = ";")
1449643103446:s1s = separate(data = s1s, col = LOCATION...BLOCK.LOT, into = c("location","blkandlot"),sep = ";")
1449643103469:s1s$a[!is.na(s1s$d)] = paste(s1s$a[!is.na(s1s$d)], s1s$b[!is.na(s1s$d)], sep =" ")
1449643103471:s1s$b[!is.na(s1s$d)] = s1s$c[!is.na(s1s$d)]
1449643103472:s1s$c[!is.na(s1s$d)] = s1s$d[!is.na(s1s$d)]
1449643103473:s1s = subset(s1s, select = c(-d), drop = T)
1449643103480:s1s$b[!is.na(s1s$b)] = paste(s1s$b[!is.na(s1s$b)], s1s$c[!is.na(s1s$b)], sep = ", ")
1449643103482:s1s = subset(s1s, select = c(-c), drop = T)
1449643103491:View(s1s)
1449643103496:s2 = separate(s1s, col = YEAR.REVENUE.TYPE, into = c("year", "type"), sep = 4 , fixed = F)
1449643103500:s2$year = as.numeric(s2$year)
1449643103502:s2 = subset(s2, !is.na(s2$year))
1449643103507:s2 = separate(s2, col = blkandlot, into = c("blk","lot"), sep = 5)
1449643103510:s2 = separate(s2, col = lot, into = c("lot", "qual"), sep = 5)
1449643111214:View(s2)
1449643169607:grep("[0-9]{4}","112222")
1449643180317:grepl("[0-9]{4}","112222")
1449643205491:gregexpr("[0-9]{4}","112222")
1449643214089:regexpr("[0-9]{4}","112222")
1449643232986:regexecr("[0-9]{4}","112222")
1449643237967:regexec("[0-9]{4}","112222")
1449643285274:View(s2)
1449643317146:View(s2)
1449643443454:s2 = separate(s1s, col = YEAR.REVENUE.TYPE, into = c("year", "type"), sep = 4 , fixed = F)
1449643443461:s2$year = as.numeric(s2$year)
1449643443463:s2 = subset(s2, !is.na(s2$year))
1449643443471:s2 = separate(s2, col = blkandlot, into = c("blk","lot"), sep = 5)
1449643450576:View(s2)
1449643457590:s2 = separate(s2, col = lot, into = c("lot", "qual"), sep = c(4,5))
1449643479677:s2 = separate(s1s, col = YEAR.REVENUE.TYPE, into = c("year", "type"), sep = 4 , fixed = F)
1449643479687:s2$year = as.numeric(s2$year)
1449643479689:s2 = subset(s2, !is.na(s2$year))
1449643479694:s2 = separate(s2, col = blkandlot, into = c("blk","lot"), sep = 5)
1449643482186:s2 = separate(s2, col = lot, into = c("lot", "qual"), sep = 4)
1449643513043:s2 = separate(s1s, col = YEAR.REVENUE.TYPE, into = c("year", "type"), sep = 4 , fixed = F)
1449643513050:s2$year = as.numeric(s2$year)
1449643513054:s2 = subset(s2, !is.na(s2$year))
1449643513068:s2 = separate(s2, col = blkandlot, into = c("blk","lot"), sep = 5)
1449643513071:s2 = separate(s2, col = lot, into = c("lot", "qual"), sep = "(^[0-9]{4})")
1449643520049:View(s2)
1449643593645:s2 = separate(s1s, col = YEAR.REVENUE.TYPE, into = c("year", "type"), sep = 4 , fixed = F)
1449643593649:s2$year = as.numeric(s2$year)
1449643593652:s2 = subset(s2, !is.na(s2$year))
1449643593658:s2 = separate(s2, col = blkandlot, into = c("blk","lot"), sep = 5)
1449643593661:s2 = separate(s2, col = lot, into = c("lot", "qual"), sep = "(^[0-9]{5})")
1449643597606:View(s2)
1449643657823:s2$qual = gsub("(^[0-9]{5})(.*)","\\2",s2$lot)
1449643674212:s2$lot = gsub("(^[0-9]{5})(.*)","\\1",s2$lot)
1449643679906:View(s2)
1449643693416:txt
1449643703193:txt = "23423423"
1449643728244:gsub("[0-9]{4}","",txt)
1449643748476:gsub("\\d{4}","",txt)
1449643806491:txt
1449643830418:gsub("\\d","",txt)
1449643834030:gsub("\\d","s",txt)
1449643859981:gsub("(\\d)","s",txt)
1449643920105:gsub("(\\d).","s",txt)
1449643938313:gsub("(\\d).","",txt)
1449643946167:gsub("(\\d).","\\1",txt)
1449643967346:gsub("(\\d)","\\1",txt)
1449643976656:gsub("(\\d{4})","\\1",txt)
1449643982031:gsub("(\\d).","\\1",txt)
1449644097049:strsplit(txt, split = 2)
1449644100443:txt
1449644401508:substr(txt,5)
1449644410454:substr(txt,5,length(txt))
1449644415854:substr(txt,5,6
1449644417626:)
1449644420589:txt
1449644439715:substr(txt,5,5)
1449645209685:s1 = s1.temp
1449645209686:View(s1)
1449645209707:c1 = as.character(s1$OWNERS.NAME...ADDRESS)
1449645209720:c2 = as.character(s1$LOCATION...BLOCK.LOT)
1449645209725:c2 = ifelse(!is.na(c2) ,c2, "")
1449645209734:c3 = as.character(s1$ADDRESS.QUAL.)
1449645209736:c3 = ifelse(!is.na(c3), c3, "")
1449645209742:c2 = paste(c2, c3, sep = " ")
1449645209753:c2[c2 == ""] = NA
1449645209754:c1 = f(c1)
1449645209888:c2 = f(c2)
1449645212471:s1$OWNERS.NAME...ADDRESS = c1
1449645212471:s1$LOCATION...BLOCK.LOT = c2
1449645212472:s1 = subset(s1, select = -c(ADDRESS.QUAL.))
1449645212475:library(tidyr)
1449645212476:s1s = separate(data = s1, col = OWNERS.NAME...ADDRESS, into = letters[1:4],sep = ";")
1449645212498:s1s = separate(data = s1s, col = LOCATION...BLOCK.LOT, into = c("location","blkandlot"),sep = ";")
1449645212505:s1s$a[!is.na(s1s$d)] = paste(s1s$a[!is.na(s1s$d)], s1s$b[!is.na(s1s$d)], sep =" ")
1449645212506:s1s$b[!is.na(s1s$d)] = s1s$c[!is.na(s1s$d)]
1449645212507:s1s$c[!is.na(s1s$d)] = s1s$d[!is.na(s1s$d)]
1449645212508:s1s = subset(s1s, select = c(-d), drop = T)
1449645212511:s1s$b[!is.na(s1s$b)] = paste(s1s$b[!is.na(s1s$b)], s1s$c[!is.na(s1s$b)], sep = ", ")
1449645212512:s1s = subset(s1s, select = c(-c), drop = T)
1449645212515:View(s1s)
1449645212517:s2 = separate(s1s, col = YEAR.REVENUE.TYPE, into = c("year", "type"), sep = 4 , fixed = F)
1449645212520:s2$year = as.numeric(s2$year)
1449645212522:s2 = subset(s2, !is.na(s2$year))
1449645212524:s2 = separate(s2, col = blkandlot, into = c("blk","lot"), sep = 5)
1449645219839:View(s2)
1449645252361:s1 = s1.temp
1449645253900:c1 = as.character(s1$OWNERS.NAME...ADDRESS)
1449645254428:c2 = as.character(s1$LOCATION...BLOCK.LOT)
1449645255530:c2 = ifelse(!is.na(c2) ,c2, "")
1449645258545:c3 = as.character(s1$ADDRESS.QUAL.)
1449645259294:c3 = ifelse(!is.na(c3), c3, "")
1449645259681:c2 = paste(c2, c3, sep = " ")
1449645259979:c2[c2 == ""] = NA
1449645261775:c1 = f(c1)
1449645262810:c2 = f(c2)
1449645266466:s1$OWNERS.NAME...ADDRESS = c1
1449645267324:s1$LOCATION...BLOCK.LOT = c2
1449645268184:s1 = subset(s1, select = -c(ADDRESS.QUAL.))
1449645272325:View(s1)
1449645293349:s1 = s1.temp
1449645293350:View(s1)
1449645293352:c1 = as.character(s1$OWNERS.NAME...ADDRESS)
1449645293354:c2 = as.character(s1$LOCATION...BLOCK.LOT)
1449645293355:c2 = ifelse(!is.na(c2) ,c2, "")
1449645293361:c3 = as.character(s1$ADDRESS.QUAL.)
1449645293362:c3 = ifelse(!is.na(c3), c3, "")
1449645293366:c2 = paste(c2, c3, sep = "")
1449645293370:c2[c2 == ""] = NA
1449645295425:c2
1449645314310:head(c2)
1449645357048:s1 = s1.temp
1449645357049:View(s1)
1449645357051:c1 = as.character(s1$OWNERS.NAME...ADDRESS)
1449645357052:c2 = as.character(s1$LOCATION...BLOCK.LOT)
1449645357053:c2 = ifelse(!is.na(c2) ,c2, "")
1449645357059:c3 = as.character(s1$ADDRESS.QUAL.)
1449645357060:c3 = ifelse(!is.na(c3), c3, "")
1449645357065:c2 = paste(c2, c3, sep = "")
1449645357068:c2[c2 == ""] = NA
1449645357070:c1 = f(c1)
1449645357097:c2 = f(c2)
1449645357118:s1$OWNERS.NAME...ADDRESS = c1
1449645357119:s1$LOCATION...BLOCK.LOT = c2
1449645357119:s1 = subset(s1, select = -c(ADDRESS.QUAL.))
1449645357122:library(tidyr)
1449645357122:s1s = separate(data = s1, col = OWNERS.NAME...ADDRESS, into = letters[1:4],sep = ";")
1449645357131:s1s = separate(data = s1s, col = LOCATION...BLOCK.LOT, into = c("location","blkandlot"),sep = ";")
1449645357144:s1s$a[!is.na(s1s$d)] = paste(s1s$a[!is.na(s1s$d)], s1s$b[!is.na(s1s$d)], sep =" ")
1449645357146:s1s$b[!is.na(s1s$d)] = s1s$c[!is.na(s1s$d)]
1449645357147:s1s$c[!is.na(s1s$d)] = s1s$d[!is.na(s1s$d)]
1449645357147:s1s = subset(s1s, select = c(-d), drop = T)
1449645357151:s1s$b[!is.na(s1s$b)] = paste(s1s$b[!is.na(s1s$b)], s1s$c[!is.na(s1s$b)], sep = ", ")
1449645357153:s1s = subset(s1s, select = c(-c), drop = T)
1449645357156:View(s1s)
1449645357158:s2 = separate(s1s, col = YEAR.REVENUE.TYPE, into = c("year", "type"), sep = 4 , fixed = F)
1449645357161:s2$year = as.numeric(s2$year)
1449645357163:s2 = subset(s2, !is.na(s2$year))
1449645357166:s2 = separate(s2, col = blkandlot, into = c("blk","lot"), sep = 5)
1449645366819:head(s2)
1449645374863:View(s2)
1449645395567:lot = s2$lot
1449645414921:head(lot)
1449645434319:lot = trimws(lot)
1449645439162:head(lot)
1449645489890:strtrim("asdfasdf",3)
1449645516029:strtrim(c("abcdef", "abcdef", "abcdef"), c(1,5,10))
1449645538190:strtrim(c("abcdef", "abcdef", "abcdef"), c(1,5,14))
1449645548703:strtrim(c("abcdef", "abcdef", "abcdef"), c(1,5,1))
1449645593091:substr('asf',4,5)
1449645617406:lot = strtrim(lot, 5)
1449645654304:lotqual = s2$lot
1449645661388:lotqual = trimws(lotqual)
1449645664423:lot = strtrim(lotqual, 5)
1449645691796:qual = substr(lotqual, length(lot)+1, length(qual))
1449645711041:qual = substr(lotqual, length(lot)+1, length(lotqual))
1449645712962:qual
1449645720926:lot
1449645735866:lot[1:20]
1449645745952:View(s2)
1449645763870:qual[1:20]
1449645799455:lotqual[1:20]
1449645839613:length(NA)
1449645898126:substr(NA, 3,3)
1449645904401:substr("asf", 3,3)
1449645924367:substr(NA, 3,2)
1449645934800:substr("s", 3,2)
1449645952833:length(lot)
1449646023963:lotqual = substring(lotqual, 6)
1449646029199:head(qual)
1449646042072:lotqual{1:20}
1449646047405:lotqual[1:20]
1449646101399:View(s2)
1449646115076:s2 = separate(s2, col = lot, into = c("lot", "qual"))
1449646122934:View(s2)
1449646161956:s2 = separate(s2, col = lot, into = c("lot", "qual"),sep = NULL)
1449646171974:s1 = s1.temp
1449646171975:View(s1)
1449646172102:c1 = as.character(s1$OWNERS.NAME...ADDRESS)
1449646172105:c2 = as.character(s1$LOCATION...BLOCK.LOT)
1449646172107:c2 = ifelse(!is.na(c2) ,c2, "")
1449646172115:c3 = as.character(s1$ADDRESS.QUAL.)
1449646172116:c3 = ifelse(!is.na(c3), c3, "")
1449646172122:c2 = paste(c2, c3, sep = "")
1449646172126:c2[c2 == ""] = NA
1449646172127:c1 = f(c1)
1449646172172:c2 = f(c2)
1449646172193:s1$OWNERS.NAME...ADDRESS = c1
1449646172195:s1$LOCATION...BLOCK.LOT = c2
1449646172195:s1 = subset(s1, select = -c(ADDRESS.QUAL.))
1449646172198:library(tidyr)
1449646172199:s1s = separate(data = s1, col = OWNERS.NAME...ADDRESS, into = letters[1:4],sep = ";")
1449646172207:s1s = separate(data = s1s, col = LOCATION...BLOCK.LOT, into = c("location","blkandlot"),sep = ";")
1449646172216:s1s$a[!is.na(s1s$d)] = paste(s1s$a[!is.na(s1s$d)], s1s$b[!is.na(s1s$d)], sep =" ")
1449646172218:s1s$b[!is.na(s1s$d)] = s1s$c[!is.na(s1s$d)]
1449646172220:s1s$c[!is.na(s1s$d)] = s1s$d[!is.na(s1s$d)]
1449646172221:s1s = subset(s1s, select = c(-d), drop = T)
1449646172226:s1s$b[!is.na(s1s$b)] = paste(s1s$b[!is.na(s1s$b)], s1s$c[!is.na(s1s$b)], sep = ", ")
1449646172228:s1s = subset(s1s, select = c(-c), drop = T)
1449646172233:View(s1s)
1449646172238:s2 = separate(s1s, col = YEAR.REVENUE.TYPE, into = c("year", "type"), sep = 4 , fixed = F)
1449646172241:s2$year = as.numeric(s2$year)
1449646172242:s2 = subset(s2, !is.na(s2$year))
1449646172245:s2 = separate(s2, col = blkandlot, into = c("blk","lot"), sep = 5)
1449646172248:lotqual = s2$lot
1449646172248:lotqual = trimws(lotqual)
1449646172249:lot = strtrim(lotqual, 5)
1449646172252:qual = substring(lotqual, 6)
1449646172253:qual[qual == ""] = NA
1449646182271:s2 = separate(s2, col = lot, into = c("lot", "qual"),sep = NULL)
1449646192389:s2 = separate(s2, col = lot, into = c("lot", "qual"))
1449646196393:View(s2)
1449646237187:s2 = separate(s1s, col = YEAR.REVENUE.TYPE, into = c("year", "type"), sep = 4 , fixed = F)
1449646237191:s2$year = as.numeric(s2$year)
1449646237193:s2 = subset(s2, !is.na(s2$year))
1449646237197:s2 = separate(s2, col = blkandlot, into = c("blk","lot"), sep = 5)
1449646237202:lotqual = s2$lot
1449646237202:lotqual = trimws(lotqual)
1449646237204:lot = strtrim(lotqual, 5)
1449646237207:qual = substring(lotqual, 6)
1449646237207:qual[qual == ""] = NA
1449646237208:s2 = separate(s2, col = lot, into = c("lot", "qual"),sep = 5)
1449646241002:View(s2)
1449646260274:s2$lot = lot
1449646271032:s2$qual = qual
1449646275925:View(s2)
1449646518043:s2$REF..NO.[is.na(s2$REF..NO.)] = ""
1449646518046:for (i in 1:(dim(s2)[1]-1)){
1449646518046:if (!is.na(s2$REF..NO.[i]) & !is.na(s2$WARD[i]) & !is.na(s2$DISTRICT[i]) & is.na(s2$REF..NO.[i+1])){
1449646518047:s2$REF..NO.[i+1] = s2$REF..NO.[i]
1449646518047:s2$WARD[i+1] = s2$WARD[i]
1449646518048:s2$DISTRICT[i+1] = s2$DISTRICT[i]
1449646518048:s2$a[i+1] = s2$a[i]
1449646518048:s2$b[i+1] = s2$b[i]
1449646518049:s2$location[i+1] = s2$location[i]
1449646518049:s2$blk[i+1] = s2$blk[i]
1449646518050:s2$lot[i+1] = s2$lot[i]
1449646518050:s2$qual[i+1] = s2$qual[i]
1449646518050:}
1449646518051:}
1449646520900:View(s2)
1449646538471:View(s2)
1449646608002:s2 = separate(s1s, col = YEAR.REVENUE.TYPE, into = c("year", "type"), sep = 4 , fixed = F)
1449646608006:s2$year = as.numeric(s2$year)
1449646608008:s2 = subset(s2, !is.na(s2$year))
1449646608014:s2 = separate(s2, col = blkandlot, into = c("blk","lot"), sep = 5)
1449646608017:lotqual = s2$lot
1449646608017:lotqual = trimws(lotqual)
1449646608019:lot = strtrim(lotqual, 5)
1449646608021:qual = substring(lotqual, 6)
1449646608022:qual[qual == ""] = NA
1449646608023:s2 = separate(s2, col = lot, into = c("lot", "qual"),sep = 5)
1449646608025:s2$lot = lot
1449646608025:s2$qual = qual
1449646620334:for (i in 1:(dim(s2)[1]-1)){
1449646620334:if (!is.na(s2$REF..NO.[i]) & !is.na(s2$WARD[i]) & !is.na(s2$DISTRICT[i]) & is.na(s2$REF..NO.[i+1])){
1449646620372:s2$REF..NO.[i+1] = s2$REF..NO.[i]
1449646620372:s2$WARD[i+1] = s2$WARD[i]
1449646620372:s2$DISTRICT[i+1] = s2$DISTRICT[i]
1449646620372:s2$a[i+1] = s2$a[i]
1449646620373:s2$b[i+1] = s2$b[i]
1449646620373:s2$location[i+1] = s2$location[i]
1449646620373:s2$blk[i+1] = s2$blk[i]
1449646620374:s2$lot[i+1] = s2$lot[i]
1449646620374:s2$qual[i+1] = s2$qual[i]
1449646620375:}
1449646620375:}
1449646830644:write.xlsx(s2, file = "bhavan,xlsx", col.names = T, row.names = F)
1449646836708:write.xlsx(s2, file = "bhavan.xlsx", col.names = T, row.names = F)
1449647001062:write.xlsx(s2, file = "bhavan.xlsx", col.names = T, row.names = F, showNA = F)
1449648038820:a = which(!is.na(v1))
1449648038822:b = diff(a)
1449648038824:c = which(b!=1)
1449671524873:VIEW(S2)
1449671530756:View(s2)
1449675747486:View(s2)
1449678035901:library(RODBC)
1449790858092:ls
1449790862698:dir()
1449790863894:dir
1449790870741:getwd()
1449815744952:getwd()
1449817051794:getwd()
1449817639147:/Users/liangquanzhou/Documents/data/nj tax data/
1449817660014:setwd('/Users/liangquanzhou/Documents/data/nj tax data/')
1449817763225:# -- function: read the txt file, return a dataframe
1449817763227:f = function(x) {
1449817763227:x1 = substring(x, startnum, endnum)
1449817763228:names(x1) = name
1449817763228:return(x1)
1449817763228:}
1449817785081:lotpattern1 = "(F/K/A.*)|(AKA.*)|(A/K/A.*)|(FK.*)|(F/K.*)|(AND.*)|
1449817785082:(&.*)|(THRU.*))|(:)|(QUAL)|(\\()|(\\))|[,]"
1449817788983:lotpattern1
1449818246027:exists()
1449818249528:a = 1
1449818254195:exists(a)
1449818272099:if(a)
1449818278326:a
1449818281110:!a
1449818284875:!b
1449819160978:gsub("( +)", "", "asdfasdf   asdfadsf")
1449822828029:localhost
1449826380198:install.packages("RMySQL")
1449826453040:library(RMySQL)
1449826587213:con <- dbConnect(MySQL(),
1449826587214:user = 'root',
1449826587214:password = '',
1449826587214:host = '',
1449826587215:dbname='test')
1449826591624:con
1449826595685:con <- dbConnect(MySQL(),
1449826595686:user = 'root',
1449826595687:password = '',
1449826595687:host = '',
1449826595687:dbname='test')
1449826634754:library(psych)
1449826643119:install.packages("psych")
1449826649786:library(psych)
1449826658834:dbWriteTable(conn = con, name = 'Test', value = as.data.frame(Thurstone))
1449826762706:library(RODBC)
1449826776074:getwd()
1449843485165:# -- function: read the txt file, return a dataframe
1449843485166:f = function(x) {
1449843485167:x1 = substring(x, startnum, endnum)
1449843485167:names(x1) = name
1449843485168:return(x1)
1449843485168:}
1449843491424:# -- refer to the tax data dictionary, select all the columns we need and name it
1449843491425:# _s means suffix, p means previous
1449843491425:startnum = c(1, 5, 10, 14, 19, 23, 59, 176, 522, 527, 531, 536, 540)
1449843491426:endnum = c(4, 9, 13, 18, 22, 33, 83, 210, 526, 530, 535, 539, 550)
1449843491427:name = c("muni", "blk", "blk_s", "lot", "lot_s", "qual", "address",
1449843491427:"owner", "p_blk","p_blk_s","p_lot", "p_lot_s","p_qual")
1449843491428:# -- function: in the folder of data, input the filename then import
1449843491428:#              data in that file
1449843491428:output = function(filename) {
1449843491429:con = file(filename)
1449843491429:l = strsplit(readLines(con), "\n")
1449843491429:close(con)
1449843491430:l1 = lapply(l, f)
1449843491430:l2 = lapply(l1, t)
1449843491430:d1 = do.call("rbind", l2)
1449843491431:d2 = as.data.frame(d1, stringsAsFactors = F)
1449843491431:return(d2)
1449843491431:}
1449843491432:# -- list of every county's data
1449843496701:getwd()
1449843537493:dir()
1449843539271:# -- loop: go through every filename in the folder and generate data
1449843539272:#          for every county
1449843539273:for (i in 1:length(dir())) {
1449843539273:county[[i]] = output(dir()[i]l)
1449843539274:}
1449843552998:# -- loop: go through every filename in the folder and generate data
1449843552998:#          for every county
1449843552999:for (i in 1:length(dir())) {
1449843552999:county[[i]] = output(dir()[i])
1449843553000:}
1449843582920:county
1449843593964:# -- list of every county's data
1449843593964:county = list()
1449843593965:# -- loop: go through every filename in the folder and generate data
1449843593966:#          for every county
1449843593966:for (i in 1:length(dir())) {
1449843593966:county[[i]] = output(dir()[i])
1449843593967:}
1449847983707:head(nj)
1449847995970:# -- complie every county data to nj data
1449847995971:nj = rbindlist(county)
1449847995972:nj = apply(nj, 2, as.character) # set as character
1449847995973:nj = apply(nj, 2, trimws) # trim the beginning and ending spaces
1449847995974:nj = as.data.frame(nj, stringsAsFactors = F)
1449847995975:# -- create backup dataset incase messed up
1449847995975:nj.temp = nj
1449847995975:nj = nj.temp
1449848019958:library(data.table)
1449848027588:# -- complie every county data to nj data
1449848027589:nj = rbindlist(county)
1449848042348:nj = apply(nj, 2, as.character) # set as character
1449848067748:nj = apply(nj, 2, trimws) # trim the beginning and ending spaces
1449848121545:nj = as.data.frame(nj, stringsAsFactors = F)
1449848130504:# -- create backup dataset incase messed up
1449848130505:nj.temp = nj
1449848130505:nj = nj.temp
1449848164911:# for mysql:
1449848164912:# -- connect to mysql database and write data into database
1449848164913:install.packages("RMySQL")
1449848164921:library(RMySQL)
1449848164921:library(psych)
1449848164922:con <- dbConnect(MySQL(),
1449848164922:user = 'root',
1449848164923:password = '',
1449848164923:host = '',
1449848164923:dbname='NJ_property')
1449848392921:head(nj)
1449848426399:# -- clean up blk and lot:
1449848426400:# columns we have: blk, blk suffix, lot, lot suffix, qual AND:
1449848426400:#                  previous blk, previous blk suffix, etc.
1449848426400:# combine blk and blk_s as blkn, lot and lot_s as lotn, previous ones as well
1449848426401:# -- create back up to install raw blk and lot.
1449848426401:nj$blk_raw = nj$blk
1449848426402:nj$lot_raw = nj$lot
1449848426403:nj$p_blk_raw = nj$p_blk
1449848426403:nj$p_lot_raw = nj$p_lot
1449848426404:# -- trim and set NA as ""(blank)
1449848426404:nj$blk = as.character(as.numeric(nj$blk))
1449848429257:nj$blk[is.na(nj$blk)] = ""
1449848431637:nj$lot = as.character(as.numeric(nj$lot))
1449848434262:nj$lot[ia.na(nj$lot)] = ""
1449848434283:nj$p_blk = as.character(as.numeric(nj$p_blk))
1449848435597:nj$p_blk[is.na(nj$p_blk)] = ""
1449848435704:nj$p_lot = as.character(as.numeric(nj$p_lot))
1449848437199:nj$p_lot[is.na(nj$p_lot)] = ""
1449848437346:# -- incase of any space in the middle, drop them
1449848437347:nj$blk = gsub("( +)", "", nj$blk)
1449848439183:nj$lot = gsub("( +)", "", nj$lot)
1449848440881:nj$p_blk = gsub("( +)", "", nj$p_blk)
1449848442609:nj$p_lot = gsub("( +)", "", nj$p_lot)
1449848444240:# -- trim blk_s, lot_s, for combine blk and blk_s, etc.
1449848444240:nj$blk_s = trimws(nj$blk_s)
1449848445791:nj$lot_s = trimws(nj$lot_s)
1449848448223:nj$p_blk_s = trimws(nj$p_blk_s)
1449848449772:nj$p_lot_s = trimws(nj$p_lot_s)
1449848451304:nj$qual = trimws(nj$qual)
1449848452842:nj$p_qual = trimws(nj$p_qual)
1449848454450:# -- for exist suffix, then append it to the blk or lot.
1449848454450:nj$blk[which(nj$blk_s != "")] = paste(nj$blk[which(nj$blk_s != "")], ".", sep = "")
1449848456406:nj$lot[which(nj$lot_s != "")] = paste(nj$lot[which(nj$lot_s != "")], ".", sep = "")
1449848456741:nj$p_blk[which(nj$p_blk_s != "")] = paste(nj$p_blk[which(nj$p_blk_s != "")], ".", sep = "")
1449848457078:nj$p_lot[which(nj$p_lot_s != "")] = paste(nj$p_lot[which(nj$p_lot_s != "")], ".", sep = "")
1449848462114:# -- updata blk, lot with suffix
1449848462115:nj$blk = paste(nj$blk, nj$blk_s, sep = "")
1449848462827:nj$lot = paste(nj$lot, nj$lot_s, sep = "")
1449848463575:nj$p_blk = paste(nj$p_blk, nj$p_blk_s, sep = "")
1449848464225:nj$p_lot = paste(nj$p_lot, nj$p_lot_s, sep = "")
1449848464873:# -- combine lot and qual, since it's combined in foreclosure data, we will use it to search
1449848464874:nj$lotqual = paste(nj$lot,nj$qual,sep = "")
1449848465724:nj$p_lotqual = paste(nj$p_lot, nj$p_qual, sep = "")
1449848480437:head(nj)
1449848485633:dbWriteTable(conn = con, name = 'njproperty', value = as.data.frame(nj))
1449848501308:con <- dbConnect(MySQL(),
1449848501310:user = 'root',
1449848501310:password = '',
1449848501311:host = '',
1449848501311:dbname='NJ_property')
1449848505724:dbWriteTable(conn = con, name = 'njproperty', value = as.data.frame(nj))
1450150850724:starnum
1450150854196:i
1450150859787:a = c(1,2,2,3,4,)
1450150862287:a = c(1,2,2,3,4,'asdf')
1450150865002:edit(a)
1450150880351:fix(a)
1450150887590:a
1450150891292:edit(a)
1450150897666:a
1450239669005:discrible(a)
1450239673690:discriable(a)
1450239689678:discribe
1450239694931:discribe(a)
1450239714622:install.packages("Hmisc")
1450239763152:library(Hmisc)
1458795632134:1+1
1458795648000:require(devtools)
1458795668372:install.packages(devtools)
1458795675090:install.packages("devtools")
1458795691365:require(devtools)
1458795701191:rversion
1458795704025:version()
1458795707219:version
1458795745391:install_github(&quot;andreacirilloac/updateR&quot;)
1458795795677:install_github("updateR")
1458795821144:install_github("andreacirilloac/updateR")
1458795846130:library(updateR)
1458795868162:updateR(admin_password = "123123")
1458795888646:?updateR
1458795897295:updateR()
1458795920241:update()
1458795926664:updateR()
1458795986747:updateR(admin_password = "123123")
1458796131636:updateR()
1458796706226:version
1458796709906:update
1458796712690:updateR()
1458796729202:version
1458796770044:install.packages("quantmod")
1458796815011:require(quantmod)
1458796827024:?getSymbols
1458797084000:setSymbolLookup(WHHX=list(name="600309.ss",src="yahoo"))
1458797084787:getSymbols("WHHX",from='2015-01-01',to='2015-11-19')
1458797087791:head(WHHX)
1458797194638:getSymbols("tsla",from='2016-01-01',to='2016-03-24')
1458797197116:head(tsla)
1458797205333:head(TSLA)
1458797246193:getSymbols("tsla",from='2016-03-01',to='2016-03-24')
1458797247155:head(TSLA)
1458797257400:getSymbols("tsla",from='2016-03-21',to='2016-03-24')
1458797257583:head(TSLA)
1458798294357:# 
1458798294359:Quote = function(code){
1458798294360:index = match(code,universes)
1458798294360:temp = lapply(universes,get)
1458798294361:return(temp[[index]])
1458798294361:}
1458798294362:# 
1458798294363:universes <<- c("000001.SZ","QIHU","MOMO")
1458798294365:from = "2015-01-04"
1458798294366:to = Sys.Date() # 
1458798294368:src= "yahoo" # 
1458798294369:#  
1458798294369:quantmod::getSymbols(universes,from=from,to=to,src=src)
1458798295534:# 
1458798295534:quantmod::chartSeries(Quote("MOMO"),up.col='red',dn.col='green',TA="addVo(); addADX();addMACD(); addSMA(n=10);addBBands(n=14,sd=2,draw=\"bands\")")
1458798451211:quantmod::chartSeries(Quote("TSLA"),up.col='red',dn.col='green',TA="addVo(); addADX();addMACD(); addSMA(n=10);addBBands(n=14,sd=2,draw=\"bands\")")
1458798463043:# 
1458798463044:Quote = function(code){
1458798463044:index = match(code,universes)
1458798463044:temp = lapply(universes,get)
1458798463044:return(temp[[index]])
1458798463045:}
1458798463045:# 
1458798463045:universes <<- c("000001.SZ","QIHU","MOMO")
1458798463046:from = "2015-01-04"
1458798463046:to = Sys.Date() # 
1458798463047:src= "yahoo" # 
1458798463047:#  
1458798463048:quantmod::getSymbols(universes,from=from,to=to,src=src)
1458798463488:# 
1458798463488:quantmod::chartSeries(Quote("TSLA"),up.col='red',dn.col='green',TA="addVo(); addADX();addMACD(); addSMA(n=10);addBBands(n=14,sd=2,draw=\"bands\")")
1458798515131:source('~/.active-rstudio-document')
1458798530946:source('~/.active-rstudio-document')
1458798553320:source('~/.active-rstudio-document')
1458798579820:source('~/.active-rstudio-document')
1458798589204:universes <<- c("000001.SZ","QIHU","MOMO")
1458798589205:from = "2016-01-04"
1458798589206:to = Sys.Date() # 
1458798589207:src= "yahoo" # 
1458798592994:#  
1458798592995:quantmod::getSymbols(universes,from=from,to=to,src=src)
1458798593353:# 
1458798628267:source('~/.active-rstudio-document')
1458941352220:source('~/.active-rstudio-document')
1458941378713:source('~/.active-rstudio-document')
1458941397407:View(APPL)
1458941404156:View(HSY)
1458941494467:source('~/.active-rstudio-document')
1458941507400:source('~/.active-rstudio-document')
1458941513422:View(XLF)
1458941534068:View(YGE)
1458941548275:View(XLE)
1458941572533:View(XLF)
1458975313446:load("~/Dropbox/R/govpilot/address separation.RData")
1458975335634:setwd("/Users/liangquanzhou/Dropbox/R/govpilot/address separation.R")
1458975349911:setwd("/Users/liangquanzhou/Dropbox/R/govpilot/")
1458975351901:ls
1458975473478:View(qualifier)
1458975965231:address = read.table("1301monm162502.csv",header = T)
1458976064419:address = read.table("1301monm162502.csv", header = T, sep = ",")
1458976072669:View(address)
1458976113957:location = address$Property.Location
1458976161476:str(address)
1458976169657:str(location)
1458976184022:head(location)
1458976204214:class(location)
1458976221489:View(qualifier)
1458976239282:View(nametype)
1458976279328:View(directions)
1458978435868:str_split("asdf asdf asdf 3 3af", " ")
1458978443674:library(stringr)
1458978447061:str_split("asdf asdf asdf 3 3af", " ")
1458978462570:class(str_split("asdf asdf asdf 3 3af", " ")
1458978465506:)
1458978515120:str_split(head(location), " ")
1458978586678:location_split = str_split(location, " ")
1458978597836:View(location_split)
1458978681795:head(location_split)
1458978691239:class(location_split)
1458978702460:location_split[[1]]
1458978716778:class(location_split[[1]])
1458978729261:location_split[[1]][1]
1458979150678:strsplit("asfasda asdf asdf 2 asdf 2asdf", ' ')
1458979155361:strsplit("asfasda asdf asdf 2 asdf 2asdf", ' ')[[1]]
1458979268470:hn = null
1458979275844:hn = c()
1458979277749:hm
1458979279486:hn
1458979284125:hn = asdf
1458979303243:hn = "23"
1458979304557:hn
1458979319372:hn = "2/3"
1458979323212:class(hn)
1458979398233:str_split("asdf asdf asdf 3 3af", " ")
1458979408064:str_split("asdf asdf asdf 3 3af", " ")[[1]][4]
1458979414168:class(str_split("asdf asdf asdf 3 3af", " ")[[1]][4])
1459137812031:as.numeric("asdf")
1459137819820:as.numeric("22")
1459137835013:is.numeric(as.numeric("asdf"))
1459138025859:View(qualifier)
1459138042753:a = "Acc"
1459138043678:a
1459138071857:a %in% qualifier$Display_Name_Abbreviation
1459138080427:names(qualifier)
1459138186888:a %in% qualifier$Display_Name_Abbreviation | a %in% qualifier$Qualifier_Code
1459138198196:a %in% qualifier$Display_Name_Abbreviation & a %in% qualifier$Qualifier_Code
1459138375595:prefixqual = subset(qualifier, Prefix_Qualifier = "Y")
1459138386201:prefixqual
1459138405445:View(prefixqual)
1459138426137:prefixqual = subset(qualifier, Prefix_Qualifier == "Y")
1459138428188:View(prefixqual)
1459138546124:suffixqual = subset(qualifier, Suffix_Qualifier == "Y")
1459138729915:View(directions)
1459138750690:View(nametype)
1459139126206:names(nametype)
1459139656411:location_split[[1]][1]
1459139665454:location_split[[1]]
1459139671220:class(location_split[[1]])
1459139797534:hn = NULL
1459139800807:hn
1459139806693:a = ()
1459139811202:a = c()
1459139811804:a
1459139815110:class(a)
1459139818657:class(hn)
1459142826618:b = "553 S ATLANTIC AVE UNIT 4"
1459142833476:x = b
1459142837784:n = length(x)
1459142837786:for (i in 1:length(x)){
1459142837786:if hn = NULL{
1459142837789:if checkhn(x[i] == T) hn = x[i]
1459142837790:}
1459142837790:else break
1459142837791:}
1459142858653:checkhn = function(inputword){
1459142858654:return(is.numeric(as.numeric(inputword)))
1459142858654:}
1459142867595:n
1459142896918:b = str_split(b, " ")[[1]]
1459142897640:b
1459142904140:x = b
1459142904710:x
1459142908187:n = length(x)
1459142910750:n
1459142925230:hn = NULL
1459142936047:for (i in 1:length(x)){
1459142936048:if hn = NULL{
1459142936049:if checkhn(x[i] == T) hn = x[i]
1459142936049:}
1459142936049:else break
1459142936051:}
1459142990734:n = length(x)
1459142990735:for (i in 1:n){
1459142990736:if hn = NULL {
1459142990736:if checkhn(x[i] == T) hn = x[i]
1459142990737:}
1459142990737:else break
1459142990737:}
1459143006770:for (i in 1:n){
1459143006771:if hn = NULL {
1459143006771:if checkhn(x[i] == T) hn = x[i]
1459143006772:}
1459143006773:else break
1459143006774:}
1459143011545:for (i in 1:n){
1459143011546:if hn = NULL {
1459143019800:hn = NULL
1459143023834:hn
1459143032052:for (i in 1:n){
1459143032053:if hn = NULL {
1459143043802:for (i in 1:n){}
1459143049400:for (i in 1:n){
1459143055190:}
1459143061857:for (i in 1:n){
1459143061859:if hn == NULL {
1459143061860:if checkhn(x[i] == T) hn = x[i]
1459143061860:}
1459143061860:else break
1459143061861:}
1459143072080:for (i in 1:n){
1459143079600:if hn == NULL {}
1459143103460:n = length(x)
1459143103461:for (i in 1:n){
1459143103461:if is.null(hn) {
1459143103461:if checkhn(x[i] == T) hn = x[i]
1459143103462:}
1459143103462:else break
1459143103462:}
1459143108048:is.null(hn)
1459143137134:n = length(x)
1459143137135:for (i in 1:n){
1459143137135:if (is.null(hn) == T) {
1459143137135:if (checkhn(x[i]) == T) hn = x[i]
1459143137135:}
1459143137136:else break
1459143137136:}
1459143141343:i
1459143148126:hn
1459145262603:a
1459145263665:b
1459145269034:b.append('ads')
1459145291704:append(1:5, 0:1, after = 3)
1459145309803:append(b, "asdf")
1459145643737:n = length(x)
1459145643739:for (i in 1:n){
1459145643739:if (is.null(hn)) {
1459145643739:if (checkhn(x[i])) hn = x[i]
1459145643739:}
1459145643740:else break
1459145643740:}
1459145645707:i
1459145648679:n
1459145650727:x
1459145660533:hn
1459145815141:names(nametype)
1459145835251:prefixtype
1459145838072:prefixtype
1459145839962:prefixtype = subset(nametype, PrefixType = "Y")
1459145843770:prefixtype
1459145977517:name
1459145988417:streetname = NULL
1459145991955:streetname
1459146001283:append(streetname, "asdf")
1459146005114:streetname
1459146008300:streetname
1459146730287:checkhn = function(inputword){
1459146730288:return(is.numeric(as.numeric(inputword)))
1459146730289:}
1459146730290:# input a word, check if it's in prefix qualifier table
1459146730291:prefixqual = subset(qualifier, Prefix_Qualifier == "Y")
1459146730298:checkprefixqual = function(x){
1459146730300:return(x %in% prefixqual$Display_Name_Abbreviation |
1459146730300:x %in% prefixqual$Expanded_Full_Text)
1459146730301:}
1459146730301:# in suffix qualifier table ?
1459146730302:suffixqual = subset(qualifier, Suffix_Qualifier == "Y")
1459146730303:checksuffixqual = function(x){
1459146730303:return(x %in% suffixqual$Display_Name_Abbreviation |
1459146730303:x %in% suffixqual$Expanded_Full_Text)
1459146730304:}
1459146730304:# input a word, check if it's in  directions
1459146730305:checkdir = function(x){
1459146730305:return(x %in% directions$DirectionalAbbreviation | x %in% directions$ExpandedFullText)
1459146730305:}
1459146730306:# input a word, check if it's in prefix nametype table
1459146730306:prefixtype = subset(nametype, PrefixType == "Y")
1459146730308:checkprefixtype = function(x){
1459146730308:return(x %in% prefixtype$DisplayNameabbreviation |
1459146730308:x %in% prefixtype$ExpandedFullText)
1459146730308:}
1459146730309:# check suffix nametype table
1459146730309:suffixtype = subset(nametype, SuffixType == "Y")
1459146730311:checksuffixtype = function(x){
1459146730311:return(x %in% suffixtype$DisplayNameabbreviation |
1459146730312:x %in% suffixtype$ExpandedFullText)
1459146730312:}
1459146730312:# write a function, input a vector of characters, output 9 parts
1459146730313:locsep = function(x){
1459146730313:# first setup these 9 parts
1459146730313:hn = NULL
1459146730313:prequal = NULL
1459146730314:predir = NULL
1459146730314:pretype = NULL
1459146730314:streetname = NULL
1459146730314:suftype = NULL
1459146730315:sufdir = NULL
1459146730315:sufqual = NULL
1459146730315:#  other = NULL
1459146730316:n = length(x)
1459146730316:# find house number
1459146730317:for (i in 1:n){
1459146730317:if (is.null(hn)) {
1459146730317:if (checkhn(x[i])) hn = x[i]
1459146730318:}
1459146730318:else break
1459146730318:}
1459146730319:# find street name
1459146730319:for (i in 1:n){
1459146730320:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459146730320:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459146730321:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) streetname = append(streetname, x[i])
1459146730321:}
1459146730322:# find prefix qualifier
1459146730323:for (i in 1:n){
1459146730323:if (is.null(prequal) & is.null(streetname)){
1459146730324:if (checkprefixqual(x[i])s) prequal = x[i]
1459146730325:}
1459146730325:else break
1459146730325:}
1459146730326:# find prefix direction
1459146730326:for (i in 1:n){
1459146730326:if (is.null(predir) & is.null(streetname)){
1459146730326:if (checkdir(x[i])) predir = x[i]
1459146730326:}
1459146730327:else break
1459146730327:}
1459146730328:# find prefix name type
1459146730328:for (i in 1:n){
1459146730328:if (is.null(pretype)& is.null(streetname)){
1459146730329:if (checkprefixtype(x[i])) pretype = x[i]
1459146730329:}
1459146730329:else break
1459146730330:}
1459146730330:# find suffix name type
1459146730330:for (i in 1:n){
1459146730331:if (is.null(suftype) & !is.null(streetname)){
1459146730331:if (checksuffixtype(x[i])) suftype = x[i]
1459146730331:}
1459146730331:else break
1459146730331:}
1459146730332:# find suffix direction
1459146730333:for (i in 1:n){
1459146730333:if (is.null(sufdir) & !is.null(streetname)){
1459146730333:if (checkdir(x[i])) sufdir = x[i]
1459146730334:}
1459146730334:else break
1459146730334:}
1459146730335:# find suffix qualifier
1459146730335:for (i in 1:n){
1459146730336:if (is.null(sufqual) & !is.null(streetname)){
1459146730336:if (checksuffixqual(x[i])) sufqual = x[i]
1459146730336:}
1459146730336:else break
1459146730337:}
1459146730337:}
1459146764797:locsep = function(x){
1459146764798:# first setup these 9 parts
1459146764798:hn = NULL
1459146764799:prequal = NULL
1459146764799:predir = NULL
1459146764800:pretype = NULL
1459146764800:streetname = NULL
1459146764801:suftype = NULL
1459146764803:sufdir = NULL
1459146764804:sufqual = NULL
1459146764805:#  other = NULL
1459146764806:n = length(x)
1459146764806:# find house number
1459146764806:for (i in 1:n){
1459146764807:if (is.null(hn)) {
1459146764808:if (checkhn(x[i])) hn = x[i]
1459146764809:}
1459146764810:else break
1459146764811:}
1459146764812:# find street name
1459146764812:for (i in 1:n){
1459146764813:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459146764813:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459146764813:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) streetname = append(streetname, x[i])
1459146764814:}
1459146764815:# find prefix qualifier
1459146764815:for (i in 1:n){
1459146764815:if (is.null(prequal) & is.null(streetname)){
1459146764816:if (checkprefixqual(x[i])) prequal = x[i]
1459146764816:}
1459146764817:else break
1459146764817:}
1459146764818:# find prefix direction
1459146764818:for (i in 1:n){
1459146764819:if (is.null(predir) & is.null(streetname)){
1459146764819:if (checkdir(x[i])) predir = x[i]
1459146764820:}
1459146764820:else break
1459146764821:}
1459146764821:# find prefix name type
1459146764822:for (i in 1:n){
1459146764822:if (is.null(pretype)& is.null(streetname)){
1459146764823:if (checkprefixtype(x[i])) pretype = x[i]
1459146764823:}
1459146764824:else break
1459146764824:}
1459146764825:# find suffix name type
1459146764825:for (i in 1:n){
1459146764826:if (is.null(suftype) & !is.null(streetname)){
1459146764826:if (checksuffixtype(x[i])) suftype = x[i]
1459146764827:}
1459146764828:else break
1459146764828:}
1459146764829:# find suffix direction
1459146764830:for (i in 1:n){
1459146764830:if (is.null(sufdir) & !is.null(streetname)){
1459146764831:if (checkdir(x[i])) sufdir = x[i]
1459146764832:}
1459146764832:else break
1459146764833:}
1459146764834:# find suffix qualifier
1459146764834:for (i in 1:n){
1459146764836:if (is.null(sufqual) & !is.null(streetname)){
1459146764836:if (checksuffixqual(x[i])) sufqual = x[i]
1459146764838:}
1459146764840:else break
1459146764841:}
1459146764841:}
1459146777072:553 S ATLANTIC AVE UNIT 4
1459146807515:locsep(str_split("553 S ATLANTIC AVE UNIT 4", " ")[[1]])
1459146814990:553 S ATLANTIC AVE UNIT 4
1459146822787:b
1459146836527:locsep(b)
1459146845190:hn
1459146850603:prequal
1459146856287:predir
1459146911703:locsep = function(x){
1459146911705:# first setup these 9 parts
1459146911705:hn = NULL
1459146911705:prequal = NULL
1459146911706:predir = NULL
1459146911706:pretype = NULL
1459146911706:streetname = NULL
1459146911707:suftype = NULL
1459146911707:sufdir = NULL
1459146911707:sufqual = NULL
1459146911707:#  other = NULL
1459146911708:n = length(x)
1459146911708:# find house number
1459146911709:for (i in 1:n){
1459146911709:if (is.null(hn)) {
1459146911709:if (checkhn(x[i])) hn = x[i]
1459146911710:}
1459146911710:else break
1459146911710:}
1459146911711:# find street name
1459146911711:for (i in 1:n){
1459146911711:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459146911712:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459146911712:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) streetname = append(streetname, x[i])
1459146911713:}
1459146911715:# find prefix qualifier
1459146911717:for (i in 1:n){
1459146911718:if (is.null(prequal) & is.null(streetname)){
1459146911718:if (checkprefixqual(x[i])) prequal = x[i]
1459146911719:}
1459146911719:else break
1459146911720:}
1459146911720:# find prefix direction
1459146911721:for (i in 1:n){
1459146911721:if (is.null(predir) & is.null(streetname)){
1459146911722:if (checkdir(x[i])) predir = x[i]
1459146911723:}
1459146911724:else break
1459146911724:}
1459146911726:# find prefix name type
1459146911726:for (i in 1:n){
1459146911728:if (is.null(pretype)& is.null(streetname)){
1459146911728:if (checkprefixtype(x[i])) pretype = x[i]
1459146911730:}
1459146911731:else break
1459146911732:}
1459146911735:# find suffix name type
1459146911736:for (i in 1:n){
1459146911737:if (is.null(suftype) & !is.null(streetname)){
1459146911738:if (checksuffixtype(x[i])) suftype = x[i]
1459146911738:}
1459146911739:else break
1459146911740:}
1459146911741:# find suffix direction
1459146911741:for (i in 1:n){
1459146911742:if (is.null(sufdir) & !is.null(streetname)){
1459146911743:if (checkdir(x[i])) sufdir = x[i]
1459146911743:}
1459146911744:else break
1459146911744:}
1459146911745:# find suffix qualifier
1459146911746:for (i in 1:n){
1459146911747:if (is.null(sufqual) & !is.null(streetname)){
1459146911747:if (checksuffixqual(x[i])) sufqual = x[i]
1459146911748:}
1459146911749:else break
1459146911750:}
1459146911750:return(c(hn, prequal, predir, pretype, streetname, suftype, sufdir, sufqual))
1459146911751:}
1459146928056:locsep(b)
1459146954805:x
1459146960284:for (i in 1:n){
1459146960285:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459146960286:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459146960286:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) streetname = append(streetname, x[i])
1459146960286:}
1459146964580:streetname
1459146980880:x[1]
1459146984489:x[4]
1459147000072:x[3]
1459147006259:i= 3
1459147011534:!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459147011535:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459147011536:!checksuffixqual(x[i]) & !checksuffixtype(x[i])
1459147020945:!checkhn(x[i])
1459147027763:!checkdir(x[i])
1459147037360:checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459147037361:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459147037361:!checksuffixqual(x[i]) & !checksuffixtype(x[i])
1459147049195:checkhn
1459147059649:x[i]
1459147074485:checkhn(x[i])
1459147093703:is.numeric(as.numeric("asdfasdf"))
1459147109950:is.numeric('22')
1459147125301:is.numeric(as.numeric('as'))
1459147130760:as.numeric('as')
1459147138779:is.na(as.numeric('asdf'))
1459147143935:is.na(as.numeric('33'))
1459147173254:checkhn = function(inputword){
1459147173255:return(is.na(as.numeric(inputword)))
1459147173256:}
1459147178261:locsep = function(x){
1459147178261:# first setup these 9 parts
1459147178262:hn = NULL
1459147178262:prequal = NULL
1459147178263:predir = NULL
1459147178263:pretype = NULL
1459147178264:streetname = NULL
1459147178264:suftype = NULL
1459147178264:sufdir = NULL
1459147178265:sufqual = NULL
1459147178265:#  other = NULL
1459147178266:n = length(x)
1459147178266:# find house number
1459147178267:for (i in 1:n){
1459147178267:if (is.null(hn)) {
1459147178267:if (checkhn(x[i])) hn = x[i]
1459147178268:}
1459147178268:else break
1459147178269:}
1459147178270:# find street name
1459147178271:for (i in 1:n){
1459147178272:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459147178273:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459147178274:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) streetname = append(streetname, x[i])
1459147178274:}
1459147178275:# find prefix qualifier
1459147178275:for (i in 1:n){
1459147178276:if (is.null(prequal) & is.null(streetname)){
1459147178277:if (checkprefixqual(x[i])) prequal = x[i]
1459147178278:}
1459147178278:else break
1459147178279:}
1459147178280:# find prefix direction
1459147178280:for (i in 1:n){
1459147178280:if (is.null(predir) & is.null(streetname)){
1459147178281:if (checkdir(x[i])) predir = x[i]
1459147178281:}
1459147178282:else break
1459147178283:}
1459147178285:# find prefix name type
1459147178285:for (i in 1:n){
1459147178286:if (is.null(pretype)& is.null(streetname)){
1459147178286:if (checkprefixtype(x[i])) pretype = x[i]
1459147178287:}
1459147178287:else break
1459147178288:}
1459147178289:# find suffix name type
1459147178289:for (i in 1:n){
1459147178290:if (is.null(suftype) & !is.null(streetname)){
1459147178290:if (checksuffixtype(x[i])) suftype = x[i]
1459147178291:}
1459147178292:else break
1459147178292:}
1459147178294:# find suffix direction
1459147178294:for (i in 1:n){
1459147178295:if (is.null(sufdir) & !is.null(streetname)){
1459147178295:if (checkdir(x[i])) sufdir = x[i]
1459147178296:}
1459147178296:else break
1459147178297:}
1459147178298:# find suffix qualifier
1459147178299:for (i in 1:n){
1459147178299:if (is.null(sufqual) & !is.null(streetname)){
1459147178300:if (checksuffixqual(x[i])) sufqual = x[i]
1459147178301:}
1459147178301:else break
1459147178302:}
1459147178302:return(c(hn, prequal, predir, pretype, streetname, suftype, sufdir, sufqual))
1459147178303:}
1459147185546:locsep(b)
1459147246987:hn = NULL
1459147246988:prequal = NULL
1459147246989:predir = NULL
1459147246989:pretype = NULL
1459147246990:streetname = NULL
1459147246991:suftype = NULL
1459147246992:sufdir = NULL
1459147246993:sufqual = NULL
1459147252559:x = b
1459147253701:x
1459147262540:n = length(x)
1459147262541:# find house number
1459147262542:for (i in 1:n){
1459147262542:if (is.null(hn)) {
1459147262543:if (checkhn(x[i])) hn = x[i]
1459147262544:}
1459147262544:else break
1459147262545:}
1459147265823:hn
1459147278025:i
1459147285885:checkhn
1459147304299:checkhn = function(inputword){
1459147304299:return(!is.na(as.numeric(inputword)))
1459147304300:}
1459147311902:for (i in 1:n){
1459147311903:if (is.null(hn)) {
1459147311903:if (checkhn(x[i])) hn = x[i]
1459147311903:}
1459147311904:else break
1459147311904:}
1459147313416:i
1459147314316:hn
1459147325241:hn = NULL
1459147325242:prequal = NULL
1459147325242:predir = NULL
1459147325243:pretype = NULL
1459147325243:streetname = NULL
1459147325244:suftype = NULL
1459147325244:sufdir = NULL
1459147325245:sufqual = NULL
1459147325247:#  other = NULL
1459147325248:n = length(x)
1459147325248:# find house number
1459147325249:for (i in 1:n){
1459147325249:if (is.null(hn)) {
1459147325249:if (checkhn(x[i])) hn = x[i]
1459147325250:}
1459147325250:else break
1459147325250:}
1459147326980:hn
1459147337155:# find street name
1459147337156:for (i in 1:n){
1459147337156:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459147337157:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459147337157:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) streetname = append(streetname, x[i])
1459147337157:}
1459147343173:streetname
1459147357212:# find prefix qualifier
1459147357212:for (i in 1:n){
1459147357213:if (is.null(prequal) & is.null(streetname)){
1459147357213:if (checkprefixqual(x[i])) prequal = x[i]
1459147357213:}
1459147357213:else break
1459147357214:}
1459147360016:prequal
1459147382789:# find prefix direction
1459147382790:for (i in 1:n){
1459147382791:if (is.null(predir) & is.null(streetname)){
1459147382793:if (checkdir(x[i])) predir = x[i]
1459147382795:}
1459147382795:else break
1459147382796:}
1459147392372:predir
1459147401899:# find prefix name type
1459147401900:for (i in 1:n){
1459147401900:if (is.null(pretype)& is.null(streetname)){
1459147401900:if (checkprefixtype(x[i])) pretype = x[i]
1459147401901:}
1459147401901:else break
1459147401901:}
1459147401902:# find suffix name type
1459147401902:for (i in 1:n){
1459147401903:if (is.null(suftype) & !is.null(streetname)){
1459147401903:if (checksuffixtype(x[i])) suftype = x[i]
1459147401903:}
1459147401904:else break
1459147401904:}
1459147405198:pretype
1459147408702:suftype
1459147413938:# find suffix direction
1459147413938:for (i in 1:n){
1459147413938:if (is.null(sufdir) & !is.null(streetname)){
1459147413939:if (checkdir(x[i])) sufdir = x[i]
1459147413939:}
1459147413939:else break
1459147413940:}
1459147417202:sufdir
1459147429824:# find suffix qualifier
1459147429825:for (i in 1:n){
1459147429826:if (is.null(sufqual) & !is.null(streetname)){
1459147429826:if (checksuffixqual(x[i])) sufqual = x[i]
1459147429827:}
1459147429827:else break
1459147429828:}
1459147435563:sufqual
1459147442093:streetname
1459147445864:x
1459147615228:i = 2
1459147623350:!checkhn(x[i])
1459147630827:!checkdir(x[i])
1459147640622:checkdir(x[i])
1459147644829:!checkprefixqual(x[i])
1459147650385:checkprefixqual(x[i])
1459147773451:for (i in 1:n){
1459147773454:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459147773455:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459147773455:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) streetname = append(streetname, x[i])
1459147773456:}
1459147780161:hn = NULL
1459147780162:prequal = NULL
1459147780163:predir = NULL
1459147780164:pretype = NULL
1459147780164:streetname = NULL
1459147780165:suftype = NULL
1459147780165:sufdir = NULL
1459147780166:sufqual = NULL
1459147780166:#  other = NULL
1459147780167:n = length(x)
1459147780167:# find house number
1459147780167:for (i in 1:n){
1459147780168:if (is.null(hn)) {
1459147780168:if (checkhn(x[i])) hn = x[i]
1459147780169:}
1459147780169:else break
1459147780169:}
1459147780170:# find street name
1459147780171:for (i in 1:n){
1459147780171:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459147780171:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459147780171:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) streetname = append(streetname, x[i])
1459147780172:}
1459147784988:hn
1459147789053:streetname
1459147879649:x
1459147883196:i = 4
1459147890859:!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459147890860:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459147890861:!checksuffixqual(x[i]) & !checksuffixtype(x[i])
1459147902872:!checkdir(x[i])
1459147907769:x[i]
1459147914743:!checkprefixtype(x[i])
1459147921086:checkprefixtype(x[i])
1459148023757:toupper("aasdf")
1459148084958:library(dplyr)
1459148111597:qualifier = mutate_each(df, func(toupper))
1459148116642:qualifier = mutate_each(df, funs(toupper))
1459148124021:qualifier = mutate_each(qualifier, funs(toupper))
1459148130778:View(qualifier)
1459148186940:qualifier = mutate_each(qualifier, funs(toupper))
1459148187322:nametype = mutate_each(nametype, funs(toupper))
1459148187494:directions = mutate_each(directions, funs(toupper))
1459148203479:checkhn = function(inputword){
1459148203480:return(!is.na(as.numeric(inputword)))
1459148203480:}
1459148203481:# input a word, check if it's in prefix qualifier table
1459148203481:prefixqual = subset(qualifier, Prefix_Qualifier == "Y")
1459148203482:checkprefixqual = function(x){
1459148203483:return(x %in% prefixqual$Display_Name_Abbreviation |
1459148203483:x %in% prefixqual$Expanded_Full_Text)
1459148203483:}
1459148203484:# in suffix qualifier table ?
1459148203484:suffixqual = subset(qualifier, Suffix_Qualifier == "Y")
1459148203485:checksuffixqual = function(x){
1459148203486:return(x %in% suffixqual$Display_Name_Abbreviation |
1459148203486:x %in% suffixqual$Expanded_Full_Text)
1459148203486:}
1459148203487:# input a word, check if it's in  directions
1459148203488:checkdir = function(x){
1459148203488:return(x %in% directions$DirectionalAbbreviation | x %in% directions$ExpandedFullText)
1459148203488:}
1459148203489:# input a word, check if it's in prefix nametype table
1459148203489:prefixtype = subset(nametype, PrefixType == "Y")
1459148203490:checkprefixtype = function(x){
1459148203490:return(x %in% prefixtype$DisplayNameabbreviation |
1459148203491:x %in% prefixtype$ExpandedFullText)
1459148203492:}
1459148203493:# check suffix nametype table
1459148203493:suffixtype = subset(nametype, SuffixType == "Y")
1459148203495:checksuffixtype = function(x){
1459148203495:return(x %in% suffixtype$DisplayNameabbreviation |
1459148203496:x %in% suffixtype$ExpandedFullText)
1459148203496:}
1459148203496:# write a function, input a vector of characters, output 9 parts
1459148216581:View(nametype)
1459148241103:qualifier = mutate_each(qualifier, funs(toupper))
1459148243527:directions = mutate_each(directions, funs(toupper))
1459148245133:nametype = mutate_each(nametype, funs(toupper))
1459148402092:directions = subset(directions, Spanish != "Y")
1459148435754:nametype = subset(nametype, Spanish != "Y")
1459148442407:nametype = subset(nametype, Spanish != "Y")
1459148442408:directions = subset(directions, Spanish != "Y")
1459148442409:qualifier = mutate_each(qualifier, funs(toupper))
1459148442412:nametype = mutate_each(nametype, funs(toupper))
1459148442420:directions = mutate_each(directions, funs(toupper))
1459148446759:nametype = subset(nametype, Spanish != "Y")
1459148458243:nametype = subset(nametype, Spanish != "Y")
1459148465442:View(nametype)
1459148472345:summary(nametype)
1459148501646:nametype1 = subset(nametype, Spanish == "Y")
1459148507807:View(nametype1)
1459148523273:nametype$Spanish
1459148534605:levels(nametype$Spanish)
1459148547147:nametype = subset(nametype, Spanish == "")
1459148564572:nametype = subset(nametype, Spanish == "")
1459148564608:directions = subset(directions, Spanish != "Y")
1459148564611:qualifier = mutate_each(qualifier, funs(toupper))
1459148564617:nametype = mutate_each(nametype, funs(toupper))
1459148564625:directions = mutate_each(directions, funs(toupper))
1459149063757:hn = NULL
1459149063771:prequal = NULL
1459149063771:predir = NULL
1459149063772:pretype = NULL
1459149063773:streetname = NULL
1459149063773:suftype = NULL
1459149063774:sufdir = NULL
1459149063775:sufqual = NULL
1459149063776:#  other = NULL
1459149063776:n = length(x)
1459149063777:# find house number
1459149063778:for (i in 1:n){
1459149063780:if (is.null(hn)) {
1459149063781:if (checkhn(x[i])) hn = x[i]
1459149063782:}
1459149063782:else break
1459149063783:}
1459149063784:# find street name
1459149063785:for (i in 1:n){
1459149063785:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459149063785:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459149063786:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) {
1459149063786:if (is.null(streetname)) k = i, streetname = append(streetname, x[i])
1459149063788:else streetname = append(streetname, x[i])
1459149063788:}
1459149063788:}
1459149134374:hn = NULL
1459149134375:prequal = NULL
1459149134375:predir = NULL
1459149134375:pretype = NULL
1459149134376:streetname = NULL
1459149134376:suftype = NULL
1459149134376:sufdir = NULL
1459149134377:sufqual = NULL
1459149134377:#  other = NULL
1459149134378:n = length(x)
1459149134378:# find house number
1459149134378:for (i in 1:n){
1459149134379:if (is.null(hn)) {
1459149134379:if (checkhn(x[i])) hn = x[i]
1459149134379:}
1459149134380:else break
1459149134380:}
1459149134381:# find street name
1459149134381:for (i in 1:n){
1459149134381:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459149134381:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459149134382:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) {
1459149134382:if (is.null(streetname)) {
1459149134382:streetname = append(streetname, x[i])
1459149134383:k = i
1459149134384:}
1459149134385:else streetname = append(streetname, x[i])
1459149134386:}
1459149134386:}
1459149139475:k
1459149145781:hn
1459149149530:streetname
1459149163043:# input a string without space, detect if there is a number in that string,
1459149163044:# if only has numbers --> output 0
1459149163044:# if it has number, and other symbols, but no letters --> output 1
1459149163044:# if it has a number, and also has letters --> output 2
1459149163045:# if no numbers --> output 3
1459149163045:# input a word, check if it's numeric, if it's numeric then it's a house number
1459149163045:checkhn = function(inputword){
1459149163046:return(!is.na(as.numeric(inputword)))
1459149163047:}
1459149163047:# input a word, check if it's in prefix qualifier table
1459149163048:prefixqual = subset(qualifier, Prefix_Qualifier == "Y")
1459149163049:checkprefixqual = function(x){
1459149163049:return(x %in% prefixqual$Display_Name_Abbreviation |
1459149163050:x %in% prefixqual$Expanded_Full_Text)
1459149163050:}
1459149163051:# check if it's in suffix qualifier table ?
1459149163051:suffixqual = subset(qualifier, Suffix_Qualifier == "Y")
1459149163053:checksuffixqual = function(x){
1459149163053:return(x %in% suffixqual$Display_Name_Abbreviation |
1459149163053:x %in% suffixqual$Expanded_Full_Text)
1459149163054:}
1459149163054:# input a word, check if it's in  directions
1459149163055:checkdir = function(x){
1459149163055:return(x %in% directions$DirectionalAbbreviation | x %in% directions$ExpandedFullText)
1459149163055:}
1459149163056:# input a word, check if it's in prefix nametype table
1459149163056:prefixtype = subset(nametype, PrefixType == "Y")
1459149163058:checkprefixtype = function(x){
1459149163058:return(x %in% prefixtype$DisplayNameabbreviation |
1459149163059:x %in% prefixtype$ExpandedFullText)
1459149163059:}
1459149163059:# check suffix nametype table
1459149163060:suffixtype = subset(nametype, SuffixType == "Y")
1459149163061:checksuffixtype = function(x){
1459149163061:return(x %in% suffixtype$DisplayNameabbreviation |
1459149163061:x %in% suffixtype$ExpandedFullText)
1459149163062:}
1459149170794:# first setup these 9 parts
1459149170795:hn = NULL
1459149170796:prequal = NULL
1459149170796:predir = NULL
1459149170797:pretype = NULL
1459149170798:streetname = NULL
1459149170799:suftype = NULL
1459149170801:sufdir = NULL
1459149170802:sufqual = NULL
1459149170803:#  other = NULL
1459149170804:n = length(x)
1459149170807:# find house number
1459149170807:for (i in 1:n){
1459149170808:if (is.null(hn)) {
1459149170809:if (checkhn(x[i])) hn = x[i]
1459149170810:}
1459149170810:else break
1459149170811:}
1459149170812:# find street name
1459149170813:for (i in 1:n){
1459149170814:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459149170814:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459149170814:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) {
1459149170815:if (is.null(streetname)) {
1459149170816:streetname = append(streetname, x[i])
1459149170816:k = i
1459149170816:}
1459149170817:else streetname = append(streetname, x[i])
1459149170817:}
1459149170818:}
1459149174275:streetname
1459149182864:hn
1459149421734:# first setup these 9 parts
1459149421736:hn = NULL
1459149421737:prequal = NULL
1459149421737:predir = NULL
1459149421738:pretype = NULL
1459149421738:streetname = NULL
1459149421739:suftype = NULL
1459149421739:sufdir = NULL
1459149421740:sufqual = NULL
1459149421740:#  other = NULL
1459149421741:n = length(x)
1459149421742:# find house number
1459149421742:for (i in 1:n){
1459149421743:if (is.null(hn)) {
1459149421743:if (checkhn(x[i])) hn = x[i]
1459149421743:}
1459149421744:else break
1459149421744:}
1459149421745:# find street name
1459149421745:for (i in 1:n){
1459149421745:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459149421749:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459149421749:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) {
1459149421749:if (is.null(streetname)) {
1459149421750:streetname = append(streetname, x[i])
1459149421750:k = i
1459149421751:}
1459149421751:else streetname = append(streetname, x[i])
1459149421752:}
1459149421752:}
1459149421762:# find prefix qualifier
1459149421762:for (i in 1:n){
1459149421763:if (is.null(prequal) & i < k){
1459149421763:if (checkprefixqual(x[i])) prequal = x[i]
1459149421763:}
1459149421763:else break
1459149421764:}
1459149421764:# find prefix direction
1459149421765:for (i in 1:n){
1459149421765:if (is.null(predir) & i < k){
1459149421765:if (checkdir(x[i])) predir = x[i]
1459149421765:}
1459149421766:else break
1459149421766:}
1459149421767:# find prefix name type
1459149421767:for (i in 1:n){
1459149421767:if (is.null(pretype) & i < k){
1459149421767:if (checkprefixtype(x[i])) pretype = x[i]
1459149421767:}
1459149421768:else break
1459149421768:}
1459149421769:# find suffix name type
1459149421769:for (i in 1:n){
1459149421769:if (is.null(suftype) & i > k){
1459149421769:if (checksuffixtype(x[i])) suftype = x[i]
1459149421770:}
1459149421770:else break
1459149421770:}
1459149421771:# find suffix direction
1459149421771:for (i in 1:n){
1459149421771:if (is.null(sufdir) & i > k){
1459149421771:if (checkdir(x[i])) sufdir = x[i]
1459149421772:}
1459149421772:else break
1459149421772:}
1459149421773:# find suffix qualifier
1459149421773:for (i in 1:n){
1459149421773:if (is.null(sufqual) & i > k){
1459149421774:if (checksuffixqual(x[i])) sufqual = x[i]
1459149421774:}
1459149421774:else break
1459149421774:}
1459149428503:x
1459149429399:hn
1459149431721:prequal
1459149433806:predir
1459149435949:pretype
1459149439134:streetname
1459149441801:suftype
1459149450090:sufdir
1459149451927:sufqual
1459149489730:for (i in 1:n){
1459149489731:if (is.null(suftype) & i > k){
1459149489731:if (checksuffixtype(x[i])) suftype = x[i]
1459149489731:}
1459149489731:else break
1459149489732:}
1459149494252:suftype
1459149545364:suffixtype = subset(nametype, SuffixType == "Y")
1459149545366:checksuffixtype = function(x){
1459149545367:return(x %in% suffixtype$DisplayNameabbreviation |
1459149545367:x %in% suffixtype$ExpandedFullText)
1459149545368:}
1459149545369:# write a f
1459149553665:# find suffix name type
1459149553665:for (i in 1:n){
1459149553666:if (is.null(suftype) & i > k){
1459149553666:if (checksuffixtype(x[i])) suftype = x[i]
1459149553666:}
1459149553666:else break
1459149553667:}
1459149556597:suftype
1459149560266:s
1459149560971:x
1459149564430:i = 4
1459149570195:checksuffixtype(x[i])
1459149577209:k
1459149578823:is.null(suftype) & i > k
1459149591585:x[i]
1459149596661:if (checksuffixtype(x[i])) suftype = x[i]
1459149599080:suftype
1459149612301:# first setup these 9 parts
1459149612302:hn = NULL
1459149612302:prequal = NULL
1459149612303:predir = NULL
1459149612303:pretype = NULL
1459149612304:streetname = NULL
1459149612305:suftype = NULL
1459149612306:sufdir = NULL
1459149612306:sufqual = NULL
1459149612307:#  other = NULL
1459149612307:n = length(x)
1459149612308:# find house number
1459149612308:for (i in 1:n){
1459149612308:if (is.null(hn)) {
1459149612309:if (checkhn(x[i])) hn = x[i]
1459149612309:}
1459149612309:else break
1459149612309:}
1459149612310:# find street name
1459149612310:for (i in 1:n){
1459149612310:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459149612311:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459149612311:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) {
1459149612311:if (is.null(streetname)) {
1459149612312:streetname = append(streetname, x[i])
1459149612313:k = i
1459149612314:}
1459149612314:else streetname = append(streetname, x[i])
1459149612315:}
1459149612315:}
1459149612321:# find prefix qualifier
1459149612322:for (i in 1:n){
1459149612322:if (is.null(prequal) & i < k){
1459149612322:if (checkprefixqual(x[i])) prequal = x[i]
1459149612322:}
1459149612322:else break
1459149612323:}
1459149612324:# find prefix direction
1459149612324:for (i in 1:n){
1459149612324:if (is.null(predir) & i < k){
1459149612324:if (checkdir(x[i])) predir = x[i]
1459149612325:}
1459149612325:else break
1459149612325:}
1459149612326:# find prefix name type
1459149612327:for (i in 1:n){
1459149612327:if (is.null(pretype) & i < k){
1459149612328:if (checkprefixtype(x[i])) pretype = x[i]
1459149612328:}
1459149612328:else break
1459149612328:}
1459149612329:# find suffix name type
1459149612330:for (i in 1:n){
1459149612330:if (is.null(suftype) & i > k){
1459149612330:if (checksuffixtype(x[i])) suftype = x[i]
1459149612330:}
1459149612331:else break
1459149612331:}
1459149612331:# find suffix direction
1459149612332:for (i in 1:n){
1459149612332:if (is.null(sufdir) & i > k){
1459149612332:if (checkdir(x[i])) sufdir = x[i]
1459149612333:}
1459149612333:else break
1459149612333:}
1459149612334:# find suffix qualifier
1459149612334:for (i in 1:n){
1459149612334:if (is.null(sufqual) & i > k){
1459149612334:if (checksuffixqual(x[i])) sufqual = x[i]
1459149612335:}
1459149612335:else break
1459149612335:}
1459149615557:suftype
1459149619164:hn
1459149624146:streetname
1459149627615:predir
1459149635709:k
1459149648709:i
1459149663145:for (i in 1:n){
1459149663146:if (is.null(suftype) & i > k){
1459149663146:if (checksuffixtype(x[i])) suftype = x[i]
1459149663147:}
1459149663147:else break
1459149663147:}
1459149664368:i
1459149700768:for (i in 1:n){
1459149700768:if (is.null(suftype) & i > k){
1459149700769:if (checksuffixtype(x[i])) suftype = x[i]
1459149700769:}
1459149700769:else next
1459149700770:}
1459149703488:sufty[e]
1459149705463:suftype
1459149713597:for (i in 1:n){
1459149713598:if (is.null(pretype) & i < k){
1459149713598:if (checkprefixtype(x[i])) pretype = x[i]
1459149713598:}
1459149713598:else next
1459149713599:}
1459149717043:pretype
1459149788680:hn = NULL
1459149788681:prequal = NULL
1459149788682:predir = NULL
1459149788683:pretype = NULL
1459149788683:streetname = NULL
1459149788683:suftype = NULL
1459149788684:sufdir = NULL
1459149788684:sufqual = NULL
1459149788685:#  other = NULL
1459149788685:n = length(x)
1459149788686:# find house number
1459149788687:for (i in 1:n){
1459149788687:if (is.null(hn)) {
1459149788688:if (checkhn(x[i])) hn = x[i]
1459149788688:}
1459149788689:else next
1459149788690:}
1459149788691:# find street name
1459149788692:for (i in 1:n){
1459149788693:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459149788693:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459149788694:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) {
1459149788694:if (is.null(streetname)) {
1459149788694:streetname = append(streetname, x[i])
1459149788695:k = i
1459149788695:}
1459149788696:else streetname = append(streetname, x[i])
1459149788696:}
1459149788697:}
1459149788704:# find prefix qualifier
1459149788704:for (i in 1:n){
1459149788705:if (is.null(prequal) & i < k){
1459149788705:if (checkprefixqual(x[i])) prequal = x[i]
1459149788705:}
1459149788705:else next
1459149788706:}
1459149788706:# find prefix direction
1459149788706:for (i in 1:n){
1459149788707:if (is.null(predir) & i < k){
1459149788707:if (checkdir(x[i])) predir = x[i]
1459149788707:}
1459149788707:else next
1459149788708:}
1459149788708:# find prefix name type
1459149788709:for (i in 1:n){
1459149788709:if (is.null(pretype) & i < k){
1459149788709:if (checkprefixtype(x[i])) pretype = x[i]
1459149788709:}
1459149788710:else next
1459149788710:}
1459149788710:# find suffix name type
1459149788711:for (i in 1:n){
1459149788711:if (is.null(suftype) & i > k){
1459149788711:if (checksuffixtype(x[i])) suftype = x[i]
1459149788711:}
1459149788712:else next
1459149788712:}
1459149788713:# find suffix direction
1459149788713:for (i in 1:n){
1459149788713:if (is.null(sufdir) & i > k){
1459149788713:if (checkdir(x[i])) sufdir = x[i]
1459149788714:}
1459149788714:else next
1459149788714:}
1459149788715:# find suffix qualifier
1459149788715:for (i in 1:n){
1459149788715:if (is.null(sufqual) & i > k){
1459149788716:if (checksuffixqual(x[i])) sufqual = x[i]
1459149788716:}
1459149788716:else next
1459149788716:}
1459149790895:hn
1459149793584:streetname
1459149798981:suftype
1459149800547:predir
1459149854928:# write a function, input a vector of characters, output 9 parts
1459149854929:locsep = function(x){
1459149854929:# first setup these 9 parts
1459149854930:hn = NULL
1459149854930:prequal = NULL
1459149854930:predir = NULL
1459149854930:pretype = NULL
1459149854931:streetname = NULL
1459149854931:suftype = NULL
1459149854931:sufdir = NULL
1459149854932:sufqual = NULL
1459149854932:#  other = NULL
1459149854932:n = length(x)
1459149854933:# find house number
1459149854933:for (i in 1:n){
1459149854933:if (is.null(hn)) {
1459149854934:if (checkhn(x[i])) hn = x[i]
1459149854934:}
1459149854935:else next
1459149854935:}
1459149854936:# find street name
1459149854937:for (i in 1:n){
1459149854937:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459149854937:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459149854938:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) {
1459149854938:if (is.null(streetname)) {
1459149854939:streetname = append(streetname, x[i])
1459149854940:k = i
1459149854941:}
1459149854941:else streetname = append(streetname, x[i])
1459149854941:}
1459149854942:}
1459149854943:# find prefix qualifier
1459149854943:for (i in 1:n){
1459149854944:if (is.null(prequal) & i < k){
1459149854945:if (checkprefixqual(x[i])) prequal = x[i]
1459149854945:}
1459149854946:else next
1459149854947:}
1459149854948:# find prefix direction
1459149854949:for (i in 1:n){
1459149854950:if (is.null(predir) & i < k){
1459149854950:if (checkdir(x[i])) predir = x[i]
1459149854951:}
1459149854953:else next
1459149854954:}
1459149854955:# find prefix name type
1459149854956:for (i in 1:n){
1459149854956:if (is.null(pretype) & i < k){
1459149854956:if (checkprefixtype(x[i])) pretype = x[i]
1459149854957:}
1459149854957:else next
1459149854958:}
1459149854959:# find suffix name type
1459149854959:for (i in 1:n){
1459149854960:if (is.null(suftype) & i > k){
1459149854960:if (checksuffixtype(x[i])) suftype = x[i]
1459149854961:}
1459149854962:else next
1459149854962:}
1459149854964:# find suffix direction
1459149854965:for (i in 1:n){
1459149854965:if (is.null(sufdir) & i > k){
1459149854966:if (checkdir(x[i])) sufdir = x[i]
1459149854967:}
1459149854967:else next
1459149854968:}
1459149854969:# find suffix qualifier
1459149854970:for (i in 1:n){
1459149854970:if (is.null(sufqual) & i > k){
1459149854971:if (checksuffixqual(x[i])) sufqual = x[i]
1459149854972:}
1459149854972:else next
1459149854973:}
1459149854974:return(c(hn = hn, prequal = prequal, predir = predir, pretype = pretype,
1459149854975:streetname = streetname, suftype = suftype, sufdir = sufdir,
1459149854976:sufqual = sufqual))
1459149854976:}
1459149866060:locsep(b)
1459149885671:b
1459150275951:hn
1459150290754:hn = NULL
1459150290755:prequal = NULL
1459150290755:predir = NULL
1459150290756:pretype = NULL
1459150290756:streetname = NULL
1459150290756:suftype = NULL
1459150290758:sufdir = NULL
1459150290759:sufqual = NULL
1459150290759:#  other = NULL
1459150290760:n = length(x)
1459150290760:# find house number
1459150290761:for (i in 1:n){
1459150290761:if (is.null(hn)) {
1459150290761:if (checkhn(x[i])) hn = x[i]
1459150290762:}
1459150290762:else next
1459150290763:}
1459150292191:hn
1459151212555:hn = NULL
1459151212556:prequal = NULL
1459151212557:predir = NULL
1459151212558:pretype = NULL
1459151212558:streetname = NULL
1459151212559:suftype = NULL
1459151212559:sufdir = NULL
1459151212559:sufqual = NULL
1459151212560:other = NULL
1459151212560:n = length(x)
1459151212561:# find house number
1459151212561:for (i in 1:n){
1459151212561:if (is.null(hn)) {
1459151212562:if (checkhn(x[i])) hn = x[i]
1459151212562:}
1459151212563:else next
1459151212563:}
1459151212563:# find street name
1459151212564:for (i in 1:n){
1459151212564:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459151212564:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459151212564:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) {
1459151212565:if (is.null(streetname)) {
1459151212565:streetname = append(streetname, x[i])
1459151212566:k = i
1459151212569:}
1459151212570:else {
1459151212570:j = k + 1
1459151212571:if (i = j){
1459151212571:streetname = append(streetname, x[i])
1459151212572:j = j + 1
1459151212573:}
1459151212573:else other = append(other, x[i])
1459151212574:}
1459151212574:}
1459151212574:}
1459151239262:hn = NULL
1459151239263:prequal = NULL
1459151239263:predir = NULL
1459151239264:pretype = NULL
1459151239264:streetname = NULL
1459151239264:suftype = NULL
1459151239265:sufdir = NULL
1459151239266:sufqual = NULL
1459151239266:other = NULL
1459151239267:n = length(x)
1459151239267:# find house number
1459151239267:for (i in 1:n){
1459151239268:if (is.null(hn)) {
1459151239268:if (checkhn(x[i])) hn = x[i]
1459151239268:}
1459151239269:else next
1459151239269:}
1459151239269:# find street name
1459151239270:for (i in 1:n){
1459151239270:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459151239270:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459151239271:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) {
1459151239271:if (is.null(streetname)) {
1459151239271:streetname = append(streetname, x[i])
1459151239272:k = i
1459151239272:}
1459151239273:else {
1459151239274:j = k + 1
1459151239274:if (i == j) {
1459151239275:streetname = append(streetname, x[i])
1459151239275:j = j + 1
1459151239276:}
1459151239276:else other = append(other, x[i])
1459151239276:}
1459151239277:}
1459151239277:}
1459151245011:other
1459151248681:streetname
1459151250824:hn
1459151312099:locsep = function(x){
1459151312100:# first setup these 9 parts
1459151312101:hn = NULL
1459151312101:prequal = NULL
1459151312102:predir = NULL
1459151312102:pretype = NULL
1459151312102:streetname = NULL
1459151312103:suftype = NULL
1459151312103:sufdir = NULL
1459151312104:sufqual = NULL
1459151312105:other = NULL
1459151312106:n = length(x)
1459151312106:# find house number
1459151312106:for (i in 1:n){
1459151312107:if (is.null(hn)) {
1459151312107:if (checkhn(x[i])) hn = x[i]
1459151312107:}
1459151312108:else next
1459151312108:}
1459151312109:# find street name
1459151312109:for (i in 1:n){
1459151312110:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459151312111:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459151312111:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) {
1459151312112:if (is.null(streetname)) {
1459151312112:streetname = append(streetname, x[i])
1459151312113:k = i
1459151312114:}
1459151312115:else {
1459151312115:j = k + 1
1459151312115:if (i == j) {
1459151312116:streetname = append(streetname, x[i])
1459151312116:j = j + 1
1459151312117:}
1459151312117:else other = append(other, x[i])
1459151312118:}
1459151312118:}
1459151312119:}
1459151312120:# find prefix qualifier
1459151312120:for (i in 1:n){
1459151312121:if (is.null(prequal) & i < k){
1459151312121:if (checkprefixqual(x[i])) prequal = x[i]
1459151312122:}
1459151312122:else next
1459151312123:}
1459151312124:# find prefix direction
1459151312124:for (i in 1:n){
1459151312124:if (is.null(predir) & i < k){
1459151312125:if (checkdir(x[i])) predir = x[i]
1459151312125:}
1459151312126:else next
1459151312126:}
1459151312127:# find prefix name type
1459151312128:for (i in 1:n){
1459151312128:if (is.null(pretype) & i < k){
1459151312129:if (checkprefixtype(x[i])) pretype = x[i]
1459151312129:}
1459151312130:else next
1459151312131:}
1459151312132:# find suffix name type
1459151312132:for (i in 1:n){
1459151312133:if (is.null(suftype) & i > k){
1459151312134:if (checksuffixtype(x[i])) suftype = x[i]
1459151312134:}
1459151312135:else next
1459151312136:}
1459151312137:# find suffix direction
1459151312137:for (i in 1:n){
1459151312138:if (is.null(sufdir) & i > k){
1459151312138:if (checkdir(x[i])) sufdir = x[i]
1459151312139:}
1459151312139:else next
1459151312140:}
1459151312141:# find suffix qualifier
1459151312142:for (i in 1:n){
1459151312142:if (is.null(sufqual) & i > k){
1459151312143:if (checksuffixqual(x[i])) sufqual = x[i]
1459151312144:}
1459151312145:else next
1459151312146:}
1459151312147:return(c(hn = hn, prequal = prequal, predir = predir, pretype = pretype,
1459151312148:streetname = streetname, suftype = suftype, sufdir = sufdir,
1459151312149:sufqual = sufqual, other = other))
1459151312149:}
1459151320324:locsep(b)
1459151371080:locsep = function(x){
1459151371080:# first setup these 9 parts
1459151371081:hn = NULL
1459151371081:prequal = NULL
1459151371081:predir = NULL
1459151371081:pretype = NULL
1459151371082:streetname = NULL
1459151371082:suftype = NULL
1459151371082:sufdir = NULL
1459151371082:sufqual = NULL
1459151371083:other = NULL
1459151371083:n = length(x)
1459151371084:# find house number
1459151371084:for (i in 1:n){
1459151371084:if (is.null(hn)) {
1459151371085:if (checkhn(x[i])) hn = append(hn, x[i])
1459151371085:}
1459151371085:else next
1459151371086:}
1459151371088:# find street name
1459151371088:for (i in 1:n){
1459151371089:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459151371089:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459151371089:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) {
1459151371090:if (is.null(streetname)) {
1459151371090:streetname = append(streetname, x[i])
1459151371091:k = i
1459151371092:}
1459151371092:else {
1459151371093:j = k + 1
1459151371093:if (i == j) {
1459151371094:streetname = append(streetname, x[i])
1459151371095:j = j + 1
1459151371095:}
1459151371096:else other = append(other, x[i])
1459151371096:}
1459151371097:}
1459151371097:}
1459151371098:# find prefix qualifier
1459151371098:for (i in 1:n){
1459151371099:if (is.null(prequal) & i < k){
1459151371099:if (checkprefixqual(x[i])) prequal = x[i]
1459151371100:}
1459151371100:else next
1459151371100:}
1459151371102:# find prefix direction
1459151371103:for (i in 1:n){
1459151371104:if (is.null(predir) & i < k){
1459151371104:if (checkdir(x[i])) predir = x[i]
1459151371105:}
1459151371105:else next
1459151371105:}
1459151371106:# find prefix name type
1459151371107:for (i in 1:n){
1459151371108:if (is.null(pretype) & i < k){
1459151371108:if (checkprefixtype(x[i])) pretype = x[i]
1459151371109:}
1459151371110:else next
1459151371110:}
1459151371112:# find suffix name type
1459151371112:for (i in 1:n){
1459151371113:if (is.null(suftype) & i > k){
1459151371114:if (checksuffixtype(x[i])) suftype = x[i]
1459151371115:}
1459151371116:else next
1459151371116:}
1459151371117:# find suffix direction
1459151371118:for (i in 1:n){
1459151371119:if (is.null(sufdir) & i > k){
1459151371120:if (checkdir(x[i])) sufdir = x[i]
1459151371121:}
1459151371121:else next
1459151371122:}
1459151371123:# find suffix qualifier
1459151371124:for (i in 1:n){
1459151371124:if (is.null(sufqual) & i > k){
1459151371125:if (checksuffixqual(x[i])) sufqual = x[i]
1459151371126:}
1459151371127:else next
1459151371127:}
1459151371129:return(c(hn = hn, prequal = prequal, predir = predir, pretype = pretype,
1459151371129:streetname = streetname, suftype = suftype, sufdir = sufdir,
1459151371130:sufqual = sufqual, other = other))
1459151371131:}
1459151375962:locsep(b)
1459151418406:locsep = function(x){
1459151418407:# first setup these 9 parts
1459151418408:hn = NULL
1459151418408:prequal = NULL
1459151418408:predir = NULL
1459151418408:pretype = NULL
1459151418409:streetname = NULL
1459151418409:suftype = NULL
1459151418409:sufdir = NULL
1459151418410:sufqual = NULL
1459151418410:other = NULL
1459151418411:n = length(x)
1459151418411:# find house number
1459151418411:for (i in 1:n){
1459151418411:if (is.null(hn)) {
1459151418412:if (checkhn(x[i])) hn = append(hn, x[i])
1459151418412:}
1459151418413:else next
1459151418413:}
1459151418414:# find street name
1459151418414:for (i in 1:n){
1459151418414:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459151418415:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459151418415:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) {
1459151418416:if (is.null(streetname)) {
1459151418416:streetname = append(streetname, x[i])
1459151418417:k = i
1459151418417:}
1459151418417:else {
1459151418418:j = k + 1
1459151418419:if (i == j) {
1459151418420:streetname = append(streetname, x[i])
1459151418420:j = j + 1
1459151418422:}
1459151418423:else other = append(other, x[i])
1459151418424:}
1459151418425:}
1459151418425:}
1459151418427:# find prefix qualifier
1459151418428:for (i in 1:n){
1459151418429:if (is.null(prequal) & i < k){
1459151418429:if (checkprefixqual(x[i])) prequal = x[i]
1459151418430:}
1459151418430:else next
1459151418431:}
1459151418432:# find prefix direction
1459151418432:for (i in 1:n){
1459151418433:if (is.null(predir) & i < k){
1459151418433:if (checkdir(x[i])) predir = x[i]
1459151418434:}
1459151418434:else next
1459151418435:}
1459151418435:# find prefix name type
1459151418436:for (i in 1:n){
1459151418437:if (is.null(pretype) & i < k){
1459151418437:if (checkprefixtype(x[i])) pretype = x[i]
1459151418439:}
1459151418439:else next
1459151418440:}
1459151418441:# find suffix name type
1459151418441:for (i in 1:n){
1459151418442:if (is.null(suftype) & i > k){
1459151418443:if (checksuffixtype(x[i])) suftype = x[i]
1459151418443:}
1459151418444:else next
1459151418444:}
1459151418445:# find suffix direction
1459151418446:for (i in 1:n){
1459151418447:if (is.null(sufdir) & i > k){
1459151418447:if (checkdir(x[i])) sufdir = x[i]
1459151418448:}
1459151418448:else next
1459151418449:}
1459151418450:# find suffix qualifier
1459151418451:for (i in 1:n){
1459151418452:if (is.null(sufqual) & i > k){
1459151418452:if (checksuffixqual(x[i])) sufqual = x[i]
1459151418453:}
1459151418454:else next
1459151418454:}
1459151418456:return(c("hn" = hn, prequal = prequal, predir = predir, pretype = pretype,
1459151418456:streetname = streetname, suftype = suftype, sufdir = sufdir,
1459151418457:sufqual = sufqual, other = other))
1459151418458:}
1459151429298:a vector of characters, output 9 parts
1459151429299:locsep = function(x){
1459151429299:# first setup these 9 parts
1459151429300:hn = NULL
1459151429300:prequal = NULL
1459151429301:predir = NULL
1459151429301:pretype = NULL
1459151429302:streetname = NULL
1459151429303:suftype = NULL
1459151429303:sufdir = NULL
1459151429304:sufqual = NULL
1459151429304:other = NULL
1459151429305:n = length(x)
1459151429305:# find house number
1459151429306:for (i in 1:n){
1459151429306:if (is.null(hn)) {
1459151429306:if (checkhn(x[i])) hn = append(hn, x[i])
1459151429307:}
1459151429307:else next
1459151429307:}
1459151429308:# find street name
1459151429310:for (i in 1:n){
1459151429310:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459151429311:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459151429312:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) {
1459151429312:if (is.null(streetname)) {
1459151429313:streetname = append(streetname, x[i])
1459151429313:k = i
1459151429313:}
1459151429314:else {
1459151429314:j = k + 1
1459151429315:if (i == j) {
1459151429315:streetname = append(streetname, x[i])
1459151429316:j = j + 1
1459151429316:}
1459151429316:else other = append(other, x[i])
1459151429317:}
1459151429317:}
1459151429318:}
1459151429319:# find prefix qualifier
1459151429320:for (i in 1:n){
1459151429320:if (is.null(prequal) & i < k){
1459151429321:if (checkprefixqual(x[i])) prequal = x[i]
1459151429322:}
1459151429322:else next
1459151429323:}
1459151429323:# find prefix direction
1459151429324:for (i in 1:n){
1459151429324:if (is.null(predir) & i < k){
1459151429325:if (checkdir(x[i])) predir = x[i]
1459151429325:}
1459151429326:else next
1459151429326:}
1459151429327:# find prefix name type
1459151429328:for (i in 1:n){
1459151429328:if (is.null(pretype) & i < k){
1459151429329:if (checkprefixtype(x[i])) pretype = x[i]
1459151429329:}
1459151429330:else next
1459151429330:}
1459151429331:# find suffix name type
1459151429332:for (i in 1:n){
1459151429333:if (is.null(suftype) & i > k){
1459151429333:if (checksuffixtype(x[i])) suftype = x[i]
1459151429334:}
1459151429334:else next
1459151429335:}
1459151429337:# find suffix direction
1459151429337:for (i in 1:n){
1459151429338:if (is.null(sufdir) & i > k){
1459151429338:if (checkdir(x[i])) sufdir = x[i]
1459151429339:}
1459151429340:else next
1459151429340:}
1459151429341:# find suffix qualifier
1459151429342:for (i in 1:n){
1459151429343:if (is.null(sufqual) & i > k){
1459151429343:if (checksuffixqual(x[i])) sufqual = x[i]
1459151429344:}
1459151429345:else next
1459151429346:}
1459151429347:return(c("hn" = hn, "prequal" = prequal, predir = predir, pretype = pretype,
1459151429348:streetname = streetname, suftype = suftype, sufdir = sufdir,
1459151429348:sufqual = sufqual, other = other))
1459151429349:}
1459151432877:locsep)b
1459151436869:locsep(b)
1459151494273:print(NULL)
1459151501651:locsep = function(x){
1459151501651:# first setup these 9 parts
1459151501652:hn = NULL
1459151501652:prequal = NULL
1459151501652:predir = NULL
1459151501652:pretype = NULL
1459151501653:streetname = NULL
1459151501653:suftype = NULL
1459151501653:sufdir = NULL
1459151501654:sufqual = NULL
1459151501654:other = NULL
1459151501655:n = length(x)
1459151501655:# find house number
1459151501655:for (i in 1:n){
1459151501656:if (is.null(hn)) {
1459151501656:if (checkhn(x[i])) hn = append(hn, x[i])
1459151501656:}
1459151501657:else next
1459151501657:}
1459151501658:# find street name
1459151501658:for (i in 1:n){
1459151501659:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459151501659:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459151501659:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) {
1459151501660:if (is.null(streetname)) {
1459151501660:streetname = append(streetname, x[i])
1459151501661:k = i
1459151501661:}
1459151501662:else {
1459151501663:j = k + 1
1459151501663:if (i == j) {
1459151501664:streetname = append(streetname, x[i])
1459151501665:j = j + 1
1459151501665:}
1459151501666:else other = append(other, x[i])
1459151501667:}
1459151501667:}
1459151501668:}
1459151501668:# find prefix qualifier
1459151501669:for (i in 1:n){
1459151501669:if (is.null(prequal) & i < k){
1459151501670:if (checkprefixqual(x[i])) prequal = x[i]
1459151501670:}
1459151501671:else next
1459151501672:}
1459151501673:# find prefix direction
1459151501674:for (i in 1:n){
1459151501675:if (is.null(predir) & i < k){
1459151501675:if (checkdir(x[i])) predir = x[i]
1459151501676:}
1459151501676:else next
1459151501677:}
1459151501678:# find prefix name type
1459151501678:for (i in 1:n){
1459151501679:if (is.null(pretype) & i < k){
1459151501679:if (checkprefixtype(x[i])) pretype = x[i]
1459151501681:}
1459151501681:else next
1459151501682:}
1459151501683:# find suffix name type
1459151501684:for (i in 1:n){
1459151501684:if (is.null(suftype) & i > k){
1459151501685:if (checksuffixtype(x[i])) suftype = x[i]
1459151501686:}
1459151501686:else next
1459151501687:}
1459151501688:# find suffix direction
1459151501688:for (i in 1:n){
1459151501689:if (is.null(sufdir) & i > k){
1459151501690:if (checkdir(x[i])) sufdir = x[i]
1459151501690:}
1459151501691:else next
1459151501692:}
1459151501693:# find suffix qualifier
1459151501693:for (i in 1:n){
1459151501694:if (is.null(sufqual) & i > k){
1459151501695:if (checksuffixqual(x[i])) sufqual = x[i]
1459151501695:}
1459151501696:else next
1459151501697:}
1459151501698:return(c(hn = hn, print(prequal), predir = predir, pretype = pretype,
1459151501699:streetname = streetname, suftype = suftype, sufdir = sufdir,
1459151501699:sufqual = sufqual, other = other))
1459151501700:}
1459151508453:locsep(b)
1459151532807:locsep = function(x){
1459151532808:# first setup these 9 parts
1459151532809:hn = NULL
1459151532809:prequal = NULL
1459151532809:predir = NULL
1459151532809:pretype = NULL
1459151532809:streetname = NULL
1459151532810:suftype = NULL
1459151532810:sufdir = NULL
1459151532811:sufqual = NULL
1459151532811:other = NULL
1459151532811:n = length(x)
1459151532812:# find house number
1459151532812:for (i in 1:n){
1459151532812:if (is.null(hn)) {
1459151532813:if (checkhn(x[i])) hn = append(hn, x[i])
1459151532813:}
1459151532813:else next
1459151532814:}
1459151532815:# find street name
1459151532815:for (i in 1:n){
1459151532815:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459151532816:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459151532816:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) {
1459151532816:if (is.null(streetname)) {
1459151532817:streetname = append(streetname, x[i])
1459151532817:k = i
1459151532818:}
1459151532820:else {
1459151532820:j = k + 1
1459151532821:if (i == j) {
1459151532823:streetname = append(streetname, x[i])
1459151532824:j = j + 1
1459151532824:}
1459151532825:else other = append(other, x[i])
1459151532825:}
1459151532826:}
1459151532827:}
1459151532828:# find prefix qualifier
1459151532829:for (i in 1:n){
1459151532829:if (is.null(prequal) & i < k){
1459151532830:if (checkprefixqual(x[i])) prequal = x[i]
1459151532830:}
1459151532831:else next
1459151532832:}
1459151532833:# find prefix direction
1459151532833:for (i in 1:n){
1459151532834:if (is.null(predir) & i < k){
1459151532834:if (checkdir(x[i])) predir = x[i]
1459151532835:}
1459151532835:else next
1459151532836:}
1459151532837:# find prefix name type
1459151532837:for (i in 1:n){
1459151532838:if (is.null(pretype) & i < k){
1459151532839:if (checkprefixtype(x[i])) pretype = x[i]
1459151532839:}
1459151532840:else next
1459151532841:}
1459151532842:# find suffix name type
1459151532842:for (i in 1:n){
1459151532843:if (is.null(suftype) & i > k){
1459151532843:if (checksuffixtype(x[i])) suftype = x[i]
1459151532844:}
1459151532845:else next
1459151532845:}
1459151532846:# find suffix direction
1459151532847:for (i in 1:n){
1459151532847:if (is.null(sufdir) & i > k){
1459151532848:if (checkdir(x[i])) sufdir = x[i]
1459151532849:}
1459151532849:else next
1459151532850:}
1459151532851:# find suffix qualifier
1459151532852:for (i in 1:n){
1459151532852:if (is.null(sufqual) & i > k){
1459151532853:if (checksuffixqual(x[i])) sufqual = x[i]
1459151532854:}
1459151532855:else next
1459151532856:}
1459151532857:return(print(c(hn = hn, prequal, predir = predir, pretype = pretype,
1459151532858:streetname = streetname, suftype = suftype, sufdir = sufdir,
1459151532858:sufqual = sufqual, other = other)))
1459151532859:}
1459151539840:locsep(b)
1459151554759:length(locsep(b))
1459151638665:as.list(c(2,3,"asdf"))
1459151662538:locsep = function(x){
1459151662539:# first setup these 9 parts
1459151662539:hn = NULL
1459151662540:prequal = NULL
1459151662540:predir = NULL
1459151662541:pretype = NULL
1459151662541:streetname = NULL
1459151662542:suftype = NULL
1459151662542:sufdir = NULL
1459151662543:sufqual = NULL
1459151662543:other = NULL
1459151662544:n = length(x)
1459151662544:# find house number
1459151662545:for (i in 1:n){
1459151662545:if (is.null(hn)) {
1459151662546:if (checkhn(x[i])) hn = append(hn, x[i])
1459151662547:}
1459151662547:else next
1459151662548:}
1459151662550:# find street name
1459151662552:for (i in 1:n){
1459151662553:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459151662554:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459151662555:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) {
1459151662555:if (is.null(streetname)) {
1459151662556:streetname = append(streetname, x[i])
1459151662557:k = i
1459151662558:}
1459151662558:else {
1459151662559:j = k + 1
1459151662560:if (i == j) {
1459151662561:streetname = append(streetname, x[i])
1459151662562:j = j + 1
1459151662563:}
1459151662564:else other = append(other, x[i])
1459151662565:}
1459151662568:}
1459151662569:}
1459151662571:# find prefix qualifier
1459151662571:for (i in 1:n){
1459151662572:if (is.null(prequal) & i < k){
1459151662573:if (checkprefixqual(x[i])) prequal = x[i]
1459151662574:}
1459151662575:else next
1459151662576:}
1459151662578:# find prefix direction
1459151662579:for (i in 1:n){
1459151662580:if (is.null(predir) & i < k){
1459151662581:if (checkdir(x[i])) predir = x[i]
1459151662582:}
1459151662583:else next
1459151662584:}
1459151662586:# find prefix name type
1459151662588:for (i in 1:n){
1459151662589:if (is.null(pretype) & i < k){
1459151662590:if (checkprefixtype(x[i])) pretype = x[i]
1459151662591:}
1459151662593:else next
1459151662594:}
1459151662597:# find suffix name type
1459151662599:for (i in 1:n){
1459151662600:if (is.null(suftype) & i > k){
1459151662601:if (checksuffixtype(x[i])) suftype = x[i]
1459151662602:}
1459151662604:else next
1459151662605:}
1459151662608:# find suffix direction
1459151662610:for (i in 1:n){
1459151662611:if (is.null(sufdir) & i > k){
1459151662613:if (checkdir(x[i])) sufdir = x[i]
1459151662615:}
1459151662616:else next
1459151662618:}
1459151662622:# find suffix qualifier
1459151662625:for (i in 1:n){
1459151662627:if (is.null(sufqual) & i > k){
1459151662629:if (checksuffixqual(x[i])) sufqual = x[i]
1459151662630:}
1459151662632:else next
1459151662634:}
1459151662637:return(as.list(c(hn = hn, prequal = prequal, predir = predir, pretype = pretype,
1459151662639:streetname = streetname, suftype = suftype, sufdir = sufdir,
1459151662641:sufqual = sufqual, other = other)))
1459151662646:}
1459151668550:locsep(b)
1459151845889:hn = NULL
1459151845890:prequal = NULL
1459151845891:predir = NULL
1459151845891:pretype = NULL
1459151845892:streetname = NULL
1459151845894:suftype = NULL
1459151845896:sufdir = NULL
1459151845897:sufqual = NULL
1459151845897:other = NULL
1459151845898:n = length(x)
1459151845899:# find street name
1459151845899:for (i in 1:n){
1459151845901:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459151845902:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459151845902:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) {
1459151845903:if (is.null(streetname)) {
1459151845903:streetname = append(streetname, x[i])
1459151845904:k = i
1459151845904:}
1459151845904:else {
1459151845905:j = k + 1
1459151845905:if (i == j) {
1459151845906:streetname = append(streetname, x[i])
1459151845906:j = j + 1
1459151845907:}
1459151845907:else other = append(other, x[i])
1459151845907:}
1459151845908:}
1459151845908:}
1459151845914:# find house number
1459151845914:for (i in 1:n){
1459151845914:if (is.null(hn)) {
1459151845915:if (checkhn(x[i])) hn = append(hn, x[i])
1459151845915:}
1459151845915:else if (checkhn(x[i])) hn = append(other, x[i])
1459151845916:}
1459151849532:hn
1459151855046:streetname
1459152006168:checkhn
1459152013938:checkhn("asdf")
1459152017183:checkhn("234")
1459152038259:# first setup these 9 parts
1459152038260:hn = NULL
1459152038260:prequal = NULL
1459152038261:predir = NULL
1459152038261:pretype = NULL
1459152038262:streetname = NULL
1459152038262:suftype = NULL
1459152038263:sufdir = NULL
1459152038263:sufqual = NULL
1459152038264:other = NULL
1459152038264:n = length(x)
1459152038265:# find street name
1459152038266:for (i in 1:n){
1459152038266:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459152038266:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459152038267:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) {
1459152038267:if (is.null(streetname)) {
1459152038267:streetname = append(streetname, x[i])
1459152038267:k = i
1459152038268:}
1459152038268:else {
1459152038268:j = k + 1
1459152038269:if (i == j) {
1459152038270:streetname = append(streetname, x[i])
1459152038271:j = j + 1
1459152038271:}
1459152038273:else other = append(other, x[i])
1459152038274:}
1459152038274:}
1459152038275:}
1459152038283:# find house number
1459152038283:for (i in 1:n){
1459152038284:if (checkhn(x[i])) {
1459152038284:if (is.null(hn)) hn = x[i]
1459152038284:}
1459152038284:else  other = append(other, x[i])
1459152038285:}
1459152041096:hn
1459152042126:other
1459152124091:# first setup these 9 parts
1459152124092:hn = NULL
1459152124093:prequal = NULL
1459152124094:predir = NULL
1459152124094:pretype = NULL
1459152124095:streetname = NULL
1459152124095:suftype = NULL
1459152124097:sufdir = NULL
1459152124098:sufqual = NULL
1459152124099:other = NULL
1459152124100:n = length(x)
1459152124101:# find street name
1459152124102:for (i in 1:n){
1459152124104:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459152124105:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459152124105:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) {
1459152124106:if (is.null(streetname)) {
1459152124107:streetname = append(streetname, x[i])
1459152124107:k = i
1459152124108:}
1459152124108:else {
1459152124109:j = k + 1
1459152124109:if (i == j) {
1459152124110:streetname = append(streetname, x[i])
1459152124110:j = j + 1
1459152124111:}
1459152124111:else other = append(other, x[i])
1459152124112:}
1459152124112:}
1459152124113:}
1459152124119:# find house number
1459152124119:for (i in 1:n){
1459152124119:if (is.null(hn)) {
1459152124120:if (checkhn(x[i])) hn = x[i]
1459152124120:}
1459152124120:else if (checkhnx[i]) other = append(other, x[i])
1459152124120:}
1459152132804:hese 9 parts
1459152132805:hn = NULL
1459152132806:prequal = NULL
1459152132806:predir = NULL
1459152132806:pretype = NULL
1459152132807:streetname = NULL
1459152132807:suftype = NULL
1459152132808:sufdir = NULL
1459152132808:sufqual = NULL
1459152132808:other = NULL
1459152132809:n = length(x)
1459152132810:# find street name
1459152132810:for (i in 1:n){
1459152132810:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459152132811:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459152132811:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) {
1459152132811:if (is.null(streetname)) {
1459152132812:streetname = append(streetname, x[i])
1459152132812:k = i
1459152132812:}
1459152132813:else {
1459152132813:j = k + 1
1459152132813:if (i == j) {
1459152132814:streetname = append(streetname, x[i])
1459152132814:j = j + 1
1459152132814:}
1459152132815:else other = append(other, x[i])
1459152132815:}
1459152132816:}
1459152132816:}
1459152132826:# find house number
1459152132827:for (i in 1:n){
1459152132827:if (is.null(hn)) {
1459152132828:if (checkhn(x[i])) hn = x[i]
1459152132828:}
1459152132828:else if (checkhn[i]) other = append(other, x[i])
1459152132829:}
1459152152380:hn = NULL
1459152152381:prequal = NULL
1459152152381:predir = NULL
1459152152382:pretype = NULL
1459152152382:streetname = NULL
1459152152382:suftype = NULL
1459152152383:sufdir = NULL
1459152152383:sufqual = NULL
1459152152383:other = NULL
1459152152384:n = length(x)
1459152152384:# find street name
1459152152385:for (i in 1:n){
1459152152385:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459152152385:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459152152386:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) {
1459152152387:if (is.null(streetname)) {
1459152152388:streetname = append(streetname, x[i])
1459152152388:k = i
1459152152388:}
1459152152389:else {
1459152152389:j = k + 1
1459152152390:if (i == j) {
1459152152390:streetname = append(streetname, x[i])
1459152152390:j = j + 1
1459152152391:}
1459152152392:else other = append(other, x[i])
1459152152393:}
1459152152393:}
1459152152394:}
1459152152400:# find house number
1459152152400:for (i in 1:n){
1459152152401:if (is.null(hn)) {
1459152152401:if (checkhn(x[i])) hn = x[i]
1459152152401:}
1459152152402:else if (checkhn(x[i])) other = append(other, x[i])
1459152152402:}
1459152154610:hn
1459152156368:other
1459152159661:streetname
1459152275578:locsep(b)$hn
1459152280719:locsep(b)$prequal
1459152289367:locsep(b)$streetname
1459152296627:locsep = function(x){
1459152296628:# first setup these 9 parts
1459152296629:hn = NULL
1459152296629:prequal = NULL
1459152296630:predir = NULL
1459152296630:pretype = NULL
1459152296630:streetname = NULL
1459152296631:suftype = NULL
1459152296631:sufdir = NULL
1459152296631:sufqual = NULL
1459152296632:other = NULL
1459152296632:n = length(x)
1459152296633:# find street name
1459152296633:for (i in 1:n){
1459152296633:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459152296634:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459152296634:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) {
1459152296635:if (is.null(streetname)) {
1459152296635:streetname = append(streetname, x[i])
1459152296636:k = i
1459152296636:}
1459152296636:else {
1459152296637:j = k + 1
1459152296639:if (i == j) {
1459152296639:streetname = append(streetname, x[i])
1459152296640:j = j + 1
1459152296640:}
1459152296640:else other = append(other, x[i])
1459152296641:}
1459152296642:}
1459152296642:}
1459152296644:# find house number
1459152296645:for (i in 1:n){
1459152296645:if (is.null(hn)) {
1459152296646:if (checkhn(x[i])) hn = x[i]
1459152296647:}
1459152296649:else if (checkhn(x[i])) other = append(other, x[i])
1459152296649:}
1459152296650:# find prefix qualifier
1459152296651:for (i in 1:n){
1459152296651:if (is.null(prequal) & i < k){
1459152296652:if (checkprefixqual(x[i])) prequal = x[i]
1459152296653:}
1459152296653:else next
1459152296654:}
1459152296655:# find prefix direction
1459152296655:for (i in 1:n){
1459152296656:if (is.null(predir) & i < k){
1459152296656:if (checkdir(x[i])) predir = x[i]
1459152296657:}
1459152296657:else next
1459152296658:}
1459152296659:# find prefix name type
1459152296659:for (i in 1:n){
1459152296660:if (is.null(pretype) & i < k){
1459152296660:if (checkprefixtype(x[i])) pretype = x[i]
1459152296661:}
1459152296662:else next
1459152296662:}
1459152296663:# find suffix name type
1459152296664:for (i in 1:n){
1459152296664:if (is.null(suftype) & i > k){
1459152296665:if (checksuffixtype(x[i])) suftype = x[i]
1459152296666:}
1459152296666:else next
1459152296667:}
1459152296668:# find suffix direction
1459152296668:for (i in 1:n){
1459152296669:if (is.null(sufdir) & i > k){
1459152296670:if (checkdir(x[i])) sufdir = x[i]
1459152296670:}
1459152296671:else next
1459152296672:}
1459152296673:# find suffix qualifier
1459152296674:for (i in 1:n){
1459152296674:if (is.null(sufqual) & i > k){
1459152296675:if (checksuffixqual(x[i])) sufqual = x[i]
1459152296675:}
1459152296676:else next
1459152296677:}
1459152296678:return(as.list(c(hn = hn, prequal = prequal, predir = predir, pretype = pretype,
1459152296679:streetname = streetname, suftype = suftype, sufdir = sufdir,
1459152296680:sufqual = sufqual, other = other)))
1459152296680:}
1459152302670:locsep(b)
1459152331507:locsep(b)other
1459152335479:locsep(b)$other
1459152337562:locsep(b)$other1
1459152350564:hn = NULL
1459152350565:prequal = NULL
1459152350566:predir = NULL
1459152350567:pretype = NULL
1459152350568:streetname = NULL
1459152350570:suftype = NULL
1459152350571:sufdir = NULL
1459152350571:sufqual = NULL
1459152350572:other = NULL
1459152350573:n = length(x)
1459152350577:# find street name
1459152350582:for (i in 1:n){
1459152350583:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459152350583:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459152350584:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) {
1459152350585:if (is.null(streetname)) {
1459152350586:streetname = append(streetname, x[i])
1459152350587:k = i
1459152350587:}
1459152350588:else {
1459152350589:j = k + 1
1459152350589:if (i == j) {
1459152350589:streetname = append(streetname, x[i])
1459152350589:j = j + 1
1459152350590:}
1459152350590:else other = append(other, x[i])
1459152350590:}
1459152350591:}
1459152350591:}
1459152350594:# find house number
1459152350595:for (i in 1:n){
1459152350595:if (is.null(hn)) {
1459152350595:if (checkhn(x[i])) hn = x[i]
1459152350595:}
1459152350596:else if (checkhn(x[i])) other = append(other, x[i])
1459152350596:}
1459152350598:# find prefix qualifier
1459152350598:for (i in 1:n){
1459152350598:if (is.null(prequal) & i < k){
1459152350599:if (checkprefixqual(x[i])) prequal = x[i]
1459152350599:}
1459152350600:else next
1459152350600:}
1459152350601:# find prefix direction
1459152350602:for (i in 1:n){
1459152350602:if (is.null(predir) & i < k){
1459152350603:if (checkdir(x[i])) predir = x[i]
1459152350603:}
1459152350604:else next
1459152350604:}
1459152350606:# find prefix name type
1459152350606:for (i in 1:n){
1459152350606:if (is.null(pretype) & i < k){
1459152350607:if (checkprefixtype(x[i])) pretype = x[i]
1459152350607:}
1459152350607:else next
1459152350608:}
1459152350610:# find suffix name type
1459152350610:for (i in 1:n){
1459152350611:if (is.null(suftype) & i > k){
1459152350611:if (checksuffixtype(x[i])) suftype = x[i]
1459152350611:}
1459152350612:else next
1459152350612:}
1459152350613:# find suffix direction
1459152350614:for (i in 1:n){
1459152350614:if (is.null(sufdir) & i > k){
1459152350615:if (checkdir(x[i])) sufdir = x[i]
1459152350615:}
1459152350615:else next
1459152350616:}
1459152350617:# find suffix qualifier
1459152350617:for (i in 1:n){
1459152350618:if (is.null(sufqual) & i > k){
1459152350618:if (checksuffixqual(x[i])) sufqual = x[i]
1459152350618:}
1459152350619:else next
1459152350619:}
1459152353837:other
1459152373598:as.vector(c(c("asdf","asdf"),'asdf'))
1459152393606:c(a = c("asd","e"), b = "asdf")
1459152399292:c$b
1459152402024:c$a
1459152417021:as.list(a = c("asd","e"), b = "asdf")
1459152433298:as.list(c(a = c("asd","e"), b = "asdf"))
1459152485247:d = c(a = c("asd","e"), b = "asdf")
1459152486866:d[1]
1459152488931:d[2]
1459152491028:d[3]
1459152622420:as.data.frame(c(hn = hn, prequal = prequal, predir = predir, pretype = pretype,
1459152622421:streetname = streetname, suftype = suftype, sufdir = sufdir,
1459152622421:sufqual = sufqual, other = other))
1459152638466:c(hn = hn, prequal = prequal, predir = predir, pretype = pretype,
1459152638467:streetname = streetname, suftype = suftype, sufdir = sufdir,
1459152638467:sufqual = sufqual, other = other)
1459152643009:as.data.frame(c(hn = hn, prequal = prequal, predir = predir, pretype = pretype,
1459152643010:streetname = streetname, suftype = suftype, sufdir = sufdir,
1459152643011:sufqual = sufqual, other = other))
1459152668496:data.frame()
1459152696670:result = data.frame()
1459152696671:result$hn = hn
1459152703665:result$hn
1459152708832:hn
1459152712231:result$hn = hn
1459152721014:result = data.frame(1,1)
1459152722164:result$hn = hn
1459152724512:result
1459152742531:result$other = other
1459152769445:other
1459152801005:paste(other)
1459152812298:paste("unit","3")
1459152852355:paste(NULL, 'asdf')
1459152929101:trimws(" asdf asdf ")
1459153075864:data.frame(1,1)
1459153091417:result = data.frame()
1459153097164:data.frame()
1459153103092:result$hn = hn
1459153148787:result = data.frame(c("hn", "prequal"))
1459153150889:result
1459153193090:result = data.frame(1)
1459153196730:result
1459153205920:result = data.frame(hn, prequal)
1459153210655:result = data.frame(hn)
1459153213865:result
1459153233776:result$prequal = prequal
1459153235646:result
1459153241357:result$prequal
1459153387916:result1 = data.frame(predir)
1459153391686:result1
1459153402695:rbind(result,result1)
1459153418483:result1$hn = NULL
1459153429714:result1$prequal = NULL
1459153438602:result$predir = NULL
1459153440908:rbind(result,result1)
1459153444531:result
1459153446799:result1
1459153460673:cbind(result,result1)
1459153488488:cbind(data.frame(prequal), reault1)
1459153493514:cbind(data.frame(prequal), result1)
1459153505847:data.frame(prequal)
1459153539767:data.frame(NA)
1459153549346:cbind(data.frame(prequal = NA), result1)
1459153602613:data.frame(other)
1459153607916:other
1459153617129:# first setup these 9 parts
1459153617130:hn = NULL
1459153617131:prequal = NULL
1459153617131:predir = NULL
1459153617131:pretype = NULL
1459153617132:streetname = NULL
1459153617132:suftype = NULL
1459153617133:sufdir = NULL
1459153617134:sufqual = NULL
1459153617135:other = NULL
1459153617136:n = length(x)
1459153617136:# find street name and other
1459153617136:for (i in 1:n){
1459153617137:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459153617137:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459153617137:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) {
1459153617137:if (is.null(streetname)) {
1459153617138:streetname = paste(streetname, x[i])
1459153617138:k = i
1459153617138:}
1459153617139:else {
1459153617139:j = k + 1
1459153617140:if (i == j) {
1459153617142:streetname = paste(streetname, x[i])
1459153617142:j = j + 1
1459153617142:}
1459153617143:else other = paste(other, x[i])
1459153617143:}
1459153617143:}
1459153617144:}
1459153617155:streetname = trimws(streetname)
1459153617156:other = trimws(other)
1459153617157:# find house number
1459153617157:for (i in 1:n){
1459153617157:if (is.null(hn)) {
1459153617158:if (checkhn(x[i])) hn = x[i]
1459153617158:}
1459153617158:else if (checkhn(x[i])) other = paste(other, x[i])
1459153617159:}
1459153617161:other = trimws(other)
1459153617162:# find prefix qualifier
1459153617163:for (i in 1:n){
1459153617164:if (is.null(prequal) & i < k){
1459153617174:if (checkprefixqual(x[i])) prequal = x[i]
1459153617174:}
1459153617175:else next
1459153617175:}
1459153617176:# find prefix direction
1459153617176:for (i in 1:n){
1459153617177:if (is.null(predir) & i < k){
1459153617177:if (checkdir(x[i])) predir = x[i]
1459153617178:}
1459153617178:else next
1459153617178:}
1459153617179:# find prefix name type
1459153617180:for (i in 1:n){
1459153617180:if (is.null(pretype) & i < k){
1459153617180:if (checkprefixtype(x[i])) pretype = x[i]
1459153617181:}
1459153617181:else next
1459153617181:}
1459153617183:# find suffix name type
1459153617183:for (i in 1:n){
1459153617184:if (is.null(suftype) & i > k){
1459153617184:if (checksuffixtype(x[i])) suftype = x[i]
1459153617184:}
1459153617185:else next
1459153617186:}
1459153617187:# find suffix direction
1459153617188:for (i in 1:n){
1459153617188:if (is.null(sufdir) & i > k){
1459153617188:if (checkdir(x[i])) sufdir = x[i]
1459153617189:}
1459153617189:else next
1459153617190:}
1459153617191:# find suffix qualifier
1459153617191:for (i in 1:n){
1459153617192:if (is.null(sufqual) & i > k){
1459153617192:if (checksuffixqual(x[i])) sufqual = x[i]
1459153617193:}
1459153617193:else next
1459153617193:}
1459153619894:other
1459153631237:data.frame(oter)
1459153638044:data.frame(other)
1459154063822:locsep = function(x){
1459154063824:# first setup these 9 parts
1459154063824:hn = NULL
1459154063825:prequal = NULL
1459154063825:predir = NULL
1459154063825:pretype = NULL
1459154063826:streetname = NULL
1459154063826:suftype = NULL
1459154063826:sufdir = NULL
1459154063827:sufqual = NULL
1459154063827:other = NULL
1459154063828:n = length(x)
1459154063828:# find street name and other
1459154063829:for (i in 1:n){
1459154063829:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459154063830:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459154063830:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) {
1459154063831:if (is.null(streetname)) {
1459154063832:streetname = paste(streetname, x[i])
1459154063832:k = i
1459154063833:}
1459154063833:else {
1459154063834:j = k + 1
1459154063835:if (i == j) {
1459154063836:streetname = paste(streetname, x[i])
1459154063837:j = j + 1
1459154063838:}
1459154063838:else other = paste(other, x[i])
1459154063839:}
1459154063839:}
1459154063840:}
1459154063840:streetname = trimws(streetname)
1459154063841:other = trimws(other)
1459154063842:# find house number
1459154063843:for (i in 1:n){
1459154063844:if (is.null(hn)) {
1459154063844:if (checkhn(x[i])) hn = x[i]
1459154063845:}
1459154063846:else if (checkhn(x[i])) other = paste(other, x[i])
1459154063847:}
1459154063848:other = trimws(other)
1459154063849:# find prefix qualifier
1459154063850:for (i in 1:n){
1459154063850:if (is.null(prequal) & i < k){
1459154063851:if (checkprefixqual(x[i])) prequal = x[i]
1459154063852:}
1459154063853:else next
1459154063854:}
1459154063855:# find prefix direction
1459154063856:for (i in 1:n){
1459154063857:if (is.null(predir) & i < k){
1459154063857:if (checkdir(x[i])) predir = x[i]
1459154063858:}
1459154063859:else next
1459154063859:}
1459154063860:# find prefix name type
1459154063861:for (i in 1:n){
1459154063861:if (is.null(pretype) & i < k){
1459154063862:if (checkprefixtype(x[i])) pretype = x[i]
1459154063863:}
1459154063864:else next
1459154063864:}
1459154063866:# find suffix name type
1459154063866:for (i in 1:n){
1459154063867:if (is.null(suftype) & i > k){
1459154063868:if (checksuffixtype(x[i])) suftype = x[i]
1459154063868:}
1459154063869:else next
1459154063870:}
1459154063871:# find suffix direction
1459154063872:for (i in 1:n){
1459154063872:if (is.null(sufdir) & i > k){
1459154063873:if (checkdir(x[i])) sufdir = x[i]
1459154063874:}
1459154063874:else next
1459154063875:}
1459154063876:# find suffix qualifier
1459154063877:for (i in 1:n){
1459154063878:if (is.null(sufqual) & i > k){
1459154063879:if (checksuffixqual(x[i])) sufqual = x[i]
1459154063880:}
1459154063880:else next
1459154063881:}
1459154063882:if (is.null(hn)) hn = NA
1459154063883:if (is.null(prequal)) prequal = NA
1459154063884:if (is.null(predir)) predir = NA
1459154063885:if (is.null(pretype)) pretype = NA
1459154063886:if (is.null(streetname)) streetname = NA
1459154063887:if (is.null(suftype)) suftype = NA
1459154063888:if (is.null(sufdir)) sufdir = NA
1459154063889:if (is.null(sufqual)) sufqual = NA
1459154063890:if (is.null(other)) other = NA
1459154063891:hn = data.frame(hn)
1459154063892:prequal = data.frame(prequal)
1459154063893:predir = data.frame(predir)
1459154063893:pretype = data.frame(pretype)
1459154063894:streetname = data.frame(streetname)
1459154063895:suftype = data.frame(suftype)
1459154063896:sufdir = data.frame(sufdir)
1459154063897:sufqual = data.frame(sufqual)
1459154063898:other = data.frame(other)
1459154063900:result = cbind(hn, prequal, predir, pretype, streetname, suftype,
1459154063901:sufdir, sufqual, other)
1459154063902:return(result)
1459154063903:}
1459154068590:locsep(b)
1459154085756:class(locsep(b))
1459154114652:head(location_split)
1459154331264:location_split[1:2]
1459154334087:lapply(location_split[1:2], locsep)
1459154350577:lapply(location_split[[1]], locsep)
1459154366107:locsep(location_split[[1]])
1459154368992:b
1459154375728:location_split[[1]]
1459154391798:class(location_split[[1]])
1459154394179:class(b)
1459154402559:locsep(location_split[[2]])
1459154407328:locsep(b)
1459154425272:b = location_split[[1]]
1459154426988:b
1459154439886:x = b
1459154441281:hn = NULL
1459154441282:prequal = NULL
1459154441282:predir = NULL
1459154441282:pretype = NULL
1459154441283:streetname = NULL
1459154441283:suftype = NULL
1459154441284:sufdir = NULL
1459154441284:sufqual = NULL
1459154441284:other = NULL
1459154441285:n = length(x)
1459154443033:b
1459154448401:# find street name and other
1459154448402:for (i in 1:n){
1459154448403:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459154448403:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459154448403:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) {
1459154448404:if (is.null(streetname)) {
1459154448404:streetname = paste(streetname, x[i])
1459154448405:k = i
1459154448405:}
1459154448406:else {
1459154448406:j = k + 1
1459154448407:if (i == j) {
1459154448408:streetname = paste(streetname, x[i])
1459154448408:j = j + 1
1459154448409:}
1459154448410:else other = paste(other, x[i])
1459154448410:}
1459154448410:}
1459154448411:}
1459154453230:streetname
1459154456532:other
1459154462889:streetname = trimws(streetname)
1459154462891:other = trimws(other)
1459154469622:# find house number
1459154469622:for (i in 1:n){
1459154469623:if (is.null(hn)) {
1459154469623:if (checkhn(x[i])) hn = x[i]
1459154469623:}
1459154469623:else if (checkhn(x[i])) other = paste(other, x[i])
1459154469624:}
1459154469625:other = trimws(other)
1459154472591:hn
1459154473683:other
1459154493946:hn = NULL
1459154493947:prequal = NULL
1459154493947:predir = NULL
1459154493947:pretype = NULL
1459154493948:streetname = NULL
1459154493948:suftype = NULL
1459154493949:sufdir = NULL
1459154493949:sufqual = NULL
1459154493950:other = NULL
1459154493951:n = length(x)
1459154493952:# find street name and other
1459154493952:for (i in 1:n){
1459154493952:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459154493953:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459154493954:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) {
1459154493954:if (is.null(streetname)) {
1459154493954:streetname = paste(streetname, x[i])
1459154493955:k = i
1459154493955:}
1459154493955:else {
1459154493956:j = k + 1
1459154493956:if (i == j) {
1459154493958:streetname = paste(streetname, x[i])
1459154493959:j = j + 1
1459154493959:}
1459154493961:else other = paste(other, x[i])
1459154493962:}
1459154493963:}
1459154493963:}
1459154493967:streetname = trimws(streetname)
1459154493968:other = trimws(other)
1459154493969:# find house number
1459154493969:for (i in 1:n){
1459154493969:if (is.null(hn)) {
1459154493970:if (checkhn(x[i])) hn = x[i]
1459154493970:}
1459154493971:else if (checkhn(x[i])) other = paste(other, x[i])
1459154493972:}
1459154495571:other
1459154499553:streetname
1459154522806:# find house number
1459154522807:for (i in 1:n){
1459154522808:if (is.null(hn)) {
1459154522809:if (checkhn(x[i])) hn = x[i]
1459154522810:}
1459154522810:else if (checkhn(x[i])) other = paste(other, x[i])
1459154522811:else next
1459154522812:}
1459154524377:other
1459154532550:hn = NULL
1459154532551:prequal = NULL
1459154532551:predir = NULL
1459154532552:pretype = NULL
1459154532552:streetname = NULL
1459154532553:suftype = NULL
1459154532553:sufdir = NULL
1459154532553:sufqual = NULL
1459154532554:other = NULL
1459154532554:n = length(x)
1459154532555:# find street name and other
1459154532556:for (i in 1:n){
1459154532556:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459154532556:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459154532557:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) {
1459154532557:if (is.null(streetname)) {
1459154532557:streetname = paste(streetname, x[i])
1459154532558:k = i
1459154532558:}
1459154532558:else {
1459154532559:j = k + 1
1459154532559:if (i == j) {
1459154532559:streetname = paste(streetname, x[i])
1459154532560:j = j + 1
1459154532560:}
1459154532560:else other = paste(other, x[i])
1459154532561:}
1459154532562:}
1459154532562:}
1459154532564:streetname = trimws(streetname)
1459154532565:other = trimws(other)
1459154534175:other
1459154545626:class(other)
1459154561678:data.frame(oter)
1459154564631:data.frame(other)
1459154590267:# find prefix qualifier
1459154590268:for (i in 1:n){
1459154590268:if (is.null(prequal) & i < k){
1459154590269:if (checkprefixqual(x[i])) prequal = x[i]
1459154590270:}
1459154590270:else next
1459154590271:}
1459154594308:prequal
1459154607120:# find prefix qualifier
1459154607121:for (i in 1:n){
1459154607121:if (is.null(prequal) & i < k){
1459154607122:if (checkprefixqual(x[i])) prequal = paste(x[i], prequal)
1459154607122:}
1459154607123:else next
1459154607124:}
1459154609383:prequal
1459154624826:other = NULL
1459154626531:other
1459154953219:"asdf" %in% "asdf wer"
1459154985673:a = append("asdf","eee")
1459154986542:a
1459154991735:"asdf" %in% a
1459154998354:paste(a)
1459155083541:paste(a[1:length(1)])
1459155085903:paste(a[1:length(a)])
1459155092723:paste0(a[1:length(a)])
1459155105638:paste('asdf',"asdfasdf")
1459155109642:a[1:2]
1459155116567:paste(a[1:2])
1459155125954:paste(a)
1459155136531:paste(a[1],a[1])
1459155138736:paste(a[1],a[2])
1459155150568:paste(a[1],...,a[length(a)])
1459155243416:paste0(a[1:2])
1459155250601:paste(a[1:2],collapse = T)
1459155267342:as.character(a)
1459155299377:paste(a)
1459155306943:paste(a, collapse = "")
1459155309431:paste(a, collapse = " ")
1459155559557:b
1459155631667:x
1459155636176:hn = NULL
1459155636176:prequal = NULL
1459155636177:predir = NULL
1459155636177:pretype = NULL
1459155636177:streetname = NULL
1459155636178:suftype = NULL
1459155636178:sufdir = NULL
1459155636179:sufqual = NULL
1459155636179:other = NULL
1459155636180:n = length(x)
1459155636180:# find street name and other
1459155636181:for (i in 1:n){
1459155636181:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459155636182:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459155636182:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) {
1459155636183:if (is.null(streetname)) {
1459155636183:streetname = append(streetname, x[i])
1459155636184:k = i
1459155636184:}
1459155636185:else {
1459155636185:j = i - 1
1459155636185:if (x[j] %in% streetname) {
1459155636186:streetname = append(streetname, x[i])
1459155636186:}
1459155636187:else other = append(other, x[i])
1459155636187:}
1459155636188:}
1459155636188:}
1459155636191:# find house number
1459155636191:for (i in 1:n){
1459155636191:if (is.null(hn)) {
1459155636192:if (checkhn(x[i])) hn = x[i]
1459155636192:}
1459155636192:else if (checkhn(x[i])) other = append(other, x[i])
1459155636192:else next
1459155636193:}
1459155636194:streetname = paste(streetname, collapse = " ")
1459155636194:other = paste(other, collapse = " ")
1459155639428:streetname
1459155640346:other
1459155657391:# find prefix qualifier
1459155657392:for (i in 1:n){
1459155657393:if (is.null(prequal) & i < k){
1459155657393:if (checkprefixqual(x[i])) prequal = x[i]
1459155657393:}
1459155657394:else next
1459155657394:}
1459155657395:# find prefix direction
1459155657396:for (i in 1:n){
1459155657396:if (is.null(predir) & i < k){
1459155657396:if (checkdir(x[i])) predir = x[i]
1459155657397:}
1459155657398:else next
1459155657399:}
1459155657400:# find prefix name type
1459155657400:for (i in 1:n){
1459155657400:if (is.null(pretype) & i < k){
1459155657401:if (checkprefixtype(x[i])) pretype = x[i]
1459155657401:}
1459155657401:else next
1459155657401:}
1459155657402:# find suffix name type
1459155657403:for (i in 1:n){
1459155657403:if (is.null(suftype) & i > k){
1459155657403:if (checksuffixtype(x[i])) suftype = x[i]
1459155657404:}
1459155657404:else next
1459155657405:}
1459155657406:# find suffix direction
1459155657406:for (i in 1:n){
1459155657408:if (is.null(sufdir) & i > k){
1459155657408:if (checkdir(x[i])) sufdir = x[i]
1459155657408:}
1459155657409:else next
1459155657409:}
1459155657410:# find suffix qualifier
1459155657410:for (i in 1:n){
1459155657410:if (is.null(sufqual) & i > k){
1459155657410:if (checksuffixqual(x[i])) sufqual = x[i]
1459155657411:}
1459155657411:else next
1459155657411:}
1459155661982:if (is.null(hn)) hn = NA
1459155661984:if (is.null(prequal)) prequal = NA
1459155661985:if (is.null(predir)) predir = NA
1459155661985:if (is.null(pretype)) pretype = NA
1459155661986:if (is.null(streetname)) streetname = NA
1459155661986:if (is.null(suftype)) suftype = NA
1459155661987:if (is.null(sufdir)) sufdir = NA
1459155661987:if (is.null(sufqual)) sufqual = NA
1459155661988:if (is.null(other)) other = NA
1459155671034:hn = data.frame(hn)
1459155671035:prequal = data.frame(prequal)
1459155671036:predir = data.frame(predir)
1459155671037:pretype = data.frame(pretype)
1459155671038:streetname = data.frame(streetname)
1459155671039:suftype = data.frame(suftype)
1459155671040:sufdir = data.frame(sufdir)
1459155671041:sufqual = data.frame(sufqual)
1459155671042:other = data.frame(other)
1459155675579:result = cbind(hn, prequal, predir, pretype, streetname, suftype,
1459155675580:sufdir, sufqual, other)
1459155678266:result
1459155722806:locsep = function(x){
1459155722806:# first setup these 9 parts
1459155722807:hn = NULL
1459155722808:prequal = NULL
1459155722808:predir = NULL
1459155722809:pretype = NULL
1459155722810:streetname = NULL
1459155722811:suftype = NULL
1459155722812:sufdir = NULL
1459155722813:sufqual = NULL
1459155722813:other = NULL
1459155722814:n = length(x)
1459155722816:# find street name and other
1459155722818:for (i in 1:n){
1459155722818:if (!checkhn(x[i]) & !checkdir(x[i]) & !checkprefixqual(x[i]) &
1459155722820:!checkprefixtype(x[i]) & !checkprefixqual(x[i]) &
1459155722822:!checksuffixqual(x[i]) & !checksuffixtype(x[i])) {
1459155722824:if (is.null(streetname)) {
1459155722825:streetname = append(streetname, x[i])
1459155722826:k = i
1459155722826:}
1459155722828:else {
1459155722828:j = i - 1
1459155722829:if (x[j] %in% streetname) {
1459155722829:streetname = append(streetname, x[i])
1459155722830:}
1459155722830:else other = append(other, x[i])
1459155722831:}
1459155722831:}
1459155722832:}
1459155722832:# find house number
1459155722833:for (i in 1:n){
1459155722834:if (is.null(hn)) {
1459155722834:if (checkhn(x[i])) hn = x[i]
1459155722835:}
1459155722835:else if (checkhn(x[i])) other = append(other, x[i])
1459155722836:else next
1459155722836:}
1459155722837:streetname = paste(streetname, collapse = " ")
1459155722838:other = paste(other, collapse = " ")
1459155722839:# find prefix qualifier
1459155722839:for (i in 1:n){
1459155722840:if (is.null(prequal) & i < k){
1459155722841:if (checkprefixqual(x[i])) prequal = x[i]
1459155722841:}
1459155722842:else next
1459155722843:}
1459155722844:# find prefix direction
1459155722845:for (i in 1:n){
1459155722845:if (is.null(predir) & i < k){
1459155722846:if (checkdir(x[i])) predir = x[i]
1459155722846:}
1459155722847:else next
1459155722848:}
1459155722849:# find prefix name type
1459155722849:for (i in 1:n){
1459155722850:if (is.null(pretype) & i < k){
1459155722851:if (checkprefixtype(x[i])) pretype = x[i]
1459155722851:}
1459155722852:else next
1459155722852:}
1459155722853:# find suffix name type
1459155722854:for (i in 1:n){
1459155722855:if (is.null(suftype) & i > k){
1459155722855:if (checksuffixtype(x[i])) suftype = x[i]
1459155722856:}
1459155722857:else next
1459155722857:}
1459155722859:# find suffix direction
1459155722859:for (i in 1:n){
1459155722860:if (is.null(sufdir) & i > k){
1459155722861:if (checkdir(x[i])) sufdir = x[i]
1459155722862:}
1459155722863:else next
1459155722863:}
1459155722865:# find suffix qualifier
1459155722865:for (i in 1:n){
1459155722866:if (is.null(sufqual) & i > k){
1459155722867:if (checksuffixqual(x[i])) sufqual = x[i]
1459155722867:}
1459155722868:else next
1459155722869:}
1459155722870:if (is.null(hn)) hn = ""
1459155722871:if (is.null(prequal)) prequal = ""
1459155722872:if (is.null(predir)) predir = ""
1459155722873:if (is.null(pretype)) pretype = ""
1459155722874:if (is.null(streetname)) streetname = ""
1459155722874:if (is.null(suftype)) suftype = ""
1459155722875:if (is.null(sufdir)) sufdir = ""
1459155722876:if (is.null(sufqual)) sufqual = ""
1459155722877:if (is.null(other)) other = ""
1459155722879:hn = data.frame(hn)
1459155722880:prequal = data.frame(prequal)
1459155722881:predir = data.frame(predir)
1459155722881:pretype = data.frame(pretype)
1459155722882:streetname = data.frame(streetname)
1459155722883:suftype = data.frame(suftype)
1459155722885:sufdir = data.frame(sufdir)
1459155722886:sufqual = data.frame(sufqual)
1459155722887:other = data.frame(other)
1459155722888:result = cbind(hn, prequal, predir, pretype, streetname, suftype,
1459155722889:sufdir, sufqual, other)
1459155722890:return(result)
1459155722891:}
1459155734066:locsep(location_split[[4]])
1459155739665:locsep(location_split[[43]])
1459155745820:locsep(location_split[[42]])
1459155763313:location_split[[42]]
1459155772609:lapply(location_split[[1]], locsep)
1459155787771:lapply(location_split[1], locsep)
1459155793114:lapply(location_split[1:4], locsep)
1459155856677:rindlapply(location_split[1:4], locsep)
1459155867761:lapply(lapply(location_split[1:4], locsep),rbind)
1459155899616:test = lapply(location_split[1:4], locsep)
1459155916131:lapply(test,rbind)
1459155925477:apply(test,1,rbind)
1459155929861:apply(test,2,rbind)
1459155983370:sapply(test,rbind)
1459155994311:lapply(test,cbind)
1459156006302:vapply(test,cbind)
1459156041359:test = lapply(location_split[1:4], fun = locsep)
1459156046290:test = lapply(location_split[1:4], FUN = locsep)
1459156048768:test
1459156052554:test = sapply(location_split[1:4], FUN = locsep)
1459156054222:test
1459156065420:test = apply(location_split[1:4], FUN = locsep)
1459156089658:rapply(location_split[1:4], FUN = locsep)
1459156097589:rapply(location_split[1:4], locsep)
1459156111568:apply(location_split[1:4], locsep)
1459156127018:test = apply(location_split[1:4], 1, locsep)
1459156176732:as.data.frame.list(test)
1459156184916:as.data.frame(test)
1459156226377:do.call(rbind.data.frame, test)
1459156234857:do.call(rbind, test)
1459156279250:library(plyr)
1459156290976:ldplyr(test,data.frame)
1459156297179:ldply(test,data.frame)
1459156322452:data.frame(t(sapply(test,c)))
1459156344570:rbind_list(test)
1459156353817:rbindlist(test)
1459156366993:library(data.table)
1459156373279:rbindlist(test)
1459156375611:test
1459156379703:test = lapply(location_split[1:4], locsep)
1459156381274:test
1459156387941:rbindtest(test)
1459156394473:rbindlist(test)
1459156403118:rbind_list(test)
1459156407186:rbindlist(test)
1459156457523:test = lapply(location_split, locsep)
1459156488895:output = rbindlist(test)
1459156493111:View(output)
1459156526155:location_split[[645]]
1459156603654:class(location)
1459156609337:head(location)
1459156624018:output$location = location
1459156669294:names(output)
1459156785541:write.csv(output, file = "output.csv")
1459156806725:getwd()
1459156910615:write.csv(output, file = "output.csv", row.names = F)
1481773455294:Y = ts(rnorm(100, mean=0, sd=1));
1481773455299:for (i in 2:length(Y)) {
1481773455301:Y[i] = Y[i] + Y[i-1];
1481773455302:}
1481773455308:plot(Y, family="simhei", main="", type="b", col="red");
1481773455843:abline(h=0)
1481773459325:Y = ts(rnorm(100, mean=0, sd=1));
1481773459326:for (i in 2:length(Y)) {
1481773459327:Y[i] = Y[i] + Y[i-1];
1481773459327:}
1481773459330:plot(Y, family="simhei", main="", type="b", col="red");
1481773459352:abline(h=0)
1481773460724:Y = ts(rnorm(100, mean=0, sd=1));
1481773460725:for (i in 2:length(Y)) {
1481773460726:Y[i] = Y[i] + Y[i-1];
1481773460726:}
1481773460728:plot(Y, family="simhei", main="", type="b", col="red");
1481773460745:abline(h=0)
1481773461778:Y = ts(rnorm(100, mean=0, sd=1));
1481773461779:for (i in 2:length(Y)) {
1481773461780:Y[i] = Y[i] + Y[i-1];
1481773461781:}
1481773461787:plot(Y, family="simhei", main="", type="b", col="red");
1481773461804:abline(h=0)
1481773464111:Y = ts(rnorm(100, mean=0, sd=1));
1481773464113:for (i in 2:length(Y)) {
1481773464114:Y[i] = Y[i] + Y[i-1];
1481773464114:}
1481773464120:plot(Y, family="simhei", main="", type="b", col="red");
1481773464139:abline(h=0)
1481773466482:Y = ts(rnorm(100, mean=0, sd=1));
1481773466483:for (i in 2:length(Y)) {
1481773466484:Y[i] = Y[i] + Y[i-1];
1481773466484:}
1481773466490:plot(Y, family="simhei", main="", type="b", col="red");
1481773466515:abline(h=0)
1499522312215:installr
1499522337430:version
1499522425162:version
1499522495371:R.version()
1499522498283:R.version
1499522541056:updateR::updateR()
1499522549967:updateR()
1499522583720:updateR()
1499522593370:updater()
1499522600658:install.packages(updateR)
1499522612080:install.packages("updateR")
1499522616436:install.packages("updateR")
1499522625700:updateR::updateR()
1499522630554:updateR()
1499523615249:version
1499523631286:update.packages()
1499523703548:package_version(ggplot2)
1499523718890:package_version("ggplot2")
1499523730005:library(ggplot2)
1499523752895:library("ggplot2")
1499523759188:require(ggplot2)
1499523771824:install.packages(ggplot2)
1499523782872:install.packages("ggplot2")
1499524401687:library(ggplot2)
1499524952972:ls
1499524956289:ls()
1499524961652:getwd()
1499525193163:sqrt(2)
1499525199744:sqrt(2.0)
1499525212700:log2(2)
1499525215188:log(22)
1499525217665:log(2)
1499525227091:log(2.)
1499525232391:log(2.0)
1499525248643:ls()
1499525367220:x =1
1499525370132:ls()
1499525372346:rm(x)
1499525377412:y = 22
1499525727808:rep(1:2, times = 4)
1499525738503:x = 1:4
1499525741669:x[3]
1499525867103:x<2
1499526229168:matrix(1:9, nrow = 3, byrow = T)
1499526630775:getwd()
1499526657210:setwd("~/Documents/r/500 52")
1499526728478:read.table(file = "LungCapData.txt")
1499526761161:lung = read.table(file = "LungCapData.txt")
1499526764297:View(lung)
1499526778702:lung = read.table(file = "LungCapData.txt", header = T)
1499527689384:dir()
1499527694874:ls()
1499527758458:dir
1499527826123:getwd(/Users/liangquanzhou/Documents/r/500 52/)
1499527833037:getwd("/Users/liangquanzhou/Documents/r/500 52/")
1499527842364:/Users/liangquanzhou/Documents/r/500 52/
1499527850595:getwd("/Users/liangquanzhou/Documents/r/500 52/")
1499527857647:setwd(/Users/liangquanzhou/Documents/r/500 52/)
1499527866512:setwd("/Users/liangquanzhou/Documents/r/500 52/")
1499527873337:getwd()
1499527874810:ls
1499527876985:ls()
1499527879908:dir()
1499527953950:dir()
1499528001861:lungcsv = read.csv(file = "LungCapData.csv")
1499528007418:View(lungcsv)
1499528036415:dim(lungcsv)
1499528042199:dim(lung)
1499528053666:head(lung)
1499528111306:tail(lung)
1499528183775:data$age
1499528187783:lung$Age
1499528192365:View$age
1499528202070:View(lung$Age)
1499528218809:class(lung$Age)
1499528227008:head(lung$Age)
1499528682079:str(lung)
1499528719704:levels(lung$Gender)
1499528809456:lung$age[lung$Gender == "Female"]
1499528826168:lung$Age[lung$Gender == "Female"]
1499528835557:lung$Age[lung$Gender = "Female"]
1499528857831:lung$Age[lung$Gender == "female"]
1499528863897:lung$Age[lung$Gender == "male"]
1499528947826:attach(lung)
1499528951703:Age
1499528984241:detach(lung)
1499528987380:Age
1499529204699:mean(Age)
1499529714779:dir
1499529716251:dir()
1499529730632:read.csv(file = "Performance Lawn Equipment Database.csv")
1499529756060:Performance = read.csv(file = "Performance Lawn Equipment Database.csv")
1499529765353:View(Performance)
1499738985056:getwd()
1499739095077:help()
1499739107051:help(""read.table")
1499739114910:help("read.table")
1499739145469:help("read.csv2")
1499740106392:BladeWeight = read.csv("BladeWeight.csv")
1499740114312:View(BladeWeight)
1499740127096:str(BladeWeight)
1499740177537:BladeWeight = na.omit(read.csv("BladeWeight.csv"))
1499740178104:View(BladeWeight)
1499740188818:BladeWeight = read.csv("BladeWeight.csv")
1499740194224:View(BladeWeight)
1499740398897:BladeWeight = read.csv("BladeWeight.csv")
1499740399204:View(BladeWeight)
1499740667269:EmployeeRetention = read.csv("EmployeeRetention.csv")
1499740675842:str(EmployeeRetention)
1499740689311:str(BladeWeight)
1499740986602:knitr::opts_chunk$set(echo = TRUE)
1499740989840:knitr::opts_chunk$set(echo = TRUE)
1499743510121:read.csv("Credit Approval Decisions.csv")
1499743525125:str(read.csv(file = "Credit Approval Decisions.csv"))
1499743701655:knitr::opts_chunk$set(echo = TRUE)
1499743701668:CreditApprovalDecisions = read.csv(file = "Credit Approval Decisions.csv")
1499743736143:head(CreditApprovalDecisions)
1499746224764:-17732 + 367 * 32 + 1300 * 16 + 0.116 * 150000
1499746341634:summary(cars)
1499746756687:-17732 + 367 * 32 + 1300 * 16 + 0.116 * 150000
1499747288335:11 * 33
1499747293486:```{r echo=FALSE}
1499747293491:a =-17732 + 367 * 32 + 1300 * 16 + 0.116 * 150000
1499747293492:```
1499747301043:a = -17732 + 367 * 32 + 1300 * 16 + 0.116 * 150000
1499747303699:a
1499747355468:a = -17732 + 367 * 32 + 1300 * 16 + 0.116 * 150000
1499747358072:a = -17732 + 367 * 32 + 1300 * 16 + 0.116 * 150000
1499747359751:knitr::opts_chunk$set(echo = TRUE)
1499747974141:-17732 + 367 * 32 + 1300 * 16 + 0.116 * 150000
1499748447014:plot(y = 2x)
1499748521575:x = 1:100
1499748521585:b = 0
1499748521588:D = x^b
1499748521600:plot(D, type = l)
1499748540682:plot(D, l)
1499748560441:plot(x, D, type = l)
1499748580432:plot(x, D)
1499748603156:plot(x, D, type = "l")
1499748726441:plot(x, D, type = "l", xaxt="n")
1499748736910:plot(x, D, type = "l", xaxt="n", yaxt = "n")
1499750268278:plot(x= c(1,2), y = c(4,7))
1499750316983:P1 = 600
1499750317010:D1 = 500
1499750317022:P2 = 400
1499750317037:D2 = 1200
1499750317043:plot(P = c(P1, P2), D = c(D1,D2))
1499750329886:plot(x = c(P1, P2), y = c(D1,D2))
1499750379141:plot(x = c(P1, P2), y = c(D1,D2), xlab = "P", ylab = "D", type = "b")
1499752280109:getwd()
1500514930796:library(ggplot2)
1500514935344:data(diamonds)
1500514939267:head(diamonds)
1500514944681:fix(diamonds)
1500514962423:d1= head(diamonds)
1500514964951:d1
1500514967227:fix(d1)
1500514974433:edit(d1)
1500514991601:utils::fix(d1)
1500515000552:library(utils)
1500515003836:fix(d1)
1500515019220:class(d1)
1500515025354:as.data.frame(d1)
1500515033153:d1 = as.data.frame(dq)
1500515035619:d1 = as.data.frame(d1)
1500515037769:fix(d1)
1500770870102:getwd()
1500770875948:dir()
1500771735444:library(tidyverse)
1500771758919:install.packages("tidyverse")
1500771809687:install.packages("tidyverse")
1500772088028:library(tidyverse)
1500772147302:library(readxl)
1500772259356:data = read_excel(path = "Performance_Lawn_Equipment_Database.xlsx")
1500772319385:excel_sheets(dat)
1500772321652:excel_sheets(data)
1500772679931:excel_sheets(path = data)
1500772693001:excel_sheets(path = "Performance_Lawn_Equipment_Database.xlsx")
1500772770585:p1 = excel_sheets(path = "Performance_Lawn_Equipment_Database.xlsx")
1500772831445:DealerSatisfication = read_excel(path = "Performance_Lawn_Equipment_Database.xlsx", sheet = " Dealer Satisfication")
1500772836119:DealerSatisfication = read_excel(path = "Performance_Lawn_Equipment_Database.xlsx", sheet = "Dealer Satisfication")
1500772847668:DealerSatisfication = read_excel(path = "Performance_Lawn_Equipment_Database.xlsx", sheet = p1[1])
1500772857331:str(DealerSatisfication)
1500773420471:View(DealerSatisfication)
1500773813018:DealerSatisfication = read.csv(file = "Performance_Lawn_Equipment_Database.xlsx")
1500773823772:DealerSatisfication = read.csv(file = "Performance_Lawn_Equipment_Database.xlsx")
1500773826857:DealerSatisfication = read.csv(file = "Performance_Lawn_Equipment_Database.xlsx")
1500773836124:DealerSatisfication = read.csv(file = "DealerSatisfaction.csv")
1500773841346:head(DealerSatisfication)
1500773922700:str(DealerSatisfication)
1500774309631:DealerSatisfication = read.csv(file = "DealerSatisfaction.csv")
1500774309811:head(DealerSatisfication)
1500774319729:str(DealerSatisfication)
1500774370438:DealerSatisfication = read.csv(file = "DealerSatisfaction.csv")
1500774370596:str(DealerSatisfication)
1500774402991:America or NA, and print out the return as:
1500774402995:> dealerSat_NA <- DealerSatisfaction[1:5, ]
1500774410846:dealerSat_NA <- DealerSatisfaction[1:5, ]
1500774583876:DealerSatisfication = read.csv(file = "DealerSatisfaction.csv")
1500774587982:
1500774591384:getwd()
1500774755362:EndUserSatisfication = read.csf(file = "EndUserSatisfication.csv")
1500774763673:str(EndUserSatisfication)
1500774766212:str(EndUserSatisfication)
1500774768774:EndUserSatisfication = read.csf(file = "EndUserSatisfication.csv")
1500774771380:EndUserSatisfication = read.csv(file = "EndUserSatisfication.csv")
1500774772745:str(EndUserSatisfication)
1500774784197:dealerSat_NA <- DealerSatisfaction[1:5, ]
1500774860235:DealerSatisfaction = read.csv(file = "DealerSatisfaction.csv")
1500774860549:EndUserSatisfication = read.csv(file = "EndUserSatisfication.csv")
1500774861199:str(DealerSatisfaction)
1500774861614:str(EndUserSatisfication)
1500774862496:dealerSat_NA <- DealerSatisfaction[1:5, ]
1500774872544:dealerSat_NA
1500775061851:DealerSatisfaction = read.csv(file = "DealerSatisfaction.csv")
1500775061867:EndUserSatisfication = read.csv(file = "EndUserSatisfication.csv")
1500775062272:str(DealerSatisfaction)
1500775062280:str(EndUserSatisfication)
1500775062289:dealerSat_NA <- DealerSatisfaction[1:5, ]
1500775062291:dealerSat_NA
1500775062295:tdealerSat_NA <- t(dealerSat_NA[,3:8])
1500775072605:tdealerSat_NA
1500775090979:colnames(tdealerSat_NA) <- c("2010", "2011", "2012", "2013", "2014")
1500775100558:tdealerSat_NA
1500775159695:data.m2 <- melt(tdealerSat_NA, id.vars=var1)
1500775169060:library(reshape2)
1500775171508:data.m2 <- melt(tdealerSat_NA, id.vars=var1)
1500775181891:data.m2
1500775193083:colnames(data.m2) <- c("Level", "Year", "Counts")
1500775197895:data.m2
1500775215448:ggplot(data.m2, aes(x=Year, y=Counts)) +
1500775215450:geom_bar(aes(fill=Level), position="dodge", stat="identity")
1500775240783:ggplot(data.m2, aes(x=Year, y=Counts, fill=Level)) + geom_bar(stat="identity")
1500775347520:plot(Complaints$World, ylim=range(c(0,400)), type="l", xlab="Month", ylab="Number of Complaints")
1500775367886:Complaints.
1500775464716:plot(Complaints$World, ylim=range(c(0,400)), type="l", xlab="Month", ylab="Number of Complaints")
1500775484325:Compliants = read.csv(file = "Compliants.csv")
1500775485030:plot(Complaints$World, ylim=range(c(0,400)), type="l", xlab="Month", ylab="Number of Complaints")
1500775503438:Complaints = read.csv(file = "Compliants.csv")
1500775508641:Complaints = read.csv(file = "Compliants.csv")
1500775515858:Complaints = read.csv(file = "Complaints.csv")
1500775516707:plot(Complaints$World, ylim=range(c(0,400)), type="l", xlab="Month", ylab="Number of Complaints")
1500775517741:par(new=TRUE)
1500775519074:plot(Complaints$NA., ylim=range(c(0,400)), type="l", col="red", axes = FALSE, xlab = "", ylab = "")
1500775519985:par(new=TRUE)
1500775520626:plot(Complaints$SA, ylim=range(c(0,400)), type="l", col="green", axes = FALSE, xlab = "", ylab = "")
1500775521244:par(new=TRUE)
1500775521590:plot(Complaints$Eur, ylim=range(c(0,400)), type="l", col="blue", axes = FALSE, xlab = "", ylab = "")
1500775522073:par(new=TRUE)
1500775522288:plot(Complaints$Pac, ylim=range(c(0,400)), type="l", col="magenta", axes = FALSE, xlab = "", ylab = "")
1500775522526:par(new=TRUE)
1500775522885:> plot(Complaints$China, ylim=range(c(0,400)), type="l", col="deeppink4", axes = FALSE, xlab = "", ylab = "")
1500775526874:plot(Complaints$China, ylim=range(c(0,400)), type="l", col="deeppink4", axes = FALSE, xlab = "", ylab = "")
1500775732517:ShippingCost_Existing = read.csv(file = "ShippingCost_Existing.csv")
1500775750736:summary(ShippingCost_Existing$Mowers)
1500775751310:summary(ShippingCost_Existing$Tractors)
1500775751848:summary(ShippingCost_Proposed$Mowers)
1500776031066:summary(ShippingCost_Proposed$Tractors)
1500776158903:CustomerSurvey2014 = read.csv(file = "CustomerSurvey2014.csv")
1500776167047:str(CustomerSurvey2014)
1500776175104:summary(CustomerSurvey2014)
1500776206450:rm(CustomerSurvey2014)
1500776214412:summary(CustomerSurvey2014)
1500776244415:CustomerSurvey2014 = read.csv(file = "CustomerSurvey2014.csv")
1500776246900:head(CustomerSurvey2014)
1500776350104:ShippingCost = read.csv(file = "ShippingCost.csv")
1500776350273:summary(ShippingCost$Mowers)
1500776350428:summary(ShippingCost$Tractors)
1500776419223:CustomerSurvey2014[is.na(CustomerSurvey2014)] <- "NorthA"
1500776425014:CustomerSurvey2014 = read.csv(file = "CustomerSurvey2014.csv", stringsAsFactors = FALSE)
1500776425621:CustomerSurvey2014[is.na(CustomerSurvey2014)] <- "NorthA"
1500776431977:str(CustomerSurvey2014)
1500776440705:barplot(table(CustomerSurvey2014$Region))
1500776447859:hist(CustomerSurvey2014$Quality, main="Quality - Number of Responses", xlab="Level of Quality")
1500778063392:knitr::opts_chunk$set(echo = TRUE)
1500778063614:ShippingCost = read.csv(file = "ShippingCost.csv")
1500778064865:summary(ShippingCost$Mowers)
1500778066867:summary(ShippingCost$Tractors)
1500778728244:MowerUnitSales = read.csv(file = "Mower Unit Sales.csv")
1500778764178:MowerUnitSales = read.csv(file = "Mower Unit Sales.csv")
1500778765030:TractorUnitSales = read.csv(file = "Tractor Unit Sales.csv")
1500778766435:str(MowerUnitSales)
1500778767456:str(TractorUnitSales)
1500778769304:Mower_NA <- MowerUnitSales[1:5, ]
1500778769944:Mower_NA
1500778775669:View(Mower_NA)
1500778941918:DealerSatisfaction = read.csv(file = "DealerSatisfaction.csv")
1500778942087:EndUserSatisfication = read.csv(file = "EndUserSatisfication.csv")
1500778942768:str(DealerSatisfaction)
1500778944204:str(EndUserSatisfication)
1500778946600:dealerSat_NA <- DealerSatisfaction[1:5, ]
1500778946952:dealerSat_NA
1500778968001:MowerUnitSales = read.csv(file = "Mower Unit Sales.csv")
1500778968317:TractorUnitSales = read.csv(file = "Tractor Unit Sales.csv")
1500778968856:str(MowerUnitSales)
1500778969149:str(TractorUnitSales)
1500778969801:Mower_NA <- MowerUnitSales[1:5, ]
1500778970316:Mower_NA
1500779027685:View(MowerUnitSales)
1500779083174:excel_sheets(path = "Performance_Lawn_Equipment_Database.xlsx")
1500779219039:PurchaseSurvey = read.csv(file = "Purchasing Survey.csv")
1500779226207:str(PurchaseSurvey)
1500779343155:str(PurchaseSurvey)
1500779344287:summary(PurchaseSurvey)
1500779345255:rm(PurchaseSurvey)
1500779347957:PurchaseSurvey = read.csv(file = "Purchasing Survey.csv", stringsAsFactors = FALSE)
1500779348744:PurchaseSurvey[is.na(PurchaseSurvey)] <- "NorthA"
1500779350369:str(PurchaseSurvey)
1500779636783:MowerUnitSales = read.csv(file = "Mower Unit Sales.csv")
1500779637369:TractorUnitSales = read.csv(file = "Tractor Unit Sales.csv")
1500779638026:str(MowerUnitSales)
1500779638807:str(TractorUnitSales)
1500779730110:str(DealerSatisfaction)
1500779730522:str(EndUserSatisfication)
1500779814818:userSat_NA <- EndUserSatisfication[1:5, ]
1500779815619:userSat_NA
1500779817075:tuserSat_NA <- tuserSat_NA[,3:8])
1500779822243:tuserSat_NA <- tuserSat_NA([,3:8])
1500779829908:tuserSat_NA <- tuserSat_NA[,3:8]
1500779851986:tuserSat_NA <- t(userSat_NA[,3:8])
1500779852702:tuserSat_NA
1500779854092:colnames(tuserSat_NA) <- c("2010", "2011", "2012", "2013", "2014")
1500779854883:tuserSat_NA
1500779902843:data.m3 <- melt(tuserSat_NA, id.vars=var1)
1500779903382:data.m3
1500779903858:colnames(data.m3) <- c("Level", "Year", "Counts")
1500779904274:data.m3
1500779904754:ggplot(data.m3, aes(x=Year, y=Counts)) +
1500779904756:geom_bar(aes(fill=Level), position="dodge", stat="identity")
1500779921688:ggplot(data.m3, aes(x=Year, y=Counts, fill=Level)) + geom_bar(stat="identity")
1500780105794:knitr::opts_chunk$set(echo = TRUE)
1500780105800:library(reshape2)
1500780105804:library(ggplot2)
1500780105811:Complaints = read.csv(file = "Complaints.csv")
1500780111370:head(Complaints)
1500780268716:UnitProductionCost = read.csv(file = "UnitProductionCost.csv")
1500780271488:summary(UnitProductionCost$Mowers)
1500780283898:head(UnitProductionCost)
1500780314304:UnitProductionCost = read.csv(file = "UnitProductionCost.csv")
1500780314595:summary(UnitProductionCost$Mowers)
1500780322935:summary(UnitProductionCost)
1500780358502:UnitProductionCost = read.csv(file = "UnitProductionCost.csv")
1500780360040:summary(UnitProductionCost$Mowers)
1500780366220:summary(UnitProductionCost$Mower)
1500780375673:summary(UnitProductionCost$Tractor)
1500780509220:MowerUnitSales = read.csv(file = "Mower Unit Sales.csv")
1500780525991:str(MowerUnitSales)
1500780538033:str(Complaints)
1500780583440:MowerUnitSales = read.csv(file = "Mower Unit Sales.csv")
1500780583481:plot(MowerUnitSales$World, ylim=range(c(0,400)), type="l", xlab="Month",
1500780583484:ylab="Number of MowerUnitSales")
1500780583534:par(new=TRUE)
1500780583537:plot(MowerUnitSales$NA., ylim=range(c(0,400)), type="l",
1500780583539:col="red", axes = FALSE, xlab = "", ylab = "")
1500780583555:par(new=TRUE)
1500780583557:plot(MowerUnitSales$SA, ylim=range(c(0,400)), type="l",
1500780583559:col="green", axes = FALSE, xlab = "", ylab = "")
1500780583564:par(new=TRUE)
1500780583569:plot(MowerUnitSales$Eur, ylim=range(c(0,400)), type="l",
1500780583572:col="blue", axes = FALSE, xlab = "", ylab = "")
1500780583583:par(new=TRUE)
1500780583587:plot(MowerUnitSales$Pac, ylim=range(c(0,400)), type="l",
1500780583588:col="magenta", axes = FALSE, xlab = "", ylab = "")
1500780583603:par(new=TRUE)
1500780583606:plot(MowerUnitSales$China, ylim=range(c(0,400)), type="l",
1500780583608:col="deeppink4", axes = FALSE, xlab = "", ylab = "")
1500780592912:plot(MowerUnitSales$World, ylim=range(c(0,400)), type="l", xlab="Month",
1500780592914:ylab="Number of MowerUnitSales")
1500780593284:par(new=TRUE)
1500780603545:type="l", xlab="Month"
1500780606118:plot(MowerUnitSales$World, type="l", xlab="Month",
1500780606119:ylab="Number of MowerUnitSales")
1500780755141:CustomerSurvey2014 = read.csv(file = "CustomerSurvey2014.csv")
1500780755732:str(CustomerSurvey2014)
1500780756221:summary(CustomerSurvey2014)
1500780756871:rm(CustomerSurvey2014)
1500780757546:CustomerSurvey2014 = read.csv(file = "CustomerSurvey2014.csv", stringsAsFactors = FALSE)
1500780758181:CustomerSurvey2014[is.na(CustomerSurvey2014)] <- "NorthA"
1500780758569:str(CustomerSurvey2014)
1500780763640:barplot(table(CustomerSurvey2014$Region))
1500780774926:CustomerSurvey2014 = read.csv(file = "CustomerSurvey2014.csv")
1500780775466:str(CustomerSurvey2014)
1500780781495:summary(CustomerSurvey2014)
1500780783885:rm(CustomerSurvey2014)
1500780784453:CustomerSurvey2014 = read.csv(file = "CustomerSurvey2014.csv", stringsAsFactors = FALSE)
1500780786981:PurchaseSurvey = read.csv(file = "Purchasing Survey.csv")
1500780787335:str(PurchaseSurvey)
1500780795127:str(PurchaseSurvey)
1500780796760:summary(PurchaseSurvey)
1500780810568:barplot(table(CustomerSurvey2014$Region))
1500780818591:summary(PurchaseSurvey)
1500780924083:PurchaseSurvey$Buying.Type = as.factor(PurchaseSurvey$Buying.Type)
1500780926045:str(PurchaseSurvey)
1500780997642:hist(PurchaseSurvey$Buying.Type, main="Buying Type - Number of Responses", xlab="Level of Quality")
1500781021694:hist(CustomerSurvey2014$Quality, main="Quality - Number of Responses", xlab="Level of Quality")
1500781033671:str(CustomerSurvey2014)
1500781044233:PurchaseSurvey = read.csv(file = "Purchasing Survey.csv")
1500781046675:hist(PurchaseSurvey$Buying.Type, main="Buying Type - Number of Responses", xlab="Level of Quality")
1500781059815:PurchaseSurvey$Buying.Type = as.integer(PurchaseSurvey$Buying.Type)
1500781061749:hist(PurchaseSurvey$Buying.Type, main="Buying Type - Number of Responses", xlab="Level of Quality")
1500781066820:PurchaseSurvey = read.csv(file = "Purchasing Survey.csv")
1500781067123:PurchaseSurvey$Buying.Type = as.integer(PurchaseSurvey$Buying.Type)
1500781069121:str(PurchaseSurvey)
1500781073385:summary(PurchaseSurvey)
1500781074115:hist(PurchaseSurvey$Buying.Type, main="Buying Type - Number of Responses", xlab="Level of Quality")
1500781202442:hist(PurchaseSurvey$Buying.Type, main="Buying Type - Number of Responses", xlab="Buying Type", nclass = "factor")
1500781213684:hist(PurchaseSurvey$Buying.Type, main="Buying Type - Number of Responses", xlab="Buying Type", nclass = "numeric")
1500781217835:PurchaseSurvey = read.csv(file = "Purchasing Survey.csv")
1500781219669:PurchaseSurvey$Buying.Type = as.integer(PurchaseSurvey$Buying.Type)
1500781223114:hist(PurchaseSurvey$Buying.Type, main="Buying Type - Number of Responses", xlab="Buying Type", nclass = "numeric")
1500781230065:hist(PurchaseSurvey$Buying.Type, main="Buying Type - Number of Responses", xlab="Buying Type", nclass = NULL)
1500781252302:hist(CustomerSurvey2014$Quality, main="Quality - Number of Responses", xlab="Level of Quality")
1500781265985:op <- par(mfrow = c(2, 2))
1500781265987:hist(islands)
1500781266030:utils::str(hist(islands, col = "gray", labels = TRUE))
1500781266066:hist(sqrt(islands), breaks = 12, col = "lightblue", border = "pink")
1500781464690:barplot(table(CustomerSurvey2014$Region))
1500781473683:CustomerSurvey2014 = read.csv(file = "CustomerSurvey2014.csv")
1500781473736:str(CustomerSurvey2014)
1500781473773:summary(CustomerSurvey2014)
1500781473820:rm(CustomerSurvey2014)
1500781473823:CustomerSurvey2014 = read.csv(file = "CustomerSurvey2014.csv", stringsAsFactors = FALSE)
1500781473873:CustomerSurvey2014[is.na(CustomerSurvey2014)] <- "NorthA"
1500781473907:str(CustomerSurvey2014)
1500781473944:barplot(table(CustomerSurvey2014$Region))
1500781473992:hist(CustomerSurvey2014$Quality, main="Quality - Number of Responses", xlab="Level of Quality")
1500781474053:# Run it again on PurchaseSurvey
1500781474057:PurchaseSurvey = read.csv(file = "Purchasing Survey.csv")
1500781474121:PurchaseSurvey$Buying.Type = as.integer(PurchaseSurvey$Buying.Type)
1500781474288:str(PurchaseSurvey)
1500781474350:summary(PurchaseSurvey)
1500781474392:hist(PurchaseSurvey$Buying.Type, main="Buying Type - Number of Responses", xlab="Buying Type", nclass = NULL)
1500781520470:barplot(table(PurchaseSurvey$Buying.Type))
1501222749062:install.packages('"shiny"')
1501222760533:install.packages('shiny')
1501371706148:dir()
1501385880680:Sys.Date()
1501640098462:library("arules");
1501640113986:install.packages("arules")
1501640125520:install.packages("arulesViz")
1501640163035:library("arules")
1501640164611:library("arulesViz")
1501640170242:patterns = random.patterns(nItems = 1000);
1501640170889:summary(patterns);
1501640172453:trans = random.transactions(nItems = 1000, nTrans = 1000, method = "agrawal",  patterns = patterns);
1501640174618:image(trans)
1501640267789:patterns
1501640274006:View(patterns)
1501640284574:?random.patterns
1501640966678:list  <- list('001'=c('beer', 'nappy'), '002'=c('beer', 'nappy'), '003'='lipstick', '004'='beer')
1501640968591:list
1501640972648:trData <- as(list, 'transactions')
1501640975130:trData
1501640987107:patterns
1501640990131:trans
1501641009972:inspect(trData)
1501641046950:rules <- apriori(trData, parameter = list(supp = 0.1, conf =0.1))
1501641048492:rules
1501641073533:inspect(rules)
1501641088697:class(inspect(rules))
1501641104919:temp = inspect(rules)
1501641110081:class(temp)
1501641118854:View(temp)
1501641126265:names(temp)
1501641170811:plot(rules, method='scatterplot')
1501641183236:rules
1501641350333:plot(rules, method='graph', control = list(type='items'))
1501641741453:trData
1501641748833:inspect(trData)
1501641777336:class(inspect(trData))
1501641804773:getwd(
1501641804776:)
1501641823808:write.csv(rules, file="rules.csv")
1501641829746:rules
1501641894653:rules
1501641908249:list  <- list('001'=c('beer', 'nappy'), '002'=c('beer', 'nappy'), '003'='lipstick', '004'='beer')
1501641909690:trData <- as(list, 'transactions')
1501641914076:plot(rules, method='scatterplot')
1501642422688:require(arules)
1501642422695:data("Groceries")
1501642422743:class(Groceries)
1501642422744:summary(Groceries)
1501642422883:inspect(head(Groceries, 3))
1501642481170:a_matrix <- matrix(c(1,1,1,0,0,
1501642481173:1,1,0,0,0,
1501642481174:1,1,0,1,0,
1501642481175:0,0,1,0,1,
1501642481175:1,1,0,1,1), ncol = 5, dimnames=list(c('id1', 'id2', 'id3', 'id4', 'id5'),
1501642481176:c('bread', 'coke', 'milk', 'beer', 'butter')))
1501642484491:a_matrix
1501642489637:transaction.of.a_matrix <- as(a_matrix, "transactions")
1501642496485:class(transaction.of.a_matrix)
1501642511525:inspect(transaction.of.a_matrix)
1501642542106:a_matrix <- as.data.frame(a_matrix)
1501642543097:transaction.of.a_matrix <- as(a_matrix, "transactions")
1501642611435:a_matrix <- matrix(c(1,2,1,0,0,
1501642611438:1,1,0,0,0,
1501642611439:1,1,0,1,0,
1501642611440:0,0,1,0,1,
1501642611440:1,1,0,1,1), ncol = 5, dimnames=list(c('id1', 'id2', 'id3', 'id4', 'id5'),
1501642611441:c('bread', 'coke', 'milk', 'beer', 'butter')))
1501642615950:a_matrix
1501642618281:transaction.of.a_matrix <- as(a_matrix, "transactions")
1501642683588:class(transaction.of.a_matrix)
1501642684229:inspect(transaction.of.a_matrix)
1501642692272:a_matrix <- matrix(c(1,1,1,0,0,
1501642692274:1,1,0,0,0,
1501642692276:1,1,0,1,0,
1501642692276:0,0,1,0,1,
1501642692277:1,1,0,1,1), ncol = 5, dimnames=list(c('id1', 'id2', 'id3', 'id4', 'id5'),
1501642692278:c('bread', 'coke', 'milk', 'beer', 'butter')))
1501642693235:a_matrix <- as.data.frame(a_matrix)
1501642693520:transaction.of.a_matrix <- as(a_matrix, "transactions")
1501642694214:class(transaction.of.a_matrix)
1501642699543:a_matrix <- (a_matrix)
1501642700133:transaction.of.a_matrix <- as(a_matrix, "transactions")
1501642705461:1,1,0,1,1), ncol
1501642708434:a_matrix <- matrix(c(1,1,1,0,0,
1501642708435:1,1,0,0,0,
1501642708436:1,1,0,1,0,
1501642708436:0,0,1,0,1,
1501642708437:1,1,0,1,1), ncol = 5, dimnames=list(c('id1', 'id2', 'id3', 'id4', 'id5'),
1501642708438:c('bread', 'coke', 'milk', 'beer', 'butter')))
1501642708878:a_matrix
1501642709314:transaction.of.a_matrix <- as(a_matrix, "transactions")
1501642709901:class(transaction.of.a_matrix)
1501642710886:inspect(transaction.of.a_matrix)
1501642714133:a_df <- data.frame(
1501642714134:age = as.factor(c(6,8,7,6,9,5)),
1501642714138:grade = as.factor(c(1,3,1,1,4,1)))
1501642738689:a_df
1501642744448:trans3 <- as(a_df, "transactions")
1501642750055:trans3
1501642761083:inspect(trans3)
1501991225649:getwd()
1501991228899:dir
1501991231327:dir()
1501991250382:file.edit("Lab#1 P2.Rmd")
1501991302128:library(reshape2)
1501991303706:library(ggplot2)
1502033961641:DealerSatisfaction = read.csv(file = "DealerSatisfaction.csv")
1502033963363:EndUserSatisfication = read.csv(file = "EndUserSatisfication.csv")
1502033965456:str(DealerSatisfaction)
1502033966518:str(EndUserSatisfication)
1502033967908:dealerSat_NA <- DealerSatisfaction[1:5, ]
1502033992210:dealerSat_NA
1502033995056:tdealerSat_NA <- t(dealerSat_NA[,3:8])
1502033996213:tdealerSat_NA
1502033999068:dealerSat_NA
1502034007885:dealerSat_NA
1502034025095:colnames(tdealerSat_NA) <- c("2010", "2011", "2012", "2013", "2014")
1502034025908:tdealerSat_NA
1502034061302:DealerSatisfaction = read.csv(file = "DealerSatisfaction.csv")
1502034061321:EndUserSatisfication = read.csv(file = "EndUserSatisfication.csv")
1502034061327:str(DealerSatisfaction)
1502034061367:str(EndUserSatisfication)
1502034061388:dealerSat_NA <- DealerSatisfaction[1:5, ]
1502034061397:dealerSat_NA
1502034061410:tdealerSat_NA <- t(dealerSat_NA[,3:8])
1502034061412:tdealerSat_NA
1502034061413:colnames(tdealerSat_NA) <- c("2010", "2011", "2012", "2013", "2014")
1502034061414:tdealerSat_NA
1502034061415:MowerUnitSales = read.csv(file = "Mower Unit Sales.csv")
1502034061422:TractorUnitSales = read.csv(file = "Tractor Unit Sales.csv")
1502034132019:dealerSat_NA
1502034453228:5,1]*4) + (tdealerSat_NA[6,1]*5))/sum(tdealerSat_NA[,1])
1502034477597:m_NA2010 <- ((tdealerSat_NA[2,1]*1) + (tdealerSat_NA[3,1]*2) + (tdealerSat_NA[4,1]*3) +
1502034477598:(tdealerSat_NA[5,1]*4) + (tdealerSat_NA[6,1]*5))/sum(tdealerSat_NA[,1])
1502034505965:m_NA2010
1502034760640:head(DealerSatisfaction)
1502034774694:DealerSatisfaction
1502034994328:DealerSatisfaction[is.na(DealerSatisfaction)] <- "NorthA"
1502035000490:DealerSatisfaction
1502035031927:DealerSatisfaction = read.csv(file = "DealerSatisfaction.csv", stringsAsFactors = F)
1502035032598:DealerSatisfaction[is.na(DealerSatisfaction)] <- "NorthA"
1502035044849:DealerSatisfaction
1502035054510:m=0
1502035054512:for (j in 1:25){
1502035054513:# print(j)
1502035054513:m[j] <- ((DealerSatisfaction[j,4]*1) + (DealerSatisfaction[j,5]*2) +
1502035054514:(DealerSatisfaction[j,6]*3) + (DealerSatisfaction[j,7]*4)
1502035054514:+(DealerSatisfaction[j,8]*5))/sum(DealerSatisfaction[j,3:8])
1502035054515:# print(m[j])
1502035054515:}
1502035054635:print(m)
1502035113334:n <- matrix(m, 5, byrow=FALSE)
1502035118066:n
1502036345352:m=0
1502036345357:n=0
1502036345359:for (j in 1:25){
1502036345475:# print(j)
1502036345477:m[j] <- ((DealerSatisfaction[j,4]*1) + (DealerSatisfaction[j,5]*2) +
1502036345488:(DealerSatisfaction[j,6]*3) + (DealerSatisfaction[j,7]*4)
1502036345489:+(DealerSatisfaction[j,8]*5))/sum(DealerSatisfaction[j,3:8])
1502036345495:n[j] <- sqrt(((DealerSatisfaction[j,3] * (0 - m[j])^2) +
1502036345513:(DealerSatisfaction[j,4] * (1 - m[j])^2) +
1502036345514:(DealerSatisfaction[j,5] * (2 - m[j])^2) +
1502036345515:(DealerSatisfaction[j,6] * (3 - m[j])^2) +
1502036345516:(DealerSatisfaction[j,7] * (4 - m[j])^2) +
1502036345517:(DealerSatisfaction[j,8] * (5 - m[j])^2))/
1502036345517:(sum(DealerSatisfaction[j,3:8])-1))
1502036345519:# print(m[j])
1502036345520:# print(n[j])
1502036345521:}
1502036345988:print(m)
1502036348774:print(n)
1502036447185:p <- matrix(n, 5, byrow = FALSE)
1502036448669:p
1502036921583:EndUserSatisfication = read.csv(file = "EndUserSatisfication.csv", stringsAsFactors = F)
1502036925942:EndUserSatisfication
1502036939171:EndUserSatisfication[is.na(EndUserSatisfication)] <- "NorthA"
1502036941089:EndUserSatisfication
1502036970192:m
1502036971456:n
1502037190050:m=0
1502037190052:n=0
1502037190052:for (j in 1:25){
1502037190053:# print(j)
1502037190054:m[j] <- ((EndUserSatisfication[j,4]*1) + (EndUserSatisfication[j,5]*2) +
1502037190055:(EndUserSatisfication[j,6]*3) + (EndUserSatisfication[j,7]*4)
1502037190057:+(EndUserSatisfication[j,8]*5))/sum(EndUserSatisfication[j,3:8])
1502037190057:n[j] <- sqrt(((EndUserSatisfication[j,3] * (0 - m[j])^2) +
1502037190058:(EndUserSatisfication[j,4] * (1 - m[j])^2) +
1502037190059:(EndUserSatisfication[j,5] * (2 - m[j])^2) +
1502037190059:(EndUserSatisfication[j,6] * (3 - m[j])^2) +
1502037190060:(EndUserSatisfication[j,7] * (4 - m[j])^2) +
1502037190061:(EndUserSatisfication[j,8] * (5 - m[j])^2))/
1502037190062:(sum(EndUserSatisfication[j,3:8])-1))
1502037190063:# print(m[j])
1502037190064:# print(n[j])
1502037190065:}
1502037190556:print(m)
1502037190559:print(n)
1502037235426:pm <- matrix(m, 5, byrow = FALSE)
1502037256572:pm <- matrix(m, 5, byrow = FALSE)
1502037256945:pn <- matrix(n, 5, byrow = FALSE)
1502037265113:pm
1502037266030:pn
1502037399709:custSurveyNA <- CustomerSurvey2014[1:100,-1]
1502037449092:CustomerSurvey2014 <- read.csv("CustomerSurvey2014.csv")
1502037449606:custSurveyNA <- CustomerSurvey2014[1:100,-1]
1502037461475:custSurveySA <-CustomerSurvey2014[102:151,-1]
1502037530623:custSurveyNA
1502037539710:custSurveySA
1502037633199:mode(custSurveyNA[,1])
1502037702346:custSurveyNAmode <- dapply(custSurveyNA, 2, mode)
1502037708616:custSurveyNAmode <- daply(custSurveyNA, 2, mode)
1502037731979:library(plyr)
1502037732681:custSurveyNAmode <- daply(custSurveyNA, 2, mode)
1502037737616:custSurveyNAmode
1502037746045:??mode
1502037806611:getmode <- function(v) {
1502037806614:uniqv <- unique(v)
1502037806615:uniqv[which.max(tabulate(match(v, uniqv)))]
1502037806615:}
1502037808316:custSurveyNAmode <- daply(custSurveyNA, 2, mode)
1502037812376:custSurveyNAmode
1502037820620:custSurveyNAmode <- daply(custSurveyNA, 2, getmode)
1502037836416:custSurveyNAmode <- daply(custSurveyNA, getmode)
1502037852821:custSurveyNAmode <- apply(custSurveyNA, 2, getmode)
1502037858106:custSurveyNAmode
1502037919888:describe(custSurveySA)
1502037932119:library(psych)
1502037934205:describe(custSurveySA)
1502037954891:stat.desc(custSurveySA)
1502037973397:??stat.desc
1502038022850:install.packages("pastecs")
1502038039878:library(pastecs)
1502038040778:stat.desc(custSurveySA)
1502038065678:str(ResponseTime)
1502038161085:read.csv("ResponseTime.csv")
1502038161924:str(ResponseTime)
1502038169459:ResponseTime <- read.csv("ResponseTime.csv")
1502038172051:str(ResponseTime)
1502038224146:mResponseTime <- c(
1502038224149:mean(ResponseTime$Q1.2013),
1502038224149:mean(ResponseTime$Q2.2013),
1502038224150:mean(ResponseTime$Q3.2013),
1502038224150:mean(ResponseTime$Q4.2013),
1502038224151:mean(ResponseTime$Q1.2014),
1502038224151:mean(ResponseTime$Q2.2014),
1502038224152:mean(ResponseTime$Q3.2014),
1502038224152:mean(ResponseTime$Q4.2014)
1502038224152:)
1502038234239:mResponseTime
1502038323948:plot(mResponseTime, type = "l", lwd=2, col="green", ylab = "Mean", xlab = "Quarter", main="Mean Response
1502038323950:Time", ylim = c(0,5), xaxt="n")
1502038324681:axis(side = 1, at = c(1:8), labels = alabels, pch=0.5)
1502038349185:axis(side = 1, at = c(1:8), labels = labels, pch=0.5)
1502038415855:axis(side = 1, at = c(1:8), labels = names(ResponseTime), pch=0.5)
1502038506933:str(DefectsAfterDelivery)
1502038609376:DefectsAfterDelivery <- read("DefectsAfterDelivery.csv")
1502038617491:DefectsAfterDelivery <- read.csv("DefectsAfterDelivery.csv")
1502038617758:str(DefectsAfterDelivery)
1502038709040:m <- DefectsAfterDelivery %>% apply(2, mean)
1502038724263:m <- apply(DefectsAfterDelivery, 2, mean)
1502038729997:m
1502038735556:DefectsAfterDelivery
1502038750845:m <- apply(DefectsAfterDelivery, 1, mean)
1502038752828:m
1502038794731:DefectsAfterDelivery
1502038887456:DefectsAfterDelivery <- read.csv("DefectsAfterDelivery.csv")
1502038951654:str(DefectsAfterDelivery)
1502038984391:m <- apply(DefectsAfterDelivery[,-1], 1, mean)
1502038986301:m
1502039008236:mean(DefectsAfterDelivery[,2])
1502039020914:mean(DefectsAfterDelivery[,3])
1502039032272:mean(DefectsAfterDelivery[2,])
1502039040191:mean(DefectsAfterDelivery[2,-1])
1502039059796:head(DefectsAfterDelivery)
1502039074123:m <- apply(DefectsAfterDelivery[,-1], 2, mean)
1502039075610:m
1502039089258:names(m)
1502039103544:names(mResponseTime)
1502039147957:plot(m, type = "l", lwd=2, col="green", ylab = "Mean", xlab = "Quarter", main="Mean Defects After Delivery",
1502039147959:ylim = c(0,5), xaxt="n")
1502039149083:axis(side = 1, at = c(1:8), labels = names(m), pch=0.5)
1502039165978:class(m)
1502039170874:axis(side = 1, at = c(1:length(m)), labels = names(m), pch=0.5)
1502039177443:plot(m, type = "l", lwd=2, col="green", ylab = "Mean", xlab = "Quarter", main="Mean Defects After Delivery",
1502039177444:ylim = c(0,5), xaxt="n")
1502039182539:m
1502039195800:m
1502039212207:plot(m, type = "l", lwd=2, col="green", ylab = "Mean", xlab = "Year", main="Mean Defects After Delivery",
1502039212210:xaxt="n")
1502039215112:axis(side = 1, at = c(1:length(m)), labels = names(m), pch=0.5)
1502039288873:MowerUnitSales = read.csv(file = "Mower Unit Sales.csv")
1502039326280:IndustryMowerTotalSales <- read.csv("Industry Mower Total Sales.csv")
1502039332746:MowerUnitSales <- read.csv(file = "Mower Unit Sales.csv")
1502039333618:IndustryMowerTotalSales <- read.csv("Industry Mower Total Sales.csv")
1502039352902:str(MowerUnitSales)
1502039353800:str(IndustryMowerTotalSales)
1502039383761:totalMowerSales <- MowerUnitSales[,]
1502039384395:str(totalMowerSales)
1502039436837:totalMowerSales[,8:12]<- IndustryMowerTotalSales[,-1]
1502039437595:str(totalMowerSales)
1502039454163:colnames(totalMowerSales) <- c("Date", "NorthA", "SA", "Eur", "Pac", "China", "World", "IndustryNorthA", "IndustrySA
1502039454164:", "IndustryEur", "IndustryPac", "IndustryWorld")
1502039454540:head(totalMowerSales)
1502039579056:install.packages("Hmisc")
1502039595475:library(Hmisc)
1502039600790:rcorr(as.matrix(totalMowerSales[2:12]))
1502039810055:IndustryTractorTotalSales <- read.csv("IndustryTractorTotalSales.csv")
1502039813218:TractorUnitSales = read.csv(file = "Tractor Unit Sales.csv")
1502039813592:IndustryTractorTotalSales <- read.csv("IndustryTractorTotalSales.csv")
1502039846633:str(TractorUnitSales)
1502039853171:str(IndustryTractorTotalSales)
1502039947049:totalTractorSales <- TractorUnitSales[,]
1502039947052:str(totalTractorSales)
1502039947067:totalTractorSales[,8:12]<- IndustryTractorTotalSales[,-1]
1502039947070:str(totalTractorSales)
1502039947088:colnames(totalTractorSales) <- c("Date", "NorthA", "SA", "Eur", "Pac", "China", "World", "IndustryNorthA", "IndustrySA
1502039947089:", "IndustryEur", "IndustryPac", "IndustryWorld")
1502039947089:head(totalTractorSales)
1502039958135:stat.desc(totalTractorSales)
1502040088256:rcorr(as.matrix(totalTractorSales[2:12]))
1502040093923:rcorr(as.matrix(totalMowerSales[2:12]))
1502040098472:rcorr(as.matrix(totalTractorSales[2:12]))
1502040106493:rcorr(as.matrix(totalTractorSales[2:12]))
1502040135605:rcorr(as.matrix(totalTractorSales[2:12]))
1502040585590:MoverTest <- read.csc("MowerTest.csv")
1502040592491:MoverTest <- read.csv("MowerTest.csv")
1502040603366:countFail <- length(which(MowerTest == "Fail"))
1502040609499:MoverTest <- read.csv("MowerTest.csv")
1502040610140:countFail <- length(which(MowerTest == "Fail"))
1502040615599:MowerTest <- read.csv("MowerTest.csv")
1502040616299:countFail <- length(which(MowerTest == "Fail"))
1502040616949:countFail
1502040722273:y <- dbinom(0:20, 100, .018)
1502040725953:y
1502040732890:plot(y)
1502040741954:plot(y)
1502040769631:BladeWeight <- read.csv("BladeWeight.csv")
1502040862674:y = pnorm(5.20, mean=4.99, sd=0.11)
1502040864895:y
1502040873165:1-y
1502040902745:pnorm(4.80, mean=4.99, sd=0.11)
1502040941677:countblade <- length(which(BladeWeight$Weight > 5.20))
1502040941979:countblade
1502040942712:countblade2 <- length(which(BladeWeight$Weight <= 4.80))
1502040946223:countblade2
1502041044360:plot(BladeWeight$Sample, BladeWeight$Weight)
1502041169261:hist(BladeWeight$Weight)
1502041291613:hist(BladeWeight$Weight, prob = T)
1502041317593:lines(density(BladeWeight))             # add a density estimate with defaults
1502041326399:BladeWeight$Weight
1502041333330:str(BladeWeight)
1502041338479:lines(density(BladeWeight))             # add a density estimate with defaults
1502041340800:lines(density(BladeWeight))             # add a density estimate with defaults
1502041342551:hist(BladeWeight$Weight, prob = T)
1502041343351:lines(density(BladeWeight))             # add a density estimate with defaults
1502041344137:lines(density(BladeWeight, adjust=2), lty="dotted")
1502041352201:lines(density(BladeWeight$Weight))             # add a density estimate with defaults
1502041358084:lines(density(BladeWeight$Weight, adjust=2), lty="dotted")
1502041384364:hist(BladeWeight$Weight, prob = T)
1502041385098:lines(density(BladeWeight$Weight))             # add a density estimate with defaults
1502041385825:lines(density(BladeWeight$Weight, adjust=2), lty="dotted") # add another "smoother" density
1502041437845:hist(BladeWeight$Weight, prob = T, ylim = c(0,5))
1502041438884:lines(density(BladeWeight$Weight))             # add a density estimate with defaults
1502041439497:lines(density(BladeWeight$Weight, adjust=2), lty="dotted") # add another "smoother" density
1502041447203:hist(BladeWeight$Weight, prob = T, ylim = c(0,4))
1502041447978:lines(density(BladeWeight$Weight))             # add a density estimate with defaults
1502041448647:lines(density(BladeWeight$Weight, adjust=2), lty="dotted") # add another "smoother" density
1502325853974:?qnorm
1502632853862:getwd
1502632869704:getwd()
1502632876916:CustomerSurvey2014 = read.csv(file = "CustomerSurvey2014.csv")
1502632884419:summary(CustomerSurvey2014)
1502632885370:rm(CustomerSurvey2014)
1502632886288:CustomerSurvey2014 = read.csv(file = "CustomerSurvey2014.csv", stringsAsFactors = FALSE)
1502632907681:ssss
1502632937530:test
1502632940161:hello
1502633454103:countByRegion <- table(CustomerSurvey2014$Region, CustomerSurvey2014$Quality)
1502633463749:countByRegion
1502635024948:CustomerSurvey2014 = read.csv(file = "CustomerSurvey2014.csv", stringsAsFactors = FALSE)
1502635025329:CustomerSurvey2014[is.na(CustomerSurvey2014)] <- "NorthA"
1502635025595:countByRegion <- table(CustomerSurvey2014$Region, CustomerSurvey2014$Quality)
1502635026140:countByRegion
1502635050510:barplot(table(CustomerSurvey2014$Region))
1502635081513:hist(CustomerSurvey2014$Quality, main="Quality - Number of Responses", xlab="Level of Quality")
1502635153101:attach(CustomerSurvey2014)
1502635191181:attach(CustomerSurvey2014)
1502635193395:hist(Quality[which(Quality == "NorthA")], main="Quality - Number of Responses (North America)",
1502635193396:xlab="Level of Quality")
1502635210928:Quality
1502635219649:Quality[which(Quality == "NorthA")]
1502635239264:names(CustomerSurvey2014)
1502635252755:hist(Quality[which(Region == "NorthA")], main="Quality - Number of Responses (North America)",
1502635252756:xlab="Level of Quality")
1502635353827:library(tidyverse)
1502635512443:?excel_sheets
1502635557667:file.path("Performance_Lawn_Equipment_Database.xlsx")
1502635581542:system.file("Performance_Lawn_Equipment_Database.xlsx")
1502635588980:system.file("Performance_Lawn_Equipment_Database.xlsx")
1502635626260:system.file("Performance_Lawn_Equipment_Database.xlsx", package = "readxl")
1502635658081:excel_sheets(system.file("Performance_Lawn_Equipment_Database.xlsx", package = "readxl"))
1502635667479:excel_sheets
1502635691923:library(readxl)
1502635694701:excel_sheets(system.file("Performance_Lawn_Equipment_Database.xlsx", package = "readxl"))
1502635722296:excel_sheets(file.path("Performance_Lawn_Equipment_Database.xlsx", package = "readxl"))
1502635739066:))
1502635744387:excel_sheets(file.path("Performance_Lawn_Equipment_Database.xlsx"))
1502635750855:excel_sheets(("Performance_Lawn_Equipment_Database.xlsx"))
1502635776039:system.file("INDEX
1502635776040:")
1502635784625:system.file("Shipping Cost")
1502635792080:system.file("Performance_Lawn_Equipment_Database.xlsx")
1502635811629:countByRegion <- table(CustomerSurvey2014$Region, CustomerSurvey2014$Quality)
1502635811631:countByRegion
1502635816206:system.file(package = "stats") # The root of package 'stats'
1502635867102:system.file("Performance_Lawn_Equipment_Database.xlsx", package = "readxl")
1502635875638:system.file("Performance_Lawn_Equipment_Database.xlsx", package = "tidyverse")
1502635907214:file.path("per")
1502635911043:file.path("Performance_Lawn_Equipment_Database.xlsx")
1502635928751:system.file("help", "AnIndex", package = "splines")
1502635941209:system.file()                  # The root of the 'base' package
1502635949623:system.file(package = "stats") # The root of package 'stats'
1502635957515:system.file(package = "readxl") # The root of package 'stats'
1502635963846:system.file("INDEX")
1502635978581:system.file("Performance_Lawn_Equipment_Database.xlsx", package = "readxl")
1502636050859:system.file
1502636059482:?readxl::system.file
1502636063957:??system.file
1502636111134:system.file("Performance_Lawn_Equipment_Database.xlsx", package = "readxl", mustWork = T)
1502636343539:PLE_path <- file.path("Performance_Lawn_Equipment_Database.xlsx")
1502636344304:PLE <- lapply(excel_sheets(PLE_path), read_excel)
1502636361058:PLE <- lapply(excel_sheets(PLE_path), read_excel, path = PLE_path)
1502636400309:excel_sheets(PLE_path)
1502636491900:names(PLE)
1502636499025:str(PLE)
1502636604516:read_excel(PLE_path, 1)
1502636625097:head(PLE[[1]])
1502636654335:read_excel(PLE_path, "Dealer Satisfaction")
1502636673467:excel_sheets(PLE_path)
1502636686388:read_excel(PLE_path, " Dealer Satisfaction")
1502636699333:excel_sheets(PLE_path)
1502636711451:read_excel(PLE_path, "2014 Customer Survey")
1502636734840:read_excel(PLE_path, "2014 Customer Survey", skip = 2)
1502636807093:View(system.file("Performance_Lawn_Equipment_Database.xlsx", package = "readxl")
1502636807094:)
1502636826872:View(read_excel(PLE_path, "2014 Customer Survey", skip = 2)
1502636826873:)
1502636856662:read_excel(PLE_path, "2014 Customer Survey", skip = 2, stringsAsFactors = F)
1502636890220:test <- read_excel(PLE_path, "2014 Customer Survey", skip = 2, stringsAsFactors = F)
1502636901435:test <- read_excel(PLE_path, "2014 Customer Survey", skip = 2)
1502636908044:summary(test)
1502636925422:summary(test$Region)
1502636930643:summary(as.factor(test$Region)
1502636932163:)
1502636993242:CustomerSurvey2014 <- read_excel(PLE_path, "2014 Customer Survey", skip = 2)
1502636998699:CustomerSurvey2014[is.na(CustomerSurvey2014)]
1502637013992:class(CustomerSurvey2014)
1502637018382:CustomerSurvey2014[is.na(CustomerSurvey2014)] <- "NorthA"
1502637022829:CustomerSurvey2014
1502637034693:CustomerSurvey2014[1,1]
1502637045979:class(NA)
1502637055467:class(CustomerSurvey2014[1,1])
1502637085417:CustomerSurvey2014 = read.csv(file = "CustomerSurvey2014.csv", stringsAsFactors = FALSE)
1502637087059:CustomerSurvey2014 = read.csv(file = "CustomerSurvey2014.csv", stringsAsFactors = FALSE)
1502637087639:CustomerSurvey2014[is.na(CustomerSurvey2014)] <- "NorthA"
1502637088097:countByRegion <- table(CustomerSurvey2014$Region, CustomerSurvey2014$Quality)
1502637088498:countByRegion
1502637093681:attach(CustomerSurvey2014)
1502637102621:hist(Quality[which(Region == "NorthA")], main="Quality - Number of Responses (North America)",
1502637102621:xlab="Level of Quality")
1502637384393:countByRegion
1502637423395:class(countByRegion)
1502637437975:countByRegion[1]
1502637446095:countByRegion[1,]
1502637468642:names(countByRegion)
1502637490298:CustomerSurvey2014
1502637520506:countByRegion
1502637566715:apply(countByRegion, 2, sum)
1502637575404:apply(countByRegion, 1, sum)
1502637803575:top_response <- apply(countByRegion, 1, function(x) sum(x[,4], x[,5]))
1502637818056:countByRegion[,4]
1502637861997:top_response <- apply(countByRegion, 1, function(x) {sum(x[,4], x[,5])})
1502637901956:sum(2,3)
1502637916608:top_response <- apply(countByRegion, 1, function(x) x[4]+x[5])
1502637926157:total_response <- apply(countByRegion, 1, sum)
1502637935614:top_response <- apply(countByRegion, 1, function(x) sum(x[4], x[5]))
1502637937477:top_response <- apply(countByRegion, 1, function(x) sum(x[4], x[5]))
1502637938774:total_response <- apply(countByRegion, 1, sum)
1502637946579:top_response
1502637980132:top_propotion <- top_response/total_response
1502637987504:top_propotion
1502637997160:top_propotion <- top_response/total_response %>% round(2)
1502637999546:top_propotion <- top_response/total_response %>% round(2)
1502638000787:top_propotion
1502638028239:round(top_propotion, 2)
1502638035369:top_propotion <- top_response/total_response %>% round(2)
1502638036321:top_propotion
1502638040515:library(tidyverse)
1502638043986:library(tidyverse)
1502638044357:library(readxl)
1502638052184:top_response <- apply(countByRegion, 1, function(x) sum(x[4], x[5]))
1502638052501:total_response <- apply(countByRegion, 1, sum)
1502638052820:top_propotion <- top_response/total_response %>% round(2)
1502638053263:top_propotion
1502638085350:top_propotion <- top_response/total_response %>% round(., 2)
1502638087496:top_propotion <- top_response/total_response %>% round(., 2)
1502638087916:top_propotion
1502638094052:top_propotion <- top_response/total_response
1502638094598:top_propotion
1502638816523:excel_sheets("Performance_Lawn_Equipment_Database.xlsx")
1502638887348:PLE_path <- file.path("Performance_Lawn_Equipment_Database.xlsx")
1502638941304:ResponseTime <- read_excel(PLE_path, "Response Time", skip = 2)
1502638942102:ResponseTime
1502639009431:Q1.13mean <- mean(ResponseTime$Q1.2013)
1502639029365:Q1.13mean
1502639040330:ResponseTime <- read.csv("ResponseTime.csv")
1502639041937:ResponseTime <- read.csv("ResponseTime.csv")
1502639042388:str(ResponseTime)
1502639130797:ResponseTime <- read.csv("ResponseTime.csv")
1502639131291:str(ResponseTime)
1502639185548:str(ResponseTime)
1502639199214:Q1.13std <- sd(ResponseTime$Q1.2013)
1502639221230:Q1.13mean <- mean(ResponseTime$Q1.2013)
1502639221806:Q1.13std <- sd(ResponseTime$Q1.2013)
1502639228980:Q1.13mean
1502639243646:Q1.13std
1502639344997:install.packages("BDSA
1502639344997:")
1502639357007:library(BSDA)
1502639373915:install.packages("BSDA
1502639373916:")
1502639396181:library(BSDA)
1502639460778:install.packages("BSDA")
1502639468790:library(BSDA)
1502639508575:ResponseTime
1502639659600:attach(ResponseTime)
1502639666514:z.test(Q1.2013)
1502639677656:Q1.2013
1502639693442:z.test(Q1.2013, Q2.2013)
1502639771623:z.test(Q1.2013, sigma.x = Q1.13std, mu = Q1.13mean)
1502639795368:plot(Q1.2013)
1502639809407:hist(Q1.2013)
1502639815953:z.test(Q1.2013, sigma.x = Q1.13std, mu = Q1.13mean)
1502639829420:z.test(Q1.2013, sigma.x = Q1.13std)
1502639874547:z.test(Q2.2013, sigma.x = sd(Q2.2013), mu = mean(Q2.2013))
1502639919172:)
1502639923545:z.test(Q2.2013, sigma.x = sd(Q2.2013))
1502640168446:z.test(Q1.2013, Q2.2013, sigmax = sd(Q1.2013), sigma.y = sd(Q2.2013))
1502640177453:z.test(Q1.2013, Q2.2013, sigma.x = sd(Q1.2013), sigma.y = sd(Q2.2013))
1502640697270:excel_sheets("Performance_Lawn_Equipment_Database.xlsx")
1502640754428:Transmissioncost <- read_excel(PLE_path, sheet = "Transmission Costs")
1502640758616:View(Transmissioncost)
1502640775767:Transmissioncost <- read_excel(PLE_path, sheet = "Transmission Costs", skip = 2)
1502640789021:current.sd <- sd(TransmissionCosts$Current)
1502640795403:Transmissioncosts <- read_excel(PLE_path, sheet = "Transmission Costs", skip = 2)
1502640796236:current.sd <- sd(TransmissionCosts$Current)
1502640812358:TransmissionCosts <- read_excel(PLE_path, sheet = "Transmission Costs", skip = 2)
1502640812984:TransmissionCosts <- read_excel(PLE_path, sheet = "Transmission Costs", skip = 2)
1502640817939:current.sd <- sd(TransmissionCosts$Current)
1502640827603:z.test(TransmissionCosts$Current, sigma.x = current.sd)
1502640952626:attach(TransmissionCosts)
1502640970322:TransmissionCosts
1502641060641:z.test(`Process A`, sigma.x = `Process A`)
1502641092882:names(TransmissionCosts)
1502641144195:TransmissionCosts <- TransmissionCosts %>%
1502641144196:rename(Process.A = `Process A`, Process.B = `Process B`)
1502641146580:names(TransmissionCosts)
1502641177360:z.test(Process.A, sigma.x = mean(Process.A))
1502641184768:excel_sheets("Performance_Lawn_Equipment_Database.xlsx")
1502641185304:TransmissionCosts <- read_excel(PLE_path, sheet = "Transmission Costs", skip = 2)
1502641185585:current.sd <- sd(TransmissionCosts$Current)
1502641185939:z.test(TransmissionCosts$Current, sigma.x = current.sd)
1502641186380:attach(TransmissionCosts)
1502641187007:TransmissionCosts <- TransmissionCosts %>%
1502641187008:rename(Process.A = `Process A`, Process.B = `Process B`)
1502641187768:z.test(Process.A, sigma.x = mean(Process.A))
1502641212636:names(TransmissionCosts)
1502641216824:excel_sheets("Performance_Lawn_Equipment_Database.xlsx")
1502641217158:TransmissionCosts <- read_excel(PLE_path, sheet = "Transmission Costs", skip = 2)
1502641217429:current.sd <- sd(TransmissionCosts$Current)
1502641217866:z.test(TransmissionCosts$Current, sigma.x = current.sd)
1502641219232:attach(TransmissionCosts)
1502641221181:z.test(`Process A`, sigma.x = mean(`Process A`))
1502641273598:z.test(`Process B`, signa.x = mean(`Process B`))
1502641279026:z.test(`Process B`, signa.x = mean(`Process B`))
1502641288966:names(TransmissionCosts)
1502641294066:z.test(`Process A`, sigma.x = mean(`Process A`))
1502641294775:z.test(`Process B`, signa.x = mean(`Process B`))
1502641301921:z.test(`Process B`, sigma.x = mean(`Process B`))
1502641355165:z.test(`Process A`, Current, sigma.x = mean(`Process A`), sigma.y = mean(Current))
1502641375467:z.test(`Process B`, Current, sigma.x = mean(`Process B`), sigma.y = mean(Current))
1502647660990:excel_sheets("Performance_Lawn_Equipment_Database.xlsx")
1502647722917:MowerTest <- read_excel(PLE_path, sheet = "Mower Test", skip = 2)
1502647723950:MowerTest
1502647733694:MowerTest <- read_excel(PLE_path, sheet = "Mower Test", skip = 3)
1502647734385:MowerTest
1502647749719:View(MowerTest)
1502647761553:MowerTest <- read_excel(PLE_path, sheet = "Mower Test", skip = 2)
1502647762721:View(MowerTest)
1502647771475:MowerTest <- read_excel(PLE_path, sheet = "Mower Test")
1502647869760:MowerTest <- read_excel(PLE_path, sheet = "Mower Test", skip = 3)
1502647870154:MowerTest
1502647871505:View(MowerTest)
1502647907204:A <- data.frame(lapply(MowerTest, function(x) as.numeric(x)))
1502647909356:A
1502647938251:MowerTest <- read.csv("MowerTest.csv")
1502647945804:View(MowerTest)
1502647961237:countFail <- length(which(MowerTest == "Fail"))
1502647961654:countFail
1502647966496:View(MowerTest)
1502647979013:A <- data.frame(lapply(MowerTest, function(x) as.numeric(x)))
1502647981654:A
1502648073526:MowerTest <- read_excel(PLE_path, sheet = "Mower Test", skip = 3)
1502648074030:MowerTest
1502648085209:A <- data.frame(lapply(MowerTest, function(x) as.numeric(x)))
1502648124081:A <- data.frame(apply(MowerTest, 2, function(x) as.numeric(x)))
1502648127211:A
1502648196197:MowerTest <- read.csv("MowerTest.csv")
1502648204082:A <- data.frame(lapply(MowerTest, function(x) as.numeric(x)))
1502648205101:View(MowerTest)
1502648213280:MowerTest <- read_excel(PLE_path, sheet = "Mower Test", skip = 3)
1502648215807:View(MowerTest)
1502648223423:MowerTest <- read.csv("MowerTest.csv")
1502648230682:summary(MowerTest)
1502648277335:MowerTest <- MowerTest %>% mutate_all(.funs(as.factor))
1502648314233:MowerTest <- MowerTest %>% mutate_all(as.factor)
1502648317419:MowerTest
1502648322836:MowerTest <- read_excel(PLE_path, sheet = "Mower Test", skip = 3)
1502648323493:MowerTest <- MowerTest %>% mutate_all(as.factor)
1502648325050:A <- data.frame(lapply(MowerTest, function(x) as.numeric(x)))
1502648328574:A
1502648380130:str(A)
1502648788185:isTRUE(1)
1502648797119:?isTRUE
1502648839907:A <- data.frame(lapply(MowerTest, function(x) ifelse(x == "Pass", 1, 0)))
1502648841643:A
1502648977956:A <- MowerTest %>% select(-Observation)
1502648979791:A
1502648999062:?dplyr::select
1502649023951:A <- MowerTest %>% select(-Observation)
1502649028774:names(A)
1502649032642:View(A)
1502649184545:A <- MowerTest %>% select(-Observation) %>% mutate_all(apply, 2,  function(x) ifelse(x == "Pass", 1, 0)))
1502649195472:A <- MowerTest %>% select(-Observation) %>%
1502649195474:mutate_all(apply, 2,  function(x) ifelse(x == "Pass", 1, 0))
1502649219448:A <- MowerTest %>% select(-Observation) %>%
1502649219448:mutate_all(lapply, function(x) ifelse(x == "Pass", 1, 0))
1502649221488:A
1502649231001:A <- MowerTest %>% select(-Observation) %>%
1502649231002:mutate_all(apply, 2, function(x) ifelse(x == "Pass", 1, 0))
1502649236259:A <- MowerTest %>% select(-Observation) %>%
1502649236260:mutate_all(apply, function(x) ifelse(x == "Pass", 1, 0))
1502649248101:A <- MowerTest %>% select(-Observation) %>%
1502649248102:mutate_all(apply, FUN = function(x) ifelse(x == "Pass", 1, 0))
1502649259152:A <- MowerTest %>% select(-Observation) %>%
1502649259153:mutate_all(apply, MARGIN = 2, FUN = function(x) ifelse(x == "Pass", 1, 0))
1502649288961:A <- MowerTest %>% select(-Observation) %>%
1502649288963:mutate_all(.funs = apply, function(x) ifelse(x == "Pass", 1, 0))
1502649298544:A <- MowerTest %>% select(-Observation) %>%
1502649298545:mutate_all(.funs = apply, 2, function(x) ifelse(x == "Pass", 1, 0))
1502649315733:A <- MowerTest %>% select(-Observation) %>%
1502649315734:mutate_all(.funs = lapply, function(x) ifelse(x == "Pass", 1, 0))
1502649317337:A
1502649327123:View()
1502649329099:View(A)
1502649391610:A <- MowerTest %>% select(-Observation) %>%
1502649391612:mutate_all(function(x) ifelse(x == "Pass", 1, 0))
1502649393653:A
1502649464537:B <- MowerTest %>% select(-Observation) %>%
1502649464538:mutate_all(function(x) ifelse(x == "Pass", 1, 0))
1502649465095:length(which(B == 0))
1502649465646:mean(B)
1502649514110:attach(MowerTest)
1502649518417:B <- MowerTest %>% select(-Observation) %>%
1502649518418:mutate_all(function(x) ifelse(x == "Pass", 1, 0))
1502649525690:head(B)
1502649537094:length(which(B == 0))
1502649548192:B <- data.frame(lapply(MowerTest, function(x) ifelse(x == "Pass", 1, 0)))
1502649549960:length(which(B == 0))
1502649555159:B
1502649647998:B <- MowerTest %>% select(-Observation) %>%
1502649648000:mutate_all(function(x) ifelse(x == "Pass", 1, 0))
1502649648617:length(which(B == 0))
1502649656951:B
1502649663831:mean(B)
1502649689980:B <- MowerTest %>% select(-Observation) %>%
1502649689981:mutate_all(function(x) ifelse(x == "Pass", 1, 0)) %>%
1502649689982:mutate_all(as.numeric)
1502649691484:length(which(B == 0))
1502649692338:mean(B)
1502649784039:B <- MowerTest %>% select(-Observation) %>%
1502649784040:mutate_all(function(x) ifelse(x == "Pass", 1, 0))
1502649785734:length(which(B == 0))
1502649893492:MowerTest <- read_excel(PLE_path, sheet = "Mower Test", skip = 3)
1502649893656:MowerTest <- MowerTest %>% mutate_all(as.factor)
1502649898588:summar(MowerTest)
1502649902758:summary(MowerTest)
1502649931077:B <- MowerTest %>% select(-Observation) %>%
1502649931077:mutate_all(function(x) ifelse(x == "Pass", 1, 0))
1502649936560:which(B==0)
1502649940718:class(B)
1502650051279:B <- MowerTest %>% select(-Observation) %>%
1502650051281:mutate_all(function(x) ifelse(x == "Pass", 1, 0))
1502650054965:B <- MowerTest %>% select(-Observation)
1502650058263:summary(B)
1502650161534:length(which(B == 0))
1502650164133:length(which(B == 0))
1502650166033:B <- MowerTest %>% select(-Observation) %>%
1502650166034:mutate_all(function(x) ifelse(x == "Pass", 1, 0))
1502650167424:length(which(B == 0))
1502650264366:class(B)
1502650268555:head(B)
1502650280329:mean(B)
1502650290022:mean(as.numeric(B))
1502650311288:B <- MowerTest %>% select(-Observation) %>%
1502650311289:mutate_all(function(x) ifelse(x == "Pass", 1, 0)) %>%
1502650311289:mutate_all(as.numeric)
1502650314063:length(which(B == 0))
1502650318685:mean((B))
1502650322273:B
1502650358309:B <- MowerTest %>% select(-Observation) %>%
1502650358311:mutate_all(function(x) ifelse(x == "Pass", 1, 0)) %>%
1502650358312:mutate_all(as.numeric) %>% as.data.frame
1502650360474:mean((B))
1502650362553:B
1502650369820:summary(B)
1502650374868:B <- MowerTest %>% select(-Observation) %>%
1502650374869:mutate_all(function(x) ifelse(x == "Pass", 1, 0)) %>%
1502650374869:mutate_all(as.numeric)
1502650378685:length(which(B == 0))
1502650485764:meanB <- B %>% mutate_all(apply, 2, mean) %>% mutate(lappy, mean)
1502650496400:meanB <- B %>% mutate_all(apply, 2, mean) %>% mutate(sapply, mean)
1502650523779:B %>% mutate_all(apply, 2, mean)
1502650563164:B <- MowerTest %>% group_by(Observation) %>%
1502650563164:mutate_all(function(x) ifelse(x == "Pass", 1, 0)) %>%
1502650563165:mutate_all(as.numeric)
1502650566102:length(which(B == 0))
1502650574241:B
1502650629437:length(which(B == 0))
1502650660483:meanB <- B %>% mutate_all(apply, 1, mean) %>% mutate(sapply, mean)
1502650664416:meanB <- B %>% mutate_all(apply, 1, mean)
1502650670165:meanB <- B %>% mutate_all(mean)
1502650676745:meanB
1502650710696:meanB <- B %>% mutate_all(apply, 1, mean)
1502650726687:meanB <- B %>% mutate_all(apply, 1, FUN = mean)
1502650751493:meanB <- B %>% mutate_all(.funs = apply, 1, mean)
1502650824043:meanB <- B %>% mutate_all(mean)
1502650827266:meanB
1502650850094:meanB <- B %>% ungroup %>% mutate_all(mean)
1502650855284:meanB
1502650887744:meanB <- B %>% ungroup %>% mutate_all(-Observation, mean)
1502650899672:meanB <- B %>% ungroup %>% mutate_at(-Observation, mean)
1502650951557:meanB <- B %>% mutate_at(-Observation, mean)
1502650959341:meanB <- B %>% mutate_at(vars = -Observation, mean)
1502650962989:meanB <- B %>% mutate_at(.vars = -Observation, mean)
1502650971085:meanB <- B %>% mutate_at(.vars = -c(Observation), mean)
1502650974412:meanB
1502650983451:meanB <- B %>% ungroup %>% mutate_at(.vars = -c(Observation), mean)
1502650989272:meanB
1502651088645:B <- MowerTest %>% group_by(Observation) %>%
1502651088645:mutate_all(function(x) ifelse(x == "Pass", 1, 0)) %>%
1502651088646:mutate_all(as.numeric)
1502651088999:length(which(B == 0))
1502651089314:meanB <- B %>% ungroup %>% mutate_at(.vars = -c(Observation), mean)
1502651092872:meanB
1502651167557:meanB <- B %>% apply(2, mean) %>% sapply(mean)
1502651196498:meanB <- B %>% apply(2, mean) %>% lapply(mean)
1502651202517:meanB <- B %>% apply(2, mean)
1502651213612:length(which(B == 0))
1502651217589:b
1502651219189:B
1502651245915:meanB <- B %>% select(-Observation) %>% apply(2, mean)
1502651250708:meanB <- B %>% select(-Observation) %>% apply(1, mean)
1502651259165:B
1502651275570:B %>% select(-Observation)
1502651297811:?dplyr::select
1502651318105:names(B)
1502651326325:B$`1`
1502651334099:B$1
1502651369739:meanB <- B %>% select(Observation) %>% apply(1, mean)
1502651375639:B %>% select(Observation)
1502651384152:B %>% select(-Observation)
1502651395904:meanB <- B %>% ungroup %>% select(-Observation) %>% apply(1, mean)
1502651399177:meanB
1502651407354:meanB <- B %>% ungroup %>% select(-Observation) %>% apply(1, mean) %>% mean
1502651410653:meanB
1502651449555:t.test(B)
1502651504042:t.test(B %>% ungroup %>% select(-Observation) %>% apply(1, mean))
1502651560340:B <- B %>% ungroup %>% select(-Observation) %>% apply(1, mean)
1502651560794:t.test(B)
1502651573630:t.test(B, meanB)
1502651581657:?t.test
1502651587466:t.test(B, mu = meanB)
1502651810833:excel_sheets(PLE_path)
1502651840941:BladeWeight <- read_excel(PLE_path, "Blade Weight")
1502651844032:blade
1502651846466:BladeWeight
1502651856879:BladeWeight <- read_excel(PLE_path, "Blade Weight", skip = 2)
1502651865274:head(BladeWeight)
1502651939067:attach(BladeWeight)
1502651945822:sd(Weight)
1502651974915:BladeWeight <- read_excel(PLE_path, "Blade Weight", skip = 2)
1502651975345:hist(BladeWeight$Weight)
1502651975848:mean(BladeWeight$Weight)
1502651981015:attach(BladeWeight)
1502651981420:sd(Weight)
1502652034462:sd(Weight)^2
1502652039832:sd(Weight)^4
1502652188168:sem <- sd(Weight)/sqrt(length(Weight))
1502652190055:sem
1502652264340:A <- lm(BladeWeight$Weight ~ ., BladeWeight)
1502652268588:plot(A)
1502652329471:library(nortest)
1502652348306:install.packages("nortest")
1502652352260:library(nortest)
1502652359409:ad.test(Weight)
1502652418651:ks.test(Weight)
1502652447537:ks.test(Weight,"pnorm")
1502652506870:ks.test(Weight, "pnorm", mean(Weight))
1502652515798:ks.test(Weight, "pnorm", mean = mean(Weight))
1502652553981:ks.test(Weight, "pnorm", mean = mean(Weight), sd = sd(Weight))
1502652577476:shapiro.test(Weight)
1502652598109:shapiro.test(rnorm(100, mean = 5, sd = 3))
1502652634184:ad.test(Weight)
1502652681435:qqnorm(Weight)
1502652691114:qqline(Weight)
1502653640318:knitr::opts_chunk$set(echo = TRUE)
1502653640321:library(reshape2)
1502653640347:library(ggplot2)
1502653640349:library(plyr)
1502653640372:library(Hmisc)
1502653642283:library(psych)
1502653642311:library(pastecs)
1502653642389:library(tidyverse)
1502653642538:z.test(Q1.2013, sigma.x = Q1.13std, mu = Q1.13mean)
1502653660537:z.test(Q2.2013, sigma.x = sd(Q2.2013), mu = mean(Q2.2013))
1502653704512:z.test(Q1.2013, sigma.x = Q1.13std, mu = Q1.13mean)
1502653715813:names(z.test(Q1.2013, sigma.x = Q1.13std, mu = Q1.13mean))
1502653728467:z.test(Q1.2013, sigma.x = Q1.13std, mu = Q1.13mean)$conf.int
1502653746063:z.test(Q1.2013, sigma.x = Q1.13std, mu = Q1.13mean)$conf.int[1]
1502654994087:sd(Weight)
1502655013811:(sd(Weight)/0.2)^2
1502660973678:sem <- sd(Weight)/sqrt(length(Weight))
1502660974811:sem
1502660977732:A <- lm(BladeWeight$Weight ~ ., BladeWeight)
1502660978101:plot(A)
1502660999387:shapiro.test(Weight)
1502661008424:shapiro.test(Weight[-171])
1502661029357:Weight[-171]
1502661074462:qqnorm(Weight[-171])
1502661080696:qqline(Weight[-171])
1502661086478:shapiro.test(Weight[-171])
1502661201034:hist(BladeWeight$Weight)
1502661229135:Weight[-171]
1502662998954:getwd()
1502664715755:round((1.96*sd(Weight)/0.2)^2, 0)
1502664724450:
1502664740299:(1.96*sd(Weight))/0.2)^2
1502664756969:1.96*sd(Weight)/0.2
1502664895542:round((1.96*sd(Weight)/(0.2*mean(Weight)))^2, 0)
1502664901121:(1.96*sd(Weight)/(0.2*mean(Weight)))^2
1502664974744:mean(Weight)(1.96*sd(Weight)/0.2)^2
1502664987523:mean(Weight)*(1.96*sd(Weight)/0.2)^2
1502665011675:mean(Weight)
1502665198118:round((1.96*sd(Weight)*mean(Weight)/0.2)^2, 0)
1502665823666:pnorm(2,1)
1502665856018:pnorm(1)
1502665863636:pnorm(19)
1502665869287:pnorm(2)
1502665872689:pnorm(3)
1502665885284:qnorm(1)
1502665889584:qnorm(0.4)
1502665898415:qnorm(0.5)
1502665901038:qnorm(0.9)
1502665905647:qnorm(0.95)
1502665910123:qnorm(0.975)
1502665948586:round((qnorm(0.975)*sd(Weight)*mean(Weight)/0.2)^2, 0)
1502665953394:round((qnorm(0.975)*sd(Weight)*mean(Weight)/0.1)^2, 0)
1502666015497:par(mfrow = c(2, 2))
1502666020061:plot(A)
1502666031040:plot(c(1:10))
1502666050408:par()
1502666069170:par(mfrow = c(2, 2)
1502666072643:)
1502666080046:op <- par(mfrow = c(2, 2), # 2 x 2 pictures on one plot
1502666080047:pty = "s")       # square plotting region,
1502666080048:# independent of device size
1502666080050:## At end of plotting, reset to previous settings:
1502666080051:par(op)
1502666086161:plot(c(1:1))
1502666099046:op <- par(mfrow = c(2, 2), # 2 x 2 pictures on one plot
1502666099048:pty = "s")       # square plotting region,
1502666099049:# independent of device size
1502666099050:## At end of plotting, reset to previous settings:
1502666102313:par(op)
1502666117593:par(new = T)
1502666128361:dev.off()
1502666151617:par()
1502666153244:?par
1502667089160:getwd()
1502678680660:1.96*sd(Weight)/0.2)^2
1502678684710:1.96*sd(Weight)/0.2)
1502678686375:1.96*sd(Weight)/0.2
1502678890697:1.96*0.11/0.2
1502679668249:CustomerSurvey2014 = read.csv(file = "CustomerSurvey2014.csv", stringsAsFactors = FALSE)
1502679668265:CustomerSurvey2014[is.na(CustomerSurvey2014)] <- "NorthA"
1502679668273:countByRegion <- table(CustomerSurvey2014$Region, CustomerSurvey2014$Quality)
1502679668276:countByRegion
1502679668282:attach(CustomerSurvey2014)
1502679668312:# find the proportion of Top box(Level 4 or 5) responses by region.
1502679668312:top_response <- apply(countByRegion, 1, function(x) sum(x[4], x[5]))
1502679668326:total_response <- apply(countByRegion, 1, sum)
1502679668327:top_propotion <- top_response/total_response
1502679668328:top_propotion
1502679668329:## Step 2
1502679668330:ResponseTime <- read.csv("ResponseTime.csv")
1502679668334:Q1.13mean <- mean(ResponseTime$Q1.2013)
1502679668335:Q1.13std <- sd(ResponseTime$Q1.2013)
1502679668337:Q1.13mean
1502679668338:Q1.13std
1502679668339:# Compute the z-test for first and second quarter. I guess "first and second quarter"
1502679668340:# means first and second quarter in 2013
1502679668340:library(BSDA)
1502679668563:attach(ResponseTime)
1502679668567:# one sample z test
1502679668568:z.test(Q1.2013, sigma.x = Q1.13std, mu = Q1.13mean)
1502679668571:z.test(Q2.2013, sigma.x = sd(Q2.2013), mu = mean(Q2.2013))
1502679668640:# 2 sample z test
1502679668641:z.test(Q1.2013, Q2.2013, sigma.x = sd(Q1.2013), sigma.y = sd(Q2.2013))
1502679668643:# What estimates, with reasonable assurance, can PLE give customers for response
1502679668644:# times to customer service calls?
1502679668644:# based on the result, we accept the null hypothesis, which means the response time for
1502679668645:# first and seconde quarter of year 2013 are both normal distrubuted with the same mean.
1502679668645:# So we can use 95% confidence interval of first quarter of year 2013, [3.504362, 4.326038]
1502679668645:# as the estimates to give customers for response times to customer service calls.
1502679668646:## Step 3
1502679668646:excel_sheets("Performance_Lawn_Equipment_Database.xlsx")
1502679668647:TransmissionCosts <- read_excel(PLE_path, sheet = "Transmission Costs", skip = 2)
1502679668683:current.sd <- sd(TransmissionCosts$Current)
1502679668684:z.test(TransmissionCosts$Current, sigma.x = current.sd)
1502679675645:library(tidyverse)
1502679676794:library(readxl)
1502679686870:CustomerSurvey2014 = read.csv(file = "CustomerSurvey2014.csv", stringsAsFactors = FALSE)
1502679686875:CustomerSurvey2014[is.na(CustomerSurvey2014)] <- "NorthA"
1502679686876:countByRegion <- table(CustomerSurvey2014$Region, CustomerSurvey2014$Quality)
1502679686878:countByRegion
1502679686879:attach(CustomerSurvey2014)
1502679686885:# find the proportion of Top box(Level 4 or 5) responses by region.
1502679686885:top_response <- apply(countByRegion, 1, function(x) sum(x[4], x[5]))
1502679686890:total_response <- apply(countByRegion, 1, sum)
1502679686891:top_propotion <- top_response/total_response
1502679686891:top_propotion
1502679686892:## Step 2
1502679686893:ResponseTime <- read.csv("ResponseTime.csv")
1502679686895:Q1.13mean <- mean(ResponseTime$Q1.2013)
1502679686896:Q1.13std <- sd(ResponseTime$Q1.2013)
1502679686897:Q1.13mean
1502679686898:Q1.13std
1502679686899:# Compute the z-test for first and second quarter. I guess "first and second quarter"
1502679686899:# means first and second quarter in 2013
1502679686900:library(BSDA)
1502679686900:attach(ResponseTime)
1502679686907:# one sample z test
1502679686907:z.test(Q1.2013, sigma.x = Q1.13std, mu = Q1.13mean)
1502679686911:z.test(Q2.2013, sigma.x = sd(Q2.2013), mu = mean(Q2.2013))
1502679686914:# 2 sample z test
1502679686914:z.test(Q1.2013, Q2.2013, sigma.x = sd(Q1.2013), sigma.y = sd(Q2.2013))
1502679686916:# What estimates, with reasonable assurance, can PLE give customers for response
1502679686917:# times to customer service calls?
1502679686918:# based on the result, we accept the null hypothesis, which means the response time for
1502679686918:# first and seconde quarter of year 2013 are both normal distrubuted with the same mean.
1502679686919:# So we can use 95% confidence interval of first quarter of year 2013, [3.504362, 4.326038]
1502679686919:# as the estimates to give customers for response times to customer service calls.
1502679686920:## Step 3
1502679686920:excel_sheets("Performance_Lawn_Equipment_Database.xlsx")
1502679686948:TransmissionCosts <- read_excel(PLE_path, sheet = "Transmission Costs", skip = 2)
1502679686951:current.sd <- sd(TransmissionCosts$Current)
1502679686953:z.test(TransmissionCosts$Current, sigma.x = current.sd)
1502679711519:PLE_path <- file.path("Performance_Lawn_Equipment_Database.xlsx")
1502679712572:excel_sheets("Performance_Lawn_Equipment_Database.xlsx")
1502679713186:TransmissionCosts <- read_excel(PLE_path, sheet = "Transmission Costs", skip = 2)
1502679714067:current.sd <- sd(TransmissionCosts$Current)
1502679714438:z.test(TransmissionCosts$Current, sigma.x = current.sd)
1502679740063:current.mean <- mean(TransmissionCosts$Current)
1502679753181:z.test(TransmissionCosts$Current, sigma.x = current.sd, mu = current.mean)
1502679769845:hist(TransmissionCosts$Current)
1502679783504:density(TransmissionCosts$Current)
1502679901960:lines(density(TransmissionCosts$Current))
1502679912405:hist(TransmissionCosts$Current, probability = T)
1502679913608:lines(density(TransmissionCosts$Current))
1502679924862:z.test(TransmissionCosts$Current, sigma.x = current.sd, mu = current.mean)
1502680021733:z.test(`Process A`, Current, sigma.x = mean(`Process A`), sigma.y = mean(Current))
1502680025942:attach(TransmissionCosts)
1502680026234:z.test(`Process A`, Current, sigma.x = mean(`Process A`), sigma.y = mean(Current))
1502680027299:z.test(`Process B`, Current, sigma.x = mean(`Process B`), sigma.y = mean(Current))
1502680284670:# Load R packages
1502680284673:knitr::opts_chunk$set(echo = TRUE)
1502680284675:library(readxl)
1502680284677:library(tidyverse)
1502680284680:library(nortest)
1502680284705:library(BSDA)
1502680285066:attach(TransmissionCosts)
1502680313081:shapiro.test(Current)
1502680324375:ad.test(Current)
1502680487203:shapiro.test(`Process A`)
1502680488023:shapiro.test(`Process B`)
1502685319070:file.edit("Project/babs_open_data_year_1/201402_babs_open_data/README.txt")
1502766911812:getwd()
1502768361557:getwd()
1502838295211:getwd()
1502838308540:setwd("./Project/")
1502838309237:ls
1502838310818:ls()
1502838312215:dir()
1502838324335:setwd("./babs_open_data_year_1/201402_babs_open_data/")
1502838326225:dir()
1502935407759:install.packages("explainr")
1502935425164:devtools::install_github("hilaryparker/explainr")
1502935434269:install.packages("devtools")
1502935444477:library(devtools)
1502935445806:devtools::install_github("hilaryparker/explainr")
1502935456673:ptest <- prop.test(x = 500, n = 1008)
1502935456681:explain(ptest)
1502935474340:explainr::explain(ptest)
1502935493358:library(explainr)
1502935498194:explain(ptest)
1502941474498:explain(ptest)
1503031506735:?dplyr::add_count
1503147241789:?qt
1503147312898:pt(-1.5, 8 lower.tail = T)
1503147319611:pt(-1.5, 8, lower.tail = T)
1503147343767:qt(-1.5, 8, lower.tail = T)
1503147386668:qt(0.05, 8, lower.tail = T)
1503147409920:qt(0.05, 8, lower.tail = t)
1503147671913:getwd()
1503147709970:setwd("../../../")
1503147712137:getwd()
1503147715691:dir()
1503147748189:qt(0.05,8,lower.tail = T)
1503148268789:file.edit("Homework_1.Rmd")
1503148448187:?norm
1503148454771:?qn
1503148459076:??qt
1503148463482:?qt
1503148469976:?qnorm
1503152912277:?lm
1503153732670:CustomerSurvey2014 = read.csv(file = "CustomerSurvey2014.csv", stringsAsFactors = FALSE)
1503153735227:CustomerSurvey2014[is.na(CustomerSurvey2014)] <- "NorthA"
1503153735452:countByRegion <- table(CustomerSurvey2014$Region, CustomerSurvey2014$Quality)
1503153735994:countByRegion
1503153736399:attach(CustomerSurvey2014)
1503153771335:head(CustomerSurvey2014)
1503153895379:summary(CustomerSurvey2014)
1503153903840:countByRegion <- table(CustomerSurvey2014$Region, CustomerSurvey2014$Quality)
1503153904600:countByRegion
1503153914478:CustomerSurvey2014[is.na(CustomerSurvey2014)] <- "NorthA"
1503153919352:attach(CustomerSurvey2014)
1503153948291:CustomerSurvey2014 <- CustomerSurvey2014 %>% as_tibble
1503153960433:CustomerSurvey2014
1503154074401:read_csv("CustomerSurvey2014.csv")
1503154096010:read_csv("CustomerSurvey2014.csv", na = "NorthA")
1503154159213:Quality <- CustomerSurvey2014 %>% select(Quality)
1503154162386:quality
1503154165050:Quality
1503154197973:Quality <- CustomerSurvey2014$Quality
1503154201812:Quality
1503154243238:Quality <- CustomerSurvey2014 %>% select(Quality)
1503154245514:Quality
1503154251172:Quality %>% t
1503154259376:Quality %>% class
1503154276609:Quality <- CustomerSurvey2014$Quality
1503154285377:Quality %>% class
1503154337713:EasyOfUse <- CustomerSurvey2014 %>% select(EasyOfUse)
1503154344494:EasyOfUse <- CustomerSurvey2014 %>% select(Ease.of.Use)
1503154367512:EasyOfUse <- CustomerSurvey2014$Quality
1503154380436:EasyOfUse <- CustomerSurvey2014 %>% select(Ease.of.Use)
1503154385052:EasyOfUse
1503154430558:?options
1503154436766:?max.print
1503154439971:??max.print
1503154506071:dir()
1503154600632:excel_sheets("Performance_Lawn_Equipment_Database.xlsx")
1503154608113:PLE_path <- file.path("Performance_Lawn_Equipment_Database.xlsx")
1503154644883:file.edit("Lab#1 P4.Rmd")
1503154908908:source('~/.active-rstudio-document', echo=TRUE)
1503154921151:source('~/.active-rstudio-document', echo=TRUE)
1503154945780:CustomerSurvey2014 <- CustomerSurvey2014 %>% as_tibble
1503154948570:CustomerSurvey2014
1503154963411:Service
1503155071236:Service <- CustomerSurvey2014 %>% select(Service)
1503155191692:CustomerSurvey2014
1503155313288:?tidyr::gather
1503155422783:CustomerSurvey2014 %>% gather(key = c(Quality,Ease.of.Use, Price))
1503155471357:CustomerSurvey2014 %>% gather(Quality,Ease.of.Use, Price)
1503155483592:library(dplyr)
1503155483609:# From http://stackoverflow.com/questions/1181060
1503155483609:stocks <- data_frame(
1503155483610:time = as.Date('2009-01-01') + 0:9,
1503155483610:X = rnorm(10, 0, 1),
1503155483611:Y = rnorm(10, 0, 2),
1503155483611:Z = rnorm(10, 0, 4)
1503155483612:)
1503155483659:gather(stocks, stock, price, -time)
1503155492094:stocks
1503155575434:Data <- data.frame( Y= c(Quality,Ease.of.Use,Price, Service))
1503155578346:attach(CustomerSurvey2014)
1503155716281:Data <- data.frame( Y= c(Quality,Ease.of.Use,Price, Service),
1503155716283:prara = factor(rep(c("Quality", "Ease.of.Use", "Price", "Service"),
1503155716284:times = c(length(Quality), length(Ease.of.Use),
1503155716286:length(Price), length(Service)))))
1503155745105:CustomerSurvey2014 = read.csv(file = "CustomerSurvey2014.csv", stringsAsFactors = FALSE)
1503155745813:CustomerSurvey2014[is.na(CustomerSurvey2014)] <- "NorthA"
1503155747351:attach(CustomerSurvey2014)
1503155756096:rm(Quality)
1503155762109:rm(EasyOfUse)
1503155765472:rm(Service)
1503155767845:attach(CustomerSurvey2014)
1503155771513:Data <- data.frame( Y= c(Quality,Ease.of.Use,Price, Service),
1503155771514:prara = factor(rep(c("Quality", "Ease.of.Use", "Price", "Service"),
1503155771515:times = c(length(Quality), length(Ease.of.Use),
1503155771516:length(Price), length(Service)))))
1503155780506:head(Data)
1503155794728:View(Data)
1503155842925:CustomerSurvey2014
1503155847908:CustomerSurvey2014 <- CustomerSurvey2014 %>% as_tibble
1503155905826:CustomerSurvey2014
1503155912826:CustomerSurvey2014 %>% gather(key = c("Y", Quality))
1503155957287:CustomerSurvey2014 %>% gather(key = c("Y", Quality), value = c(Easy.of.Use, Price, Service))
1503156158475:head(Data)
1503156168494:Data <- data.frame( Y= c(Quality,Ease.of.Use,Price, Service),
1503156168496:para = factor(rep(c("Quality", "Ease.of.Use", "Price", "Service"),
1503156168497:times = c(length(Quality), length(Ease.of.Use),
1503156168498:length(Price), length(Service)))))
1503156172107:head(Data)
1503156190881:?aov
1503156328663:aov(Y ~ para, data = Data)
1503156349375:flm <- aov(Y ~ para, data = Data)
1503156354221:anova(flm)
1503156740541:?aov
1503156762482:flm$coefficients
1503156776392:flm
1503156871964:excel_sheets()
1503156878747:excel_sheets("Performance_Lawn_Equipment_Database.xlsx")
1503156899824:top_response <- apply(countByRegion, 1, function(x) sum(x[4], x[5]))
1503156930618:OnTimeDelivery <- read_excel(PLE_path, sheet = "On-Time Delivery", skip = 2)
1503156936239:OnTimeDelivery
1503156983935:OnTimeDelivery <- OnTimeDelivery %>% attach
1503157134971:?read_excel
1503157443241:attach(OnTimeDelivery)
1503157459383:`Number of deliveries`
1503157499802:attach(OnTimeDelivery)
1503157559633:p0 <- sum(`Number On Time`[1:12]/`Number of deliveries`[1:12])
1503157564650:p0 <- sum(`Number On Time`[1:12]/`Number of deliveries`[1:12])
1503157567343:p0 <- sum(`Number On Time`[1:12]/`Number of deliveries`[1:12])
1503157581685:p0 <- sum(`Number On Time`[1:12]/sum(`Number of deliveries`[1:12]))
1503157624177:pbar <- sum(`Number On Time`[49:60]/sum(`Number of deliveries`[49:60]))
1503157626551:pbar
1503157648680:n <- 12
1503157649387:alpha <- 0.05
1503157659022:qnorm(alpha)
1503157695237:z.alpha <- qnorm(alpha)
1503157739079:p0
1503167940331:?geom_point
1503172011997:ggplot(data = mpg) +
1503172012014:geom_point(mapping = aes(x = drv, y = cyl))
1503172059870:ggplot(data = mpg) +
1503172059875:geom_point(mapping = aes(x = drv, y = cyl))
1503172061447:+facet_grid(drv ~ cyl)
1503172068083:ggplot(data = mpg) +
1503172068084:geom_point(mapping = aes(x = drv, y = cyl))+facet_grid(drv ~ cyl)
1503172099576:ggplot(data = mpg) +
1503172099580:geom_point(mapping = aes(x = displ, y = hwy)) +
1503172099582:facet_grid(drv ~ .)
1503172117958:ggplot(data = mpg) +
1503172117960:geom_point(mapping = aes(x = displ, y = hwy)) +
1503172117960:facet_grid(. ~ cyl)
1503172138032:ggplot(data = mpg) +
1503172138037:geom_point(mapping = aes(x = displ, y = hwy)) +
1503172138039:facet_wrap(~ class, nrow = 2)
1503172157246:ggplot(data = mpg) +
1503172157247:geom_point(mapping = aes(x = displ, y = hwy)) +
1503172157248:facet_grid(. ~ class)
1503172311673:?facet_wrap
1503178139626:ggplot(data = mpg) +
1503178139629:geom_smooth(
1503178139631:mapping = aes(x = displ, y = hwy, color = drv),
1503178139632:show.legend = FALSE
1503178139633:)
1503178148613:ggplot(data = mpg) +
1503178148614:geom_smooth(
1503178148615:mapping = aes(x = displ, y = hwy, color = drv),
1503178148615:show.legend = T
1503178148616:)
1503178594639:ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) +
1503178594649:geom_point(mapping = aes(color = class)) +
1503178594650:geom_smooth(data = filter(mpg, class == "subcompact"), se = FALSE)
1503178632017:?GeomSmooth
1503178637885:?geom_smooth
1503178780596:ggplot(data = mpg, mapping = aes(x = displ, y = hwy, color = drv)) +
1503178780598:geom_point() +
1503178780599:geom_smooth(se = FALSE)
1503178811300:ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) +
1503178811302:geom_point(mapping = aes(color = drv)) +
1503178811302:geom_smooth(se = FALSE)
1503178863026:ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) +
1503178863028:geom_point(mapping = aes(color = drv)) +
1503178863029:geom_smooth(se = FALSE, color = "black")
1503178880951:ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) +
1503178880952:geom_point(mapping = aes(color = drv)) +
1503178880953:geom_smooth(se = FALSE, mapping = aes(color = drv))
1503178899072:ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) +
1503178899073:geom_point(mapping = aes(color = "black")) +
1503178899073:geom_smooth(se = FALSE, mapping = aes(color = drv))
1503178912598:ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) +
1503178912599:geom_point(color = "black") +
1503178912600:geom_smooth(se = FALSE, mapping = aes(color = drv))
1503178995935:ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) +
1503178995937:geom_point(color = "black", show.legend = F) +
1503178995938:geom_smooth(se = FALSE, mapping = aes(color = drv))
1503179001944:ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) +
1503179001945:geom_point(color = "black", show.legend = F) +
1503179001946:geom_smooth(se = FALSE, mapping = aes(color = drv), show.legend = T)
1503179004291:ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) +
1503179004291:geom_point(color = "black", show.legend = F) +
1503179004292:geom_smooth(se = FALSE, mapping = aes(color = drv), show.legend = )
1503179006908:ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) +
1503179006908:geom_point(color = "black", show.legend = F) +
1503179006909:geom_smooth(se = FALSE, mapping = aes(color = drv), show.legend = F)
1503260275560:.1/sqrt(12)
1503260553674:?par
1503260707067:?quartz
1503260860666:?dev.copy2pdf
1503260883589:dev.copy2pdf()
1503260905386:dir*
1503260907169:()
1503260908738:dir()
1503276447190:PLE_path <- file.path("Performance_Lawn_Equipment_Database.xlsx")
1503276447690:excel_sheets("Performance_Lawn_Equipment_Database.xlsx")
1503276450068:TransmissionCosts <- read_excel(PLE_path, sheet = "Transmission Costs", skip = 2)
1503276486742:CustomerSurvey2014 <- read_excel(PLE_path, sheet = "2014 Customer Survey", skip = 2)
1503276687349:attach(CustomerSurvey2014)
1503276694718:CustomerSurvey2014
1503276784672:View(CustomerSurvey2014)
1503276795312:CustomerSurvey2014$Region[1]
1503276801416:CustomerSurvey2014$Region[189]
1503276813660:is.na(CustomerSurvey2014$Region[1])
1503276820565:is.na(NA)
1503276825539:is.na("NA")
1503276835308:summary(CustomerSurvey2014)
1503276856435:CustomerSurvey2014 = read.csv(file = "CustomerSurvey2014.csv", stringsAsFactors = FALSE)
1503276862197:head(CustomerSurvey2014)
1503276872831:CustomerSurvey2014 <- read_excel(PLE_path, sheet = "2014 Customer Survey", skip = 2)
1503276918991:attach(CustomerSurvey2014)
1503276993615:names(CustomerSurvey2014)
1503277022058:`Ease of Use`
1503277064109:CustomerSurvey2014
1503277106624:Data <- data.frame( Y= c(Quality,`Ease of Use`,Price, Service),
1503277106626:para = factor(rep(c("Quality", "Ease.of.Use", "Price", "Service"),
1503277106627:times = c(length(Quality), length(Ease.of.Use),
1503277106628:length(Price), length(Service)))))
1503277110527:Data
1503288513268:?count
1503357272231:update()
1503357291244:install.packages(c("boot", "httr", "Matrix", "mgcv", "modelr", "purrr", "Rcpp", "rlang", "shiny", "tidyr"))
1503357299067:install.packages(c("boot", "httr", "Matrix", "mgcv", "modelr", "purrr", "Rcpp", "rlang", "shiny", "tidyr"))
1503357307725:install.packages(c("boot", "httr", "Matrix", "mgcv", "modelr", "purrr", "Rcpp", "rlang", "shiny", "tidyr"))
1503357320158:install.packages(c("boot", "httr", "Matrix", "mgcv", "modelr", "purrr", "Rcpp", "rlang", "shiny", "tidyr"))
1503357324487:install.packages(c("boot", "httr", "Matrix", "mgcv", "modelr", "purrr", "Rcpp", "rlang", "shiny", "tidyr"))
1503358258647:getwd()
1503358267708:rproject
1503358530878:version
1503358536838:RStudio.Version()
1503358877345:RStudio.Version()
1503358942876:devtools::install_github("rstats-db/odbc")
1503362120099:install.packages("RSQLite")
1503362145947:library(RSQLite)
1503364842665:dir()
1503364847217:getwd()
1503364916022:file.create("read_data.R")
1503364925740:file.edit("read_data.R")
1503365145666:sql
1503365147200:?sql
1503365150079:??sql
1503365276683:library(DBI)
1503365278017:# Create an ephemeral in-memory RSQLite database
1503365278017:con <- dbConnect(RSQLite::SQLite(), ":memory:")
1503365866249:RStudio.Version()
1503366065329:# Create an ephemeral in-memory RSQLite database
1503366065331:con <- dbConnect(RSQLite::SQLite(), ":memory:")library(DBI)
1503366065333:# Create an ephemeral in-memory RSQLite database
1503366065333:con <- dbConnect(RSQLite::SQLite(), ":memory:")
1503368158710:file.create("proposal.txt")
1503368171055:file.edit("proposal.txt")
1503369582572:dbListTables(con)
1503369586199:library(DBI)
1503369587809:# Create an ephemeral in-memory RSQLite database
1503369587810:con <- dbConnect(RSQLite::SQLite(), ":memory:")
1503369588648:dbListTables(con)
1503369590058:dbWriteTable(con, "mtcars", mtcars)
1503369591390:dbListTables(con)
1503369597259:dbListFields(con, "mtcars")
1503369599952:dbReadTable(con, "mtcars")
1503369624278:library(tidyverse)
1503369639483:tbl(con, "mtcars") %>% collect()
1503369655476:library(dbplyr)
1503369664064:install.packages("dbplyr")
1503369669781:library(dbplyr)
1503369671814:tbl(con, "mtcars") %>% collect()
1503369694109:dbDisconnect(con)
1503369697399:con
1503369705076:# Create an ephemeral in-memory RSQLite database
1503369705076:con <- dbConnect(RSQLite::SQLite(), ":memory:")
1503369707046:con
1503369713711:dbListTables(con)
1503369953734:# Create an ephemeral in-memory RSQLite database
1503369953736:con <- dbConnect(RSQLite::SQLite(), "bike_share.db")
1503369955572:con
1503369965001:sqlite
1503370272131:getwd()
1503370290093:# Create an ephemeral in-memory RSQLite database
1503370290094:con <- dbConnect(RSQLite::SQLite(), "./data/bike_share.db")
1503370297729:con
1503370303745:dbListTables(con)
1503370373713:dir()
1503370388637:dir("./data")
1503370504693:# read csv files
1503370504695:station_201402 <- read_csv("data/201402_station_data.csv")
1503370508871:station_201402
1503370563296:rm(station_201402)
1503370660142:# read csv files
1503370660144:station1 <- read_csv("data/201402_station_data.csv")
1503370660370:station2 <- read_csv("data/201408_station_data.csv")
1503370660547:station3 <- read_csv("data/201508_station_data.csv")
1503370660751:station4 <- read_csv("data/201608_status_data.csv")
1503370687648:# read csv files
1503370687650:station1 <- read_csv("data/201402_station_data.csv")
1503370687989:station2 <- read_csv("data/201408_station_data.csv")
1503370688359:station3 <- read_csv("data/201508_station_data.csv")
1503370689217:station4 <- read_csv("data/201608_station_data.csv")
1503370798218:# read csv files
1503370798220:status1 <- read_csv("data/201402_status_data.csv")
1503370832584:status2 <- read_csv("data/201408_status_data.csv")
1503370865105:status3 <- read_csv("data/201508_status_data.csv")
1503370924467:status4 <- read_csv("data/201608_status_data.csv")
1503370994347:# read csv files
1503370994350:trip1 <- read_csv("data/201402_trip_data.csv")
1503370995275:trip2 <- read_csv("data/201408_trip_data.csv")
1503370995978:trip3 <- read_csv("data/201508_trip_data.csv")
1503370997556:trip4 <- read_csv("data/201608_trip_data.csv")
1503371017650:# read csv files
1503371017651:weather1 <- read_csv("data/201402_weather_data.csv")
1503371017834:weather2 <- read_csv("data/201408_weather_data.csv")
1503371018071:weather3 <- read_csv("data/201508_weather_data.csv")
1503371018523:weather4 <- read_csv("data/201608_weather_data.csv")
1503371059506:?cbing
1503371063082:?cbind
1503371100515:?bind_rows
1503371110181:names(station1)
1503371115620:names(station2)
1503371124390:names(station3)
1503371129161:names(station4)
1503371153736:station <- bind_rows(station1, station2, station3, station4)
1503371165446:dbWriteTable(con, "station", station)
1503371193869:status <- bind_rows(status1, status2, status3, status4)
1503371217243:status1
1503371240606:library(lubridate)
1503371301689:?ymd
1503371363324:status1 %>% head(100) %>% mutate(time = ymd(time))
1503371379852:status1$time[1]
1503371384590:status1$time[1] %>% ymd
1503371401094:status1$time[1] %>% dmy
1503371422558:status1$time[1] %>% ymd_hms()
1503371503166:status1$time[1] %>% ymd_hms(tz = "PST")
1503371554164:x <- as.POSIXct("2009-08-07 00:00:01", tz = "America/New_York")
1503371554169:with_tz(x, "GMT")
1503371566734:x <- as.POSIXct("2009-08-07 00:00:01", tz = "America/New_York")
1503371566738:with_tz(x, "PST")
1503371625252:x <- as.POSIXct("2009-08-07 00:00:01", tz = "America/Los_Angeles")
1503371625260:with_tz(x, "GMT")
1503371654725:status1$time[1] %>% ymd_hms(tz = "America/Los_Angeles")
1503371665788:status1$time[1] %>% ymd_hms(tz = "PDT")
1503371696922:status1$time[1] %>% ymd_hms(tz = "China/Beijing")
1503371703971:status1$time[1] %>% ymd_hms(tz = "China/Bei_Jing")
1503371708406:status1$time[1] %>% ymd_hms(tz = "China/BeiJing")
1503371720162:status1$time[1] %>% ymd_hms(tz = "Asia/Tokyo")
1503371726470:status1$time[1] %>% ymd_hms(tz = "Asia/Beijing")
1503371733470:status1$time[1] %>% ymd_hms(tz = "Asia/Hong_Kong")
1503371747489:status1$time[1] %>% ymd_hms(tz = "Asia/Bei_Jing")
1503371753573:status1$time[1] %>% ymd_hms(tz = "Asia/Shanghai")
1503371867712:status1 %>% head(100) %>% mutate(time = ymd_hms(time, tz = "PDT"))
1503371886573:status1 %>% head(100) %>% mutate(time = ymd_hms(time, tz = "America/Los_Angeles"))
1503372049681:status <- bind_rows(status1, status2, status3, status4) %>% mutate(time = ymd_hms(time, tz = "America/Los_Angeles"))
1503372076296:status <- bind_rows(status1, status2, status3, status4)
1503372099118:status1
1503372101145:status2
1503372103599:status3
1503372107317:status4
1503372156824:status1 <- status1 %>% mutate(time = ymd_hms(time, tz = "America/Los_Angeles"))
1503372560620:status1
1503372568055:status1$time[1]
1503372571461:status2$time[1]
1503372631980:status2 <- status2 %>% mutate(time = ymd_hms(time, tz = "America/Los_Angeles"))
1503374976239:library(DBI)
1503374976560:library(dbplyr)
1503374976952:library(tidyverse)
1503374977918:library(lubridate)
1503374980319:# Create an ephemeral in-memory RSQLite database
1503374980320:con <- dbConnect(RSQLite::SQLite(), "./data/bike_share.db")
1503374981311:dbListTables(con)
1503374987682:# read csv files
1503374987683:weather1 <- read_csv("data/201402_weather_data.csv")
1503374988053:weather2 <- read_csv("data/201408_weather_data.csv")
1503374988384:weather3 <- read_csv("data/201508_weather_data.csv")
1503374988596:weather4 <- read_csv("data/201608_weather_data.csv")
1503374992057:weather1
1503375004760:weather <- bind_rows(weather1, weather2, weather3, weather4)
1503375007071:weather
1503375037264:weather <- bind_rows(weather1, weather2, weather3, weather4) %>% mutate(Date = ymd(Date))
1503375040270:weather
1503375052271:weather <- bind_rows(weather1, weather2, weather3, weather4) %>% mutate(Date = mdy(Date))
1503375058136:weather
1503375068965:dbWriteTable(con, "weather", weather)
1503375080070:head(weather)
1503375091721:weather %>% head(10) %>% View
1503375164241:tbl(con, "station")
1503375200394:weather1
1503375210734:# read csv files
1503375210736:weather1 <- read_csv("data/201402_weather_data.csv") %>% mutate(Date = mdy(Date))
1503375215117:weather1
1503375220262:names(weather1)
1503375231182:weather2 <- read_csv("data/201408_weather_data.csv")%>% mutate(Date = mdy(Date))
1503375231833:weather3 <- read_csv("data/201508_weather_data.csv")%>% mutate(Date = mdy(Date))
1503375232263:weather4 <- read_csv("data/201608_weather_data.csv")%>% mutate(Date = mdy(Date))
1503375237969:weather1
1503375240969:weather2
1503375251649:weather3
1503375254594:weather4
1503375274933:weather1
1503375388185:weather2 %>% names <- weather1 %>% names
1503375405850:weather2 %>% names
1503375409235:ata/201408_weather_data.csv")
1503375409236:weather2 %>% names <- weather1 %>% names
1503375414507:weather1 %>% names
1503375438104:names(weather2) <- weather1 %>% names
1503375447064:weather2
1503375523742:names(weather3) <- weather1 %>% names
1503375532084:names(weather4) <- weather1 %>% names
1503375537062:names3
1503375540531:weather3
1503375550968:weather4 %>% head(100) %>% View
1503375591352:names(weather1) <- weather1 %>% names %>% tolower
1503375595612:weather1
1503375619383:# read csv files
1503375619384:weather1 <- read_csv("data/201402_weather_data.csv") %>% mutate(Date = mdy(Date))
1503375620556:names(weather1) <- weather1 %>% names %>% tolower
1503375621827:weather2 <- read_csv("data/201408_weather_data.csv")
1503375623086:weather3 <- read_csv("data/201508_weather_data.csv")
1503375624388:weather4 <- read_csv("data/201608_weather_data.csv")
1503375631050:names(weather2) <- weather1 %>% names
1503375634543:names(weather3) <- weather1 %>% names
1503375636260:names(weather4) <- weather1 %>% names
1503375643366:weather <- bind_rows(weather1, weather2, weather3, weather4) %>% mutate(Date = mdy(Date))
1503375651110:weather1
1503375653722:weather2
1503375707730:weather2 <- weather2 %>% mutate(date = mdy(date))
1503375711784:weather3 <- weather2 %>% mutate(date = mdy(date))
1503375721460:weather3 <- read_csv("data/201508_weather_data.csv")
1503375725401:names(weather3) <- weather1 %>% names
1503375728187:weather3 <- weather3 %>% mutate(date = mdy(date))
1503375734961:weather4 <- weather4 %>% mutate(date = mdy(date))
1503375737717:weather1
1503375742817:weather2
1503375744766:weather3
1503375749980:weather4
1503375761009:dir("./data/")
1503375790943:weather4 %>% View
1503375815360:weather <- bind_rows(weather1, weather2, weather3, weather4)
1503375817978:weather
1503375824579:dbWriteTable(con, "weather", weather)
1503375846592:# read csv files
1503375846592:trip1 <- read_csv("data/201402_trip_data.csv")
1503375850488:trip1
1503375886264:trip2 <- read_csv("data/201408_trip_data.csv")
1503375889064:trip3 <- read_csv("data/201508_trip_data.csv")
1503375891495:trip4 <- read_csv("data/201608_trip_data.csv")
1503375894990:trip2
1503375898120:trip1
1503375910067:# read csv files
1503375910068:trip1 <- read_csv("data/201402_trip_data.csv")
1503375926269:# read csv files
1503375926270:trip1 <- read.csv("data/201402_trip_data.csv")
1503375935675:View(trip1)
1503375969356:trip1[2585,]
1503376135066:# read csv files
1503376135067:trip1 <- read_csv("data/201402_trip_data.csv")
1503376252781:trip1
1503376291065:weather
1503376298106:?ymd
1503376377937:weather %>% head(100) %>% View
1503376409652:fix(weather)
1503376426503:names(weather)
1503376433620:names(weather)[4]
1503376458621:names(weather)[4] <- "min_temperature_f"
1503376464375:weather %>% head(100) %>% View
1503376492545:dbWriteTable(con, "weather", weather)
1503376520503:dbWriteTable(con, "weather", weather, overwrite = T)
1503376523104:weather
1503376529248:tbl(con, "weather")
1503376543712:tbl(con, "station")
1503376554804:station
1503376586972:station <- tbl(con, "station") %>% collect
1503376589721:station
1503376603314:names(station)
1503376617155:names(station)[5] <- "dock_count"
1503376625689:names(station)[6] <- "land_mark"
1503376666164:station <- station %>% mutate(installation = mdy(installation))
1503376669347:station
1503376717333:dbWriteTable(con, "station", station, overwrite = T)
1503376725876:tbl(con, "station")
1503376747607:station
1503376761324:dbWriteTable(con, "station", station, overwrite = T)
1503376769136:tbl(con,"station")
1503376776071:tbl(con, "weather")
1503376815578:tbl(con, "station") %>% collect
1503376827972:station
1503376867656:station
1503376879382:station <- station %>% mutate(installation = as.Date(installation))
1503376881630:station
1503376886264:dbWriteTable(con, "station", station, overwrite = T)
1503376891968:tbl(con, "station")
1503376907897:station <- station %>% mutate(installation = as.character(installation))
1503376909141:dbWriteTable(con, "station", station, overwrite = T)
1503376911795:tbl(con, "station")
1503376945262:?ymd
1503376970365:station <- station %>% mutate(installation = as.Date(installation, "%Y%m%d"))
1503376972549:station
1503376977069:station <- tbl(con, "station") %>% collect
1503376978017:station <- station %>% mutate(installation = as.Date(installation, "%Y%m%d"))
1503376979160:dbWriteTable(con, "station", station, overwrite = T)
1503376982740:station
1503376987025:weather
1503376993809:station1
1503377016236:?as.Date
1503377044806:as.Date("2010-09-03", "%Y/%m/%d")
1503377056395:as.Date("2010-09-03", "%Y/%m/%D")
1503377063439:as.Date("2010/09/03", "%Y/%m/%D")
1503377066138:as.Date("2010/09/03", "%Y/%m/%d")
1503377080070:as.Date("2010-09-03", "%Y-%m-%d")
1503377114818:strptime("Tue, 23 Mar 2010 14:36:38 -0400",  "%a, %d %b %Y %H:%M:%S %z")
1503377149411:strptime("2010-09-03", "%Y-%m-%d")
1503377207398:strptime("2010-09-03", "%Y/%m/%d")
1503377223974:status1 <- read_csv("data/201402_status_data.csv")
1503377257425:status2 <- read_csv("data/201408_status_data.csv")
1503377288916:status3 <- read_csv("data/201508_status_data.csv")
1503377345734:status4 <- read_csv("data/201608_status_data.csv")
1503377415481:status1 <- status1 %>% mutate(time = ymd_hms(time, tz = "America/Los_Angeles"))
1503377731566:status2 <- status2 %>% mutate(time = ymd_hms(time, tz = "America/Los_Angeles"))
1503380197986:status3 <- status3 %>% mutate(time = ymd_hms(time, tz = "America/Los_Angeles"))
1503402980744:names(status1)
1503402988105:names(status2)
1503402990197:names(status3)
1503402990339:names(status4)
1503442286509:db_list_tables(con)
1503442295870:tbf(con, "station")
1503442301909:tbl(con, "station")
1503442311267:tbl(con, "weather")
1503442329482:tbl(con, "weather") %>% tally
1503442342250:tbl(con, "weather") %>% tally()
1503442349475:tbl(con, "station") %>% tally()
1503442359757:status1
1503442370471:trip1
1503442413983:# read csv files
1503442413988:trip1 <- read_csv("data/201402_trip_data.csv")
1503442454086:trip1 %>% names
1503442462980:trip2 %>% names()
1503442477356:trip2 %>% names
1503442486035:trip1 %>% names()
1503442502874:trip3 %>% names()
1503442510452:trip4 %>% names()
1503442524738:trip1 %>% head(1) %>% View
1503442537732:trip2 %>% head(1) %>% View
1503442555166:con
1503442591802:zh
1503442779935:trip1
1503442851174:trip1 <- read_csv("data/201402_trip_data.csv", col_types = cols(`Start Date` = "i"))
1503442875296:trip1
1503442909413:trip1 <- read_csv("data/201402_trip_data.csv", col_types = cols(`Start Date` = col_guess()))
1503442915216:trip1
1503442937691:trip1 %>% filter(`Start Date` == NA)
1503442963604:trip1 %>% filter(is.na(`Trip ID`))
1503442970999:trip1 %>% filter(is.na(`End Date`))
1503442983847:trip1 %>% filter(is.na(`Start Station`))
1503442999199:trip1 %>% filter(is.na(`Zip Code`))
1503443017134:trip1 %>% head(10) %>% View
1503443031438:trip2 %>% head(10) %>% View
1503443226317:read_csv("a,b\n1")
1503446131029:trip1 <- read_csv("data/201402_trip_data.csv", col_types = cols(`Start Date` = col_guess()))
1503446142149:problems(...)
1503446157187:trip1 <- read_csv("data/201402_trip_data.csv")
1503446265743:problems()
1503446267565:problems(a)
1503446288641:problems(trip1)
1503446323930:problems(trip1)[,1]
1503446345436:trip1[problems(trip1)[,1],]
1503446353453:problems(trip1)[,1] %>% t
1503446368561:problems(trip1)[,1] %>% t %>% as.character.Date()
1503446373338:problems(trip1)[,1] %>% t %>% as.character
1503446382980:t = problems(trip1)[,1] %>% t %>% as.character
1503446390862:trip1[t,] %>% View
1503446403546:trip1[t[1],]
1503446425395:trip1[11506,1]
1503446468036:trip1[11506,]
1503446475322:trip1[11506,] %>% View
1503446496573:trip1[34806,] %>% View
1503446518643:t
1503446536377:trip1[c(t[1], t[2]),]
1503446548925:t <- t %>% as.numeric()
1503446550099:t
1503446558811:trip1[t,] %>% View
1503446659639:t_# <- s
1503446663346:t_# <- 2
1503446878346:trip3 %>% group_by(`Zip Code`) %>% tally()
1503447034700:station
1503447043436:trip1
1503447046569:trip2
1503447073153:trip2 %>% mutate(`Start Date` = ymd(`Start Date`))
1503447090508:trip2 %>% mutate(`Start Date` = mdy_hm(`Start Date`))
1503447143912:trip2 <- read_csv("data/201408_trip_data.csv", col_types = col_date())
1503447191455:vignette("column-types")
1503447220210:vignettes("column-types")
1503447245172:utils::vignette("column-types")
1503453928478:t-2
1503454092278:22-rh
1503454094277:22-2
1503454114625:the_most_important_person
1503454121799:hello_the_word
1503455163270:th
1503456601746:
1503456642034:
1503457275717:the the way you think the most way how but the but the it's a little bit complicated
1503459779985:library(DBI)
1503459781473:library(dbplyr)
1503459782294:library(tidyverse)
1503538000852:getwd()
1503538010003:file.edit("lab.R")
1503538024866:# labs
1503538024867:library(tidyverse)
1503538026986:library(readxl)
1503538027626:## Chapter 7
1503538027626:PLE_path <- file.path("Performance_Lawn_Equipment_Database.xlsx")
1503538029065:excel_sheets("Performance_Lawn_Equipment_Database.xlsx")
1503538058250:excel_sheets(PLE_path)
1503538087187:DefectsAfterDelivery <- read_excel(PLE_path, sheet = "Defects After Delivery", skip = 2)
1503538144967:DefectsAfterDelivery
1503538160224:DefectsAfterDelivery <- read_excel(PLE_path, sheet = "Defects After Delivery", skip = 3)
1503538163646:DefectsAfterDelivery
1503538197443:DefectsAfterDelivery$`2010` %>% mean
1503538266182:defects_by_year %>% apply(2, mean)
1503538284776:DefectsAfterDelivery %>% apply(2, mean)
1503538315631:DefectsAfterDelivery %>% select(-Month) %>% apply(2, mean)
1503538349615:defects_by_year %>% plot
1503538355137:defects_by_year <- DefectsAfterDelivery %>% select(-Month) %>% apply(2, mean)
1503538356414:defects_by_year %>% plot
1503538405238:defects_by_year %>% plot(type = 'b', lwd = 2, xlab = "years")
1503538447444:defects_by_year %>% name
1503538451651:defects_by_year %>% names
1503538466359:axis(,at = 1:5, labels = names(defects_by_year))
1503538484050:axis(1, at = 1:5, labels = names(defects_by_year))
1503538501659:defects_by_year %>% plot(type = 'b', lwd = 2, xlab = "years")
1503538502727:axis(1, at = 1:5, labels = names(defects_by_year))
1503538524962:attach(DefectsAfterDelivery)
1503538537944:?t.test
1503538555090:t.test(`2010`, `2014`)
1503538900070:excel_sheets("Performance_Lawn_Equipment_Database.xlsx")
1503538929714:# Trasmission
1503538929715:transmission_cost <- read_excel(PLE_path, sheet = "Transmission Costs")
1503538945695:# Trasmission
1503538945696:transmission_cost <- read_excel(PLE_path, sheet = "Transmission Costs", skip = 2)
1503538968648:transmission_cost
1503539007232:transmission_cost %>% attach
1503539044136:# H0: There is no significance change in process
1503539044137:t.test(Current, `Process A`)
1503539080986:t.test(Current, `Process B`)
1503539228717:excel_sheets(PLE_path)
1503539251428:# 5.
1503539251429:employee_retention <- read_excel(PLE_path, sheet = "Employee Retention")
1503539356173:# 5.
1503539356173:employee_retention <- read_excel(PLE_path, sheet = "Employee Retention", skip = 2)
1503539362048:employee_retention
1503539369457:employee_retention %>% attach
1503539599831:t.test(YearsPLE ~ Gender)
1503540174446:employee_retention
1503540300366:t.test(YearsPLE ~ `College GPA`)
1503540301582:t.test(YearsPLE ~ `College GPA`)
1503540303351:t.test(YearsPLE ~ Local)
1503540333696:t.test(YearsPLE ~ `College Grad`)
1503540334598:t.test(YearsPLE ~ Local)
1503540615313:defects_by_year <- DefectsAfterDelivery %>% select(-Month) %>% apply(2, mean)
1503540618650:defects_by_year
1503620492446:?t.tst
1503620495232:?t.test
1503620926179:?qnorm
1503620938292:?qt
1503620987997:?qnorm
1503631596617:?t.test
1503632401459:hello
1503632421852:employee_retention
1503632450649:employee_retention
1503633449998:qplot(x = c(1:4))
1503633489481:g <- ggplot(mpg, aes(class))
1503633489483:# Number of cars in each class:
1503633489484:g + geom_bar()
1503633490430:# Total engine displacement of each class
1503633490431:g + geom_bar(aes(weight = displ))
1503633591447:### Step 2
1503633591448:```{r P1S2, echo=T}
1503633591449:Complaints = read.csv(file = "Complaints.csv")
1503633591455:# "brute force" method (using plot())
1503633591455:plot(Complaints$World, ylim=range(c(0,400)), type="l", xlab="Month", ylab="Number of Complaints")
1503633591499:par(new=TRUE)
1503633591500:plot(Complaints$NA., ylim=range(c(0,400)), type="l", col="red", axes = FALSE, xlab = "", ylab = "")
1503633591505:par(new=TRUE)
1503633591506:plot(Complaints$SA, ylim=range(c(0,400)), type="l", col="green", axes = FALSE, xlab = "", ylab = "")
1503633591511:par(new=TRUE)
1503633591512:plot(Complaints$Eur, ylim=range(c(0,400)), type="l", col="blue", axes = FALSE, xlab = "", ylab = "")
1503633591517:par(new=TRUE)
1503633591519:plot(Complaints$Pac, ylim=range(c(0,400)), type="l", col="magenta", axes = FALSE, xlab = "", ylab = "")
1503633591523:par(new=TRUE)
1503633591525:plot(Complaints$China, ylim=range(c(0,400)), type="l", col="deeppink4", axes = FALSE, xlab = "", ylab = "")
1503633591532:```
1503633594837:### Step 2
1503633594838:```{r P1S2, echo=T}
1503633594838:Complaints = read.csv(file = "Complaints.csv")
1503633594841:# "brute force" method (using plot())
1503633594853:plot(Complaints$World, ylim=range(c(0,400)), type="l", xlab="Month", ylab="Number of Complaints")
1503633594904:par(new=TRUE)
1503633594905:plot(Complaints$NA., ylim=range(c(0,400)), type="l", col="red", axes = FALSE, xlab = "", ylab = "")
1503633594911:par(new=TRUE)
1503633594912:plot(Complaints$SA, ylim=range(c(0,400)), type="l", col="green", axes = FALSE, xlab = "", ylab = "")
1503633594915:par(new=TRUE)
1503633594916:plot(Complaints$Eur, ylim=range(c(0,400)), type="l", col="blue", axes = FALSE, xlab = "", ylab = "")
1503633594920:par(new=TRUE)
1503633594921:plot(Complaints$Pac, ylim=range(c(0,400)), type="l", col="magenta", axes = FALSE, xlab = "", ylab = "")
1503633594928:par(new=TRUE)
1503633594930:plot(Complaints$China, ylim=range(c(0,400)), type="l", col="deeppink4", axes = FALSE, xlab = "", ylab = "")
1503633594933:```
1503633598943:# You can use this or any other plotting methods, e.g. ggplot(), to create the line plots to
1503633598944:# finish Part 1 of Chapter 3.
1503633599778:### Part 2
1503633599779:### Step 1
1503633599780:```{r P2S1, echo=T}
1503633599780:ShippingCost = read.csv(file = "ShippingCost.csv")
1503633599783:summary(ShippingCost$Mowers)
1503633599789:summary(ShippingCost$Tractors)
1503633599798:```
1503633607758:library("arules")
1503633609403:library("arulesViz")
1503633611334:patterns = random.patterns(nItems = 1000);
1503633612605:summary(patterns);
1503633612633:trans = random.transactions(nItems = 1000, nTrans = 1000, method = "agrawal",  patterns = patterns);
1503633614207:image(trans)
1503633614437:data("AdultUCI");
1503633614505:Adult = as(AdultUCI, "transactions");
1503633614876:rules = apriori(Adult, parameter=list(support=0.01, confidence=0.5));
1503633614878:rules
1503633646260:plot(rules, method='scatterplot') # 
1503633646268:plot(rules, method='graph', control = list(type='items')) # 
1503633647445:a_matrix <- matrix(c(1,1,1,0,0,
1503633647448:1,1,0,0,0,
1503633647449:1,1,0,1,0,
1503633647450:0,0,1,0,1,
1503633647450:1,1,0,1,1), ncol = 5, dimnames=list(c('id1', 'id2', 'id3', 'id4', 'id5'),
1503633647451:c('bread', 'coke', 'milk', 'beer', 'butter')))
1503633647453:a_matrix
1503633647456:transaction.of.a_matrix <- as(a_matrix, "transactions")
1503633647593:class(transaction.of.a_matrix)
1503633647595:inspect(transaction.of.a_matrix)
1503633784328:a_matrix <- matrix(c(1,1,1,0,0,
1503633784330:1,1,0,0,0,
1503633784331:1,1,0,1,0,
1503633784331:0,0,1,0,1,
1503633784332:1,1,0,1,1), ncol = 5, dimnames=list(c('id1', 'id2', 'id3', 'id4', 'id5'),
1503633784332:c('bread', 'coke', 'milk', 'beer', 'butter')))
1503633784333:a_matrix
1503633784335:transaction.of.a_matrix <- as(a_matrix, "transactions")
1503633784349:class(transaction.of.a_matrix)
1503633784350:inspect(transaction.of.a_matrix)
1503633788484:source('~/Documents/r/arules.R', echo=TRUE)
1503633795206:a_matrix <- matrix(c(1,1,1,0,0,
1503633795207:1,1,0,0,0,
1503633795208:1,1,0,1,0,
1503633795209:0,0,1,0,1,
1503633795210:1,1,0,1,1), ncol = 5, dimnames=list(c('id1', 'id2', 'id3', 'id4', 'id5'),
1503633795210:c('bread', 'coke', 'milk', 'beer', 'butter')))
1503633795211:a_matrix
1503633795212:transaction.of.a_matrix <- as(a_matrix, "transactions")
1503633795229:class(transaction.of.a_matrix)
1503633795230:inspect(transaction.of.a_matrix)
1503633803669:a_matrix <- matrix(c(1,1,1,0,0,
1503633803670:1,1,0,0,0,
1503633803671:1,1,0,1,0,
1503633803671:0,0,1,0,1,
1503633803671:1,1,0,1,1), ncol = 5, dimnames=list(c('id1', 'id2', 'id3', 'id4', 'id5'),
1503633803672:c('bread', 'coke', 'milk', 'beer', 'butter')))
1503633803674:a_matrix
1503633803677:transaction.of.a_matrix <- as(a_matrix, "transactions")
1503633803684:class(transaction.of.a_matrix)
1503633803696:inspect(transaction.of.a_matrix)
1503633894012:# another example
1503633894013:list  <- list('001'=c('beer', 'nappy'), '002'=c('beer', 'nappy'), '003'='lipstick', '004'='beer')
1503634072005:class(trans)
1503634737777:plot(rules, method='scatterplot') # 
1503634738848:plot(rules, method='graph', control = list(type='items')) # 
1503634741868:library("arules")
1503634742098:library("arulesViz")
1503634742513:patterns = random.patterns(nItems = 1000);
1503634743679:summary(patterns);
1503634743700:trans = random.transactions(nItems = 1000, nTrans = 1000, method = "agrawal",  patterns = patterns);
1503634745403:image(trans)
1503634771269:/Users/liangquanzhou/Applications/iTerm.app/
1503634778124:df <- data.frame(trt = c("a", "b", "c"), outcome = c(2.3, 1.9, 3.2))
1503634778127:ggplot(df, aes(trt, outcome)) +
1503634778128:geom_col()
1503635075414:getwd()
1503635114508:# Load R packages
1503635114510:knitr::opts_chunk$set(echo = TRUE)
1503635114513:library(readxl)
1503635114520:library(tidyverse)
1503635114523:library(nortest)
1503635114575:library(BSDA)
1503635192658:CustomerSurvey2014 = read.csv(file = "CustomerSurvey2014.csv", stringsAsFactors = FALSE)
1503635194190:CustomerSurvey2014[is.na(CustomerSurvey2014)] <- "NorthA"
1503635195325:countByRegion <- table(CustomerSurvey2014$Region, CustomerSurvey2014$Quality)
1503635196695:countByRegion
1503635208808:# Load R packages
1503635208809:knitr::opts_chunk$set(echo = TRUE)
1503635208812:library(readxl)
1503635208815:library(tidyverse)
1503635208819:library(nortest)
1503635208822:library(BSDA)
1503635208833:CustomerSurvey2014 = read.csv(file = "CustomerSurvey2014.csv", stringsAsFactors = FALSE)
1503635208848:CustomerSurvey2014[is.na(CustomerSurvey2014)] <- "NorthA"
1503635208865:countByRegion <- table(CustomerSurvey2014$Region, CustomerSurvey2014$Quality)
1503635208874:countByRegion
1503635208884:attach(CustomerSurvey2014)
1503635208955:# find the proportion of Top box(Level 4 or 5) responses by region.
1503635208957:top_response <- apply(countByRegion, 1, function(x) sum(x[4], x[5]))
1503635208972:total_response <- apply(countByRegion, 1, sum)
1503635208978:top_propotion <- top_response/total_response
1503635208983:top_propotion %>% round(2)
1503635241825:# find the proportion of Top box(Level 4 or 5) responses by region.
1503635241827:top_response <- apply(countByRegion, 1, function(x) sum(x[4], x[5]))
1503635242822:total_response <- apply(countByRegion, 1, sum)
1503635243263:top_propotion <- top_response/total_response
1503635243748:top_propotion %>% round(2)
1503635253545:total_response <- apply(countByRegion, 1, sum)
1503635254476:top_propotion <- top_response/total_response
1503635259107:ResponseTime <- read.csv("ResponseTime.csv")
1503635259628:Q1.13mean <- mean(ResponseTime$Q1.2013)
1503635259993:Q1.13std <- sd(ResponseTime$Q1.2013)
1503635260325:Q1.13mean
1503635261521:Q1.13std
1503635273577:ResponseTime <- read.csv("ResponseTime.csv")
1503635275439:Q1.13mean <- mean(ResponseTime$Q1.2013)
1503635277238:Q1.13std <- sd(ResponseTime$Q1.2013)
1503635278290:Q1.13mean
1503635280029:Q1.13std
1503635420004:a = matrix(c(1:100), nrow = 5)
1503635421315:a
1503635435704:a = matrix(c(1:100), nrow = 20)
1503635436835:a
1503635582943:# Load R packages
1503635582946:knitr::opts_chunk$set(echo = TRUE)
1503635582958:library(readxl)
1503635582962:library(tidyverse)
1503635582965:library(nortest)
1503635582967:library(BSDA)
1503635582992:CustomerSurvey2014 = read.csv(file = "CustomerSurvey2014.csv", stringsAsFactors = FALSE)
1503635583041:CustomerSurvey2014[is.na(CustomerSurvey2014)] <- "NorthA"
1503635583064:countByRegion <- table(CustomerSurvey2014$Region, CustomerSurvey2014$Quality)
1503635583086:countByRegion
1503635583097:attach(CustomerSurvey2014)
1503635583397:# find the proportion of Top box(Level 4 or 5) responses by region.
1503635583399:top_response <- apply(countByRegion, 1, function(x) sum(x[4], x[5]))
1503635583422:total_response <- apply(countByRegion, 1, sum)
1503635583429:top_propotion <- top_response/total_response
1503635583435:top_propotion %>% round(2)
1503635583454:ResponseTime <- read.csv("ResponseTime.csv")
1503635583489:Q1.13mean <- mean(ResponseTime$Q1.2013)
1503635583494:Q1.13std <- sd(ResponseTime$Q1.2013)
1503635583498:Q1.13mean
1503635583504:Q1.13std
1503635583508:# Compute the z-test for first and second quarter. I guess "first and second quarter"
1503635583510:# means first and second quarter in 2013
1503635583513:attach(ResponseTime)
1503635583539:# one sample z test
1503635583544:z1 = z.test(Q1.2013, sigma.x = Q1.13std, mu = Q1.13mean)
1503635583561:z1
1503635583572:z2 = z.test(Q2.2013, sigma.x = sd(Q2.2013), mu = mean(Q2.2013))
1503635583764:z2
1503635583775:# 2 sample z test
1503635583777:z.test(Q1.2013, Q2.2013, sigma.x = sd(Q1.2013), sigma.y = sd(Q2.2013))
1503635583798:# excel_sheets("Performance_Lawn_Equipment_Database.xlsx")
1503635583800:PLE_path <- file.path("Performance_Lawn_Equipment_Database.xlsx")
1503635583806:TransmissionCosts <- read_excel(PLE_path, sheet = "Transmission Costs", skip = 2)
1503635583877:current.sd <- sd(TransmissionCosts$Current)
1503635583885:# normality test of Current
1503635583887:attach(TransmissionCosts)
1503635583903:shapiro.test(Current)
1503635583911:# ad.test(Current)
1503802417088:?help
1503802435041:hello
1503802878866:source('~/Documents/Harrisburg/500_52/Project/bay_area_bike_share/read_data.R')
1503803149115:source('~/Documents/r/arules.R')
1503803316238:?t.test
1503803468158:devtools::install_github("rstudio/addinexamples", type = "source")
1503803499193:addinexamples:::reformatAddin()
1503806781234:devtools::install_github("ThinkRstat/littleboxes")
1503807063316:jkasasaaaja
1503807064874:a
1503807074994:
1503807083408:devtools::install_github("ThinkRstat/littleboxes")
1503807087284:s
1503807630232:devtools::install_github("Stan125/limoaddin")
1503807649656:data("mtcars")
1503807653394:limoaddin:::hist_addin()
1503807731928:ggplot(data = mtcars, aes(x = mpg)) +
1503807731929:geom_histogram(aes(y = ..density..), bins = 30) +
1503807731930:theme_bw() +
1503807731931:geom_density(fill = 'blue', alpha = 0.5)
1503821595096:RStudio.Version()
1503853661843:a = c(15, 27, 10, 13, 25, 9, 18)
1503853666145:sd(a)
1503853672421:mean(a)
1503853688528:(a - mean(a))/sd(a)
1503854873982:b = c(340, 560, 480, 290, 370, 520, 350, 430, 510, 270)
1503854878185:t.test(b)
1503854891391:t.test(b, mean(b), sd(b))
1503854898945:?t.test
1503854938759:t.test(b, mu = mean(b), alternative = "less")
1503855058686:t.test(b, mu = 430, alternative = "less")
1503856014912:install.packages("datapasta")
1503856026083:library(datapasta)
1503856079524:data.frame(stringsAsFactors=FALSE,
1503856079525:Year.1 = c("45", "Year 2", "51", "Year 3", "33", "Year 4", "40",
1503856079526:"Year 5", "30", "Year 6", "38", "Year 7", "49", "Year 8",
1503856079527:"52", "Year 9", "46", "Year 10", "43", "Year 11", "40", "Year 12",
1503856079528:"50"),
1503856079530:Year.1 = c("45", "Year 2", "51", "Year 3", "33", "Year 4", "40",
1503856079531:"Year 5", "30", "Year 6", "38", "Year 7", "49", "Year 8",
1503856079532:"52", "Year 9", "46", "Year 10", "43", "Year 11", "40", "Year 12",
1503856079533:"50")
1503856079533:)
1503856112919:data.frame(stringsAsFactors=FALSE,
1503856112921:Goals.Scored.by.the.Huntington = c("Soccer Club for the past 12", "years",
1503856112921:"Year 1", "45", "Year 2", "51", "Year 3",
1503856112922:"33", "Year 4", "40", "Year 5", "30",
1503856112922:"Year 6", "38", "Year 7", "49", "Year 8", "52",
1503856112923:"Year 9", "46", "Year 10", "43",
1503856112923:"Year 11", "40", "Year 12", "50"),
1503856112924:Goals.Scored.by.the.Huntington = c("Soccer Club for the past 12", "years",
1503856112925:"Year 1", "45", "Year 2", "51", "Year 3",
1503856112925:"33", "Year 4", "40", "Year 5", "30",
1503856112926:"Year 6", "38", "Year 7", "49", "Year 8", "52",
1503856112926:"Year 9", "46", "Year 10", "43",
1503856112927:"Year 11", "40", "Year 12", "50")
1503856112927:)
1503856178664:=(50.45^0.5)/(12^0.5)
1503856182816:(50.45^0.5)/(12^0.5)
1503856228964:sqrt(50.45)/sqrt(12)
1503856654099:b = c(340, 560, 480, 290, 370, 520, 350, 430, 510, 270)
1503856661411:t.test(b, mu = 430, alternative = "less")
1503857950759:data.frame(stringsAsFactors=FALSE,
1503857950762:Employee = c("Ethnic Group", "Gender", "Rank /", "Grade", "Pay", "Scale",
1503857950763:"Maria", "Asian American", "Female", "3", "A", "Peter",
1503857950764:"White American", "Male", "2", "B", "George", "Hispanic American",
1503857950765:"Male", "1", "C", "Smith", "Black American", "Female", "1", "D",
1503857950765:"Johnson", "Alaska Native", "Male", "2", "E", "Thompson",
1503857950766:"Asian American", "Male", "2", "B", "Martinez", "Alaska Native", "Male",
1503857950767:"3", "A", "Lewis", "White American", "Female", "2", "B", "Lee",
1503857950768:"Black American", "Male", "2", "A", "Taylor", "Asian American",
1503857950769:"Female", "1", "B", "Carter", "Asian American", "Male", "2",
1503857950771:"C", "Edwards", "Hispanic American", "Male", "2", "E", "Bailey",
1503857950773:"White American", "Male", "2", "B", "Cooper", "White American",
1503857950774:"Male", "2", "A", "Bill", "Alaska Native", "Male", "3", "E",
1503857950775:"Cox", "Asian American", "Male", "1", "A", "Perry",
1503857950776:"Hispanic American", "Female", "2", "C", "Flores", "Alaska Native", "Female",
1503857950776:"2", "B", "Woods", "White American", "Male", "3", "E", "Cole",
1503857950777:"Asian American", "Female", "1", "A"),
1503857950778:Employee = c("Ethnic Group", "Gender", "Rank /", "Grade", "Pay", "Scale",
1503857950779:"Maria", "Asian American", "Female", "3", "A", "Peter",
1503857950780:"White American", "Male", "2", "B", "George", "Hispanic American",
1503857950781:"Male", "1", "C", "Smith", "Black American", "Female", "1", "D",
1503857950783:"Johnson", "Alaska Native", "Male", "2", "E", "Thompson",
1503857950784:"Asian American", "Male", "2", "B", "Martinez", "Alaska Native", "Male",
1503857950785:"3", "A", "Lewis", "White American", "Female", "2", "B", "Lee",
1503857950785:"Black American", "Male", "2", "A", "Taylor", "Asian American",
1503857950786:"Female", "1", "B", "Carter", "Asian American", "Male", "2",
1503857950787:"C", "Edwards", "Hispanic American", "Male", "2", "E", "Bailey",
1503857950788:"White American", "Male", "2", "B", "Cooper", "White American",
1503857950789:"Male", "2", "A", "Bill", "Alaska Native", "Male", "3", "E",
1503857950790:"Cox", "Asian American", "Male", "1", "A", "Perry",
1503857950791:"Hispanic American", "Female", "2", "C", "Flores", "Alaska Native", "Female",
1503857950792:"2", "B", "Woods", "White American", "Male", "3", "E", "Cole",
1503857950793:"Asian American", "Female", "1", "A")
1503857950794:)
1503857980047:tibble::tribble(
1503857980048:~Employee,
1503857980048:"Ethnic Group",
1503857980049:"Gender",
1503857980051:"Rank /",
1503857980052:"Grade",
1503857980053:"Pay",
1503857980053:"Scale",
1503857980054:"Maria",
1503857980054:"Asian American",
1503857980055:"Female",
1503857980055:"3",
1503857980056:"A",
1503857980056:"Peter",
1503857980057:"White American",
1503857980057:"Male",
1503857980058:"2",
1503857980059:"B",
1503857980060:"George",
1503857980060:"Hispanic American",
1503857980061:"Male",
1503857980062:"1",
1503857980062:"C",
1503857980062:"Smith",
1503857980063:"Black American",
1503857980063:"Female",
1503857980064:"1",
1503857980064:"D",
1503857980065:"Johnson",
1503857980066:"Alaska Native",
1503857980066:"Male",
1503857980067:"2",
1503857980067:"E",
1503857980068:"Thompson",
1503857980068:"Asian American",
1503857980069:"Male",
1503857980070:"2",
1503857980071:"B",
1503857980071:"Martinez",
1503857980072:"Alaska Native",
1503857980073:"Male",
1503857980073:"3",
1503857980074:"A",
1503857980074:"Lewis",
1503857980074:"White American",
1503857980075:"Female",
1503857980075:"2",
1503857980076:"B",
1503857980076:"Lee",
1503857980077:"Black American",
1503857980077:"Male",
1503857980077:"2",
1503857980078:"A",
1503857980078:"Taylor",
1503857980079:"Asian American",
1503857980079:"Female",
1503857980079:"1",
1503857980080:"B",
1503857980081:"Carter",
1503857980081:"Asian American",
1503857980082:"Male",
1503857980082:"2",
1503857980083:"C",
1503857980084:"Edwards",
1503857980085:"Hispanic American",
1503857980085:"Male",
1503857980086:"2",
1503857980086:"E",
1503857980086:"Bailey",
1503857980087:"White American",
1503857980087:"Male",
1503857980088:"2",
1503857980089:"B",
1503857980090:"Cooper",
1503857980090:"White American",
1503857980091:"Male",
1503857980092:"2",
1503857980092:"A",
1503857980094:"Bill",
1503857980094:"Alaska Native",
1503857980095:"Male",
1503857980095:"3",
1503857980096:"E",
1503857980096:"Cox",
1503857980097:"Asian American",
1503857980098:"Male",
1503857980098:"1",
1503857980099:"A",
1503857980100:"Perry",
1503857980100:"Hispanic American",
1503857980101:"Female",
1503857980101:"2",
1503857980102:"C",
1503857980103:"Flores",
1503857980104:"Alaska Native",
1503857980105:"Female",
1503857980106:"2",
1503857980107:"B",
1503857980107:"Woods",
1503857980108:"White American",
1503857980108:"Male",
1503857980109:"3",
1503857980109:"E",
1503857980110:"Cole",
1503857980110:"Asian American",
1503857980111:"Female",
1503857980112:"1",
1503857980112:"A"
1503857980113:)
1503858205185:getwd()
1503858209391:# Load R packages
1503858209394:knitr::opts_chunk$set(echo = TRUE)
1503858209396:library(readxl)
1503858209613:library(tidyverse)
1503858210856:library(nortest)
1503858210877:library(BSDA)
1503858211215:CustomerSurvey2014 = read.csv(file = "CustomerSurvey2014.csv", stringsAsFactors = FALSE)
1503858238800:top_propotion %>% round(2)
1503858526429:employee_retention %>% attach
1503858529012:# H0: There is no significance relationship between gender and year at PLE
1503858529014:employee_retention <- read_excel(PLE_path, sheet = "Employee Retention", skip = 2)
1503858552835:PLE_path <- file.path("Performance_Lawn_Equipment_Database.xlsx")
1503858556251:# H0: There is no significance relationship between gender and year at PLE
1503858556253:employee_retention <- read_excel(PLE_path, sheet = "Employee Retention", skip = 2)
1503858559079:employee_retention %>% attach
1503858559717:# conduct some t test
1503858559719:t.test(YearsPLE ~ Gender)
1503858585143:t.test(YearsPLE ~ `College Grad`)
1503858587155:t.test(YearsPLE ~ Local)
1503858592534:# conduct some t test
1503858592535:t.test(YearsPLE ~ Gender)
1503858594321:t.test(YearsPLE ~ `College Grad`)
1503858595003:t.test(YearsPLE ~ Local)
1503858620402:employee_retention
1503858655983:employee_retention %>% View
1503858897474:# Trasmission
1503858897476:transmission_cost <- read_excel(PLE_path, sheet = "Transmission Costs", skip = 2)
1503858898821:transmission_cost %>% attach
1503858903028:# H0: There is no significance change in process
1503858903030:t.test(Current, `Process A`)
1503858904361:t.test(Current, `Process B`)
1503859099072:DefectsAfterDelivery <- read_excel(PLE_path, sheet = "Defects After Delivery", skip = 3)
1503859100177:DefectsAfterDelivery$`2010` %>% mean
1503859101402:defects_by_year <- DefectsAfterDelivery %>% select(-Month) %>% apply(2, mean)
1503859102280:defects_by_year %>% plot(type = 'b', lwd = 2, xlab = "years")
1503859104532:axis(1, at = 1:5, labels = names(defects_by_year))
1503859110839:defects_by_year %>% plot(type = 'b', lwd = 2, xlab = "years")
1503859133335:?ais
1503859135629:?axis
1503859164649:plot(defects_by_year, type = 'b', lwd = 2, xlab = "years")
1503859165262:axis(1, at = 1:5, labels = names(defects_by_year))
1503859177877:plot(defects_by_year, type = 'b', lwd = 2, xlab = "years")
1503859181218:attach(DefectsAfterDelivery)
1503859184546:t.test(`2010`, `2014`)
1503859300114:# DefectsAfterDelivery$`2010` %>% mean
1503859300117:defects_by_year <- DefectsAfterDelivery %>% select(-Month) %>% apply(2, mean)
1503859305101:defects_by_year
1503859413052:excel_sheets(PLE_path)
1503859466512:OnTimeDelivery <- read_excel(PLE_path, sheet = "On-Time Delivery", skip =2)
1503859470538:OnTimeDelivery
1503859486952:attach(OnTimeDelivery)
1503859947164:heads <- rbinom(1, size = 100, prob = .5)
1503859947169:prop.test(heads, 100)          # continuity correction TRUE by default
1503859947184:prop.test(heads, 100, correct = FALSE)
1503859951524:heads
1503859968886:heads <- rbinom(1, size = 100, prob = .5)
1503859970522:heads
1503859973032:heads <- rbinom(1, size = 100, prob = .5)
1503859974805:head()
1503859977113:heads
1503859992528:prop.test(heads, 100)          # continuity correction TRUE by default
1503860000900:> heads <- rbinom(1, size = 100, prob = .5)
1503860009690:prop.test(heads, 100, correct = FALSE)
1503860123878:prop.test(x = 0.9906526, n = 12, p = 0.9850219)
1503860239262:ontiemde
1503860242556:OnTimeDelivery
1503860385689:p0 <- OnTimeDelivery %>% filter(Month < 2011)
1503860388087:po
1503860390137:p0
1503860402189:p0 <- OnTimeDelivery %>% filter(Month < '2011')
1503860417172:p0 <- OnTimeDelivery %>% filter(Month < '2011-01-01')
1503860419744:po
1503860421474:p0
1503860454254:p0 <- OnTimeDelivery %>% filter(Month < '2011-01-01')
1503860459687:p0
1503860464596:p0 <- OnTimeDelivery %>% filter(Month <= '2011-01-01')
1503860540403:p0 <- OnTimeDelivery %>% filter(Month < ymd("2011-01-01")
1503860542212:)
1503860548306:library(lubridate)
1503860550765:p0 <- OnTimeDelivery %>% filter(Month < ymd("2011-01-01")
1503860552230:)
1503860554369:p0
1503860726482:# Load R packages
1503860726484:knitr::opts_chunk$set(echo = TRUE)
1503860726486:library(readxl)
1503860726488:library(tidyverse)
1503860726491:library(nortest)
1503860726494:library(lubridate)
1503860726496:PLE_path <- file.path("Performance_Lawn_Equipment_Database.xlsx")
1503860726509:p0 <-
1503860726511:OnTimeDelivery %>%
1503860726512:filter(Month < ymd("2011-01-01")) %>%
1503860726514:summarise_at(.vars = c(`Number of deliveries`, `Number On Time`), .funs = sum)
1503860793524:?dplyr::summarise
1503860874890:p0 <-
1503860874893:OnTimeDelivery %>%
1503860874895:filter(Month < ymd("2011-01-01")) %>%
1503860874897:summarise(
1503860874899:sumOrders = sum(`Number of deliveries`)
1503860874901:sumOnTime = sum(`Number On Time`)
1503860881281:p0 <-
1503860881283:OnTimeDelivery %>%
1503860881284:filter(Month < ymd("2011-01-01")) %>%
1503860881286:summarise(
1503860881288:sumOrders = sum(`Number of deliveries`),
1503860881290:sumOnTime = sum(`Number On Time`)
1503860881293:)
1503860884366:p0
1503860914599:p0 <-
1503860914601:OnTimeDelivery %>%
1503860914602:filter(Month < ymd("2011-01-01")) %>%
1503860914604:summarise(
1503860914605:sumOrders = sum(`Number of deliveries`),
1503860914607:sumOnTime = sum(`Number On Time`)
1503860914608:) %>%
1503860914611:mutate(proportion = sumOnTime/sumOrders)
1503860917049:p0
1503860930200:p0 <-
1503860930202:OnTimeDelivery %>%
1503860930204:filter(Month < ymd("2011-01-01")) %>%
1503860930205:summarise(
1503860930207:sumOrders = sum(`Number of deliveries`),
1503860930209:sumOnTime = sum(`Number On Time`)
1503860930211:) %>%
1503860930213:mutate(proportion = sumOnTime/sumOrders) %>%
1503860930215:select(proportion)
1503860933465:p0
1503860940179:p0 <-
1503860940181:OnTimeDelivery %>%
1503860940183:filter(Month < ymd("2011-01-01")) %>%
1503860940184:summarise(
1503860940186:sumOrders = sum(`Number of deliveries`),
1503860940188:sumOnTime = sum(`Number On Time`)
1503860940191:) %>%
1503860940193:mutate(proportion = sumOnTime/sumOrders) %>%
1503860940195:select(proportion) %>%
1503860940198:as.numeric()
1503860942630:p0
1503861000538:pbar <-
1503861000541:OnTimeDelivery %>%
1503861000542:filter(Month >= ymd("2014-01-01")) %>%
1503861000544:summarise(
1503861000545:sumOrders = sum(`Number of deliveries`),
1503861000547:sumOnTime = sum(`Number On Time`)
1503861000549:) %>%
1503861000550:mutate(proportion = sumOnTime/sumOrders) %>%
1503861000552:select(proportion) %>%
1503861000554:as.numeric()
1503861003296:pbar
1503861005669:p0
1503861029714:?prop.trend.test
1503861117662:OnTimeDelivery
1503861127052:p0 <-
1503861127052:OnTimeDelivery %>%
1503861127053:filter(Month < ymd("2011-01-01")) %>%
1503861127054:summarise(
1503861127055:sumOrders = sum(`Number of deliveries`),
1503861127056:sumOnTime = sum(`Number On Time`)
1503861127057:) %>%
1503861127057:mutate(proportion = sumOnTime/sumOrders) %>%
1503861127058:select(proportion) %>%
1503861127058:as.numeric()
1503861137158:pbar <-
1503861137160:OnTimeDelivery %>%
1503861137161:filter(Month >= ymd("2014-01-01")) %>%
1503861137163:select(Percent)
1503861145806:pbar
1503861159485:pbar <-
1503861159486:OnTimeDelivery %>%
1503861159488:filter(Month >= ymd("2014-01-01")) %>%
1503861159489:select(Percent) %>%
1503861159491:as.numeric()
1503861167451:pbar <-
1503861167453:OnTimeDelivery %>%
1503861167454:filter(Month >= ymd("2014-01-01")) %>%
1503861167456:select(Percent) %>%
1503861167457:t %>%
1503861167459:as.numeric()
1503861171669:pbar
1503861186982:prop.test(pbar, n = 12, p0)
1503861214965:prop.test(pbar, n = 12)
1503861264155:pbar <-
1503861264156:OnTimeDelivery %>%
1503861264158:filter(Month >= ymd("2014-01-01")) %>%
1503861264159:select(`Number On Time`, `Number of deliveries`)
1503861270513:prop.test(pbar)
1503861277803:pbar
1503861331671:prop.test(pbar, 12)
1503861339014:length(pbar)
1503861343576:prop.test(pbar, 2)
1503861353439:prop.test(pbar, c(1,2))
1503861451267:p0 <-
1503861451270:OnTimeDelivery %>%
1503861451273:filter(Month < ymd("2011-01-01")) %>%
1503861451274:summarise(
1503861451276:sumOrders = sum(`Number of deliveries`),
1503861451278:sumOnTime = sum(`Number On Time`)
1503861451279:)
1503861453348:p0
1503861471250:pbar <-
1503861471252:OnTimeDelivery %>%
1503861471254:filter(Month >= ymd("2014-01-01")) %>%
1503861471256:summarise(
1503861471257:sumOrders = sum(`Number of deliveries`),
1503861471259:sumOnTime = sum(`Number On Time`)
1503861471260:)
1503861473313:pbar
1503861486237:p0 %>% as.numeric()
1503861495794:t1 = p0 %>% as.numeric()
1503861502483:t2 = pbar %>% as.numeric()
1503861508319:prop.test(t1,t2)
1503861629660:t1
1503861630358:t2
1503861647786:t1 = c(13942, 16851)
1503861660109:t2 = c(14154, 17010)
1503861663301:prop.test(t1,t2)
1503861805399:prop.test(t1,t2, correct = F)
1503861846985:?p.norm
1503861850442:?pnorm
1503861962757:prop.table()
1503861966251:?prop.table
1503862002265:?prop.test
1503862020610:prop.test(t1,t2, correct = F, alternative = "greater")
1503862047766:prop.test(t1,t2,alternative = "greater")
1503862126316:binom.test(t1,t2,alternative = "greater")
1503862164797:?pnorm
1503862534456:t1
1503862536470:t2
1503862556608:t1 = c(16851, 13942)
1503862583896:t2 = c(17010, 14154)
1503862587805:prop.test(t1,t2,alternative = "greater")
1503862885032:?prop.test
1503863066963:prop.test(t1,t2,alternative = "greater")$p.value
1503863091734:prop.test(t1,t2,alternative = "less")$p.value
1503863105031:prop.test(t1,t2,alternative = "less")$data.frame
1503863517982:prop.test(x = 0.9906526, n = 12, p = 0.9850219)
1503863550474:prop.test(x = 0.9906526, n = 12, p = 0.9850219, alternative = "greater")
1503863600105:p0 <-
1503863600107:OnTimeDelivery %>%
1503863600109:filter(Month < ymd("2011-01-01")) %>%
1503863600110:summarise(
1503863600112:sumOrders = sum(`Number of deliveries`),
1503863600113:sumOnTime = sum(`Number On Time`)
1503863600115:) %>%
1503863600120:mutate(proportion = sumOnTime/sumOrders) %>%
1503863600122:select(proportion) %>%
1503863600124:as.numeric()
1503863602435:p0
1503864359350:CustomerSurvey2014 <- read_excel(PLE_path, sheet = "2014 Customer Survey", skip = 2)
1503864362402:CustomerSurvey2014
1503864372430:OnTimeDelivery
1503864387268:# CustomerSurvey2014[is.na(CustomerSurvey2014)] <- "NorthA"
1503864387270:countByRegion <- table(CustomerSurvey2014$Region, CustomerSurvey2014$Quality)
1503864388574:countByRegion
1503864391916:attach(CustomerSurvey2014)
1503864988521:countByRegion
1503865103165:Data <- data.frame(
1503865103168:Y = c(Quality, `Ease of Use`, Price, Service),
1503865103170:Para = factor(rep(c("Quality","Easeofuse","Price","Service"), times = c(length(Quality),length(`Ease of Use`),length(Price),length(Service)))))
1503865107956:Date
1503865110423:Data
1503865121696:CustomerSurvey2014
1503865134980:?cast
1503865194016:library(reshape2)
1503865199564:Data<-data.frame(Y=c(Quality,Easeofuse,Price,Service),Para=factor(rep(c("Quality","Easeofuse","Price","Service"),times=c(length(Quality),length(Easeofuse),length(Price),length(Service))))
1503865209844:names(airquality) <- tolower(names(airquality))
1503865209845:melt(airquality, id=c("month", "day"))
1503865209870:names(ChickWeight) <- tolower(names(ChickWeight))
1503865209871:melt(ChickWeight, id=2:4)
1503865231438:View(airquality)
1503865299152:melt(CustomerSurvey2014,
1503865299155:id.vars = c(Quality, `Ease of Use`, Price, Service))
1503865370954:melt(CustomerSurvey2014,
1503865370957:)
1503865384353:Data
1503865394923:melt(CustomerSurvey2014)
1503865401734:melt(CustomerSurvey2014) %>% View
1503865410215:View(Data)
1503865576386:t <- melt(CustomerSurvey2014)
1503865621099:aov(vlue ~ variable, data = t)
1503865627296:aov(value ~ variable, data = t)
1503865682541:gather(CustomerSurvey2014)
1503865748208:gather(CustomerSurvey2014, key = "Reigion", value = c(Quality, `Ease of Use`, Price, Service))
1503865829000:# From http://stackoverflow.com/questions/1181060
1503865829002:stocks <- tibble(
1503865829004:time = as.Date('2009-01-01') + 0:9,
1503865829005:X = rnorm(10, 0, 1),
1503865829006:Y = rnorm(10, 0, 2),
1503865829007:Z = rnorm(10, 0, 4)
1503865829007:)
1503865829078:gather(stocks, stock, price, -time)
1503865829264:stocks %>% gather(stock, price, -time)
1503865833751:stocks
1503866005825:CustomerSurvey2014 %>% gather(-Region, variable, vlue)
1503866011947:CustomerSurvey2014 %>% gather(-Region, variable, value)
1503866032920:ini_iris <- iris[c(1, 51, 101), ]
1503866032921:# gather Sepal.Length, Sepal.Width, Petal.Length, Petal.Width
1503866032922:gather(mini_iris, key = flower_att, value = measurement,
1503866032922:Sepal.Length, Sepal.Width, Petal.Length, Petal.Width)
1503866032924:# same result but less verbose
1503866032924:gather(mini_iris, key = flower_att, value = measurement, -Species)
1503866051267:mini_iris <- iris[c(1, 51, 101), ]
1503866051268:# gather Sepal.Length, Sepal.Width, Petal.Length, Petal.Width
1503866051269:gather(mini_iris, key = flower_att, value = measurement,
1503866051270:Sepal.Length, Sepal.Width, Petal.Length, Petal.Width)
1503866051296:# same result but less verbose
1503866051296:gather(mini_iris, key = flower_att, value = measurement, -Species)
1503866057273:mini_iris
1503866122048:CustomerSurvey2014 %>% gather(-Region, key = "Para", value = -Reigin)
1503866127180:CustomerSurvey2014
1503866146898:CustomerSurvey2014 %>% gather(key = "Para", value = -Reigin)
1503866174062:CustomerSurvey2014 %>% gather(-Region, key = "Para", value = value)
1503866237950:CustomerSurvey2014 %>% gather(-Region, key = attribute, value = rating)
1503866278171:Data <- CustomerSurvey2014 %>% gather(-Region, key = attribute, value = rating)
1503866292852:aov(rating ~ attribute, data = Data)
1503866314676:fml <- aov(rating ~ attribute, data = Data)
1503866315280:fml
1503866315879:anova(fml)
1503866365172:CustomerSurvey2014
1503866468551:fml
1503866489892:anova(fml)
1503866551059:Data <-
1503866551062:CustomerSurvey2014 %>%
1503866551064:gather(-Region, key = attribute, value = rating) %>%
1503866551066:select(-Region)
1503867361737:t
1503867362592:t1
1503867363542:t2
1503867372466:prop.test(t1, t2)
1503867431921:prop.test(t1, t2, alternative = "less")
1503867458176:prop.test(t1, t2, alternative = "greater")
1503867496906:t1
1503867498370:t2
1503867509500:p0 <-
1503867509502:OnTimeDelivery %>%
1503867509503:filter(Month < ymd("2011-01-01")) %>%
1503867509505:summarise(
1503867509506:sumOrders = sum(`Number of deliveries`),
1503867509508:sumOnTime = sum(`Number On Time`)
1503867509510:)
1503867512201:p0
1503867521118:t1
1503867522878:t2
1503867534749:prop.test(t1, t2, alternative = "greater")
1503868989146:sexsmoke<-matrix(c(70,120,65,140),ncol=2,byrow=T)
1503868989155:rownames(sexsmoke)<-c("male","female")
1503868989157:colnames(sexsmoke)<-c("smoke","nosmoke")
1503868989159:prop.test(sexsmoke)
1503868994829:sexsmoke
1503869019585:70/190
1503869377361:p0 <-
1503869377363:OnTimeDelivery %>%
1503869377364:filter(Month < ymd("2011-01-01")) %>%
1503869377366:summarise(
1503869377366:sumOrders = sum(`Number of deliveries`),
1503869377367:sumOnTime = sum(`Number On Time`)
1503869377368:) %>%
1503869377369:mutate(sumFail = sumOrders - sumOnTime) %>%
1503869377370:select(-sumOrders) %>%
1503869377370:as.numeric()
1503869378368:pbar <-
1503869378369:OnTimeDelivery %>%
1503869378370:filter(Month >= ymd("2014-01-01")) %>%
1503869378370:summarise(
1503869378371:sumOrders = sum(`Number of deliveries`),
1503869378371:sumOnTime = sum(`Number On Time`)
1503869378371:) %>%
1503869378372:mutate(sumFail = sumOrders - sumOnTime) %>%
1503869378372:select(-sumOrders) %>%
1503869378373:as.numeric()
1503869380919:p0
1503869383041:pbar
1503869393649:sexsmoke
1503869403482:prop.test(sexsmoke)
1503869432351:rbind(po,pbar) %>% prop.test(alternative = "greater")
1503869439193:rbind(p0,pbar) %>% prop.test(alternative = "greater")
1503869526399:deliveries <- matrix(p0, pbar)
1503869539177:deliveries <- matrix(c(p0, pbar), byrow = T)
1503869541930:deliveries
1503869546277:deliveries <- matrix(c(p0, pbar), byrow = F)
1503869548680:deliveries
1503869562262:deliveries <- matrix(c(p0, pbar), ncol = 2, byrow = T)
1503869564858:deliveries
1503869621544:deliveries <- matrix(c(p0, pbar), ncol = 2, byrow = T)
1503869621689:rownames(deliveries) <- c("year 2010", "year 2014")
1503869624350:colnames(deliveries) <- c("on time", "not on time")
1503869627308:deliveries
1503869652264:prop.test(deliveries, alternative = "greater")
1503971881185:22
1503973509984:library(DBI)
1503973510287:library(dbplyr)
1503973510756:library(tidyverse)
1503973511669:library(lubridate)
1503973728543:file.create("./config/library.R")
1503973747938:file.create("./config/settings.R")
1503973870067:file.edit("./config/library.R")
1503973979065:install.packages('addinslist')
1503973997239:addinslist:::addinslistAddin()
1503974727342:library(radiant.table)
1503974740314:addinslist:::addinslistAddin()
1503974761423:library(ggExtra)
1503974784938:addinslist:::addinslistAddin()
1503975024500:install.packages("radiant", repos = "https://radiant-rstats.github.io/minicran/", type = "binary")
1503975041246:library(radiant)
1503975070201:radiant::radiant()
1503975087359:R.version
1503975096988:RStudio.Version()
1503975104815:radiant::update_radiant()
1503975116224:source("https://raw.githubusercontent.com/radiant-rstats/minicran/gh-pages/build.R")
1503975163385:radiant::radiant()
1503975197533:radiant:::radiant()
1503975203912:addinslist:::addinslistAddin()
1503975227263:radiant.data:::radiant.data()
1503975242774:radiant:::update_radiant()
1503975257490:addinslist:::addinslistAddin()
1503975290547:install.packages("radiant", repos = "https://radiant-rstats.github.io/minicran/", type = "binary")
1503975301770:library(radiant)
1503975317480:install.packages("rddiant.data")
1503975382401:install.packages("radiant", repos = "https://radiant-rstats.github.io/minicran/")
1503975400402:install.packages("radiant", repos = "https://radiant-rstats.github.io/minicran/", type = "binary")
1503975417981:addinslist:::addinslistAddin()
1503975429113:radiant::radiant()
1503975437607:data("iris")
1503975439348:radiant::radiant()
1503975448006:library(tidyverse)
1503975449435:radiant::radiant()
1503975493647:load_all()
1503975505560:library(devtools)
1503975515443:install.packages("radiant", repos = "https://radiant-rstats.github.io/minicran/", type = "binary")
1503975522658:library(radiant)
1503975564714:remove.packages("radiant")
1503975571078:remove.packages("radiant.table")
1503975578022:remove.packages("radiant.data")
1503975587140:install.packages("Rcpp")
1503975599833:install.packages('data.table')
1503975610238:install.packages("radiant", repos = "https://radiant-rstats.github.io/minicran/", type = "binary")
1503975622160:radiant::radiant()
1503975647946:source("https://raw.githubusercontent.com/radiant-rstats/minicran/gh-pages/install.R")
1503975713552:source("https://raw.githubusercontent.com/radiant-rstats/minicran/gh-pages/install_dev.R")
1503975750682:install.packages("package-that-is-not-yet-installed", repos = "https://cran.rstudio.com", type = "binary")
1503975767631:source("https://raw.githubusercontent.com/radiant-rstats/minicran/gh-pages/build.R")
1503975783798:?radiant
1503975788393:??radiant
1503975800731:source("https://raw.githubusercontent.com/radiant-rstats/minicran/gh-pages/build.R")
1503975845844:install.packages("radiant", repos = "https://radiant-rstats.github.io/minicran/", type = "binary")
1503975873665:radiant:::radiant()
1503975993611:addinslist:::addinslistAddin()
1503981479780:plot(c(1:10))
1503981507417:library("plotly")
1503981514588:library(plotly)
1503981539976:?plotly::plot_ly
1503981548721:plot_ly(economics, x = ~date, y = ~pop)
1504248610511:source('~/.active-rstudio-document', echo=TRUE)
1504314511058:?uniform
1504314517536:??uniform
1504314560145:?binomial
1504314569398:??Binomial
1504314847193:?rbinom
1504314990476:qbinom(prob = 0.25, size = 300, 96)
1504315045834:qbinom(prob = 0.25, size = 300, 0.1)
1504315064073:pbinom(prob = 0.25, size = 300, 96)
1504315072756:pbinom(prob = 0.25, size = 300, 96)-1
1504315699793:?pnorm
1504315736903:pnorm(0.95)
1504315746294:qnorm(0.95)
1504316559269:qnorm(0.99)
1504316577035:qnorm(0.98)
1504316638013:qnorm(0.98)*40/10
1504316662363:(qnorm(0.98)*40/10)^2
1504316804511:qnorm(0.95)*(118/200)(1-118/200)
1504316815193:qnorm(0.95)*(118/200)*(1-118/200)
1504316861191:qnorm(0.95)*(118/200)*(1-118/200)/(0.03^2)
1504316881713:qnorm(0.95)*(118/200)*(1-118/200)/0.03 %>% square
1504316888471:qnorm(0.95)*(118/200)*(1-118/200)/0.03
1504316915976:qnorm(0.95)^2*(118/200)*(1-118/200)/0.03^2
1504316936338:qnorm(0.95)^2*(118/200)*(1-118/200)/0.0009
1504316949360:qnorm(0.995)^2*(118/200)*(1-118/200)/0.0009
1504317214180:pbinom(3. size = 64, 0.04)
1504317221816:pbinom(3 size = 64, 0.04)
1504317226495:pbinom(3, size = 64, 0.04)
1504317248594:?pnbinom
1504317343741:pbinom(3, size = 64, 0.04)_1
1504317349474:pbinom(3, size = 64, 0.04)-1
1504317401525:pbinom(3, size = 64, 0.04)
1504317407312:qbinom(3, size = 64, 0.04)
1504317414535:qbinom(0.3, size = 64, 0.04)
1504317445299:pbinon(3, 64, 0.04)
1504317450095:pbinom(3, 64, 0.04)
1504317472018:pbinom(3, 64, 0.05)
1504317488267:pbinom(3, 64, 1)
1504317501484:pbinom(3, 64, 0.96)
1504317516706:pbinom(3, 64, 0.04)
1504317542180:dbinom(3, 64, 0.04)
1504318656242:p1 = 29/120
1504318671979:p2 <- 56/280
1504318687326:se <- p2(1-p2)
1504318693532:se <- p2*(1-p2)
1504318714737:(p1 -p2)/se
1504318738083:se <- se/280
1504318744735:se <- sqrt(se)
1504318748024:(p1 -p2)/se
1504318757626:pnorm(z)
1504318764855:z <- (p1 -p2)/se
1504318768726:pnorm(z)
1504318794287:?pnorm
1504318911377:pnorm(z, lower.tail = F)
1504319008666:se <- p2*(1 - p2)/120 %>% sqrt
1504319009761:se
1504319022700:(p1 - p2)/se
1504319082705:se <- sqrt(p2(1-p2)/120)
1504319090336:se <- sqrt(p2*(1-p2)/120)
1504319091344:se
1504319102856:(p1-p2)/se
1504319118947:z <- (p1-p2)/se
1504319122349:pnorm(z)
1504319142227:pnorm(z, lower.tail = T)
1504319145468:pnorm(z, lower.tail = F)
1504320707186:sqrt(225)
1504320714931:2.25/15
1504320727306:0.5/0.15
1504320764656:pnorm(3.33)
1504322564645:0.45*sqrt(250)/5 %>% qnorm()
1504322570278:0.45*sqrt(250)/5 %>% pnorm
1504322603718:0.45*sqrt(250)/5 %>% dnorm
1504322609289:0.45*sqrt(250)/5 %>% qnorm
1504322635116:0.45*sqrt(250)/5
1504322644802:0.45*sqrt(250)/5 %>% pnorm
1504322702617:0.45*sqrt(250)/5 %>% qnorm
1504322719643:qnorm(0.995)
1504322736670:0.45*sqrt(250)/5
1504322762784:pnorm(0.5)
1504322767499:qnorm(0.5)
1504322777987:qnorm(1)
1504322791952:qnorm(0.3)
1504322795828:qnorm(0.99)
1504322804937:pnorm(0)
1504322810132:pnorm(1)
1504322817155:pnorm(999)
1504322825773:0.45*sqrt(250)/5 %>% pnorm
1504322835036:0.45*sqrt(250)/5
1504322840928:pnrom(1.42)
1504322847673:pnorm(1.42)
1504322860736:pnorm(1.423)
1504335443469:install.packages("RevoScaleR")
1504403015782:?sqlite
1504403019134:??sqlite
1504403044334:library(RSQLite)
1504403206879:# Create an ephemeral in-memory RSQLite database
1504403206880:con <- dbConnect(RSQLite::SQLite(), "data/bike_share.db")
1504403207876:station <-
1504403207878:tbl(con, "station") %>% collect
1504403215623:station
1504403228408:station %>% View
1504403373849:# read csv files
1504403373852:station1 <-
1504403373856:read_csv("data/201402_station_data.csv")
1504403384362:source('~/Documents/Harrisburg/500_52/Project/bay_area_bike_share/./config/library.R')
1504403387632:# read csv files
1504403387633:station1 <-
1504403387633:read_csv("data/201402_station_data.csv")
1504403414332:head(station1)
1504403422779:glimpse(station1)
1504403474335:?read_csv
1504403545872:# read csv files
1504403545873:station1 <-
1504403545874:read_csv("data/201402_station_data.csv", cols_only(installation = col_date()))
1504403621802:?read_csv
1504403680261:# read csv files
1504403680261:station1 <-
1504403680262:read_csv("data/201402_station_data.csv",
1504403680263:cols_only(installation = col_date()))
1504403691346:# read csv files
1504403691346:station1 <-
1504403691347:read_csv("data/201402_station_data.csv", col_names = T,
1504403691348:cols_only(installation = col_date()))
1504403795144:# read csv files
1504403795146:station1 <-
1504403795147:read_csv("data/201402_station_data.csv",
1504403795148:col_types = cols_only(installation = col_date()))
1504403819502:station2 <-
1504403819505:read_csv("data/201408_station_data.csv")
1504403834064:# read csv files
1504403834065:station1 <-
1504403834065:read_csv("data/201402_station_data.csv",
1504403834066:col_types = cols(installation = col_date()))
1504403856518:problems(...
1504403856518:x = )
1504403861182:problems()
1504403873818:problems(station1)
1504403894060:col_date()
1504403898216:# read csv files
1504403898217:station1 <-
1504403898218:read_csv("data/201402_station_data.csv",
1504403898218:col_types = cols(installation = col_date()))
1504403971001:# read csv files
1504403971005:station1 <-
1504403971007:read_csv("data/201402_station_data.csv",
1504403971008:col_types = cols(installation = col_date()-))
1504403975587:# read csv files
1504403975588:station1 <-
1504403975588:read_csv("data/201402_station_data.csv",
1504403975589:col_types = cols(installation = col_date()))
1504404010848:# read csv files
1504404010849:station1 <-
1504404010849:read_csv("data/201402_station_data.csv",
1504404010850:cols(installation = col_date()))
1504404024182:# read csv files
1504404024183:station1 <-
1504404024183:read_csv("data/201402_station_data.csv", col_names = T,
1504404024184:cols(installation = col_date()))
1504404038794:?col_date
1504404074222:# read csv files
1504404074223:station1 <-
1504404074224:read_csv("data/201402_station_data.csv",
1504404074224:col_types = cols(installation = col_date(format = "%m/%d/%Y")))
1504404085236:station1 %>% glimpse()
1504404101454:station1
1504404145128:station2 <-
1504404145131:read_csv("data/201408_station_data.csv",
1504404145132:col_types = cols(installation = col_date(format = "%m/%d/%Y")))
1504404159720:station3 <-
1504404159721:read_csv("data/201508_station_data.csv",
1504404159722:col_types = cols(installation = col_date(format = "%m/%d/%Y")))
1504404171029:station4 <-
1504404171031:read_csv("data/201608_station_data.csv",
1504404171032:col_types = cols(installation = col_date(format = "%m/%d/%Y")))
1504404197087:station1
1504404202523:station2
1504404230007:station1 %>% glimpse()
1504404235057:station2 %>% glimpse()
1504404240146:station3 %>% glimpse()
1504404247270:station4 %>% glimpse()
1504404251505:station4 <-
1504404251506:read_csv("data/201608_station_data.csv",
1504404251506:col_types = cols(installation = col_date(format = "%m/%d/%Y")))
1504404262424:problems(station4
1504404262425:x = )
1504404266554:problems(station4)
1504404287964:station4 <-
1504404287965:read_csv("data/201608_station_data.csv",
1504404287965:col_types = cols(installation = col_date(format = "%m/%d/%y")))
1504404293224:View(station4)
1504404306261:station4 <-
1504404306262:read_csv("data/201608_station_data.csv")
1504404320544:station4 %>% View
1504404389090:station4 <-
1504404389093:read_csv("data/201608_station_data.csv",
1504404389094:col_types = cols(installation = col_date(format = "%m/%d/%y")))
1504404403032:station4 %>% glimpse()
1504404417492:?read_csv
1504404453416:station4 <- station4 %>% na.omit
1504404457419:station4 %>% glimpse()
1504404464146:station4 %>% View
1504404473412:station4 <-
1504404473439:read_csv("data/201608_station_data.csv",
1504404473439:col_types = cols(installation = col_date(format = "%m/%d/%Y")))
1504404478801:station4 <- station4 %>% na.omit
1504404582415:View(station3)
1504404594898:View(station2)
1504404699678:station4 <-
1504404699680:read_csv("data/201608_station_data.csv",
1504404699681:col_types = cols(installation = col_date(format = c("%m/%d/%Y", "%m/%d/%y"))))
1504404732125:col_date()
1504404735199:?col_date
1504404760312:parse_datetime("01/02/2010", "%m%.%d%.%Y")
1504404774165:parse_datetime("2010/01/01 12:00", "%Y/%m/%d %H:%M",
1504404774167:locale = locale(tz = "US/Eastern"))
1504404789535:parse_datetime("10/01/01 12:00", "%Y/%m/%d %H:%M",
1504404789536:locale = locale(tz = "US/Eastern"))
1504404846190:station4 <-
1504404846194:read_csv("data/201608_station_data.csv",
1504404846195:col_types = cols(installation = col_date(format = "%AD")))
1504404870507:station4 <- station4 %>% na.omit
1504404876303:station4 <-
1504404876304:read_csv("data/201608_station_data.csv",
1504404876306:col_types = cols(installation = col_date(format = "%AD")))
1504404879131:View(station4)
1504404902684:station4 <-
1504404902686:read_csv("data/201608_station_data.csv")
1504404920798:station4 <- station4 %>% mutate(installation = ymd(installation))
1504404926303:View(station4)
1504404937550:station4 <-
1504404937551:read_csv("data/201608_station_data.csv")
1504404940422:View(station4)
1504404947454:?ymd
1504404964037:station4 <- station4 %>% mutate(installation = mdy(installation))
1504404998901:station4 <- station4 %>% na.omit
1504405002870:View(station4)
1504405028750:station4 <- station4 %>% na.omit %>% arrange(station_id)
1504405048554:station1 <- station1 %>% arrange(station_id)
1504405057868:station2 <- station2 %>% arrange(station_id)
1504405065560:station3 <- station3 %>% arrange(station_id)
1504405206173:station1 %>% View
1504405883978:s1 <- full_join(station1, station2, by = "station_id")
1504405892437:s1 %>% View
1504405951955:s1 <- left_join(station1, station2, by = "station_id")
1504405953233:s1 %>% View
1504406023299:s1 <- rbind(station1, station2)
1504406049137:s1 <- rbind(station1, station2) %>% unique()
1504406056987:s1 %>% viewdata()
1504406086077:# Create an ephemeral in-memory RSQLite database
1504406086078:con <- dbConnect(RSQLite::SQLite(), "data/bike_share.db")
1504406091617:source('~/Documents/Harrisburg/500_52/Project/bay_area_bike_share/./config/library.R')
1504406094932:# Create an ephemeral in-memory RSQLite database
1504406094933:con <- dbConnect(RSQLite::SQLite(), "data/bike_share.db")
1504406099712:station <-
1504406099715:tbl(con, "station") %>% collect
1504406109283:View(station)
1504406116059:# read csv files
1504406116060:station1 <-
1504406116060:read_csv("data/201402_station_data.csv",
1504406116061:col_types = cols(installation = col_date(format = "%m/%d/%Y")))
1504406117776:station2 <-
1504406117776:read_csv("data/201408_station_data.csv",
1504406117777:col_types = cols(installation = col_date(format = "%m/%d/%Y")))
1504406119560:station3 <-
1504406119561:read_csv("data/201508_station_data.csv",
1504406119561:col_types = cols(installation = col_date(format = "%m/%d/%Y")))
1504406119948:station4 <-
1504406119949:read_csv("data/201608_station_data.csv")
1504406120961:station4 <- station4 %>% mutate(installation = mdy(installation))
1504406122318:station4 <- station4 %>% na.omit %>% arrange(station_id)
1504406127356:station4 <-
1504406127357:read_csv("data/201608_station_data.csv")
1504406128233:station4 <- station4 %>% mutate(installation = mdy(installation))
1504406128775:station4 <- station4 %>% na.omit %>% arrange(station_id)
1504406130672:station3 <- station3 %>% arrange(station_id)
1504406131723:s1 <- rbind(station1, station2) %>% unique()
1504406138455:s1 %>% View
1504406174587:?unique
1504406217694:iris
1504406223155:unique(iris)
1504406236780:s1 <- rbind(station1, station2)
1504406249861:View(s1)
1504406262365:s1 <- s1 %>% arrange(station_id)
1504406286151:s1 <- rbind(station1, station2, station3, station4)
1504406301557:s1 <- rbind(station1, station2, station3, station4) %>%
1504406301557:arrange(station_id)
1504406316892:s1 <- rbind(station1, station2, station3, station4) %>%
1504406316893:arrange(station_id) %>% unique()
1504406659230:station4 <-
1504406659232:read_csv("data/201608_station_data.csv")
1504406661885:View(station4)
1504407157253:status1 <- read_csv("data/201402_status_data.csv")
1504407190182:status1 %>% dim()
1504407356990:??sqlite
1504407418316:# Create an ephemeral in-memory RSQLite database
1504407418317:con <- dbConnect(RSQLite::SQLite(), "data/database.sqlite")
1504407420945:con
1504407439043:tbl(con, "status")
1504407446370:tblist
1504407459112:??odbc
1504407501652:??`sqlite-transaction`
1504407509311:??RSQLite
1504407533891:dbGetInfo(con)
1504407602951:dbColumnInfo()
1504407617073:dbListTables(con)
1504407677653:station <- tbl(con, "station")
1504407687624:status <- tbl(con, "status")
1504407697351:trip <- tbl(con, trip)
1504407711263:trip <- tbl(con, "trip")
1504407722515:weather <- tbl(con, "weather")
1504407743322:station
1504407760225:station %>% glimpse()
1504407779674:status %>% glimpse()
1504407793689:trip %>% glimpse()
1504407813415:weather %>% glimpse()
1504407830721:source('~/Documents/Harrisburg/500_52/Project/bay_area_bike_share/./config/library.R')
1504407868385:file.edit("config/settings.R")
1504407881766:source('config/library.R')
1504407888753:source("config/settings.R")
1504407942684:station %>% mutate(installation_date = mdy(installation_date))
1504407998956:station %>% mutate(installation_date = as.Date(installation_date))
1504408006452:as.Date()
1504408010824:?as.Date
1504408051441:station %>%
1504408051443:mutate(installation_date =
1504408051444:as.Date(installation_date, format = "%m/%d/%Y"))
1504408155688:DF <- data.frame(YEAR = 2014, DOY = 15)
1504408158694:DF
1504408266817:station %>% View
1504408277727:station %>% collect %>% View
1504408382902:install.packages("leaflet")
1504408393095:library(leaflet)
1504408612332:weather %>% collect %>% View
1504408642596:weather %>% collect %>% arrange(date) %>% View
1504408693256:weather %>% collect %>% filter(date = '12/31/2016') %>% View
1504408698431:weather %>% collect %>% filter(date == '12/31/2016') %>% View
1504408730504:weather %>% collect %>%
1504408730506:mutate(date = mdy(date)) %>%
1504408730507:arrnge(desc(date)) %>%
1504408730507:View
1504408737483:weather %>% collect %>%
1504408737484:mutate(date = mdy(date)) %>%
1504408737484:arrange(desc(date)) %>%
1504408737485:View
1504409107312:# Create an ephemeral in-memory RSQLite database
1504409107323:con <- dbConnect(RSQLite::SQLite(), "data/bike_share.db")
1504409111539:# read csv files
1504409111541:station1 <-
1504409111543:read_csv("data/201402_station_data.csv",
1504409111544:col_types = cols(installation = col_date(format = "%m/%d/%Y")))
1504409116434:station2 <-
1504409116437:read_csv("data/201408_station_data.csv",
1504409116437:col_types = cols(installation = col_date(format = "%m/%d/%Y")))
1504409117298:station3 <-
1504409117299:read_csv("data/201508_station_data.csv",
1504409117300:col_types = cols(installation = col_date(format = "%m/%d/%Y")))
1504409119915:station4 <-
1504409119916:read_csv("data/201608_station_data.csv")
1504409122729:station4 <- station4 %>% mutate(installation = mdy(installation))
1504409124482:station4 <- station4 %>% na.omit %>% arrange(station_id)
1504409125415:station3 <- station3 %>% arrange(station_id)
1504409128027:s1 <- rbind(station1, station2, station3, station4) %>%
1504409128028:arrange(station_id) %>% unique()
1504409133977:View(s1)
1504409218080:# read csv files
1504409218081:station1 <-
1504409218081:read_csv("data/201402_station_data.csv",
1504409218082:col_types = cols(installation = col_date(format = "%m/%d/%Y"))) %>%
1504409218082:mutate(source = 1)
1504409226217:station2 <-
1504409226219:read_csv("data/201408_station_data.csv",
1504409226220:col_types = cols(installation = col_date(format = "%m/%d/%Y"))) %>%
1504409226221:mutate(source = 2)
1504409241122:station3 <-
1504409241124:read_csv("data/201508_station_data.csv",
1504409241124:col_types = cols(installation = col_date(format = "%m/%d/%Y"))) %>%
1504409241125:mutate(source = 3)
1504409252990:station4 <-
1504409252991:read_csv("data/201608_station_data.csv") %>%
1504409252992:mutate(source = 4)
1504409254080:station4 <- station4 %>% mutate(installation = mdy(installation))
1504409254526:station4 <- station4 %>% na.omit %>% arrange(station_id)
1504409254992:station3 <- station3 %>% arrange(station_id)
1504409266353:s1 <- rbind(station1, station2, station3, station4) %>%
1504409266354:arrange(station_id) %>% unique(-source)
1504409274482:?unique
1504409288286:s1 <- rbind(station1, station2, station3, station4) %>%
1504409288286:arrange(station_id) %>% unique(-c(source))
1504409297193:s1 <- rbind(station1, station2, station3, station4) %>%
1504409297194:arrange(station_id) %>% unique(-c("source"))
1504409305011:s1 <- rbind(station1, station2, station3, station4) %>%
1504409305011:arrange(station_id) %>% unique()
1504409316862:View(s1)
1504409561487:s1 <- s1 %>% unique(station_id, name, lat, long, dockcount, landmark, installation)
1504409578487:s1 <- s1 %>% unique()
1504409601747:duplicate(s1)
1504409606570:duplicated(s)
1504409608972:duplicated(s1)
1504409619545:duplicated(s1[,_1])
1504409628190:duplicated(s1[,-1])
1504409651333:s1 %>% select(-source) %>% duplicated()
1504409744357:a <- s1 %>% select(-source) %>% duplicated()
1504409749683:s1[a,]
1504409756044:length(a)
1504409766562:s1[a,] %>% View
1504409775055:s1[!a,] %>% View
1504415387960:s1 <- rbind(station1, station2, station3, station4) %>%
1504415387982:arrange(station_id) %>% unique()
1504415388463:a <- s1 %>% select(-source) %>% duplicated()
1504415388855:s1 <- s1[!a,]
1504415398755:s1 <- rbind(station1, station2, station3, station4) %>%
1504415398757:arrange(station_id) %>% unique()
1504415400555:a <- s1 %>% select(-source) %>% duplicated()
1504415401196:s1 <- s1[!a,]
1504415482493:db_write_table(con, "station", s1, overwrite = T)
1504415496343:s1
1504415503607:s1 %>% glimpse()
1504415528859:dbWriteTable(con, "station", s1, overwrite = T)
1504415550380:station <- tbl(con, "station")
1504415553143:station
1504415564090:station %>% glimpse()
1504491794175:?rnorm
1505158218590:means <- vector("double", ncol(mtcars))
1505158262482:means[[i]] <- mean(mtcars[[i]], na.rm = T)
1505158284371:for(i in seq_along(mtcars)) {
1505158284372:means[[i]] <- mean(mtcars[[i]], na.rm = T)
1505158284373:}
1505158290349:means
1505158304350:means[1]
1505158308338:means[[1]]
1505158313041:class(means)
1505158339746:mtcars[[1]]
1505158344775:mtcars[[2]]
1505158365833:seq_along(mtcars)
1505158373303:c(1:11)
1505158428918:seq_len(mtcars)
1505158835360:?Map
1505158845709:?map_dbl
1505158850145:??map_db;
1505158917711:func <- list(mean, median, sd)
1505158927962:funs <- list(mean, median, sd)
1505158940729:funs
1505158951419:funs[[1]]
1505158958801:funs[1]
1505158965498:funs[[1]]
1505158967616:funs[[[1]]]
1505158996109:funs %>%
1505158996112:map(~ mtcars %>% map_dpl(.x))
1505159004299:library(tidyverse)
1505159008522:funs %>%
1505159008523:map(~ mtcars %>% map_dpl(.x))
1505159018194:funs %>%
1505159018195:map(~ mtcars %>% map_dbl(.x))
1505164577598:gapminder
1505164584909:library(gapminder)
1505164591673:install.packages("gapminder")
1505164599385:library(gapminder)
1505164602246:gapminder
1505690207572:PLE_path <- file.path("Performance_Lawn_Equipment_Database.xlsx")
1505690216337:getwd()
1505690262385:library(readxl)
1505690263392:library(tidyverse)
1505690264624:library(nortest)
1505690274570:excel_sheets(PLE_path)
1505691488275:# Load R packages
1505691488277:knitr::opts_chunk$set(echo = TRUE)
1505691488279:library(readxl)
1505691488281:library(tidyverse)
1505691488284:library(nortest)
1505691488286:library(lubridate)
1505691488313:PLE_path <- file.path("Performance_Lawn_Equipment_Database.xlsx")
1505691488448:DefectsAfterDelivery <- read_excel(PLE_path, sheet = "Defects After Delivery", skip = 2)
1505691499385:DefectsAfterDelivery
1505691522188:DefectsAfterDelivery <- read_excel(PLE_path, sheet = "Defects After Delivery", skip = 3)
1505691525266:DefectsAfterDelivery
1505691661726:d1 <- DefectsAfterDelivery %>%
1505691661729:select(`2010`, `2011`) %>%
1505691661730:gather()
1505691664001:d1
1505691674970:?gather
1505691745150:d1 <- DefectsAfterDelivery %>%
1505691745152:select(Month, `2010`, `2011`) %>%
1505691745153:filter(Month ! %in% c("November", "December")) %>%
1505691756362:d1 <- DefectsAfterDelivery %>%
1505691756363:select(Month, `2010`, `2011`) %>%
1505691756365:filter(Month !%in% c("November", "December")) %>%
1505691775783:d1 <- DefectsAfterDelivery %>%
1505691775785:select(Month, `2010`, `2011`) %>%
1505691775787:filter(!(Month %in% c("November", "December"))) %>%
1505691775788:gather()
1505691778661:d1
1505691802026:d1 <- DefectsAfterDelivery %>%
1505691802028:select(Month, `2010`, `2011`) %>%
1505691802029:filter(!(Month %in% c("November", "December"))) %>%
1505691802031:gather(key = Month)
1505691831215:d1 <- DefectsAfterDelivery %>%
1505691831217:select(Month, `2010`, `2011`) %>%
1505691831219:filter(!(Month %in% c("November", "December")))
1505691831379:d1 <- DefectsAfterDelivery %>%
1505691831382:select(Month, `2010`, `2011`) %>%
1505691831385:filter(!(Month %in% c("November", "December")))
1505691833159:d1
1505691856547:library(dplyr)
1505691856549:# From http://stackoverflow.com/questions/1181060
1505691856549:stocks <- tibble(
1505691856550:time = as.Date('2009-01-01') + 0:9,
1505691856550:X = rnorm(10, 0, 1),
1505691856551:Y = rnorm(10, 0, 2),
1505691856551:Z = rnorm(10, 0, 4)
1505691856552:)
1505691856575:gather(stocks, stock, price, -time)
1505691856623:stocks %>% gather(stock, price, -time)
1505691865339:stocks
1505691904141:d1
1505691939941:d1 %>% gather(key = "month", -Month)
1505691953271:d1
1505692041807:d1 %>% gather(key = "year", value = "value", -Month)
1505692098045:d1 <- DefectsAfterDelivery %>%
1505692098047:select(Month, `2010`, `2011`) %>%
1505692098049:filter(!(Month %in% c("November", "December"))) %>%
1505692098050:gather(year, value, -Month)
1505692100497:d1
1505692171621:d1 <- DefectsAfterDelivery %>%
1505692171623:select(Month, `2010`, `2011`) %>%
1505692171625:filter(!(Month %in% c("November", "December"))) %>%
1505692171627:gather(year, value, -Month) %>%
1505692171629:select(-year)
1505692173076:d1
1505692195685:lm(data = d1, Month ~ value)
1505692199894:?lm
1505692221155:lm(value ~ Month, d1)
1505692273322:lmfit <- lm(value ~ Month, d1)
1505692278838:plot(lmfit)
1505692351204:month()
1505692356132:month("May")
1505692358555:?month
1505692378939:month(md(080101))
1505692382441:month(ymd(080101))
1505692408427:month(ymd(080101), label = TRUE)
1505692414644:month(ymd(080101), label = TRUE, abbr = FALSE)
1505692420083:month(ymd(080101) + months(0:11), label = TRUE)
1505692477498:month.abb
1505692482732:month.name
1505692497225:match(month.name)
1505692515150:?match
1505692526810:match(d1$Month, month.name)
1505692560583:d1 <- DefectsAfterDelivery %>%
1505692560584:select(Month, `2010`, `2011`) %>%
1505692560586:filter(!(Month %in% c("November", "December"))) %>%
1505692560587:gather(year, value, -Month) %>%
1505692560589:select(-year) %>%
1505692560591:mutate(Month = match(Month, month.name))
1505692562799:d1
1505692567590:lmfit <- lm(value ~ Month, d1)
1505692569365:plot(lmfit)
1505692604706:plot(d1$Month, d1$value)
1505693168688:xyplot(resid(defects.old.rate.mod) ~ fitted(defects.old.rate.mod), xlab="Fitted Values",
1505693168692:ylab="Residuals",
1505693168693:main="Residual Diagnostic Plot",
1505693168695:panel=function(x, y, ...) {
1505693168698:panel.grid(h=-1, v=-1) panel.abline(h = 0) panel.xyplot(x, y, ...)
1505693182049:library(lattice)
1505693184905:xyplot(resid(defects.old.rate.mod) ~ fitted(defects.old.rate.mod), xlab="Fitted Values",
1505693184907:ylab="Residuals",
1505693184908:main="Residual Diagnostic Plot",
1505693184910:panel=function(x, y, ...) {
1505693184911:panel.grid(h=-1, v=-1) panel.abline(h = 0) panel.xyplot(x, y, ...)
1505693260102:d1[,1] <- c(1:22)
1505693267368:d1[,1] <- c(1:20)
1505693296530:lmfit <- lm(value ~ Month, d1)
1505693297302:plot(lmfit)
1505693329515:d1 <- DefectsAfterDelivery %>%
1505693329516:select(Month, `2010`, `2011`)
1505693330961:d1
1505693389335:d1 <- DefectsAfterDelivery %>%
1505693389337:select(Month, `2010`, `2011`) %>%
1505693389339:gather(year, value, -Month) %>%
1505693389340:filter(-1:2)
1505693391807:d
1505693393689:d1
1505693400126:d1 <- DefectsAfterDelivery %>%
1505693400128:select(Month, `2010`, `2011`) %>%
1505693400131:gather(year, value, -Month)
1505693401444:d1
1505693467709:d1 <- DefectsAfterDelivery %>%
1505693467711:select(Month, `2010`, `2011`) %>%
1505693467713:gather(year, value, -Month) %>%
1505693467714:select(value)
1505693469171:d1
1505693495759:?slice
1505693505714:slice(mtcars, 1L)
1505693510889:mtcars
1505693521149:slice(mtcars, -1:2)
1505693525040:slice(mtcars, -1)
1505693535939:slice(mtcars, -2)
1505693539662:slice(mtcars, -2,_1)
1505693543149:slice(mtcars, -2,-1)
1505693558169:slice(mtcars, 5:n())
1505693572973:as_tibble(mtacrs)
1505693577847:as_tibble(mtcars)
1505693617334:d1 <- DefectsAfterDelivery %>%
1505693617337:select(Month, `2010`, `2011`) %>%
1505693617339:gather(year, value, -Month) %>%
1505693617341:select(value) %>%
1505693617342:slice(seq_along())
1505693624938:d1 <- DefectsAfterDelivery %>%
1505693624940:select(Month, `2010`, `2011`) %>%
1505693624941:gather(year, value, -Month) %>%
1505693624943:select(value) %>%
1505693624944:slice(1:20)
1505693626472:d1
1505693656710:d1 <- DefectsAfterDelivery %>%
1505693656712:select(Month, `2010`, `2011`) %>%
1505693656714:gather(year, value, -Month) %>%
1505693656716:select(value)
1505693658000:d1
1505693666672:d1[20:24]
1505693669858:d1[20:24,]
1505693704844:d1 <- DefectsAfterDelivery %>%
1505693704846:select(Month, `2010`, `2011`) %>%
1505693704847:gather(year, value, -Month) %>%
1505693704850:select(value) %>%
1505693704851:slice(1:22)
1505693707214:d1
1505693731635:d1[22,1]
1505693736280:lmfit <- lm(value ~ Month, d1)
1505693762159:d1 <- DefectsAfterDelivery %>%
1505693762160:select(Month, `2010`, `2011`) %>%
1505693762162:gather(year, value, -Month) %>%
1505693762163:select(value) %>%
1505693762165:slice(1:22) %>%
1505693762168:mutate(month = c(1:22))
1505693764003:d1
1505693776356:lmfit <- lm(value ~ month, d1)
1505693778498:lmfit
1505693781300:plot(lmfit)
1505693805112:resid(lmfit)
1505693816886:xyplot(resid(lmfit) ~ fitted(lmfit), xlab="Fitted Values",
1505693816888:ylab="Residuals",
1505693816890:main="Residual Diagnostic Plot",
1505693816891:panel=function(x, y, ...) {
1505693816892:panel.grid(h=-1, v=-1) panel.abline(h = 0) panel.xyplot(x, y, ...)
1505693845403:xyplot(resid(defects.old.rate.mod) ~ fitted(defects.old.rate.mod), xlab="Fitted Values",
1505693845413:ylab="Residuals",
1505693845414:main="Residual Diagnostic Plot",
1505693845414:panel=function(x, y, ...) {
1505693845415:panel.grid(h=-1, v=-1) panel.abline(h = 0) panel.xyplot(x, y, ...)
1505693845415:} )
1505693854313:xyplot(resid(lmfit) ~ fitted(lmfit), xlab="Fitted Values",
1505693854315:ylab="Residuals",
1505693854315:main="Residual Diagnostic Plot",
1505693854316:panel=function(x, y, ...) {
1505693854317:panel.grid(h=-1, v=-1) panel.abline(h = 0) panel.xyplot(x, y, ...)
1505693854318:} )
1505693861737:xyplot(
1505693861738:resid(lmfit) ~ fitted(lmfit),
1505693861739:xlab = "Fitted Values",
1505693861740:ylab = "Residuals",
1505693861740:main = "Residual Diagnostic Plot",
1505693861741:panel = function(x, y, ...) {
1505693861741:panel.grid(h = -1, v = -1) panel.abline(h = 0) panel.xyplot(x, y, ...)
1505693861742:}
1505693861742:)
1505693880370:resid(lmfit)
1505693883276:fitted(lmfit)
1505693905384:xyplot(
1505693905385:resid(lmfit) ~ fitted(lmfit),
1505693905385:xlab = "Fitted Values",
1505693905386:ylab = "Residuals",
1505693905386:main = "Residual Diagnostic Plot",
1505693905386:)
1505693932548:library(lattice)
1505693934361:panel.grid(h = -1, v = -1) panel.abline(h = 0) panel.xyplot(x, y, ...)
1505693946783:panel.xyplot(x, y, ...)
1505693954199:xyplot(
1505693954199:resid(lmfit) ~ fitted(lmfit),
1505693954200:xlab = "Fitted Values",
1505693954200:ylab = "Residuals",
1505693954201:main = "Residual Diagnostic Plot",
1505693954201:panel = function(x, y, ...) {
1505693954202:panel.grid(h = -1, v = -1)
1505693954202:panel.abline(h = 0)
1505693954203:panel.xyplot(x, y, ...)
1505693954203:}
1505693954203:)
1505694132468:plot(lmfit)
1505694159888:plot(month, value, data = d1)
1505694162658:d1
1505694180320:plot(d1$month, d1$value)
1505694324976:DefectsAfterDelivery %>%
1505694324979:select(Month, `2010`, `2011`) %>%
1505694324982:gather(year, value, -Month)
1505694334014:xyplot(
1505694334015:resid(lmfit) ~ fitted(lmfit),
1505694334015:xlab = "Fitted Values",
1505694334016:ylab = "Residuals",
1505694334016:main = "Residual Diagnostic Plot",
1505694334017:panel = function(x, y, ...) {
1505694334017:panel.grid(h = -1, v = -1)
1505694334019:panel.abline(h = 0)
1505694334020:panel.xyplot(x, y, ...)
1505694334021:}
1505694334023:)
1505694401550:?seperate
1505694407066:?separate
1505694424690:unite_(mtcars, "vs_am", c("vs","am"))
1505694485012:DefectsAfterDelivery %>%
1505694485015:select(Month, `2010`, `2011`) %>%
1505694485016:gather(year, value, -Month) %>%
1505694485017:mutate(Month = match(Month, month.name)) %>%
1505694485019:unite(time, Month, year)
1505694529934:ymd("2010_01")
1505694544677:ym("2010_01")
1505694548180:?ymd
1505694675505:?as.Date
1505694700861:as.Date("1_2010", format  = "%m_%Y")
1505694711142:as.Date("1_2010", format  = "%m%Y")
1505694719669:?unite
1505694741370:as.Date("1-2010", format  = "%m-%Y")
1505694751363:?as.Date
1505694774498:dates <- "2004-02-06"
1505694774500:format(as.Date(dates), "%Y-%m")
1505694806743:format(as.Dates("2010-1"), "%Y-%m")
1505694816141:format(as.Date("2010-1"), "%Y-%m")
1505694823195:format(as.Date("2010-01"), "%Y-%m")
1505694874925:library(zoo)
1505694884538:?as.Date
1505694898400:yearmon("2010-1")
1505694922865:function
1505694928988:as.yearmon("2007-12")
1505694932908:as.yearmon("2007-1")
1505694967344:d1 <- DefectsAfterDelivery %>%
1505694967346:select(Month, `2010`, `2011`) %>%
1505694967347:gather(year, value, -Month) %>%
1505694967348:mutate(Month = match(Month, month.name)) %>%
1505694967350:unite(time, year, Month, sep = "-") %>%
1505694967351:mutate(time = as.yearmon(time)) %>%
1505694967353:slice(1:22)
1505694969203:d1
1505694975304:plot(lmfit)
1505694983223:lm
1505694986472:lmfit
1505695000593:xyplot(
1505695000595:resid(lmfit) ~ fitted(lmfit),
1505695000597:xlab = "Fitted Values",
1505695000598:ylab = "Residuals",
1505695000599:main = "Residual Diagnostic Plot",
1505695000601:panel = function(x, y, ...) {
1505695000603:panel.grid(h = -1, v = -1)
1505695000606:panel.abline(h = 0)
1505695000608:panel.xyplot(x, y, ...)
1505695000609:}
1505695000611:)
1505695018593:plot(time, value, data = d1)
1505695021397:d
1505695023196:d1
1505695038077:qplot(data = d1, time, value)
1505695151449:anova(lmfit)
1505695179885:countByRegion <- table(CustomerSurvey2014$Region, CustomerSurvey2014$Quality)
1505695201997:CustomerSurvey2014 <- read_csv("CustomerSurvey2014.csv")
1505695202541:countByRegion <- table(CustomerSurvey2014$Region, CustomerSurvey2014$Quality)
1505695204439:Data <-
1505695204441:CustomerSurvey2014 %>%
1505695204442:gather(-Region, key = attribute, value = rating) %>%
1505695204443:select(-Region)
1505695208582:Data
1505695212694:fml <- aov(rating ~ attribute, data = Data)
1505695215623:fml
1505695229107:?aov
1505695250320:lmfit
1505695276232:plot(d1$time, d1$value)
1505695286242:?plot
1505695334345:plot(d1$time, d1$value)
1505695353461:abline(lmfit$fitted.values)
1505695360056:?line
1505695368631:plot(d1$time, d1$value)
1505695370304:abline(lmfit$fitted.values)
1505695379223:lmfit$fitted.values
1505695385822:plot(d1$time, d1$value)
1505695410725:d1 <- DefectsAfterDelivery %>%
1505695410726:select(Month, `2010`, `2011`) %>%
1505695410728:gather(year, value, -Month) %>%
1505695410729:mutate(Month = match(Month, month.name)) %>%
1505695410731:unite(time, year, Month, sep = "-") %>%
1505695410732:mutate(time = as.yearmon(time)) %>%
1505695410735:slice(1:22) %>%
1505695410736:mutate(time = c(1:22))
1505695411762:lmfit <- lm(value ~ month, d1)
1505695418933:d1
1505695431547:lmfit <- lm(value ~ time, d1)
1505695432223:plot(d1$time, d1$value)
1505695433138:abline(lmfit$fitted.values)
1505695453765:line(lmfit$fitted.values)
1505695455862:plot(d1$time, d1$value)
1505695456315:line(lmfit$fitted.values)
1505695467695:anova(lmfit)
1505695481744:require(graphics)
1505695481746:plot(cars)
1505695481771:(z <- line(cars))
1505695481773:abline(coef(z))
1505695481774:## Tukey-Anscombe Plot :
1505695481774:plot(residuals(z) ~ fitted(z), main = deparse(z$call))
1505695514462:plot(d1$time, d1$value)
1505695517695:abline(coef(line(lmfit$fitted.values))
1505695520550:)
1505695524479:plot(d1$time, d1$value)
1505695529324:lmfit <- lm(value ~ time, d1)
1505695534147:llmfit
1505695535516:lmfir
1505695537109:lmfit
1505695540223:plot(d1$time, d1$value)
1505695542178:abline(coef(line(lmfit$fitted.values)))
1505695560336:plot(cars)
1505695562595:cars
1505695575718:z <- line(d1)
1505695577465:z
1505695582433:plot(d1)
1505695589747:)
1505695599954:plot(d1)
1505695600288:z <- line(d1)
1505695600825:abline(coef(z))
1505695614235:plot(d1)
1505695614878:z <- line(d1)
1505695618210:z
1505695625120:abline(coef(z))
1505695635429:library(graphics)
1505695637887:abline
1505695642907:abline(coef(z))
1505695650658:?abline
1505695666330:coef(z)
1505695672622:abline(coef(z))
1505695683672:plot(d1)
1505695690367:z <- line(d1)
1505695691657:z
1505695693049:abline(coef(z))
1505695705068:plot(c(-2,3), c(-1,5), type = "n", xlab = "x", ylab = "y", asp = 1)
1505695709926:abline(h = 0, v = 0, col = "gray60")
1505695721492:plot(d1)
1505695727851:abline(coef(z))
1505695733601:plot(d1)
1505695735388:z <- line(d1)
1505695736151:z
1505695736919:abline(coef(z))
1505695752212:(z <- line(d1))
1505695754310:plot(d1)
1505695754757:(z <- line(d1))
1505695755247:abline(coef(z))
1505695764468:plot(d1)
1505695777896:lmfit$coefficients
1505695786497:abline(lmfit$coefficients)
1505695800654:plot(d1)
1505695801223:abline(lmfit$coefficients)
1505695807354:plot(d1)
1505695808572:abline(lmfit$coefficients)
1505695983945:panel.xyplot(x, y, ...)
1505695989832:xyplot(
1505695989834:resid(lmfit) ~ fitted(lmfit),
1505695989835:xlab = "Fitted Values",
1505695989837:ylab = "Residuals",
1505695989838:main = "Residual Diagnostic Plot",
1505695989840:panel = function(x, y, ...) {
1505695989841:panel.grid(h = -1, v = -1)
1505695989843:panel.abline(h = 0)
1505695989845:panel.xyplot(x, y, ...)
1505695989848:}
1505695989849:)
1505696099606:plot( )
1505696103254:plot(d1)
1505696426981:ggplot(d1)
1505696454922:ggplot(d1, aes(time, value))+ geom_point()
1505696470910:ggplot(d1, aes(time, value))+ geom_point()+geom_abline()
1505696483984:d1 <- DefectsAfterDelivery %>%
1505696483985:select(Month, `2010`, `2011`) %>%
1505696483987:gather(year, value, -Month) %>%
1505696483988:mutate(Month = match(Month, month.name)) %>%
1505696483989:unite(time, year, Month, sep = "-") %>%
1505696483991:mutate(time = as.yearmon(time)) %>%
1505696483993:slice(1:22)
1505696590942:ggplot(d1, aes(time, value)) +
1505696590944:geom_point() +
1505696590945:geom_smooth(method = "lm", formula = value ~ time)
1505696598121:d1
1505696616776:yearmon()
1505696624152:d1
1505696635236:d1$time[1]
1505696640313:a = d1$time[1]
1505696645376:ymd(a)
1505696655046:as.Date(a)
1505696682086:as.Date(a) %>% class
1505696703557:d1 <- DefectsAfterDelivery %>%
1505696703559:select(Month, `2010`, `2011`) %>%
1505696703560:gather(year, value, -Month) %>%
1505696703561:mutate(Month = match(Month, month.name)) %>%
1505696703563:unite(time, year, Month, sep = "-") %>%
1505696703565:mutate(time = as.yearmon(time)) %>%
1505696703567:mutate(time = as.Date(time)) %>%
1505696703568:slice(1:22) %>%
1505696703570:mutate(time = c(1:22))
1505696705166:d1
1505696712477:d1 <- DefectsAfterDelivery %>%
1505696712479:select(Month, `2010`, `2011`) %>%
1505696712482:gather(year, value, -Month) %>%
1505696712484:mutate(Month = match(Month, month.name)) %>%
1505696712485:unite(time, year, Month, sep = "-") %>%
1505696712487:mutate(time = as.yearmon(time)) %>%
1505696712488:mutate(time = as.Date(time)) %>%
1505696712490:slice(1:22)
1505696714152:d1
1505696718212:lmfit <- lm(value ~ time, d1)
1505696719968:plot(d1)
1505696727556:ggplot(d1, aes(time, value)) +
1505696727558:geom_point() +
1505696727560:geom_smooth(method = "lm", formula = value ~ time)
1505696778325:)
1505696781114:ggplot(d1, aes(time, value)) +
1505696781115:geom_point() +
1505696781116:geom_smooth(method = "lm")
1505696790052:ggplot(d1, aes(time, value)) +
1505696790053:geom_point() +
1505696790054:geom_smooth(method = "lm", se = False)
1505696792739:ggplot(d1, aes(time, value)) +
1505696792741:geom_point() +
1505696792742:geom_smooth(method = "lm", se = F)
1505697043957:DefectsAfterDelivery <- read_excel(PLE_path, sheet = "Defects After Delivery", skip = 3)
1505697048687:DefectsAfterDelivery
1505697128750:d2 <- DefectsAfterDelivery %>%
1505697128752:select(Month, `2011`, `2012`, `2013`, `2014`) %>%
1505697128753:gather(year, value, -Month) %>%
1505697128754:mutate(Month = match(Month, month.name)) %>%
1505697128757:unite(time, year, Month, sep = "-") %>%
1505697128758:mutate(time = as.yearmon(time)) %>%
1505697128760:mutate(time = as.Date(time))
1505697131259:d2
1505697157376:ggplot(d2, aes(time, value)) +
1505697157377:geom_point()
1505697237035:d2 <- DefectsAfterDelivery %>%
1505697237038:select(Month, `2011`, `2012`, `2013`, `2014`) %>%
1505697237039:gather(year, value, -Month) %>%
1505697237041:mutate(Month = match(Month, month.name)) %>%
1505697237042:unite(time, year, Month, sep = "-") %>%
1505697237044:mutate(time = as.yearmon(time)) %>%
1505697237046:mutate(time = as.Date(time)) %>%
1505697237048:filter(time >= 2011-11-01)
1505697238899:d2
1505697252860:filter(time >= "2011-11-01')
1505697263523:d2 <- DefectsAfterDelivery %>%
1505697263525:select(Month, `2011`, `2012`, `2013`, `2014`) %>%
1505697263526:gather(year, value, -Month) %>%
1505697263528:mutate(Month = match(Month, month.name)) %>%
1505697263529:unite(time, year, Month, sep = "-") %>%
1505697263530:mutate(time = as.yearmon(time)) %>%
1505697263532:mutate(time = as.Date(time)) %>%
1505697263534:filter(time >= "2011-11-01")
1505697265263:
1505697267486:d2
1505697271106:ggplot(d2, aes(time, value)) +
1505697271107:geom_point()
1505697330917:summary(lmfit)
1505697343141:lmfit1 <- lm(value ~ time, d1)
1505697344317:summary(lmfit1)
1505697348889:ggplot(d1, aes(time, value)) +
1505697348890:geom_point() +
1505697348891:geom_smooth(method = "lm", se = F)
1505697366521:lmfit2 <- lm(d2)
1505697369235:lmfit2
1505697377926:sumamry(lmfit2)
1505697383059:summary(lmfit2)
1505697385577:lmfit2 <- lm(d2)
1505697386263:summary(lmfit2)
1505697397851:lmfit2
1505697410325:summary(lmfit2)
1505697428438:d2$time %>% as.numeric()
1505697458731:d1 <- DefectsAfterDelivery %>%
1505697458734:select(Month, `2010`, `2011`) %>%
1505697458735:gather(year, value, -Month) %>%
1505697458737:mutate(Month = match(Month, month.name)) %>%
1505697458738:unite(time, year, Month, sep = "-") %>%
1505697458740:mutate(time = as.yearmon(time)) %>%
1505697458742:mutate(time = as.Date(time)) %>%
1505697458746:slice(1:22) %>%
1505697458748:mutate(time = c(1:22))
1505697459465:lmfit1 <- lm(value ~ time, d1)
1505697460317:summary(lmfit1)
1505697461007:ggplot(d1, aes(time, value)) +
1505697461009:geom_point() +
1505697461010:geom_smooth(method = "lm", se = F)
1505697491855:?seq_along
1505697521318:seq_along(mtcars)
1505697526357:mtcars
1505697543338:d2 <- DefectsAfterDelivery %>%
1505697543340:select(Month, `2011`, `2012`, `2013`, `2014`) %>%
1505697543341:gather(year, value, -Month) %>%
1505697543342:mutate(Month = match(Month, month.name)) %>%
1505697543345:unite(time, year, Month, sep = "-") %>%
1505697543347:mutate(time = as.yearmon(time)) %>%
1505697543348:mutate(time = as.Date(time)) %>%
1505697543350:filter(time >= "2011-11-01") %>%
1505697543353:mutate(time = seq_along(nrow(d2)))
1505697545472:d2
1505697555939:seq(nrow(d2))
1505697568594:d2 <- DefectsAfterDelivery %>%
1505697568595:select(Month, `2011`, `2012`, `2013`, `2014`) %>%
1505697568597:gather(year, value, -Month) %>%
1505697568598:mutate(Month = match(Month, month.name)) %>%
1505697568600:unite(time, year, Month, sep = "-") %>%
1505697568601:mutate(time = as.yearmon(time)) %>%
1505697568602:mutate(time = as.Date(time)) %>%
1505697568604:filter(time >= "2011-11-01") %>%
1505697568606:mutate(time = seq(nrow(d2)))
1505697570137:d2
1505697574823:lmfit2 <- lm(d2)
1505697575379:summary(lmfit2)
1505697575974:ggplot(d2, aes(time, value)) +
1505697575975:geom_point()
1505697633995:lmfit2 <- lm(d2)
1505697634450:summary(lmfit2)
1505697656132:ggplot(d2, aes(time, value)) +
1505697656134:geom_point() +
1505697656135:geom_smooth(method = "lm", se = F)
1505697777574:summary(lmfit1)
1505697945563:xyplot(
1505697945565:resid(lmfit2) ~ fitted(lmfit2),
1505697945567:xlab = "Fitted Values",
1505697945568:ylab = "Residuals",
1505697945569:main = "Residual Diagnostic Plot",
1505697945571:panel = function(x, y, ...) {
1505697945573:panel.grid(h = -1, v = -1)
1505697945575:panel.abline(h = 0)
1505697945577:panel.xyplot(x, y, ...)
1505697945578:}
1505697945580:)
1505698152517:plot(lmfit2)
1505698163359:plot(lmfit2)[2]
1505698198927:qqnorm(lmfit2)
1505698207091:qqnorm(resid(lmfit2))
1505698223486:?qqline
1505698234683:qqline(redid(lmfit2))
1505698239601:qqline(resid(lmfit2))
1505698317135:qqnorm(resid(lmfit1))
1505698323170:qqnorm(lmfit2)
1505698581121:dwtest(lmfit2)
1505698585179:?dwtest
1505698588490:??dwtest
1505698607486:library(lmtest)
1505698611269:dwtest(lmfit2)
1505698930422:employee_retention <- read_excel(PLE_path, sheet = "Employee Retention", skip = 2)
1505698934636:employee_retention
1505698978754:employee_retention  <-
1505698978756:mutate(Gender = as.factor(Gender))
1505698981588:employee_retention <- read_excel(PLE_path, sheet = "Employee Retention", skip = 2)
1505698984800:employee_retention  <-
1505698984801:mutate(Gender = as.factor(Gender))
1505698998275:employee_retention  <-
1505698998277:employee_retention %>%
1505698998279:mutate(Gender = as.factor(Gender))
1505699002513:employee_retention
1505699026469:employee_retention %>% View
1505699043947:employee_retention  <-
1505699043949:employee_retention %>%
1505699043950:mutate(Gender = as.numeric(Gender))
1505699047640:employee_retention
1505699056252:employee_retention  <-
1505699056254:employee_retention %>%
1505699056255:mutate(Gender = as.integer(Gender))
1505699059106:employee_retention <- read_excel(PLE_path, sheet = "Employee Retention", skip = 2)
1505699059687:employee_retention  <-
1505699059689:employee_retention %>%
1505699059690:mutate(Gender = as.integer(Gender))
1505699163582:ggplot(employee_retention, aes(Gender, YearsPLE)) +
1505699163585:geom_bar()
1505699174503:?geom_boxplot
1505699180315:ggplot(employee_retention, aes(Gender, YearsPLE)) +
1505699180316:geom_boxplot()
1505699201523:p <- ggplot(mpg, aes(class, hwy))
1505699201525:p + geom_boxplot()
1505699221689:ggplot(employee_retention, aes(Gender, YearsPLE)) +
1505699221690:geom_boxplot()
1505699229666:employee_retention <- read_excel(PLE_path, sheet = "Employee Retention", skip = 2)
1505699230964:ggplot(employee_retention, aes(Gender, YearsPLE)) +
1505699230966:geom_boxplot()
1505699252629:employee_retention  <-
1505699252631:employee_retention %>%
1505699252633:mutate(Gender = as.factor(Gender),
1505699252635:`College Grad` = as.factor(`College Grad`),
1505699252637:Local = as.factor(Local))
1505699253188:ggplot(employee_retention, aes(Gender, YearsPLE)) +
1505699253189:geom_boxplot()
1505699386858:employee_retention %>%
1505699386860:group_by(Gender) %>%
1505699386862:summarise(mean = mean(YearsPLE))
1505699417368:employee_retention %>%
1505699417370:group_by(Gender) %>%
1505699417371:summarise(mean = mean(YearsPLE), sd = sd(YearsPLE))
1505700014473:cat_var <- employee_retention %>%
1505700014476:select(Gender, `College Grad`, Local)
1505700017514:cat_var
1505700083399:cat_var$Gender %>% as.numeric()
1505700092084:cat_var$`College Grad` %>% as.numeric()
1505700127396:cat_var$`College Grad` %>% levels %>% as.numeric()
1505700200437:cat_var <- employee_retention %>%
1505700200439:select(Gender, `College Grad`, Local) %>%
1505700200440:mutate(Gender = ifelse(Gender = "M", 1, 0))
1505700213486:cat_var <- employee_retention %>%
1505700213488:select(Gender, `College Grad`, Local) %>%
1505700213490:mutate(Gender = ifelse(Gender = "M"), 1, 0)
1505700216898:?ifelse
1505700223444:cat_var <- employee_retention %>%
1505700223445:select(Gender, `College Grad`, Local) %>%
1505700223447:mutate(Gender = ifelse(Gender = "M", 1, 0))
1505700229472:cat_var <- employee_retention %>%
1505700229473:select(Gender, `College Grad`, Local) %>%
1505700229475:mutate(Gender = ifelse(Gender == "M", 1, 0))
1505700232103:cat_var
1505700304526:cat_var <- employee_retention %>%
1505700304528:select(Gender, `College Grad`, Local) %>%
1505700304530:mutate(Gender = ifelse(Gender == "M", 1, 0),
1505700304531:`College Grad` = ifelse(`College Grad` == "Y", 1, 0),
1505700304532:Local = ifelse(Local == "Y", 1, 0))
1505700307616:cat_var
1505700450297:chisq.test(cat_var)
1505700462307:chisq.test(cat_var[,1:2])
1505700483814:chisq.test(cat_var$Gender, cat_var$`College Grad`)
1505700602646:cat_var <- employee_retention %>%
1505700602653:select(Gender, `College Grad`, Local) %>%
1505700602655:mutate(Gender = ifelse(Gender == "M", 1, 0),
1505700602657:`College Grad` = ifelse(`College Grad` == "Y", 1, 0),
1505700602658:Local = ifelse(Local == "Y", 1, 0))
1505700612505:?table
1505700628434:table(cat_var$Gender, cat_var$`College Grad`)
1505700638013:?chisq.test
1505700667739:t1 <- table(cat_var$Gender, cat_var$`College Grad`)
1505700673193:chisq.test(t1)
1505700717802:chisq.test(t1, correct = F)
1505700763449:t2 <- table(cat_var$Gender, cat_var$Local)
1505700773952:chisq.test(t2)
1505700792608:t3 <- table(cat_var$`College Grad`, cat_var$Local-)conduct some t test
1505700798896:t3 <- table(cat_var$`College Grad`, cat_var$Local-)
1505700805475:chisq.test(t3)
1505700808437:t2 <- table(cat_var$Gender, cat_var$Local)
1505700810419:chisq.test(t2)
1505700812214:t3 <- table(cat_var$`College Grad`, cat_var$Local-)
1505700817044:t3 <- table(cat_var$`College Grad`, cat_var$Local)
1505700817468:chisq.test(t3)
1505700997523:num_var <-
1505700997525:employee_retention %>%
1505700997527:select(YearsPLE, YrsEducation, `College GPA`, Age)
1505701000412:num_var
1505701215709:lmfit3 <- lm(data = num_var,
1505701215711:formula = YearsPLE ~ YrsEducation + `College GPA` + Age)
1505701219226:lmfit2
1505701221796:lmfit3
1505701249154:summary(lmfit3)
1505701325643:summary(lm(data = num_var, formula = `College GPA` ~ YrsEducation))
1505701373375:summary(lm(data = num_var, formula = Age ~ YrsEducation))
1505701493418:ggplot(num_var, aes(Age, YrsEducation)) + geom_point()
1505701616563:xyplot(
1505701616565:resid(lmfit3) ~ fitted(lmfit3),
1505701616567:xlab = "Fitted Values",
1505701616569:ylab = "Residuals",
1505701616571:main = "Residual Diagnostic Plot",
1505701616572:panel = function(x, y, ...) {
1505701616574:panel.grid(h = -1, v = -1)
1505701616576:panel.abline(h = 0)
1505701616577:panel.xyplot(x, y, ...)
1505701616579:}
1505701616580:)
1505701622841:xyplot(
1505701622843:resid(lmfit3) ~ fitted(lmfit3),
1505701622844:xlab = "Fitted Values",
1505701622846:ylab = "Residuals",
1505701622847:main = "Residual Diagnostic Plot",
1505701622849:panel = function(x, y, ...) {
1505701622851:panel.grid(h = -1, v = -1)
1505701622853:panel.abline(h = 0)
1505701622855:panel.xyplot(x, y, ...)
1505701622856:}
1505701622858:)
1505701776480:lmfit4 <- lm(data = num_var, formula = YearsPLE ~ Age)
1505701777952:summary(lmfit4)
1505701869599:egines <- read_excel(PLE_path, sheet = "Egines", skip = 2)
1505701876848:excel_sheets(PLE_path)
1505701884519:engines <- read_excel(PLE_path, sheet = "Engines", skip = 2)
1505701886789:engines
1505701916933:engines <-
1505701916935:engines %>%
1505701916937:rename(Time = `Production Time (min)`)
1505701920224:engines
1505701958630:ggplot(engines, aes(Sample, Time)) +
1505701958632:geom_point()
1505702022244:# last 30 data points
1505702022246:ggplot(engines[20:50,], aes(Sample, Time)) +
1505702022247:geom_point()
1505702093656:m <- lm(data = engines[20:50,], formula = log(Time) ~ Sample)
1505702104109:summar(m)
1505702110487:summary(m)
1505702218486:xyplot(
1505702218489:resid(m) ~ fitted(m),
1505702218491:xlab = "Fitted Values",
1505702218492:ylab = "Residuals",
1505702218494:main = "Residual Diagnostic Plot",
1505702218497:panel = function(x, y, ...) {
1505702218500:panel.grid(h = -1, v = -1)
1505702218502:panel.abline(h = 0)
1505702218504:panel.xyplot(x, y, ...)
1505702218506:}
1505702218508:)
1505702805685:m <- lm(data = engines, formula = Time ~ Sample + I(Sample^2))
1505702812508:summary(m)
1505702832108:plot(m, `)
1505702835156:plot(m, 1)
1505702959386:m2 <- lm(data = engines, formula = Time ~ Sample + log(Sample))
1505702965633:summary(sample)
1505702968859:summary(m)
1505702977515:plot(m2, 1)
1505702985553:summary(m2)
1505703020189:engines
1505703057683:engines %>% View
1505703256499:MowerUnitSales <- read_excel(PLE_path, sheet = "Mower Unit Sales", skip = 2)
1505703262896:MowerUnitSales
1505703274578:colnames(MowerUnitSales) <- c("Date", "NorthA", "SouthA", "Europe", "Pacific", "China", "World")
1505703283110:MowerUnitSales
1505703412595:ggplot(MowerUnitSales, aes(Date, NorthA)) +
1505703412597:geom_line()
1505703428494:ggplot(MowerUnitSales, aes(Date, NorthA)) +
1505703428496:geom_line() +
1505703428498:geom_point()
1505703459734:ggplot(MowerUnitSales, aes(Date, NorthA)) +
1505703459737:geom_line() +
1505703459739:geom_point() +
1505703459740:ggtitle("Mower Sales by Region")
1505703503035:str(MowerUnitSales)
1505703508113:b <- ggplot(mtcars, aes(wt, mpg)) +
1505703508115:geom_point()
1505703523544:df <- data.frame(x1 = 2.62, x2 = 3.57, y1 = 21.0, y2 = 15.0)
1505703523550:b +
1505703523550:geom_curve(aes(x = x1, y = y1, xend = x2, yend = y2, colour = "curve"), data = df) +
1505703523551:geom_segment(aes(x = x1, y = y1, xend = x2, yend = y2, colour = "segment"), data = df)
1505703660398:ggplot(MowerUnitSales, aes(Date, NorthA)) +
1505703660401:geom_line("dashed") +
1505703660403:geom_point() +
1505703660404:ggtitle("Mower Sales by Region")
1505703668992:ggplot(MowerUnitSales, aes(Date, NorthA)) +
1505703668994:geom_line(linetype = "dashed") +
1505703668996:geom_point() +
1505703668997:ggtitle("Mower Sales by Region")
1505703681308:ggplot(MowerUnitSales, aes(Date, NorthA)) +
1505703681310:geom_line() +
1505703681312:geom_point() +
1505703681313:ggtitle("Mower Sales by Region")
1505703750745:mower
1505703753012:MowerUnitSales
1505703802442:MowerUnitSales %>%
1505703802444:gather(Region, Value, -Date)
1505703810996:MowerUnitSales %>%
1505703810997:gather(Region, Value, -Date)
1505703830644:mdata1 <-
1505703830646:MowerUnitSales %>%
1505703830647:gather(Region, Value, -Date)
1505703843121:mdata1
1505703869002:mdata1 <-
1505703869004:MowerUnitSales %>%
1505703869005:gather(Region, Sales, -Date)
1505703931367:ggplot(mdata1, aes(Date, Sales)) +
1505703931369:geom_point() +
1505703931371:geom_line() +
1505703931373:facet_grid(. ~ Region)
1505703958375:ggplot(mdata1, aes(Date, Sales)) +
1505703958377:geom_point() +
1505703958379:geom_line() +
1505703958380:facet_grid(Region ~ .)
1505703980983:par(new = T)
1505704016832:ggplot(mdata1, aes(Date, Sales)) +
1505704016834:geom_point() +
1505704016836:geom_line() +
1505704016838:facet_grid(Region ~ .)
1505704086544:mdata1 <-
1505704086547:MowerUnitSales %>%
1505704086549:gather(Region, Sales, -Date) %>%
1505704086550:filter(Region  %in% ("NorthA", "Europe", "World"))
1505704099194:mdata1 <-
1505704099196:MowerUnitSales %>%
1505704099197:gather(Region, Sales, -Date) %>%
1505704099199:filter(Region %in% c("NorthA", "Europe", "World"))
1505704121073:ggplot(mdata1, aes(Date, Sales), fill = Region) +
1505704121075:geom_point() +
1505704121077:geom_line()
1505704140496:ggplot(mdata1, aes(Date, Sales, fill = Region)) +
1505704140498:geom_point() +
1505704140499:geom_line()
1505704168231:ggplot(mdata1, aes(Date, Sales)) +
1505704168233:geom_point() +
1505704168235:geom_line(aes(fill = Region))
1505704189361:ggplot(mdata1, aes(Date, Sales)) +
1505704189363:geom_point() +
1505704189364:geom_line(aes(color = Region))
1505704236814:excel_sheets(PLE_path)
1505704454518:ggplot(MowerUnitSales, aes(Date, Pacific)) +
1505704454533:geom_line() +
1505704454535:geom_point() +
1505704454537:ggtitle("Mower Sales by Region")
1505704585122:ggplot(mdata1, aes(Date, Sales)) +
1505704585125:geom_point() +
1505704585127:geom_line(aes(color = Region))
1505704669073:ggplot(mdata1, aes(Date, Sales, color = Region)) +
1505704669076:geom_point() +
1505704669077:geom_line()
1505704822808:plot(MowerUnitSales$NorthA, type = "b", xlab = "", xaxt="n", ylab = "North America", main = "Mower Sales by Region")
1505705000123:demand <- ts(MowerUnitSales$NorthA, start = c(2010, 1), frequency = 12)
1505705006599:plot(demand)
1505705026124:hw <- HoltWinters(demand)
1505705037738:forecast <- predict(hw, n.ahead = 12, prediction.interval = T, level = 0.95)
1505705057512:forecast
1505705068255:plot(forcast)
1505705073557:plot(forecast)
1505705122662:plot(forecast$fit)
1505705137083:class(forecast)
1505705149542:forecast[fit,]
1505705156516:forecast[, fit]
1505705184936:forecast
1505705188592:forecast[1,]
1505705194888:forecast[,1]
1505705201637:forecast %>% nmes
1505705205105:forecast %>% names
1505705214958:plot(forecast[,1])
1505705295697:HoltWinters
1505705306408:plot(MowerUnitSales$NorthA, type = "b", xlab = "", xaxt="n", ylab = "North America", main = "Mower Sales by Region")
1505705313072:axis(1, at=c, labels=ticks, las=2)
1505705344464:ticks=c("Jan 2010", "Jun 2010", "Jan 2011", "Jun 2011", "Jan 2012", "Jun 2012", "Jan 2013", "Jun 2013", "Jan 20 14", "Jun 2014")
1505705346810:axis(1, at=c, labels=ticks, las=2)
1505705471515:hw
1505705472771:hw
1505705497809:plot(demand)
1505705507335:demand
1505705518390:forecast[,1]
1505705552454:demand1 <- rbind(demand, forecast)
1505705569944:demand1 <- rbind(demand, forecast[,1])
1505705577797:plot(demand1)
1505705586887:demand1
1505705596746:demand1 <- cbind(demand, forecast[,1])
1505705599918:demand
1505705602290:demand1
1505705610271:demand1 <- append(demand, forecast[,1])
1505705612575:demand1
1505705617806:join
1505705621941:?rbind
1505705634083:??rbind
1505705655997:class(forecast[,1])
1505705661137:forecsat
1505705663880:forecast
1505705673319:demand1 <- append(demand, t(forecast[,1]))
1505705676956:demand1
1505705687946:demand1 <- rbind(demand, t(forecast[,1]))
1505705693398:demand1
1505705700890:t(forecast[,1])
1505705721030:demand1 <- rbind(demand, as_tibble(t(forecast[,1])))
1505705723198:demand1
1505705734690:demand
1505705742315:forecast[,1]
1505705896928:excel_sheets(PLE_path)
1505705964315:UnitProductionCost <- read_excel(PLE_path, sheet = "Unit Production Cost",
1505705964318:skip = 2)
1505705975133:UnitProductionCosts <- read_excel(PLE_path, sheet = "Unit Production Costs",
1505705975135:skip = 2)
1505705981573:UnitProductionCosts
1505706062443:plot(hw, forecast)
1505706144499:d2 <- DefectsAfterDelivery %>%
1505706144502:select(Month, `2011`, `2012`, `2013`, `2014`) %>%
1505706144504:gather(year, value, -Month) %>%
1505706144506:mutate(Month = match(Month, month.name)) %>%
1505706144507:unite(time, year, Month, sep = "-") %>%
1505706144510:mutate(time = as.yearmon(time)) %>%
1505706144512:mutate(time = as.Date(time)) %>%
1505706144514:filter(time >= "2011-11-01") %>%
1505706144515:mutate(time = seq(nrow(d2)))
1505706172710:
1505706174088:d2
1505706211783:d2 <-
1505706211785:DefectsAfterDelivery %>%
1505706211787:select(Month, `2011`, `2012`, `2013`, `2014`) %>%
1505706211790:gather(year, value, -Month) %>%
1505706211792:mutate(Month = match(Month, month.name)) %>%
1505706211793:unite(time, year, Month, sep = "-") %>%
1505706211796:mutate(time = as.yearmon(time)) %>%
1505706211798:mutate(time = as.Date(time)) %>%
1505706211800:filter(time >= "2011-11-01") %>%
1505706211802:mutate(time = seq(nrow(d2)))
1505706220909:lmfit2 <- lm(d2)
1505706223491:d2
1505706228047:lmfit2
1505706363699:UnitProductionCosts
1505706372849:lmfit5 <- lm(data = UnitProductionCosts,
1505706372852:formula = Tractor ~ Month)
1505706382896:summary(lmfit5)
1505706416505:lmfit6 <- lm(data = UnitProductionCosts,
1505706416506:formula = Mower ~ Month)
1505706422034:summary(lmfit6)
1505706476269:ggplot(UnitProductionCosts, aes(Month, Tractor)) +
1505706476271:geom_point()
1505706509686:ggplot(UnitProductionCosts, aes(Month, Mower)) +
1505706509688:geom_point()
1505706568218:ggplot(UnitProductionCosts, aes(Month, Tractor)) +
1505706568220:geom_point() +
1505706568222:geom_smooth(method = "lm", se = f)
1505706571749:ggplot(UnitProductionCosts, aes(Month, Tractor)) +
1505706571750:geom_point() +
1505706571751:geom_smooth(method = "lm", se = F)
1505873986164:getwd()
1505873994863:dir()
1505874003024:dir(
1505874003025:"data/"
1505874003025:)
1505874046079:source('~/Documents/Harrisburg/500_52/Project/bay_area_bike_share/config/settings.R')
1505874062945:station <- read_csv("data/201608_station_data.csv")
1505874068878:station
1505874089655:station4 <-
1505874089657:read_csv("data/201608_station_data.csv") %>%
1505874089658:mutate(source = 4)
1505874106881:station4 <- station4 %>% mutate(installation = mdy(installation))
1505874108061:station4 <- station4 %>% na.omit %>% arrange(station_id)
1505874111489:station4
1505874124012:station %>% View
1505874181864:station <- station %>%
1505874181865:mutate(installation = mdy(installation)) %>%
1505874181866:na.omit
1505874187308:station %>% View
1505874211260:station <- station %>%
1505874211261:mutate(installation = mdy(installation)) %>%
1505874211261:na.omit %>%
1505874211262:arrange(station_id)
1505874216905:station %>% View
1505874229547:station <- read_csv("data/201608_station_data.csv")
1505874230372:station <- station %>%
1505874230373:mutate(installation = mdy(installation)) %>%
1505874230373:na.omit %>%
1505874230374:arrange(station_id)
1505874231547:station %>% View
1505874294857:trip <- read_csv("data/201608_trip_data.csv")
1505874299699:trip
1505874315571:trip %>% View
1505874393056:weather <- read_csv("data/201608_weather_data.csv")
1505874397543:weather
1505874403773:weather %>% View
1505874496594:trip <- read_csv("data/201608_trip_data.csv")
1505874500009:station %>% View
1505874627847:m <- leaflet() %>%
1505874627850:addTiles() %>%  # Add default OpenStreetMap map tiles
1505874627850:addMarkers(lng=174.768, lat=-36.852, popup="The birthplace of R")
1505874629059:m  # Print the map
1505874687410:station
1505874698211:m <- leaflet(station) %>%
1505874698212:addTiles() %>%  # Add default OpenStreetMap map tiles
1505874698212:addMarkers(lng=long, lat=lat, popup="The birthplace of R")
1505874706562:?addMarkers
1505874731260:m <- leaflet(station) %>%
1505874731261:addTiles() %>%  # Add default OpenStreetMap map tiles
1505874731262:addMarkers(lng = ~ long, lat = ~ lat, popup="The birthplace of R")
1505874732807:m  # Print the map
1505874804200:station1 <- station %>%
1505874804203:filter(landmark == "San Jose")
1505874804793:m <- leaflet(station) %>%
1505874804795:addTiles() %>%  # Add default OpenStreetMap map tiles
1505874804796:addMarkers(lng = ~ long, lat = ~ lat, popup="The birthplace of R")
1505874805299:m  # Print the map
1505874810133:m <- leaflet(station1) %>%
1505874810134:addTiles() %>%  # Add default OpenStreetMap map tiles
1505874810134:addMarkers(lng = ~ long, lat = ~ lat, popup="The birthplace of R")
1505874811813:m  # Print the map
1505875026179:p <- ggplot(trip) +
1505875026181:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat, size=num_trips, colour=num_trips, alpha=num_trips)) +
1505875026182:geom_point(data=stations, aes(x=long, y=lat), size=4) +
1505875026183:geom_text_repel(data=stations, aes(x=long, y=lat, label=name), size=4) +
1505875026184:theme_light(base_size=10) +
1505875026185:scale_colour_gradientn(colors=c("#dddddd", "#20beff"), limits=c(0, max(trips$num_trips)), name="Number of Trips") +
1505875026187:scale_alpha(limits=c(0, max(trips$num_trips)), guide=FALSE) +
1505875026188:scale_size(limits=c(0, max(trips$num_trips)), guide=FALSE) +
1505875026189:xlab("") +
1505875026189:ylab("") +
1505875026191:coord_fixed() +
1505875026192:theme(axis.line=element_blank(),
1505875026192:axis.text.x=element_blank(),
1505875026193:axis.text.y=element_blank(),
1505875026194:axis.ticks=element_blank(),
1505875026194:axis.title.x=element_blank(),
1505875026195:axis.title.y=element_blank(),
1505875026196:panel.grid=element_blank(),
1505875026197:panel.border=element_blank())
1505875102782:p <- ggplot(trip) +
1505875102783:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat, size=num_trip, colour=num_trip, alpha=num_trip)) +
1505875102783:geom_point(data=station, aes(x=long, y=lat), size=4) +
1505875102785:geom_text_repel(data=station, aes(x=long, y=lat, label=name), size=4) +
1505875102787:theme_light(base_size=10) +
1505875102788:scale_colour_gradientn(colors=c("#dddddd", "#20beff"), limits=c(0, max(trip$num_trip)), name="Number of trip") +
1505875102789:scale_alpha(limits=c(0, max(trip$num_trip)), guide=FALSE) +
1505875102789:scale_size(limits=c(0, max(trip$num_trip)), guide=FALSE) +
1505875102790:xlab("") +
1505875102791:ylab("") +
1505875102791:coord_fixed() +
1505875102792:theme(axis.line=element_blank(),
1505875102793:axis.text.x=element_blank(),
1505875102795:axis.text.y=element_blank(),
1505875102795:axis.ticks=element_blank(),
1505875102796:axis.title.x=element_blank(),
1505875102797:axis.title.y=element_blank(),
1505875102798:panel.grid=element_blank(),
1505875102798:panel.border=element_blank())
1505875120781:library(ggrepel)
1505875126579:install.packages("ggrepel")
1505875132174:library(ggrepel)
1505875134925:p <- ggplot(trip) +
1505875134927:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat, size=num_trip, colour=num_trip, alpha=num_trip)) +
1505875134927:geom_point(data=station, aes(x=long, y=lat), size=4) +
1505875134928:geom_text_repel(data=station, aes(x=long, y=lat, label=name), size=4) +
1505875134928:theme_light(base_size=10) +
1505875134929:scale_colour_gradientn(colors=c("#dddddd", "#20beff"), limits=c(0, max(trip$num_trip)), name="Number of trip") +
1505875134929:scale_alpha(limits=c(0, max(trip$num_trip)), guide=FALSE) +
1505875134930:scale_size(limits=c(0, max(trip$num_trip)), guide=FALSE) +
1505875134930:xlab("") +
1505875134931:ylab("") +
1505875134932:coord_fixed() +
1505875134932:theme(axis.line=element_blank(),
1505875134933:axis.text.x=element_blank(),
1505875134934:axis.text.y=element_blank(),
1505875134935:axis.ticks=element_blank(),
1505875134936:axis.title.x=element_blank(),
1505875134940:axis.title.y=element_blank(),
1505875134941:panel.grid=element_blank(),
1505875134943:panel.border=element_blank())
1505875138716:so I dont't want this leave the main area way to do
1505875141698:p
1505875163970:trip
1505875284806:?make.names
1505875311688:make.names(trip)
1505875487228:source('~/Documents/Harrisburg/500_52/Project/bay_area_bike_share/config/settings.R')
1505875491539:station <- read_csv("data/201608_station_data.csv")
1505875491595:station <- station %>%
1505875491596:mutate(installation = mdy(installation)) %>%
1505875491596:na.omit %>%
1505875491596:arrange(station_id)
1505875491903:station %>% View
1505875491909:trip <- read_csv("data/201608_trip_data.csv")
1505875493905:trip %>% View
1505875494187:weather <- read_csv("data/201608_weather_data.csv")
1505875494202:weather %>% View
1505875537437:station1 <- station %>%
1505875537437:filter(landmark == "San Jose")
1505875570889:trips
1505875572638:trip
1505875605928:trip %>% names
1505875633350:colnames(trip) <- c("id","duration","start_date","start_station_name","start_station_id","end_date","end_station_nanme","end_station_id","bike_id","subscription_type","zip_code")
1505875635482:trip
1505875667773:colnames(station) <- c("id","name","lat","long","dock_count","city","installation_date")
1505875671758:station1 <- station %>%
1505875671759:filter(landmark == "San Jose")
1505875675782:m <- leaflet(station1) %>%
1505875675783:addTiles() %>%  # Add default OpenStreetMap map tiles
1505875675784:addMarkers(lng = ~ long, lat = ~ lat, popup="The birthplace of R")
1505875676764:m  # Print the map
1505875681712:station
1505875694863:p <- ggplot(trip) +
1505875694864:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat, size=num_trip, colour=num_trip, alpha=num_trip)) +
1505875694865:geom_point(data=station, aes(x=long, y=lat), size=4) +
1505875694865:geom_text_repel(data=station, aes(x=long, y=lat, label=name), size=4) +
1505875694866:theme_light(base_size=10) +
1505875694866:scale_colour_gradientn(colors=c("#dddddd", "#20beff"), limits=c(0, max(trip$num_trip)), name="Number of trip") +
1505875694867:scale_alpha(limits=c(0, max(trip$num_trip)), guide=FALSE) +
1505875694867:scale_size(limits=c(0, max(trip$num_trip)), guide=FALSE) +
1505875694868:xlab("") +
1505875694869:ylab("") +
1505875694869:coord_fixed() +
1505875694870:theme(axis.line=element_blank(),
1505875694870:axis.text.x=element_blank(),
1505875694871:axis.text.y=element_blank(),
1505875694872:axis.ticks=element_blank(),
1505875694873:axis.title.x=element_blank(),
1505875694873:axis.title.y=element_blank(),
1505875694875:panel.grid=element_blank(),
1505875694876:panel.border=element_blank())
1505875697150:p
1505875701508:trip
1505875707700:names(trip)
1505875775085:trip %>% View
1505875863481:names(station)
1505875880825:?left_join
1505875982622:?merge
1505876003143:?left_join
1505876066785:trip <- trip %>%
1505876066788:left_join(station %>% select(id, lat, long), by = "id")
1505876073233:trip %>% View
1505876094239:station
1505876096179:trip
1505876192028:trip <- trip %>%
1505876192030:left_join(station %>% select(id, lat, long),
1505876192030:by = c("start_station_id" = "id"))
1505876195596:trip %>% View
1505876233978:station %>% select(id, lat, long)
1505876263920:trip <- trip %>%
1505876263921:semi_join(station %>% select(id, lat, long),
1505876263921:by = c("start_station_id" = "id"))
1505876268506:trip %>% View
1505876281362:trip
1505876289751:station
1505876436217:trip <- trip %>%
1505876436219:left_join(station %>% select(id, lat, long),
1505876436220:by = c("trip.start_station_id" = "station.id"))
1505876489495:trip <- trip %>%
1505876489497:left_join(station %>% select(id, lat, long),
1505876489497:by.x = "start_station_id", by.y = "id")
1505876492687:trip
1505876501292:trip <- read_csv("data/201608_trip_data.csv")
1505876502319:colnames(trip) <- c("id","duration","start_date","start_station_name","start_station_id","end_date","end_station_nanme","end_station_id","bike_id","subscription_type","zip_code")
1505876503617:trip <- trip %>%
1505876503618:left_join(station %>% select(id, lat, long),
1505876503620:by.x = "start_station_id", by.y = "id")
1505876505328:trip
1505876510883:trip %>% View
1505876545198:trip <- read_csv("data/201608_trip_data.csv")
1505876546339:colnames(trip) <- c("id","duration","start_date","start_station_name","start_station_id","end_date","end_station_nanme","end_station_id","bike_id","subscription_type","zip_code")
1505876547008:trip <- trip %>%
1505876547009:left_join(station %>% select(id, lat, long),
1505876547010:by = c("start_station_id" = "id"))
1505876548198:trip %>% View
1505876619700:trip <- trip %>%
1505876619701:rename(start_long = long, start_lat = lat)
1505876621554:trip
1505876635580:trip <- trip %>%
1505876635581:left_join(station %>% select(id, lat, long),
1505876635582:by = c("end_station_id" = "id"))
1505876637209:trip <- trip %>%
1505876637210:rename(start_long = long, start_lat = lat)
1505876641100:trip %>% View
1505876727419:trip <- read_csv("data/201608_trip_data.csv")
1505876728741:colnames(trip) <- c("id","duration","start_date","start_station_name","start_station_id","end_date","end_station_nanme","end_station_id","bike_id","subscription_type","zip_code")
1505876732239:trip <- trip %>%
1505876732241:left_join(station %>% select(id, lat, long),
1505876732242:by = c("start_station_id" = "id")) %>%
1505876732243:rename(start_long = long, start_lat = lat) %>%
1505876732244:left_join(station %>% select(id, lat, long),
1505876732244:by = c("end_station_id" = "id")) %>%
1505876732245:rename(end_long = long, end_lat = lat)
1505876736118:trip %>% View
1505876747239:p <- ggplot(trip) +
1505876747241:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat, size=num_trip, colour=num_trip, alpha=num_trip)) +
1505876747242:geom_point(data=station, aes(x=long, y=lat), size=4) +
1505876747244:geom_text_repel(data=station, aes(x=long, y=lat, label=name), size=4) +
1505876747244:theme_light(base_size=10) +
1505876747245:scale_colour_gradientn(colors=c("#dddddd", "#20beff"), limits=c(0, max(trip$num_trip)), name="Number of trip") +
1505876747245:scale_alpha(limits=c(0, max(trip$num_trip)), guide=FALSE) +
1505876747246:scale_size(limits=c(0, max(trip$num_trip)), guide=FALSE) +
1505876747246:xlab("") +
1505876747247:ylab("") +
1505876747248:coord_fixed() +
1505876747248:theme(axis.line=element_blank(),
1505876747249:axis.text.x=element_blank(),
1505876747250:axis.text.y=element_blank(),
1505876747250:axis.ticks=element_blank(),
1505876747252:axis.title.x=element_blank(),
1505876747253:axis.title.y=element_blank(),
1505876747254:panel.grid=element_blank(),
1505876747256:panel.border=element_blank())
1505876756830:trip %>% View
1505876890314:source('~/Documents/Harrisburg/500_52/Project/bay_area_bike_share/src/read_data.R', echo=TRUE)
1505876904022:station <- read_csv("data/201608_station_data.csv")
1505876904061:station <- station %>%
1505876904062:mutate(installation = mdy(installation)) %>%
1505876904063:na.omit %>%
1505876904063:arrange(station_id)
1505876904119:colnames(station) <- c("id","name","lat","long","dock_count","city","installation_date")
1505876904122:station %>% View
1505876904136:trip <- read_csv("data/201608_trip_data.csv")
1505876905665:colnames(trip) <- c("id","duration","start_date","start_station_name","start_station_id","end_date","end_station_nanme","end_station_id","bike_id","subscription_type","zip_code")
1505876912074:station1 <- station %>%
1505876912075:filter(landmark == "San Jose")
1505876916904:trip <- trip %>%
1505876916904:left_join(station %>% select(id, lat, long),
1505876916905:by = c("start_station_id" = "id")) %>%
1505876916906:rename(start_long = long, start_lat = lat) %>%
1505876916906:left_join(station %>% select(id, lat, long),
1505876916907:by = c("end_station_id" = "id")) %>%
1505876916907:rename(end_long = long, end_lat = lat)
1505876920760:trip %>%
1505876920761:group_by(start_station_id, end_station_id) %>%
1505876920761:tally
1505876935560:trip1 <- trip %>%
1505876935562:group_by(start_station_id, end_station_id) %>%
1505876935563:tally
1505876937282:p <- ggplot(trip1) +
1505876937283:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat, size=num_trip, colour=num_trip, alpha=num_trip)) +
1505876937284:geom_point(data=station, aes(x=long, y=lat), size=4) +
1505876937285:geom_text_repel(data=station, aes(x=long, y=lat, label=name), size=4) +
1505876937285:theme_light(base_size=10) +
1505876937286:scale_colour_gradientn(colors=c("#dddddd", "#20beff"), limits=c(0, max(trip$num_trip)), name="Number of trip") +
1505876937286:scale_alpha(limits=c(0, max(trip$num_trip)), guide=FALSE) +
1505876937287:scale_size(limits=c(0, max(trip$num_trip)), guide=FALSE) +
1505876937287:xlab("") +
1505876937288:ylab("") +
1505876937289:coord_fixed() +
1505876937289:theme(axis.line=element_blank(),
1505876937290:axis.text.x=element_blank(),
1505876937291:axis.text.y=element_blank(),
1505876937292:axis.ticks=element_blank(),
1505876937293:axis.title.x=element_blank(),
1505876937294:axis.title.y=element_blank(),
1505876937294:panel.grid=element_blank(),
1505876937295:panel.border=element_blank())
1505876995767:trip1 <- trip %>%
1505876995769:group_by(start_station_id, end_station_id) %>%
1505876995770:summarise(num_trip = n())
1505877000224:trip1
1505877006286:trip <- read_csv("data/201608_trip_data.csv")
1505877007294:colnames(trip) <- c("id","duration","start_date","start_station_name","start_station_id","end_date","end_station_nanme","end_station_id","bike_id","subscription_type","zip_code")
1505877009279:trip1 <- trip %>%
1505877009280:group_by(start_station_id, end_station_id) %>%
1505877009280:summarise(num_trip = n())
1505877028647:trip1 <- trip1 %>%
1505877028648:left_join(station %>% select(id, lat, long),
1505877028649:by = c("start_station_id" = "id")) %>%
1505877028649:rename(start_long = long, start_lat = lat) %>%
1505877028650:left_join(station %>% select(id, lat, long),
1505877028651:by = c("end_station_id" = "id")) %>%
1505877028652:rename(end_long = long, end_lat = lat)
1505877031067:trip1
1505877037803:p <- ggplot(trip1) +
1505877037806:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat, size=num_trip, colour=num_trip, alpha=num_trip)) +
1505877037807:geom_point(data=station, aes(x=long, y=lat), size=4) +
1505877037808:geom_text_repel(data=station, aes(x=long, y=lat, label=name), size=4) +
1505877037809:theme_light(base_size=10) +
1505877037809:scale_colour_gradientn(colors=c("#dddddd", "#20beff"), limits=c(0, max(trip$num_trip)), name="Number of trip") +
1505877037810:scale_alpha(limits=c(0, max(trip$num_trip)), guide=FALSE) +
1505877037812:scale_size(limits=c(0, max(trip$num_trip)), guide=FALSE) +
1505877037813:xlab("") +
1505877037814:ylab("") +
1505877037814:coord_fixed() +
1505877037815:theme(axis.line=element_blank(),
1505877037816:axis.text.x=element_blank(),
1505877037817:axis.text.y=element_blank(),
1505877037819:axis.ticks=element_blank(),
1505877037820:axis.title.x=element_blank(),
1505877037821:axis.title.y=element_blank(),
1505877037822:panel.grid=element_blank(),
1505877037822:panel.border=element_blank())
1505877071007:ggplot(trip1) +
1505877071008:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat, size=num_trip, colour=num_trip, alpha=num_trip))
1505877090409:m <- leaflet(station1) %>%
1505877090410:addTiles() %>%  # Add default OpenStreetMap map tiles
1505877090410:addMarkers(lng = ~ long, lat = ~ lat, popup="The birthplace of R")
1505877090887:m  # Print the map
1505877157751:m <- leaflet(station) %>%
1505877157753:addTiles() %>%  # Add default OpenStreetMap map tiles
1505877157754:addMarkers(lng = ~ long, lat = ~ lat, popup="The birthplace of R")
1505877157962:m  # Print the map
1505877423019:trip1 <- trip %>%
1505877423020:filter(start_station_id %in% station %>% filter(landmark == "San Jose"))
1505877466979:trip %>%
1505877466980:filter(start_station_id %in% station %>% filter(landmark == "San Jose")) %>%
1505877466981:filter(end_station_id %in% station %>% filter(landmark == "SanJose"))
1505877519789:station_san_jose <- station %>%
1505877519791:filter(landmark == "San Jose") %>%
1505877519792:select(landmark)
1505877525772:station_san_jose <- station %>%
1505877525774:filter(landmark == "San Jose") %>%
1505877525774:select(landmark)
1505877528948:station
1505877536119:station_san_jose <- station %>%
1505877536121:filter(city == "San Jose") %>%
1505877536121:select(city)
1505877559530:trip1 <- trip %>%
1505877559532:filter(start_station_id %in% station_san_jose) %>%
1505877559533:filter(end_station_id %in% station_san_jose) %>%
1505877559534:group_by(start_station_id, end_station_id) %>%
1505877559535:summarise(num_trip = n())
1505877564626:trip1
1505877570760:trip
1505877579006:station_san_jose
1505877584960:trip1 <- trip %>%
1505877584961:filter(start_station_id %in% station_san_jose) %>%
1505877584962:filter(end_station_id %in% station_san_jose) %>%
1505877584962:group_by(start_station_id, end_station_id) %>%
1505877584963:summarise(num_trip = n())
1505877587105:trip1
1505877603602:station_san_jose <- station %>%
1505877603604:filter(city == "San Jose") %>%
1505877603605:select(city) %>%
1505877603606:as_vector()
1505877606769:station_san_jose
1505877628478:station_san_jose <- station %>%
1505877628479:filter(city == "San Jose") %>%
1505877628480:select(city) %>%
1505877628481:as.integer()
1505877632096:station_san_jose
1505877639362:station_san_jose <- station %>%
1505877639363:filter(city == "San Jose") %>%
1505877639364:select(city) %>%
1505877639364:t %>%
1505877639367:m <- leaflet(station) %>%
1505877639368:addTiles() %>%  # Add default OpenStreetMap map tiles
1505877639369:addMarkers(lng = ~ long, lat = ~ lat, popup="The birthplace of R")
1505877656082:station_san_jose <- station %>%
1505877656085:filter(city == "San Jose") %>%
1505877656085:select(city) %>%
1505877656085:t %>%
1505877656086:as.integer()
1505877659467:station
1505877667182:station %>%
1505877667183:filter(city == "San Jose") %>%
1505877667183:select(city) %>%
1505877667184:t
1505877675558:station_san_jose <- station %>%
1505877675560:filter(city == "San Jose") %>%
1505877675561:select(id) %>%
1505877675562:t %>%
1505877675563:as.integer()
1505877681591:station_san_jose
1505877688792:station_san_jose <- station %>%
1505877688793:filter(city == "San Jose") %>%
1505877688794:select(id)
1505877690400:trip1 <- trip %>%
1505877690401:filter(start_station_id %in% station_san_jose) %>%
1505877690402:filter(end_station_id %in% station_san_jose) %>%
1505877690404:group_by(start_station_id, end_station_id) %>%
1505877690405:summarise(num_trip = n())
1505877693870:trip1
1505877697219:station_san_jose <- station %>%
1505877697219:filter(city == "San Jose") %>%
1505877697220:select(id) %>%
1505877697221:t %>%
1505877697221:as.integer()
1505877700638:trip1 <- trip %>%
1505877700639:filter(start_station_id %in% station_san_jose) %>%
1505877700640:filter(end_station_id %in% station_san_jose) %>%
1505877700640:group_by(start_station_id, end_station_id) %>%
1505877700641:summarise(num_trip = n())
1505877703497:trip1
1505877739643:trip1 <- trip1 %>%
1505877739645:left_join(station %>% select(id, lat, long),
1505877739645:by = c("start_station_id" = "id")) %>%
1505877739646:rename(start_long = long, start_lat = lat) %>%
1505877739646:left_join(station %>% select(id, lat, long),
1505877739647:by = c("end_station_id" = "id")) %>%
1505877739647:rename(end_long = long, end_lat = lat)
1505877741128:p <- ggplot(trip1) +
1505877741129:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat, size=num_trip, colour=num_trip, alpha=num_trip)) +
1505877741130:geom_point(data=station, aes(x=long, y=lat), size=4) +
1505877741131:geom_text_repel(data=station, aes(x=long, y=lat, label=name), size=4) +
1505877741132:theme_light(base_size=10) +
1505877741132:scale_colour_gradientn(colors=c("#dddddd", "#20beff"), limits=c(0, max(trip$num_trip)), name="Number of trip") +
1505877741133:scale_alpha(limits=c(0, max(trip$num_trip)), guide=FALSE) +
1505877741133:scale_size(limits=c(0, max(trip$num_trip)), guide=FALSE) +
1505877741134:xlab("") +
1505877741135:ylab("") +
1505877741136:coord_fixed() +
1505877741137:theme(axis.line=element_blank(),
1505877741138:axis.text.x=element_blank(),
1505877741140:axis.text.y=element_blank(),
1505877741141:axis.ticks=element_blank(),
1505877741142:axis.title.x=element_blank(),
1505877741143:axis.title.y=element_blank(),
1505877741143:panel.grid=element_blank(),
1505877741145:panel.border=element_blank())
1505877745498:p
1505877755820:p <- ggplot(trip1) +
1505877755821:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat, size=num_trip, colour=num_trip, alpha=num_trip))
1505877759516:p
1505877788172:station
1505877821335:ggplot(trip1) +
1505877821337:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat, size=num_trip, colour=num_trip, alpha=num_trip)) +
1505877821338:geom_point(data=station, aes(x=long, y=lat), size=4)
1505877857520:station
1505877879640:m <- leaflet(station) %>%
1505877879641:addTiles() %>%  # Add default OpenStreetMap map tiles
1505877879642:addMarkers(lng = ~ long, lat = ~ lat, popup = ~ name)
1505877880331:m  # Print the map
1505877916777:m <- leaflet(station) %>%
1505877916778:addTiles() %>%  # Add default OpenStreetMap map tiles
1505877916779:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name)
1505877917589:m  # Print the map
1505878060607:station1 <- station %>%
1505878060609:filter(city = "San Jose")
1505878068300:p <- ggplot(trip1) +
1505878068300:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat, size=num_trip, colour=num_trip, alpha=num_trip)) +
1505878068301:geom_point(data=station1, aes(x=long, y=lat), size=4) +
1505878068302:geom_text_repel(data=station1, aes(x=long, y=lat, label=name), size=4) +
1505878068304:theme_light(base_size=10) +
1505878068306:scale_colour_gradientn(colors=c("#dddddd", "#20beff"), limits=c(0, max(trip$num_trip)), name="Number of trip") +
1505878068307:scale_alpha(limits=c(0, max(trip$num_trip)), guide=FALSE) +
1505878068307:scale_size(limits=c(0, max(trip$num_trip)), guide=FALSE) +
1505878068308:xlab("") +
1505878068308:ylab("") +
1505878068309:coord_fixed() +
1505878068310:theme(axis.line=element_blank(),
1505878068311:axis.text.x=element_blank(),
1505878068313:axis.text.y=element_blank(),
1505878068316:axis.ticks=element_blank(),
1505878068317:axis.title.x=element_blank(),
1505878068318:axis.title.y=element_blank(),
1505878068319:panel.grid=element_blank(),
1505878068320:panel.border=element_blank())
1505878071128:p
1505878106610:trip1
1505878137079:ggplot(trip1) +
1505878137080:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat, size=num_trip, colour=num_trip, alpha=num_trip)) +
1505878137081:geom_point(data=station1, aes(x=long, y=lat), size=4) +
1505878137081:geom_text_repel(data=station1, aes(x=long, y=lat, label=name), size=4) +
1505878137082:theme_light(base_size=10)
1505878146343:ggplot(trip1) +
1505878146344:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat, size=num_trip, colour=num_trip, alpha=num_trip)) +
1505878146346:geom_point(data=station1, aes(x=long, y=lat), size=4) +
1505878146347:geom_text_repel(data=station1, aes(x=long, y=lat, label=name), size=4) +
1505878146348:theme_light(base_size=10) +
1505878146348:scale_colour_gradientn(colors=c("#dddddd", "#20beff"), limits=c(0, max(trip$num_trip)), name="Number of trip")
1505878317725:geom_map()
1505878330161:c("end_station_id" = "id")) %>%
1505878330162:rename(end_long = long, end_lat = lat)
1505878330165:p <- ggplot(trip1) +
1505878330166:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat, size=num_trip, colour=num_trip, alpha=num_trip))
1505878334784:p
1505878357398:?GeomMap
1505878362091:?geom_map
1505878388684:ggplot(trip1) +
1505878388686:geom_map(aes(x = long, y = lat))
1505878401414:ggplot(trip1) +
1505878401416:geom_map(aes(x = long, y = lat), map = positions)
1505878456795:ggplot(trip1) +
1505878456797:geom_map(aes(x = long, y = lat), map = trip1)
1505878606367:?addPolylines
1505878673490:leaflet(station) %>%
1505878673492:addTiles() %>%  # Add default OpenStreetMap map tiles
1505878673493:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505878673494:addPolylines(lng = ~ long, lat = ~ lat, group = ~ num_trip)
1505878680982:trip1
1505878720798:leaflet(station) %>%
1505878720799:addTiles() %>%  # Add default OpenStreetMap map tiles
1505878720799:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505878720800:addPolylines(data = trip1, lng = ~ long, lat = ~ lat, group = ~ num_trip)
1505878787497:leaflet(station) %>%
1505878787498:addTiles() %>%  # Add default OpenStreetMap map tiles
1505878787498:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505878787499:addPolylines(data = trip1,
1505878787500:lng = ~ c(start_long, end_long),
1505878787500:lat = ~ c(start_lat, end_lat),
1505878787501:group = ~ num_trip)
1505878929936:leaflet(station1) %>%
1505878929937:addTiles() %>%  # Add default OpenStreetMap map tiles
1505878929938:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505878929939:addPolylines(data = trip1,
1505878929940:lng = ~ c(start_long, end_long),
1505878929941:lat = ~ c(start_lat, end_lat),
1505878929943:label = ~ num_trip,
1505878929943:ocacity = ~ num_trip)
1505878938159:leaflet(station1) %>%
1505878938160:addTiles() %>%  # Add default OpenStreetMap map tiles
1505878938160:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505878938161:addPolylines(data = trip1,
1505878938161:lng = ~ c(start_long, end_long),
1505878938162:lat = ~ c(start_lat, end_lat),
1505878938162:label = ~ num_trip)
1505878946448:trip1
1505879027945:mydf <- data.frame(Observation = c("A", "B"),
1505879027947:InitialLat = c(62.469722,48.0975),
1505879027948:InitialLong = c(6.187194, 16.3108),
1505879027949:NewLat = c(51.4749, 51.4882),
1505879027949:NewLong = c(-0.221619, -0.302621),
1505879027951:stringsAsFactors = FALSE)
1505879030629:my
1505879035373:mydf
1505879080906:mydf2 <- data.frame(group = c("A", "B"),
1505879080908:lat = c(mydf$InitialLat, mydf$NewLat),
1505879080909:long = c(mydf$InitialLong, mydf$NewLong))
1505879084202:mydf2
1505879164609:leaflet()%>%
1505879164611:addTiles() %>%
1505879164611:addPolylines(data = mydf2, lng = ~long, lat = ~lat, group = ~group)
1505879176554:leaflet()%>%
1505879176554:addTiles() %>%
1505879176555:addPolylines(data = mydf2, lng = ~long, lat = ~lat, label = ~group)
1505879221695:trip1
1505879261083:leaflet(station1) %>%
1505879261085:addTiles() %>%  # Add default OpenStreetMap map tiles
1505879261086:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505879261087:addPolylines(data = trip1,
1505879261088:lng = ~ c(start_long, end_long),
1505879261089:lat = ~ c(start_lat, end_lat),
1505879261090:label = ~ num_trip)
1505879422558:leaflet(station1) %>%
1505879422561:addTiles() %>%  # Add default OpenStreetMap map tiles
1505879422562:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505879422563:addPolylines(data = trip1,
1505879422565:lng = ~ c(start_long, end_long),
1505879422567:lat = ~ c(start_lat, end_lat),
1505879422568:label = ~ num_trip)
1505879457896:trip1 <-
1505879457898:trip1 %>% ungroup()
1505879460661:leaflet(station1) %>%
1505879460662:addTiles() %>%  # Add default OpenStreetMap map tiles
1505879460663:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505879460664:addPolylines(data = trip1,
1505879460666:lng = ~ c(start_long, end_long),
1505879460667:lat = ~ c(start_lat, end_lat),
1505879460669:label = ~ num_trip)
1505879466411:trip1
1505879491922:leaflet(station1) %>%
1505879491923:addTiles() %>%  # Add default OpenStreetMap map tiles
1505879491923:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505879491924:addPolylines(data = trip1,
1505879491925:lng = ~ c(start_long, end_long),
1505879491925:lat = ~ c(start_lat, end_lat),
1505879491926:group = ~ start_station_id)
1505879531303:?sp::Line
1505879545327:library(sp)
1505879606792:leaflet()%>%
1505879606795:addTiles() %>%
1505879606796:addPolylines(data = mydf2, lng = ~long, lat = ~lat, group = ~group)
1505879616898:l1 = cbind(c(1,2,3),c(3,2,2))
1505879616900:l1a = cbind(l1[,1]+.05,l1[,2]+.05)
1505879616901:l2 = cbind(c(1,2,3),c(1,1.5,1))
1505879616902:Sl1 = Line(l1)
1505879616913:Sl1a = Line(l1a)
1505879616914:Sl2 = Line(l2)
1505879616916:S1 = Lines(list(Sl1, Sl1a), ID="a")
1505879616918:S2 = Lines(list(Sl2), ID="b")
1505879620196:Sl1
1505879696865:trip1 %>% View
1505880110158:trip1
1505880117281:trip
1505880131468:station1
1505880144417:station %>% View
1505880182589:leaflet(station1) %>%
1505880182592:addTiles() %>%  # Add default OpenStreetMap map tiles
1505880182594:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505880182595:addPolylines(data = trip1,
1505880182596:lng = ~ c(start_long, end_long),
1505880182596:lat = ~ c(start_lat, end_lat),
1505880182597:label = ~ num_trip)
1505880208630:leaflet(station1) %>%
1505880208631:addTiles() %>%  # Add default OpenStreetMap map tiles
1505880208632:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505880208634:addPolylines(data = trip1,
1505880208636:lng = ~ start_lat,
1505880208638:lat = ~ c(start_lat, end_lat),
1505880208640:label = ~ num_trip)
1505880249232:leaflet(station1) %>%
1505880249233:addTiles() %>%  # Add default OpenStreetMap map tiles
1505880249234:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505880249235:addPolylines(data = trip1,
1505880249237:lng = ~ start_lng,
1505880249238:lat = ~ c(start_lat, end_lat),
1505880249238:label = ~ num_trip)
1505880254749:leaflet(station1) %>%
1505880254750:addTiles() %>%  # Add default OpenStreetMap map tiles
1505880254751:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505880254751:addPolylines(data = trip1,
1505880254752:lng = ~ start_long,
1505880254752:lat = ~ c(start_lat, end_lat),
1505880254753:label = ~ num_trip)
1505880273722:leaflet(station1) %>%
1505880273723:addTiles() %>%  # Add default OpenStreetMap map tiles
1505880273725:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505880273726:addPolylines(data = trip1,
1505880273728:lng = ~ start_long,
1505880273729:lat = ~ start_lat,
1505880273731:label = ~ num_trip)
1505880292778:trip1
1505880324114:?addPolylines
1505880367334:leaflet(station1) %>%
1505880367335:addTiles() %>%  # Add default OpenStreetMap map tiles
1505880367336:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505880367336:addPolylines(data = trip1,
1505880367337:lng = ~ start_long, end_long,
1505880367337:lat = ~ start_lat,
1505880367338:label = ~ num_trip)
1505880374925:leaflet(station1) %>%
1505880374926:addTiles() %>%  # Add default OpenStreetMap map tiles
1505880374926:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505880374930:addPolylines(data = trip1,
1505880374931:lng = ~ c(start_long, end_long),
1505880374933:lat = ~ start_lat,
1505880374933:label = ~ num_trip)
1505880451443:trip1 <- trip1 %>%
1505880451445:mutate(lat = c(start_lat, end_lat),
1505880451446:long = c(start_long, end_long))
1505880462741:coordinates()
1505880472288:coordinates(1,2)
1505880479335:trip1 <- trip1 %>%
1505880479336:mutate(lat = coordinates(start_lat, end_lat),
1505880479337:long = coordinates(start_long, end_long))
1505880488360:?coordinates
1505880496774:data(meuse.grid)
1505880501006:meuse.grid
1505880514612:coordinates(meuse.grid) <- ~x+y
1505880521912:coordinates(meuse.grid)
1505880636184:ggplot(trip1) +
1505880636187:geom_map(aes(x = long, y = lat), map = trip1)
1505880642896:geom_map()
1505880647918:geom_map(map)
1505880652650:?geom_map
1505880665927:ids <- factor(c("1.1", "2.1", "1.2", "2.2", "1.3", "2.3"))
1505880665929:values <- data.frame(
1505880665932:id = ids,
1505880665935:value = c(3, 3.1, 3.1, 3.2, 3.15, 3.5)
1505880665935:)
1505880665938:positions <- data.frame(
1505880665939:id = rep(ids, each = 4),
1505880665940:x = c(2, 1, 1.1, 2.2, 1, 0, 0.3, 1.1, 2.2, 1.1, 1.2, 2.5, 1.1, 0.3,
1505880665940:0.5, 1.2, 2.5, 1.2, 1.3, 2.7, 1.2, 0.5, 0.6, 1.3),
1505880665941:y = c(-0.5, 0, 1, 0.5, 0, 0.5, 1.5, 1, 0.5, 1, 2.1, 1.7, 1, 1.5,
1505880665942:2.2, 2.1, 1.7, 2.1, 3.2, 2.8, 2.1, 2.2, 3.3, 3.2)
1505880665942:)
1505880665945:ggplot(values) +
1505880665946:geom_map(aes(map_id = id), map = positions) +
1505880665947:expand_limits(positions)
1505880684129:crimes <- data.frame(state = tolower(rownames(USArrests)), USArrests)
1505880684132:crimesm <- reshape2::melt(crimes, id = 1)
1505880684137:if (require(maps)) {
1505880684138:states_map <- map_data("state")
1505880684138:ggplot(crimes, aes(map_id = state)) +
1505880684139:geom_map(aes(fill = Murder), map = states_map) +
1505880684139:expand_limits(x = states_map$long, y = states_map$lat)
1505880684140:last_plot() + coord_map()
1505880684142:ggplot(crimesm, aes(map_id = state)) +
1505880684143:geom_map(aes(fill = value), map = states_map) +
1505880684143:expand_limits(x = states_map$long, y = states_map$lat) +
1505880684144:facet_wrap( ~ variable)
1505880684144:}
1505880690294:library(maps)
1505880700346:install.packages("maps")
1505880705373:library(maps)
1505880707256:crimes <- data.frame(state = tolower(rownames(USArrests)), USArrests)
1505880707259:crimesm <- reshape2::melt(crimes, id = 1)
1505880707330:if (require(maps)) {
1505880707330:states_map <- map_data("state")
1505880707331:ggplot(crimes, aes(map_id = state)) +
1505880707331:geom_map(aes(fill = Murder), map = states_map) +
1505880707332:expand_limits(x = states_map$long, y = states_map$lat)
1505880707332:last_plot() + coord_map()
1505880707333:ggplot(crimesm, aes(map_id = state)) +
1505880707333:geom_map(aes(fill = value), map = states_map) +
1505880707334:expand_limits(x = states_map$long, y = states_map$lat) +
1505880707334:facet_wrap( ~ variable)
1505880707335:}
1505880993600:leaflet(station1) %>%
1505880993602:addTiles() %>%  # Add default OpenStreetMap map tiles
1505880993603:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505880993603:addPolylines(data = trip1,
1505880993604:lng = ~ start_long,
1505880993604:lat = ~ start_lat,
1505880993605:label = ~ num_trip)
1505881020501:?addPolylines
1505881040708:leaflet(station1) %>%
1505881040709:addTiles() %>%  # Add default OpenStreetMap map tiles
1505881040709:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505881040710:addPolylines(data = trip1,
1505881040710:lng = ~ start_long,
1505881040711:lat = ~ start_lat,
1505881040711:label = ~ num_trip,
1505881040712:stroke = F)
1505881083153:leaflet(station1) %>%
1505881083155:addTiles() %>%  # Add default OpenStreetMap map tiles
1505881083155:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505881083156:addPolylines(data = trip1,
1505881083156:lng = ~ start_long + end_long,
1505881083156:lat = ~ start_lat,
1505881083157:label = ~ num_trip,
1505881083158:stroke = F)
1505881100641:leaflet(station1) %>%
1505881100642:addTiles() %>%  # Add default OpenStreetMap map tiles
1505881100643:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505881100643:addPolylines(data = trip1,
1505881100644:lng = ~ start_long + end_long,
1505881100645:lat = ~ start_lat,
1505881100645:label = ~ num_trip
1505881100645:)
1505881110362:leaflet(station1) %>%
1505881110363:addTiles() %>%  # Add default OpenStreetMap map tiles
1505881110364:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505881110364:addPolylines(data = trip1,
1505881110365:lng = ~ start_long + ~ end_long,
1505881110367:lat = ~ start_lat,
1505881110368:label = ~ num_trip
1505881110369:)
1505881115760:leaflet(station1) %>%
1505881115761:addTiles() %>%  # Add default OpenStreetMap map tiles
1505881115762:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505881115762:addPolylines(data = trip1,
1505881115763:lng = ~ start_long, end_long,
1505881115763:lat = ~ start_lat,
1505881115764:label = ~ num_trip
1505881115764:)
1505881123440:leaflet(station1) %>%
1505881123441:addTiles() %>%  # Add default OpenStreetMap map tiles
1505881123442:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505881123442:addPolylines(data = trip1,
1505881123443:lng = ~ (start_long, end_long),
1505881123443:lat = ~ start_lat,
1505881123444:label = ~ num_trip
1505881123445:)
1505881138820:leaflet(station1) %>%
1505881138821:addTiles() %>%  # Add default OpenStreetMap map tiles
1505881138822:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505881138822:addPolylines(data = trip1,
1505881138823:lng = ~ coordinates(start_long, end_long),
1505881138823:lat = ~ start_lat,
1505881138824:label = ~ num_trip
1505881138825:)
1505881143646:leaflet(station1) %>%
1505881143647:addTiles() %>%  # Add default OpenStreetMap map tiles
1505881143647:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505881143648:addPolylines(data = trip1,
1505881143649:lng = ~ c(start_long, end_long),
1505881143649:lat = ~ start_lat,
1505881143650:label = ~ num_trip
1505881143650:)
1505881190512:leaflet(station1) %>%
1505881190513:addTiles() %>%  # Add default OpenStreetMap map tiles
1505881190514:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505881190514:addPolylines(data = trip1,
1505881190515:lng = ~ c(start_long, end_long),
1505881190515:lat = ~ c(start_lat, end_lat),
1505881190516:label = ~ num_trip
1505881190516:)
1505881202413:trip1
1505881230077:trip1 %>% View
1505881472200:?addPolygons
1505881544622:leaflet(station1) %>%
1505881544624:addTiles() %>%  # Add default OpenStreetMap map tiles
1505881544625:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505881544626:addPolylines(data = trip1,
1505881544626:lng = ,
1505881544627:lat = ,
1505881544627:label = ~ num_trip
1505881544628:)
1505881556421:leaflet(station1) %>%
1505881556422:addTiles() %>%  # Add default OpenStreetMap map tiles
1505881556423:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505881556423:addPolylines(data = trip1,
1505881556424:label = ~ num_trip
1505881556425:)
1505881561823:leaflet(station1) %>%
1505881561824:addTiles() %>%  # Add default OpenStreetMap map tiles
1505881561824:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505881561825:addPolylines(data = trip1,
1505881561825:)
1505881567454:leaflet(station1) %>%
1505881567456:addTiles() %>%  # Add default OpenStreetMap map tiles
1505881567456:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505881567457:addPolylines(data = trip1
1505881567458:)
1505881583726:leaflet(station1) %>%
1505881583744:addTiles() %>%  # Add default OpenStreetMap map tiles
1505881583745:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name)
1505881605865:leaflet(station1) %>%
1505881605867:addTiles() %>%  # Add default OpenStreetMap map tiles
1505881605868:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505881605869:addPolylines(data = trip1,
1505881605869:lng = ~ c(end_long),
1505881605871:lat = ~ c(end_lat),
1505881605872:label = ~ num_trip
1505881605874:)
1505881637728:leaflet(station1) %>%
1505881637730:addTiles() %>%  # Add default OpenStreetMap map tiles
1505881637732:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505881637732:addPolylines(
1505881637733:)
1505881657420:leaflet(station1) %>%
1505881657421:addTiles() %>%  # Add default OpenStreetMap map tiles
1505881657421:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505881657423:addPolylines(data = station1,
1505881657424:lng = ~ c(long),
1505881657426:lat = ~ c(lat),
1505881657426:label = ~ num_trip
1505881657427:)
1505881662318:leaflet(station1) %>%
1505881662318:addTiles() %>%  # Add default OpenStreetMap map tiles
1505881662319:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505881662320:addPolylines(data = station1,
1505881662321:lng = ~ c(long),
1505881662322:lat = ~ c(lat)
1505881662324:)
1505881670434:station1
1505881803606:ggplot(trip1) +
1505881803608:geom_map(aes(x = long, y = lat), map = trip1)
1505881803619:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat, size=num_trip, colour=num_trip, alpha=num_trip)) +
1505881803620:geom_point(data=station1, aes(x=long, y=lat), size=4) +
1505881803621:geom_text_repel(data=station1, aes(x=long, y=lat, label=name), size=4) +
1505881803621:theme_light(base_size=10)
1505881810532:trip1
1505881817920:ggplot(trip1) +
1505881817922:geom_map(aes(x = long, y = lat), map = trip1)
1505881817926:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat, size=num_trip, colour=num_trip, alpha=num_trip))
1505881834176:ggplot(trip1) +
1505881834178:geom_map(aes(x = long, y = lat), map = trip1)
1505881850663:ggplot(trip1) +
1505881850664:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat, size=num_trip, colour=num_trip, alpha=num_trip)) +
1505881850666:geom_point(data=station1, aes(x=long, y=lat), size=4) +
1505881850667:geom_text_repel(data=station1, aes(x=long, y=lat, label=name), size=4) +
1505881850668:theme_light(base_size=10) +
1505881850669:scale_colour_gradientn(colors=c("#dddddd", "#20beff"), limits=c(0, max(trip$num_trip)), name="Number of trip") +
1505881850669:scale_alpha(limits=c(0, max(trip$num_trip)), guide=FALSE) +
1505881850670:scale_size(limits=c(0, max(trip$num_trip)), guide=FALSE) +
1505881850671:xlab("") +
1505881850672:ylab("") +
1505881850672:coord_fixed() +
1505881850673:theme(axis.line=element_blank(),
1505881850674:axis.text.x=element_blank(),
1505881850676:axis.text.y=element_blank(),
1505881850678:axis.ticks=element_blank(),
1505881850678:axis.title.x=element_blank(),
1505881850679:axis.title.y=element_blank(),
1505881850680:panel.grid=element_blank(),
1505881850680:panel.border=element_blank())
1505881909247:ggmap
1505881912372:?ggmap
1505881915618:??ggmap
1505881939493:map.cities(us.cities, country="NJ")
1505881948469:map("world", "China")
1505881948969:map.cities(country = "China", capitals = 2)
1505881959541:map.cities(us.cities, country="NJ")
1505881972472:map("state", "New Jersey")
1505881989077:map("city", "San Jose")
1505882007093:map(us.cities, "San Jose")
1505882034675:ggplot(trip1) +
1505882034677:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat, size=num_trip, colour=num_trip, alpha=num_trip))
1505882048021:ggplot(trip1) +
1505882048022:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat, size=num_trip, colour=num_trip, alpha=num_trip)) +
1505882048023:geom_point(data=station1, aes(x=long, y=lat), size=4)
1505882057312:ggplot(trip1) +
1505882057313:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat, size=num_trip, colour=num_trip, alpha=num_trip)) +
1505882057314:geom_point(data=station1, aes(x=long, y=lat), size=4) +
1505882057314:geom_text_repel(data=station1, aes(x=long, y=lat, label=name), size=4) +
1505882057315:theme_light(base_size=10) +
1505882057316:scale_colour_gradientn(colors=c("#dddddd", "#20beff"), limits=c(0, max(trip$num_trip)), name="Number of trip")
1505882074462:ggplot(trip1) +
1505882074463:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat, size=num_trip, colour=num_trip, alpha=num_trip)) +
1505882074464:geom_point(data=station1, aes(x=long, y=lat), size=4) +
1505882074464:geom_text_repel(data=station1, aes(x=long, y=lat, label=name), size=4) +
1505882074465:theme_light(base_size=10) +
1505882074465:scale_colour_gradientn(colors=c("#dddddd", "#20beff"), limits=c(0, max(trip$num_trip)), name="Number of trip") +
1505882074466:scale_alpha(limits=c(0, max(trip$num_trip)), guide=FALSE) +
1505882080969:ggplot(trip1) +
1505882080971:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat, size=num_trip, colour=num_trip, alpha=num_trip)) +
1505882080972:geom_point(data=station1, aes(x=long, y=lat), size=4) +
1505882080974:geom_text_repel(data=station1, aes(x=long, y=lat, label=name), size=4) +
1505882080974:theme_light(base_size=10) +
1505882080975:scale_colour_gradientn(colors=c("#dddddd", "#20beff"), limits=c(0, max(trip$num_trip)), name="Number of trip") +
1505882080976:scale_alpha(limits=c(0, max(trip$num_trip)), guide=FALSE)
1505882088718:ggplot(trip1) +
1505882088719:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat, size=num_trip, colour=num_trip, alpha=num_trip)) +
1505882088721:geom_point(data=station1, aes(x=long, y=lat), size=4) +
1505882088722:geom_text_repel(data=station1, aes(x=long, y=lat, label=name), size=4) +
1505882088723:theme_light(base_size=10) +
1505882088724:scale_colour_gradientn(colors=c("#dddddd", "#20beff"), limits=c(0, max(trip$num_trip)), name="Number of trip") +
1505882088725:scale_alpha(limits=c(0, max(trip$num_trip)), guide=FALSE) +
1505882088726:scale_size(limits=c(0, max(trip$num_trip)), guide=FALSE) +
1505882088726:xlab("") +
1505882088728:ylab("") +
1505882088728:coord_fixed() +
1505882095269:ggplot(trip1) +
1505882095271:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat, size=num_trip, colour=num_trip, alpha=num_trip)) +
1505882095273:geom_point(data=station1, aes(x=long, y=lat), size=4) +
1505882095274:geom_text_repel(data=station1, aes(x=long, y=lat, label=name), size=4) +
1505882095275:theme_light(base_size=10) +
1505882095276:scale_colour_gradientn(colors=c("#dddddd", "#20beff"), limits=c(0, max(trip$num_trip)), name="Number of trip") +
1505882095276:scale_alpha(limits=c(0, max(trip$num_trip)), guide=FALSE) +
1505882095277:scale_size(limits=c(0, max(trip$num_trip)), guide=FALSE) +
1505882095278:xlab("") +
1505882095278:ylab("") +
1505882095279:coord_fixed()
1505882108657:trip1
1505882124774:station1
1505882156086:ggplot(trip1) +
1505882156087:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat, size=num_trip, colour=num_trip, alpha=num_trip)) +
1505882156088:geom_point(data=station1, aes(x=long, y=lat), size=4) +
1505882156089:geom_text_repel(data=station1, aes(x=long, y=lat, label=name), size=4) +
1505882156091:theme_light(base_size=10) +
1505882156092:scale_colour_gradientn(colors=c("#dddddd", "#20beff"),
1505882156093:limits=c(0, max(trip$num_trip)),
1505882156094:name="Number of trip")
1505882166394:ggplot(trip1) +
1505882166395:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat, size=num_trip, colour=num_trip, alpha=num_trip))
1505882184042:ggplot(trip1) +
1505882184043:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat, colour=num_trip, alpha=num_trip)) +
1505882184044:geom_point(data=station1, aes(x=long, y=lat), size=4) +
1505882184045:geom_text_repel(data=station1, aes(x=long, y=lat, label=name), size=4) +
1505882184045:theme_light(base_size=10) +
1505882184046:scale_colour_gradientn(colors=c("#dddddd", "#20beff"),
1505882184047:limits=c(0, max(trip$num_trip)),
1505882184047:name="Number of trip") +
1505882184048:scale_alpha(limits=c(0, max(trip$num_trip)), guide=FALSE) +
1505882184049:scale_size(limits=c(0, max(trip$num_trip)), guide=FALSE) +
1505882184049:xlab("") +
1505882184050:ylab("") +
1505882184051:coord_fixed() +
1505882184051:theme(axis.line=element_blank(),
1505882184052:axis.text.x=element_blank(),
1505882184053:axis.text.y=element_blank(),
1505882184054:axis.ticks=element_blank(),
1505882184054:axis.title.x=element_blank(),
1505882184055:axis.title.y=element_blank(),
1505882184056:panel.grid=element_blank(),
1505882184058:panel.border=element_blank())
1505882189425:ggplot(trip1) +
1505882189427:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat, colour=num_trip, alpha=num_trip))
1505882342117:ggplot(trip1) +
1505882342120:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat, size=num_trip, colour=num_trip, alpha=num_trip)) +
1505882342122:geom_point(data=station1, aes(x=long, y=lat), size=4) +
1505882342124:geom_text_repel(data=station1, aes(x=long, y=lat, label=name), size=4) +
1505882342125:theme_light(base_size=10)
1505882411970:ggplot(trip1) +
1505882411976:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat,
1505882411977:size=num_trip, colour=num_trip, alpha=num_trip)) +
1505882411978:geom_point(data=station1, aes(x=long, y=lat), size=4) +
1505882411980:geom_text_repel(data=station1, aes(x=long, y=lat, label=name), size=4) +
1505882411981:theme_light(base_size=10) +
1505882411982:scale_colour_gradientn(colors=c("#dddddd", "#20beff"),
1505882411983:limits=c(0, max(trip$num_trip)),
1505882411984:name="Number of trip") +
1505882411985:scale_alpha(limits=c(0, max(trip$num_trip)), guide=FALSE) +
1505882411986:scale_size(limits=c(0, max(trip$num_trip)), guide=FALSE) +
1505882411987:xlab("") +
1505882411988:ylab("") +
1505882411989:coord_fixed() +
1505882411990:theme(axis.line=element_blank(),
1505882411992:axis.text.x=element_blank(),
1505882411993:axis.text.y=element_blank(),
1505882411994:axis.ticks=element_blank(),
1505882411995:axis.title.x=element_blank(),
1505882411997:axis.title.y=element_blank(),
1505882411998:panel.grid=element_blank(),
1505882411999:panel.border=element_blank())
1505882430073:trip1
1505882516621:ggplot(trip1) +
1505882516625:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat,
1505882516626:size=num_trip, colour=num_trip, alpha=num_trip)) +
1505882516627:geom_point(data=station1, aes(x=long, y=lat), size=4) +
1505882516628:geom_text_repel(data=station1, aes(x=long, y=lat, label=name), size=4) +
1505882516629:theme_light(base_size=10) +
1505882516631:scale_colour_gradientn(colors=c("#dddddd", "#20beff"),
1505882516635:limits=c(0, max(trip1$num_trip)),
1505882516643:name="Number of trip") +
1505882516647:scale_alpha(limits=c(0, max(trip1$num_trip)), guide=FALSE) +
1505882516648:scale_size(limits=c(0, max(trip1$num_trip)), guide=FALSE) +
1505882516649:xlab("") +
1505882516655:ylab("") +
1505882516665:coord_fixed() +
1505882516666:theme(axis.line=element_blank(),
1505882516685:axis.text.x=element_blank(),
1505882516687:axis.text.y=element_blank(),
1505882516689:axis.ticks=element_blank(),
1505882516695:axis.title.x=element_blank(),
1505882516698:axis.title.y=element_blank(),
1505882516701:panel.grid=element_blank(),
1505882516712:panel.border=element_blank())
1505882786961:leaflet(station) %>%
1505882786965:addTiles() %>%  # Add default OpenStreetMap map tiles
1505882786965:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505882786966:addPolylines(data = trip1,
1505882786967:lng = ~ c(start_long, end_long),
1505882786968:lat = ~ c(start_lat, end_lat),
1505882786972:label = ~ num_trip
1505882786974:)
1505882793041:leaflet(station) %>%
1505882793042:addTiles() %>%  # Add default OpenStreetMap map tiles
1505882793043:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505882793044:addPolylines(data = trip,
1505882793046:lng = ~ c(start_long, end_long),
1505882793047:lat = ~ c(start_lat, end_lat),
1505882793048:label = ~ num_trip
1505882793049:)
1505882797084:trip
1505882896750:t2 <- trip %>%
1505882896752:group_by(start_station_id, end_station_id) %>%
1505882896752:summarise(num_trip = n()) %>%
1505882896753:left_join(station %>% select(id, lat, long),
1505882896753:by = c("start_station_id" = "id")) %>%
1505882896754:rename(start_long = long, start_lat = lat) %>%
1505882896754:left_join(station %>% select(id, lat, long),
1505882896755:by = c("end_station_id" = "id")) %>%
1505882896756:rename(end_long = long, end_lat = lat)
1505882898368:t2
1505882907705:leaflet(station) %>%
1505882907707:addTiles() %>%  # Add default OpenStreetMap map tiles
1505882907708:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505882907709:addPolylines(data = t2,
1505882907710:lng = ~ c(start_long, end_long),
1505882907710:lat = ~ c(start_lat, end_lat),
1505882907711:label = ~ num_trip
1505882907711:)
1505883404672:geom_map(data=vor_df, map=vor_df,
1505883404674:aes(x=long, y=lat, map_id=id),
1505883404674:color="#a5a5a5", fill="#FFFFFF00", size=0.25)
1505883410813:station <- read_csv("data/201608_station_data.csv")
1505883411232:station <- station %>%
1505883411234:mutate(installation = mdy(installation)) %>%
1505883411235:na.omit %>%
1505883411235:arrange(station_id)
1505883411679:colnames(station) <- c("id","name","lat","long","dock_count","city","installation_date")
1505883412191:trip <- read_csv("data/201608_trip_data.csv")
1505883413414:colnames(trip) <- c("id","duration","start_date","start_station_name","start_station_id","end_date","end_station_nanme","end_station_id","bike_id","subscription_type","zip_code")
1505883414677:station_san_jose <- station %>%
1505883414679:filter(city == "San Jose") %>%
1505883414680:select(id) %>%
1505883414681:t %>%
1505883414683:as.integer()
1505883423355:station1 <- station %>%
1505883423356:filter(city = "San Jose")
1505883431501:station1 <- station %>%
1505883431503:filter(city == "San Jose")
1505883432619:m <- leaflet(station) %>%
1505883432619:addTiles() %>%  # Add default OpenStreetMap map tiles
1505883432620:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name)
1505883433484:m  # Print the map
1505883436176:# add trip stat_long and end_long
1505883436177:trip_san_jose <- trip %>%
1505883436177:filter(start_station_id %in% station_san_jose) %>%
1505883436178:filter(end_station_id %in% station_san_jose) %>%
1505883436178:group_by(start_station_id, end_station_id) %>%
1505883436179:summarise(num_trip = n()) %>%
1505883436180:left_join(station %>% select(id, lat, long),
1505883436181:by = c("start_station_id" = "id")) %>%
1505883436182:rename(start_long = long, start_lat = lat) %>%
1505883436184:left_join(station %>% select(id, lat, long),
1505883436185:by = c("end_station_id" = "id")) %>%
1505883436186:rename(end_long = long, end_lat = lat)
1505883437284:ggplot(trip_san_jose) +
1505883437285:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat,
1505883437285:size=num_trip, colour=num_trip, alpha=num_trip)) +
1505883437286:geom_point(data=station1, aes(x=long, y=lat), size=4) +
1505883437287:geom_text_repel(data=station1, aes(x=long, y=lat, label=name), size=4) +
1505883437289:theme_light(base_size=10) +
1505883437290:scale_colour_gradientn(colors=c("#dddddd", "#20beff"),
1505883437291:limits=c(0, max(trip_san_jose$num_trip)),
1505883437291:name="Number of trip") +
1505883437292:scale_alpha(limits=c(0, max(trip_san_jose$num_trip)), guide=FALSE) +
1505883437293:scale_size(limits=c(0, max(trip_san_jose$num_trip)), guide=FALSE) +
1505883437294:xlab("") +
1505883437296:ylab("") +
1505883437297:coord_fixed() +
1505883437298:theme(axis.line=element_blank(),
1505883437300:axis.text.x=element_blank(),
1505883437301:axis.text.y=element_blank(),
1505883437303:axis.ticks=element_blank(),
1505883437304:axis.title.x=element_blank(),
1505883437305:axis.title.y=element_blank(),
1505883437307:panel.grid=element_blank(),
1505883437308:panel.border=element_blank())
1505883449654:leaflet(station) %>%
1505883449655:addTiles() %>%  # Add default OpenStreetMap map tiles
1505883449655:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505883449656:addPolylines(data = t2,
1505883449656:lng = ~ c(start_long, end_long),
1505883449657:lat = ~ c(start_lat, end_lat),
1505883449657:label = ~ num_trip
1505883449658:)
1505883455489:leaflet(station1) %>%
1505883455494:addTiles() %>%  # Add default OpenStreetMap map tiles
1505883455496:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505883455498:addPolylines(data = t2,
1505883455499:lng = ~ c(start_long, end_long),
1505883455499:lat = ~ c(start_lat, end_lat),
1505883455500:label = ~ num_trip
1505883455501:)
1505883468194:leaflet(station1) %>%
1505883468196:addTiles() %>%  # Add default OpenStreetMap map tiles
1505883468196:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505883468197:addPolylines(data = trip_san_jose,
1505883468198:lng = ~ c(start_long, end_long),
1505883468198:lat = ~ c(start_lat, end_lat),
1505883468199:label = ~ num_trip
1505883468199:)
1505883524911:c(trip_san_jose$start_long, trip_san_jose$end_long)
1505883551821:?addPolylines
1505883637503:leaflet(station1) %>%
1505883637505:addTiles() %>%  # Add default OpenStreetMap map tiles
1505883637506:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505883637507:addPolylines(data = trip_san_jose,
1505883637507:lng = ~ c(start_long, end_long),
1505883637508:lat = ~ c(start_lat, end_lat),
1505883637509:color = ~ num_trip
1505883637509:)
1505883668326:leaflet(station1) %>%
1505883668327:addTiles() %>%  # Add default OpenStreetMap map tiles
1505883668328:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505883668329:addPolylines(data = trip_san_jose,
1505883668329:lng = trip_san_jose[c(start_long, end_long)],
1505883668330:lat = ~ c(start_lat, end_lat),
1505883668331:label = ~ num_trip
1505883668331:)
1505883684794:leaflet(station1) %>%
1505883684795:addTiles() %>%  # Add default OpenStreetMap map tiles
1505883684796:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505883684797:addPolylines(data = trip_san_jose,
1505883684797:lng = trip_san_jose[c("start_long", "end_long")],
1505883684798:lat = ~ c(start_lat, end_lat),
1505883684798:label = ~ num_trip
1505883684799:)
1505883694548:trip1
1505883715947:leaflet(station1) %>%
1505883715949:addTiles() %>%  # Add default OpenStreetMap map tiles
1505883715949:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505883715950:addPolylines(data = trip_san_jose,
1505883715950:lng = trip_san_jose[c("start_long", "end_long")],
1505883715951:lat = trip_san_jose[c("start_lat", "end_lat")],
1505883715952:label = ~ num_trip
1505883715952:)
1505883726460:trip_san_jose
1505883732029:trip_san_jose[c("start_long", "end_long")]
1505883760932:?leafletProxy
1505883776784:leafletProxy(station1) %>%
1505883776785:addTiles() %>%  # Add default OpenStreetMap map tiles
1505883776786:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505883776786:addPolylines(data = trip_san_jose,
1505883776787:lng = trip_san_jose[c("start_long", "end_long")],
1505883776788:lat = trip_san_jose[c("start_lat", "end_lat")],
1505883776788:label = ~ num_trip
1505883776789:)
1505883933976:?addPolylines
1505883975827:leaflet(station1) %>%
1505883975828:addTiles() %>%  # Add default OpenStreetMap map tiles
1505883975829:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505883975829:addPolylines(data = trip_san_jose,
1505883975830:lng = ~ long,
1505883975831:lat = ~ lat,
1505883975831:label = ~ num_trip
1505883975832:)
1505884015429:leaflet(station1) %>%
1505884015431:addTiles() %>%  # Add default OpenStreetMap map tiles
1505884015431:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505884015432:addPolylines(data = trip_san_jose,
1505884015432:lng = ~ start_long,
1505884015433:lat = ~ start_lat,
1505884015433:label = ~ num_trip
1505884015435:) %>%
1505884015436:addPolylines(data = trip_san_jose,
1505884015439:lng = ~ end_long,
1505884015440:lat = ~ end_lat,
1505884015440:label = ~ num_trip
1505884015441:)
1505884038631:lng = ~ c(start_long, end_long-,
1505884045393:leaflet(station1) %>%
1505884045395:addTiles() %>%  # Add default OpenStreetMap map tiles
1505884045395:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505884045396:addPolylines(data = trip_san_jose,
1505884045396:lng = ~ start_long,
1505884045397:lat = ~ start_lat,
1505884045397:label = ~ num_trip
1505884045398:) %>%
1505884045398:addPolylines(data = trip_san_jose,
1505884045399:lng = ~ c(start_long, end_long),
1505884045399:lat = ~ end_lat,
1505884045400:label = ~ num_trip
1505884045401:)
1505884065027:leaflet(station1) %>%
1505884065028:addTiles() %>%  # Add default OpenStreetMap map tiles
1505884065029:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505884065029:addPolylines(data = trip_san_jose,
1505884065030:lng = ~ start_long,
1505884065031:lat = ~ c(start_lat, end_lat),
1505884065032:label = ~ num_trip
1505884065032:) %>%
1505884065033:addPolylines(data = trip_san_jose,
1505884065033:lng = ~ c(start_long, end_long),
1505884065034:lat = ~ end_lat,
1505884065035:label = ~ num_trip
1505884065035:)
1505884090585:leaflet(station1) %>%
1505884090587:addTiles() %>%  # Add default OpenStreetMap map tiles
1505884090588:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505884090589:addPolylines(data = trip_san_jose,
1505884090590:lng = ~ start_long,
1505884090591:lat = ~ c(start_lat, end_lat),
1505884090592:label = ~ num_trip
1505884090592:) %>%
1505884090593:addPolylines(data = trip_san_jose,
1505884090593:lng = ~ c(start_long, end_long),
1505884090594:lat = ~ end_lat,
1505884090594:color = "red"
1505884090595:)
1505884109976:leaflet(station1) %>%
1505884109977:addTiles() %>%  # Add default OpenStreetMap map tiles
1505884109977:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505884109978:addPolylines(data = trip_san_jose,
1505884109978:lng = ~ start_long,
1505884109979:lat = ~ c(start_lat, end_lat),
1505884109980:label = ~ num_trip
1505884109980:) %>%
1505884109981:addPolylines(data = trip_san_jose,
1505884109981:lng = ~ end_long,
1505884109983:lat = ~ end_lat,
1505884109984:color = "red"
1505884109987:)
1505884120307:leaflet(station1) %>%
1505884120308:addTiles() %>%  # Add default OpenStreetMap map tiles
1505884120308:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505884120309:addPolylines(data = trip_san_jose,
1505884120309:lng = ~ start_long,
1505884120310:lat = ~ start_lat,
1505884120310:label = ~ num_trip
1505884120311:) %>%
1505884120312:addPolylines(data = trip_san_jose,
1505884120312:lng = ~ end_long,
1505884120313:lat = ~ end_lat,
1505884120313:color = "red"
1505884120314:)
1505884153871:leaflet(station1) %>%
1505884153875:addTiles() %>%  # Add default OpenStreetMap map tiles
1505884153875:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505884153876:addPolylines(data = trip_san_jose,
1505884153876:lng = ~ start_long,
1505884153877:lat = ~ start_lat,
1505884153878:color = "blue"
1505884153879:) %>%
1505884153880:addPolylines(data = trip_san_jose,
1505884153880:lng = ~ end_long,
1505884153881:lat = ~ end_lat,
1505884153882:color = "red"
1505884153882:)
1505884445063:trip_san_jose
1505884582447:trip_san_jose %>% gather(key = lat, start_lat, end_lat)
1505884763346:rbind(trip_san_jose$start_lat, trip_san_jose$end_lat)
1505884788606:rbind(trip_san_jose$start_lat, trip_san_jose$end_lat) %>% as.vector
1505884844151:leaflet(station1) %>%
1505884844153:addTiles() %>%  # Add default OpenStreetMap map tiles
1505884844153:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505884844154:addPolylines(data = trip_san_jose,
1505884844155:lng = ~ start_long,
1505884844155:lat = ~ start_lat,
1505884844156:color = "blue"
1505884844156:) %>%
1505884844157:addPolylines(data = trip_san_jose,
1505884844157:lng = ~ as.vector(rbind(start_long, end_long)),
1505884844158:lat = ~ as.vector(rbind(start_lat, end_lat)),
1505884844159:color = "red"
1505884844159:)
1505884868660:leaflet(station1) %>%
1505884868661:addTiles() %>%  # Add default OpenStreetMap map tiles
1505884868663:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505884868665:addPolylines(data = trip_san_jose,
1505884868666:lng = ~ as.vector(rbind(start_long, end_long)),
1505884868667:lat = ~ as.vector(rbind(start_lat, end_lat)),
1505884868668:color = "red"
1505884868668:)
1505884922860:leaflet(station1) %>%
1505884922862:addTiles() %>%  # Add default OpenStreetMap map tiles
1505884922863:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505884922865:addPolylines(data = trip_san_jose,
1505884922866:lng = ~ as.vector(rbind(start_long, end_long)),
1505884922868:lat = ~ as.vector(rbind(start_lat, end_lat)),
1505884922868:color = "blue",
1505884922869:label = num_trip
1505884922870:)
1505884930107:trip_san_jose
1505884953068:leaflet(station1) %>%
1505884953069:addTiles() %>%  # Add default OpenStreetMap map tiles
1505884953070:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505884953070:addPolylines(data = trip_san_jose,
1505884953071:lng = ~ as.vector(rbind(start_long, end_long)),
1505884953072:lat = ~ as.vector(rbind(start_lat, end_lat)),
1505884953072:color = "blue",
1505884953073:label = num_trip
1505884953073:)
1505884965428:leaflet(station1) %>%
1505884965429:addTiles() %>%  # Add default OpenStreetMap map tiles
1505884965430:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505884965430:addPolylines(data = trip_san_jose,
1505884965431:lng = ~ as.vector(rbind(start_long, end_long)),
1505884965431:lat = ~ as.vector(rbind(start_lat, end_lat)),
1505884965432:color = "blue",
1505884965434:label = ~num_trip
1505884965435:)
1505885425452:source('~/Documents/Harrisburg/500_52/Project/bay_area_bike_share/config/settings.R')
1505885433163:station <- read_csv("data/201608_station_data.csv")
1505885433214:station <- station %>%
1505885433216:mutate(installation = mdy(installation)) %>%
1505885433217:na.omit %>%
1505885433218:arrange(station_id)
1505885433513:colnames(station) <- c("id","name","lat","long","dock_count","city","installation_date")
1505885433514:trip <- read_csv("data/201608_trip_data.csv")
1505885435468:colnames(trip) <- c("id","duration","start_date","start_station_name","start_station_id","end_date","end_station_nanme","end_station_id","bike_id","subscription_type","zip_code")
1505885435469:station_san_jose <- station %>%
1505885435470:filter(city == "San Jose") %>%
1505885435470:select(id) %>%
1505885435470:t %>%
1505885435471:as.integer()
1505885435504:station1 <- station %>%
1505885435505:filter(city == "San Jose")
1505885438405:m <- leaflet(station) %>%
1505885438407:addTiles() %>%  # Add default OpenStreetMap map tiles
1505885438408:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name)
1505885438434:m  # Print the map
1505885459051:# add trip stat_long and end_long
1505885459052:trip_san_jose <- trip %>%
1505885459053:filter(start_station_id %in% station_san_jose) %>%
1505885459054:filter(end_station_id %in% station_san_jose) %>%
1505885459055:group_by(start_station_id, end_station_id) %>%
1505885459055:summarise(num_trip = n()) %>%
1505885459056:left_join(station %>% select(id, lat, long),
1505885459056:by = c("start_station_id" = "id")) %>%
1505885459057:rename(start_long = long, start_lat = lat) %>%
1505885459057:left_join(station %>% select(id, lat, long),
1505885459058:by = c("end_station_id" = "id")) %>%
1505885459059:rename(end_long = long, end_lat = lat)
1505885459188:ggplot(trip_san_jose) +
1505885459188:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat,
1505885459189:size=num_trip, colour=num_trip, alpha=num_trip)) +
1505885459189:geom_point(data=station1, aes(x=long, y=lat), size=4) +
1505885459189:geom_text_repel(data=station1, aes(x=long, y=lat, label=name), size=4) +
1505885459190:theme_light(base_size=10) +
1505885459190:xlab("") +
1505885459191:ylab("") +
1505885459192:coord_fixed() +
1505885459193:theme(axis.line=element_blank(),
1505885459193:axis.text.x=element_blank(),
1505885459194:axis.text.y=element_blank(),
1505885459194:axis.ticks=element_blank(),
1505885459195:axis.title.x=element_blank(),
1505885459196:axis.title.y=element_blank(),
1505885459197:panel.grid=element_blank(),
1505885459198:panel.border=element_blank())
1505885476786:station <- read_csv("data/201608_station_data.csv")
1505885476796:station <- station %>%
1505885476797:mutate(installation = mdy(installation)) %>%
1505885476797:na.omit %>%
1505885476798:arrange(station_id)
1505885476882:colnames(station) <- c("id","name","lat","long","dock_count","city","installation_date")
1505885476884:trip <- read_csv("data/201608_trip_data.csv")
1505885477832:colnames(trip) <- c("id","duration","start_date","start_station_name","start_station_id","end_date","end_station_nanme","end_station_id","bike_id","subscription_type","zip_code")
1505885477834:station_san_jose <- station %>%
1505885477835:filter(city == "San Jose") %>%
1505885477836:select(id) %>%
1505885477837:t %>%
1505885477837:as.integer()
1505885477849:station1 <- station %>%
1505885477849:filter(city == "San Jose")
1505885477855:# add trip stat_long and end_long
1505885477855:trip_san_jose <- trip %>%
1505885477856:filter(start_station_id %in% station_san_jose) %>%
1505885477857:filter(end_station_id %in% station_san_jose) %>%
1505885477857:group_by(start_station_id, end_station_id) %>%
1505885477858:summarise(num_trip = n()) %>%
1505885477859:left_join(station %>% select(id, lat, long),
1505885477860:by = c("start_station_id" = "id")) %>%
1505885477861:rename(start_long = long, start_lat = lat) %>%
1505885477861:left_join(station %>% select(id, lat, long),
1505885477862:by = c("end_station_id" = "id")) %>%
1505885477863:rename(end_long = long, end_lat = lat)
1505885477966:ggplot(trip_san_jose) +
1505885477966:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat,
1505885477967:size=num_trip, colour=num_trip, alpha=num_trip)) +
1505885477967:geom_point(data=station1, aes(x=long, y=lat), size=4) +
1505885477968:geom_text_repel(data=station1, aes(x=long, y=lat, label=name), size=4) +
1505885477968:theme_light(base_size=10) +
1505885477969:xlab("") +
1505885477969:ylab("") +
1505885477970:coord_fixed() +
1505885477970:theme(axis.line=element_blank(),
1505885477971:axis.text.x=element_blank(),
1505885477971:axis.text.y=element_blank(),
1505885477972:axis.ticks=element_blank(),
1505885477972:axis.title.x=element_blank(),
1505885477973:axis.title.y=element_blank(),
1505885477974:panel.grid=element_blank(),
1505885477975:panel.border=element_blank())
1505885548012:ggplot(trip_san_jose) +
1505885548014:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat,
1505885548015:size=num_trip, colour=num_trip, alpha=num_trip)) +
1505885548016:geom_point(data=station1, aes(x=long, y=lat), size=4) +
1505885548017:geom_text_repel(data=station1, aes(x=long, y=lat, label=name), size=4) +
1505885548017:theme_light(base_size=10) +
1505885548018:xlab("") +
1505885548018:ylab("") +
1505885548019:scale_colour_gradientn(colors=c("#dddddd", "#20beff"), limits=c(0, max(trips$num_trips)), name="Number of Trips") +
1505885548020:scale_alpha(limits=c(0, max(trips$num_trips)), guide=FALSE) +
1505885548021:scale_size(limits=c(0, max(trips$num_trips)), guide=FALSE) +
1505885548021:coord_fixed() +
1505885548022:theme(axis.line=element_blank(),
1505885548024:axis.text.x=element_blank(),
1505885548026:axis.text.y=element_blank(),
1505885548027:axis.ticks=element_blank(),
1505885548028:axis.title.x=element_blank(),
1505885548029:axis.title.y=element_blank(),
1505885548030:panel.grid=element_blank(),
1505885548031:panel.border=element_blank())
1505885561501:ggplot(trip_san_jose) +
1505885561503:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat,
1505885561503:size=num_trip, colour=num_trip, alpha=num_trip)) +
1505885561504:geom_point(data=station1, aes(x=long, y=lat), size=4) +
1505885561505:geom_text_repel(data=station1, aes(x=long, y=lat, label=name), size=4) +
1505885561505:theme_light(base_size=10) +
1505885561506:xlab("") +
1505885561507:ylab("") +
1505885561507:scale_colour_gradientn(colors=c("#dddddd", "#20beff"), limits=c(0, max(trip_san_jose$num_trips)), name="Number of Trips") +
1505885561508:scale_alpha(limits=c(0, max(trip_san_jose$num_trips)), guide=FALSE) +
1505885561509:scale_size(limits=c(0, max(trip_san_jose$num_trips)), guide=FALSE) +
1505885561510:coord_fixed() +
1505885561510:theme(axis.line=element_blank(),
1505885561511:axis.text.x=element_blank(),
1505885561512:axis.text.y=element_blank(),
1505885561514:axis.ticks=element_blank(),
1505885561515:axis.title.x=element_blank(),
1505885561517:axis.title.y=element_blank(),
1505885561518:panel.grid=element_blank(),
1505885561519:panel.border=element_blank())
1505885607186:station_san_jose
1505885618941:ggplot(trip_san_jose) +
1505885618941:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat,
1505885618942:size=num_trip, colour=num_trip, alpha=num_trip)) +
1505885618943:geom_point(data=station1, aes(x=long, y=lat), size=4) +
1505885618943:geom_text_repel(data=station1, aes(x=long, y=lat, label=name), size=4) +
1505885618944:theme_light(base_size=10) +
1505885618944:xlab("") +
1505885618945:ylab("")
1505885651358:ggplot(trip_san_jose) +
1505885651359:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat,
1505885651360:size=num_trip, colour=num_trip, alpha=num_trip)) +
1505885651360:geom_point(data=station1, aes(x=long, y=lat), size=4) +
1505885651361:geom_text_repel(data=station1, aes(x=long, y=lat, label=name), size=4) +
1505885651361:theme_light(base_size=10) +
1505885651362:xlab("") +
1505885651362:ylab("") +
1505885651363:scale_colour_gradientn(colors=c("#dddddd", "#20beff"),
1505885651363:limits=c(0, max(trip_san_jose$num_trip)),
1505885651364:name="Number of Trips") +
1505885651364:scale_alpha(limits=c(0, max(trip_san_jose$num_trip)), guide=FALSE) +
1505885651365:scale_size(limits=c(0, max(trip_san_jose$num_trip)), guide=FALSE) +
1505885651366:coord_fixed() +
1505885651367:theme(axis.line=element_blank(),
1505885651369:axis.text.x=element_blank(),
1505885651371:axis.text.y=element_blank(),
1505885651372:axis.ticks=element_blank(),
1505885651373:axis.title.x=element_blank(),
1505885651374:axis.title.y=element_blank(),
1505885651375:panel.grid=element_blank(),
1505885651376:panel.border=element_blank())
1505885669994:leaflet(station1) %>%
1505885669995:addTiles() %>%  # Add default OpenStreetMap map tiles
1505885669995:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505885669996:addPolylines(data = trip_san_jose,
1505885669996:lng = ~ as.vector(rbind(start_long, end_long)),
1505885669997:lat = ~ as.vector(rbind(start_lat, end_lat)),
1505885669997:color = "blue"
1505885669998:)
1505885688072:?addPolylines
1505885731490:leaflet(station1) %>%
1505885731491:addTiles() %>%  # Add default OpenStreetMap map tiles
1505885731492:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505885731492:addPolylines(data = trip_san_jose,
1505885731493:lng = ~ as.vector(rbind(start_long, end_long)),
1505885731493:lat = ~ as.vector(rbind(start_lat, end_lat)),
1505885731494:color = "blue",
1505885731494:weight = ~ num_trip
1505885731495:)
1505886117533:leaflet(station1) %>%
1505886117535:addTiles() %>%  # Add default OpenStreetMap map tiles
1505886117536:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505886117536:addPolylines(data = trip_san_jose,
1505886117537:lng = ~ as.vector(rbind(start_long, end_long)),
1505886117539:lat = ~ as.vector(rbind(start_lat, end_lat)),
1505886117540:color = "blue"  )
1505886155617:leaflet(station1) %>%
1505886155618:addTiles() %>%  # Add default OpenStreetMap map tiles
1505886155619:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505886155619:addPolylines(data = trip_san_jose,
1505886155620:lng = ~ as.vector(rbind(start_long, end_long)),
1505886155620:lat = ~ as.vector(rbind(start_lat, end_lat)),
1505886155621:color = "blue",
1505886155621:popup = ~ num_trip)
1505886715682:leaflet(station1) %>%
1505886715684:addTiles() %>%  # Add default OpenStreetMap map tiles
1505886715685:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505886715686:addPolylines(data = trip_san_jose,
1505886715686:lng = ~ as.vector(rbind(start_long, end_long)),
1505886715688:lat = ~ as.vector(rbind(start_lat, end_lat)),
1505886715689:color = "blue")
1505886737424:leaflet(station1) %>%
1505886737425:addTiles() %>%  # Add default OpenStreetMap map tiles
1505886737426:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505886737427:addPolylines(data = trip_san_jose,
1505886737429:lng = ~ as.vector(rbind(start_long, end_long)),
1505886737430:lat = ~ as.vector(rbind(start_lat, end_lat)),
1505886737430:color = ~ num_trip)
1505886774166:scale_colour_gradientn(colors=c("#dddddd", "#20beff"),
1505886774168:limits=c(0, max(trip_san_jose$num_trip)),
1505886774169:name="Number of Trips")
1505886796191:scale_colour_continuous()
1505886860082:leaflet(station1) %>%
1505886860084:addTiles() %>%  # Add default OpenStreetMap map tiles
1505886860084:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505886860085:addPolylines(data = trip_san_jose,
1505886860085:lng = ~ as.vector(rbind(start_long, end_long)),
1505886860086:lat = ~ as.vector(rbind(start_lat, end_lat)),
1505886860086:color = scale_color_gradientn(colors=c("#dddddd", "#20beff"),
1505886860087:limits=c(0, max(trip_san_jose$num_trip)),name="Number of Trips"))
1505886872174:leaflet(station1) %>%
1505886872175:addTiles() %>%  # Add default OpenStreetMap map tiles
1505886872176:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505886872177:addPolylines(data = trip_san_jose,
1505886872178:lng = ~ as.vector(rbind(start_long, end_long)),
1505886872180:lat = ~ as.vector(rbind(start_lat, end_lat)),
1505886872181:color = scale_color_gradientn(colors=c("#dddddd", "#20beff"),limits=c(0, max(trip_san_jose$num_trip)),name="Number of Trips"))
1505886905038:color = #dddddd")
1505886910273:)
1505886913394:lat = ~ as.vector(rbind(start_lat, end_lat)),
1505886925268:leaflet(station1) %>%
1505886925269:addTiles() %>%  # Add default OpenStreetMap map tiles
1505886925270:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505886925271:addPolylines(data = trip_san_jose,
1505886925272:lng = ~ as.vector(rbind(start_long, end_long)),
1505886925273:lat = ~ as.vector(rbind(start_lat, end_lat)),
1505886925274:color = #dddddd"
1505886925275:)
1505886933396:leaflet(station1) %>%
1505886933398:addTiles() %>%  # Add default OpenStreetMap map tiles
1505886933400:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505886933401:addPolylines(data = trip_san_jose,
1505886933402:lng = ~ as.vector(rbind(start_long, end_long)),
1505886933402:lat = ~ as.vector(rbind(start_lat, end_lat)),
1505886933403:color = #20beff"
1505886933405:)
1505887162849:station1
1505887173425:trip_san_jose
1505887318373:station1 <- station %>%
1505887318374:filter(city == "San Jose") %>%
1505887318375:left_join(trip_san_jose %>%
1505887318375:summarise(n = sum(num_trip)))
1505887325933:trip_san_jose %>%
1505887325934:summarise(n = sum(num_trip))
1505887359678:station
1505887379578:station1 <- station %>%
1505887379579:filter(city == "San Jose") %>%
1505887379580:left_join(trip_san_jose %>%
1505887379582:summarise(num_trip = sum(num_trip)),
1505887379583:by = c("id" = "start_station_id"))
1505887382569:station1
1505887388050:station1 %>% View
1505887422846:leaflet(station1) %>%
1505887422847:addTiles() %>%  # Add default OpenStreetMap map tiles
1505887422849:# addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505887422850:addCircleMarkers(
1505887422851:radius = ~ num_trip,
1505887422851:stroke = FALSE,
1505887422852:fillOpacity = 0.5
1505887422852:) %>%
1505887422853:addPolylines(data = trip_san_jose,
1505887422853:lng = ~ as.vector(rbind(start_long, end_long)),
1505887422854:lat = ~ as.vector(rbind(start_lat, end_lat)),
1505887422854:color = #20beff"
1505887422855:)
1505887435356:station1
1505887456244:leaflet(station1) %>%
1505887456245:addTiles() %>%  # Add default OpenStreetMap map tiles
1505887456246:# addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505887456246:addCircleMarkers(
1505887456247:radius = ~ num_trip*0.0001,
1505887456248:stroke = FALSE,
1505887456248:fillOpacity = 0.5
1505887456250:) %>%
1505887456251:addPolylines(data = trip_san_jose,
1505887456253:lng = ~ as.vector(rbind(start_long, end_long)),
1505887456253:lat = ~ as.vector(rbind(start_lat, end_lat)),
1505887456254:color = #20beff"
1505887456254:)
1505887463414:leaflet(station1) %>%
1505887463416:addTiles() %>%  # Add default OpenStreetMap map tiles
1505887463418:# addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505887463419:addCircleMarkers(
1505887463419:radius = ~ num_trip*0.001,
1505887463420:stroke = FALSE,
1505887463421:fillOpacity = 0.5
1505887463421:) %>%
1505887463422:addPolylines(data = trip_san_jose,
1505887463422:lng = ~ as.vector(rbind(start_long, end_long)),
1505887463423:lat = ~ as.vector(rbind(start_lat, end_lat)),
1505887463423:color = #20beff"
1505887463424:)
1505887466727:leaflet(station1) %>%
1505887466728:addTiles() %>%  # Add default OpenStreetMap map tiles
1505887466729:# addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505887466729:addCircleMarkers(
1505887466730:radius = ~ num_trip*0.01,
1505887466731:stroke = FALSE,
1505887466731:fillOpacity = 0.5
1505887466732:) %>%
1505887466732:addPolylines(data = trip_san_jose,
1505887466733:lng = ~ as.vector(rbind(start_long, end_long)),
1505887466734:lat = ~ as.vector(rbind(start_lat, end_lat)),
1505887466736:color = #20beff"
1505887466737:)
1505887488557:leaflet(station1) %>%
1505887488558:addTiles() %>%  # Add default OpenStreetMap map tiles
1505887488560:# addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505887488561:addCircleMarkers(
1505887488562:radius = ~ num_trip*0.01,
1505887488562:stroke = FALSE,
1505887488563:fillOpacity = 0.5
1505887488563:) %>%
1505887488564:addPolylines(data = trip_san_jose,
1505887488565:lng = ~ as.vector(rbind(start_long, end_long)),
1505887488565:lat = ~ as.vector(rbind(start_lat, end_lat)),
1505887488566:color = "red"
1505887488567:)
1505887496595:leaflet(station1) %>%
1505887496596:addTiles() %>%  # Add default OpenStreetMap map tiles
1505887496597:# addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505887496597:addCircleMarkers(
1505887496597:radius = ~ num_trip*0.01,
1505887496598:stroke = FALSE,
1505887496599:fillOpacity = 0.5
1505887496599:) %>%
1505887496600:addPolylines(data = trip_san_jose,
1505887496601:lng = ~ as.vector(rbind(start_long, end_long)),
1505887496602:lat = ~ as.vector(rbind(start_lat, end_lat)),
1505887496604:color = "grey"
1505887496605:)
1505887514193:leaflet(station1) %>%
1505887514194:addTiles() %>%  # Add default OpenStreetMap map tiles
1505887514194:# addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505887514195:addCircleMarkers(
1505887514195:radius = ~ num_trip*0.01,
1505887514196:stroke = FALSE,
1505887514197:fillOpacity = 0.5,
1505887514198:label = ~ name
1505887514198:) %>%
1505887514199:addPolylines(data = trip_san_jose,
1505887514199:lng = ~ as.vector(rbind(start_long, end_long)),
1505887514200:lat = ~ as.vector(rbind(start_lat, end_lat)),
1505887514201:color = "grey"
1505887514202:)
1505887580264:?scale
1505887595846:leaflet(station1) %>%
1505887595847:addTiles() %>%  # Add default OpenStreetMap map tiles
1505887595847:# addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505887595848:addCircleMarkers(
1505887595848:radius = ~ num_trip*0.05,
1505887595849:stroke = FALSE,
1505887595849:fillOpacity = 0.5,
1505887595850:label = ~ name
1505887595851:) %>%
1505887595851:addPolylines(data = trip_san_jose,
1505887595852:lng = ~ as.vector(rbind(start_long, end_long)),
1505887595853:lat = ~ as.vector(rbind(start_lat, end_lat)),
1505887595854:color = "grey"
1505887595855:)
1505887602233:leaflet(station1) %>%
1505887602234:addTiles() %>%  # Add default OpenStreetMap map tiles
1505887602235:# addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1505887602235:addCircleMarkers(
1505887602236:radius = ~ num_trip*0.02,
1505887602238:stroke = FALSE,
1505887602239:fillOpacity = 0.5,
1505887602240:label = ~ name
1505887602241:) %>%
1505887602241:addPolylines(data = trip_san_jose,
1505887602242:lng = ~ as.vector(rbind(start_long, end_long)),
1505887602242:lat = ~ as.vector(rbind(start_lat, end_lat)),
1505887602243:color = "grey"
1505887602244:)
1505887896794:source('~/Documents/Harrisburg/500_52/Project/bay_area_bike_share/src/read_data.R')
1506053338448:g
1506053358768:# using leaflet
1506053358769:l <-
1506053358769:leaflet(station1) %>%
1506053358770:addTiles() %>%  # Add default OpenStreetMap map tiles
1506053358771:# addMarkers(lng = ~ long, lat = ~ lat, label = ~ name) %>%
1506053358772:addCircleMarkers(
1506053358774:radius = ~ num_trip*0.02,
1506053358775:stroke = FALSE,
1506053358775:fillOpacity = 0.5,
1506053358776:label = ~ name
1506053358776:) %>%
1506053358776:addPolylines(data = trip_san_jose,
1506053358777:lng = ~ as.vector(rbind(start_long, end_long)),
1506053358778:lat = ~ as.vector(rbind(start_lat, end_lat)),
1506053358778:color = "grey"
1506053358779:)
1506053365296:l
1506053396544:# using leaflet
1506053396545:l <-
1506053396546:leaflet(station) %>%
1506053396546:addTiles() %>%  # Add default OpenStreetMap map tiles
1506053396547:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name)
1506053398015:#   radius = ~ num_trip*0.02,
1506053398016:#   stroke = FALSE,
1506053398018:#   fillOpacity = 0.5,
1506053398019:#   label = ~ name
1506053398019:# ) %>%
1506053398020:# addPolylines(data = trip_san_jose,
1506053398020:#              lng = ~ as.vector(rbind(start_long, end_long)),
1506053398021:#              lat = ~ as.vector(rbind(start_lat, end_lat)),
1506053398021:#              color = "grey"
1506053398022:#                )
1506053398022:l
1506053919072:station %>% View
1506123940415:dir
1506123942026:dir()
1506123947577:dir("R/")
1506123955680:dir("src/")
1506175910706:?leaflet
1506177372791:dir()
1506177410206:library(tidyverse)
1506177430713:movies <- read_csv("movie_metadata.csv")
1506177438868:movies %>% View
1506177500967:warnings()
1506177701765:?read_csv
1506177709111:problems()
1506177714504:problems(movies)
1506177756051:problems(movies)$row
1506177766266:movies[problems(movies)$row,]
1506177775499:movies[problems(movies)$row,] %>% View
1506177847419:movies %>% names
1506177906328:vignette("column-types")
1506177922256:readr::vignette("column-types")
1506178116223:movies <- read_csv("movie_metadata.csv", col_types = "
1506178116226:budget = col_integer(")
1506178120550:movies <- read_csv("movie_metadata.csv", col_types = "
1506178120550:budget = col_integer()")
1506178144313:movies <- read_csv("movie_metadata.csv", col_types = list(
1506178144314:budget = col_integer()))
1506178151717:movies <- read_csv("movie_metadata.csv", col_types = list(
1506178151718:budget = col_character()))
1506178170421:movies %>% mutate(budget = as.integer(budget))
1506178187626:movies %>% View()
1506178210340:?nortest
1506178213564:?cor.test
1506178267780:cor.test(movies$facenumber_in_poster,movies$imdb_score,alternative = "two.sided", method = "pearson", conf.level = 0.95)
1506178305385:?aov
1506178341457:aov(IMDb$imdb_score~IMDb$facenumber_in_poster)
1506178351397:aov(movies$imdb_score~movies$facenumber_in_poster)
1506178352176:aov(imdb_score ~ facnumber_in_poster, data = movies)
1506178357250:aov(imdb_score ~ facenumber_in_poster, data = movies)
1506178448712:summary(movies$facenumber_in_poster)
1506178467776:?cor.test
1506178532714:a <- cor.test(movies$facenumber_in_poster,movies$imdb_score,alternative = "two.sided", method = "pearson", conf.level = 0.95)
1506178533800:a
1506178619107:cor(facemunber_in_poster, imdb_score, data = movies)
1506178632734:cor(movies$facemunber_in_poster, movies$imdb_score)
1506178637220:cor
1506178639113:?cor
1506178670734:cor(movies$facenumber_in_poster, movies$imdb_score)
1506178686902:cor(movies$facenumber_in_poster, movies$imdb_score, na.action(movies))
1506178696866:cor(movies$facenumber_in_poster, movies$imdb_score, na.action = omit )
1506178702017:cor(movies$facenumber_in_poster, movies$imdb_score)
1506178725697:cov(movies$facenumber_in_poster, movies$imdb_score)
1506178728000:cor(movies$facenumber_in_poster, movies$imdb_score)
1506178752543:getOption("na.action")
1506178762476:cor(movies$facenumber_in_poster, movies$imdb_score, na.action)
1506178766327:cor(movies$facenumber_in_poster, movies$imdb_score)
1506178783392:movies$facenumber_in_poster %>% class
1506178789323:movies$imdb_score %>% class
1506178800679:cor(movies$facenumber_in_poster %>% as.numeric, movies$imdb_score)
1506178824342:movies <- read_csv("movie_metadata.csv", col_types = list(
1506178824343:budget = col_character()))
1506178827395:movies %>% mutate(budget = as.integer(budget))
1506178856088:movies <- read_csv("movie_metadata.csv", col_types = list(
1506178856089:budget = col_numeric()))
1506178862538:movies <- read_csv("movie_metadata.csv", col_types = list(
1506178862539:budget = col_double()))
1506178869569:cor(movies$facenumber_in_poster, movies$imdb_score)
1506178874479:movies %>% mutate(budget = as.integer(budget))
1506178888488:movies <- read_csv("movie_metadata.csv")
1506178891874:problems()
1506178898717:problems(movies)
1506178916283:, col_types = list(
1506178916284:budget = col_character()))
1506178916722:movies %>% mutate(budget = as.integer(budget))
1506178919575:, col_types = list(
1506178919576:budget = col_character()))
1506178925239:movies <- read_csv("movie_metadata.csv", col_types = list(
1506178925240:budget = col_character()))
1506178926372:movies %>% mutate(budget = as.integer(budget))
1506178929619:movies <- read_csv("movie_metadata.csv", col_types = list(
1506178929620:budget = col_character()))
1506178936409:movies %>% mutate(budget = as.integer(budget))
1506178971691:m <- movies %>%
1506178971692:select(facenumber_in_poster, imdb_score) %>%
1506178971693:na.omit
1506178981872:cor(m$facenumber_in_poster, m$imdb_score)
1506179020513:m <- movies %>%
1506179020514:select(facenumber_in_poster, imdb_score) %>%
1506179020514:na.omit %>%
1506179020515:filter(facenumber_in_poster != 0)
1506179021803:cor(m$facenumber_in_poster, m$imdb_score)
1506179025323:m
1506179034206:m %>% View
1506179079071:movies <- read_csv("movie_metadata.csv")
1506179080928:m <- movies %>%
1506179080929:select(facenumber_in_poster, imdb_score) %>%
1506179080930:na.omit %>%
1506179080930:filter(facenumber_in_poster != 0)
1506179082785:cor(m$facenumber_in_poster, m$imdb_score)
1506179083585:aov(movies$imdb_score~movies$facenumber_in_poster)
1506179332591:cor(m$facenumber_in_poster, m$imdb_score)
1506179347528:plot(m$facenumber_in_poster, m$imdb_score)
1506179456845:cor.test(movies$facenumber_in_poster,movies$imdb_score,alternative = "two.sided", method = "pearson", conf.level = 0.95)
1506179481465:cor.test(m$facenumber_in_poster, m$imdb_score,alternative = "two.sided", method = "pearson", conf.level = 0.95)
1506179596080:movies %>%
1506179596082:group_by(facenumber_in_poster) %>%
1506179596082:tally
1506179620003:movies %>%
1506179620004:select(facenumber_in_poster) %>%
1506179620005:oa.omit %>%
1506179620005:group_by(facenumber_in_poster) %>%
1506179620006:tally
1506179626120:movies %>%
1506179626121:select(facenumber_in_poster) %>%
1506179626121:na.omit %>%
1506179626122:group_by(facenumber_in_poster) %>%
1506179626122:tally
1506179739843:movies %>%
1506179739846:select(facenumber_in_poster) %>%
1506179739847:na.omit %>%
1506179739848:group_by(facenumber_in_poster) %>%
1506179739848:mutate(less_than_5 = ifelse(n <= 5, T, F))
1506179745104:movies %>%
1506179745105:select(facenumber_in_poster) %>%
1506179745105:na.omit %>%
1506179745106:group_by(facenumber_in_poster) %>%
1506179745106:mutate(less_than_5 = ifelse(n <= 5, 1, 0))
1506179755486:movies %>%
1506179755487:select(facenumber_in_poster) %>%
1506179755488:na.omit %>%
1506179755488:group_by(facenumber_in_poster) %>%
1506179755489:tally %>%
1506179755490:mutate(less_than_5 = ifelse(n <= 5, 1, 0))
1506179806758:movies %>%
1506179806759:select(facenumber_in_poster) %>%
1506179806759:na.omit %>%
1506179806760:mutate(less_than_5 = ifelse(facenumber_in_poster <= 5, 1, 0)) %>%
1506179806760:group_by(facenumber_in_poster) %>%
1506179806761:tally %>%
1506179806761:select(less_than_5)
1506179825189:movies %>%
1506179825189:select(facenumber_in_poster) %>%
1506179825190:na.omit %>%
1506179825190:mutate(less_than_5 = ifelse(facenumber_in_poster <= 5, 1, 0)) %>%
1506179825191:group_by(less_than_5) %>%
1506179825192:tally
1506179842473:m %>%
1506179842474:select(facenumber_in_poster) %>%
1506179842474:na.omit %>%
1506179842475:mutate(less_than_5 = ifelse(facenumber_in_poster <= 5, 1, 0)) %>%
1506179842475:group_by(less_than_5) %>%
1506179842476:tally
1506179911027:?dplyr::summarise
1506179939065:2668/(2668+210)
1506180053165:m %>%
1506180053166:select(facenumber_in_poster) %>%
1506180053167:mutate(less_than_5 = ifelse(facenumber_in_poster <= 5, 1, 0)) %>%
1506180053167:group_by(less_than_5) %>%
1506180053168:tally
1506180060697:m
1506180105932:m %>%
1506180105932:group_by(facenumber_in_poster) %>%
1506180105933:summarise(mean_score = mean(imdb_score))
1506180118762:s <-
1506180118801:m %>%
1506180118801:group_by(facenumber_in_poster) %>%
1506180118802:summarise(mean_score = mean(imdb_score))
1506180154999:ggplot(s, aes(facenumber_in_poster, mean_score)) +
1506180155039:geom_bar
1506180158441:ggplot(s, aes(facenumber_in_poster, mean_score)) +
1506180158443:geom_bar)
1506180160593:ggplot(s, aes(facenumber_in_poster, mean_score)) +
1506180160594:geom_bar()
1506180172936:?stat_count
1506180200351:ggplot(s, aes(facenumber_in_poster, mean_score)) +
1506180200352:geom_bar(stat = "count")
1506180367999:m %>%
1506180368003:select(facenumber_in_poster) %>%
1506180368005:mutate(less_than_5 = ifelse(facenumber_in_poster < 5, 1, 0)) %>%
1506180368006:group_by(less_than_5) %>%
1506180368006:tally
1506180416779:ggplot(s, aes(facenumber_in_poster, mean_score)) +
1506180416781:geom_bar(position = "identity")
1506180426330:ggplot(s, aes(facenumber_in_poster, mean_score)) +
1506180426331:geom_bar(position = "dodge")
1506180463588:ggplot(s, aes(facenumber_in_poster, mean_score)) +
1506180463589:geom_bar(position = "dodge", stat = "identity")
1506180920068:movies %>% glimpse()
1506181165024:# facenumber_in_poster <=1, if the movies is great simply from poster?
1506181165025:movies %>%
1506181165026:select(facenumber_in_poster, imdb_score) %>%
1506181165027:na.omit %>%
1506181165027:mutate(is_less_than_1 = ifelse(facenumber_in_poster <= 1, 1, 0)) %>%
1506181165027:group_by(facenumber_in_poster) %>%
1506181165028:summarise(mean_score = mean(imdb_score))
1506181176028:# facenumber_in_poster <=1, if the movies is great simply from poster?
1506181176029:movies %>%
1506181176029:select(facenumber_in_poster, imdb_score) %>%
1506181176030:na.omit %>%
1506181176030:mutate(is_less_than_1 = ifelse(facenumber_in_poster <= 1, 1, 0)) %>%
1506181176031:group_by(is_less_than_1) %>%
1506181176032:summarise(mean_score = mean(imdb_score))
1506181188498:# facenumber_in_poster <=1, if the movies is great simply from poster?
1506181188499:movies %>%
1506181188500:select(facenumber_in_poster, imdb_score) %>%
1506181188500:na.omit %>%
1506181188501:mutate(is_less_than_1 = ifelse(facenumber_in_poster <= 1, T, F)) %>%
1506181188501:group_by(is_less_than_1) %>%
1506181188502:summarise(mean_score = mean(imdb_score))
1506181196752:m %>%
1506181196753:select(facenumber_in_poster) %>%
1506181196754:mutate(less_than_5 = ifelse(facenumber_in_poster < 5, T, F)) %>%
1506181196755:group_by(less_than_5) %>%
1506181196756:tally
1506181345187:m %>%
1506181345190:select(facenumber_in_poster) %>%
1506181345191:mutate(less_than_5 = ifelse(facenumber_in_poster < 5, T, F)) %>%
1506181345192:group_by(less_than_5) %>%
1506181345193:tally
1506181351899:ggplot(s, aes(facenumber_in_poster, mean_score)) +
1506181351900:geom_bar(position = "dodge", stat = "identity")
1506181359479:# facenumber_in_poster <=1, if the movies is great simply from poster?
1506181359481:movies %>%
1506181359482:select(facenumber_in_poster, imdb_score) %>%
1506181359483:na.omit %>%
1506181359483:mutate(is_less_than_1 = ifelse(facenumber_in_poster <= 1, T, F)) %>%
1506181359484:group_by(is_less_than_1) %>%
1506181359484:summarise(mean_score = mean(imdb_score))
1506181385126:# facenumber_in_poster <=1, if the movies is great simply from poster?
1506181385126:movies %>%
1506181385127:select(facenumber_in_poster, imdb_score) %>%
1506181385127:na.omit %>%
1506181385128:mutate(is_less_than_1 = ifelse(facenumber_in_poster <= 1, T, F)) %>%
1506181385129:group_by(is_less_or_equal_than_1) %>%
1506181385129:summarise(mean_score = mean(imdb_score))
1506181390999:# facenumber_in_poster <=1, if the movies is great simply from poster?
1506181391000:movies %>%
1506181391000:select(facenumber_in_poster, imdb_score) %>%
1506181391001:na.omit %>%
1506181391002:mutate(is_less_or_equal_than_1 = ifelse(facenumber_in_poster <= 1, T, F)) %>%
1506181391002:group_by(is_less_or_equal_than_1) %>%
1506181391002:summarise(mean_score = mean(imdb_score))
1506181490263:movies %>%
1506181490267:select(facenumber_in_poster, imdb_score) %>%
1506181490269:na.omit %>%
1506181490270:group_by(facenumber_in_poster)
1506181507181:# more than ... face, then likelihood of the move being great is low/high?
1506181507182:movies %>%
1506181507183:select(facenumber_in_poster, imdb_score) %>%
1506181507184:na.omit %>%
1506181507187:group_by(facenumber_in_poster) %>%
1506181507189:arrange(facenumber_in_poster)
1506181635446:# more than ... face, then likelihood of the move being great is low/high?
1506181635447:movies %>%
1506181635447:select(facenumber_in_poster, imdb_score) %>%
1506181635448:na.omit %>%
1506181635449:group_by(facenumber_in_poster) %>%
1506181635449:arrange(facenumber_in_poster) %>%
1506181635450:summarise(mean_score = mean(imdb_score))
1506181662912:# more than ... face, then likelihood of the move being great is low/high?
1506181662913:movies %>%
1506181662913:select(facenumber_in_poster, imdb_score) %>%
1506181662914:na.omit %>%
1506181662914:group_by(facenumber_in_poster) %>%
1506181662915:arrange(facenumber_in_poster) %>%
1506181662916:summarise(mean_score = mean(imdb_score), count = n())
1506181692558:# more than ... face, then likelihood of the move being great is low/high?
1506181692559:movies %>%
1506181692559:select(facenumber_in_poster, imdb_score) %>%
1506181692560:na.omit %>%
1506181692560:group_by(facenumber_in_poster) %>%
1506181692561:arrange(facenumber_in_poster) %>%
1506181692561:summarise(mean_score = mean(imdb_score), count = n()) %>%
1506181692562:mutate(sum_score = mean_score * count)
1506181719643:# more than ... face, then likelihood of the move being great is low/high?
1506181719644:movies %>%
1506181719645:select(facenumber_in_poster, imdb_score) %>%
1506181719645:na.omit %>%
1506181719646:group_by(facenumber_in_poster) %>%
1506181719646:arrange(facenumber_in_poster) %>%
1506181719647:summarise(mean_score = mean(imdb_score), count = n()) %>%
1506181719647:mutate(sum_score = mean_score * count) %>%
1506181719648:mutate(c_sum_score = cumsum(sum_score))
1506181745949:# more than ... face, then likelihood of the move being great is low/high?
1506181745950:movies %>%
1506181745951:select(facenumber_in_poster, imdb_score) %>%
1506181745951:na.omit %>%
1506181745951:group_by(facenumber_in_poster) %>%
1506181745952:arrange(facenumber_in_poster) %>%
1506181745952:summarise(mean_score = mean(imdb_score), count = n()) %>%
1506181745953:mutate(sum_score = mean_score * count) %>%
1506181745953:mutate(c_sum_score = cumsum(sum_score), c_count = cumsum(count))
1506181769721:# more than ... face, then likelihood of the move being great is low/high?
1506181769722:movies %>%
1506181769722:select(facenumber_in_poster, imdb_score) %>%
1506181769723:na.omit %>%
1506181769724:group_by(facenumber_in_poster) %>%
1506181769725:arrange(facenumber_in_poster) %>%
1506181769726:summarise(mean_score = mean(imdb_score), count = n()) %>%
1506181769727:mutate(sum_score = mean_score * count) %>%
1506181769729:mutate(c_sum_score = cumsum(sum_score), c_count = cumsum(count)) %>%
1506181769730:mutate(score = c_sum_score/c_count)
1506181791791:# more than ... face, then likelihood of the move being great is low/high?
1506181791797:s2 <-
1506181791800:movies %>%
1506181791801:select(facenumber_in_poster, imdb_score) %>%
1506181791803:na.omit %>%
1506181791804:group_by(facenumber_in_poster) %>%
1506181791805:arrange(facenumber_in_poster) %>%
1506181791806:summarise(mean_score = mean(imdb_score), count = n()) %>%
1506181791817:mutate(sum_score = mean_score * count) %>%
1506181791821:mutate(c_sum_score = cumsum(sum_score), c_count = cumsum(count)) %>%
1506181791822:mutate(score = c_sum_score/c_count)
1506181814518:gglot(s2, aes(score)) +
1506181814519:geom_bar()
1506181819969:ggplot(s2, aes(score)) +
1506181819969:geom_bar()
1506181855816:ggplot(s2, aes(facenum_in_poster, score)) +
1506181855854:geom_bar(position = "dodge", stat = "identity")
1506181866184:ggplot(s2, aes(facenumber_in_poster, score)) +
1506181866185:geom_bar(position = "dodge", stat = "identity")
1506181891803:s2
1506288074262:source("config/settings.R")
1506288087261:station <- read_csv("data/201608_station_data.csv")
1506288092848:station
1506288108576:glimpse(station)
1506288142949:station %>% mutate(installation = mdy(installation))
1506288150454:station %>% mutate(installation = mdy(installation)) %>% glimpse
1506288204036:colnames(station) <- c("id","name","lat","long","dock_count","city","installation_date")
1506288204733:trip <- read_csv("data/201608_trip_data.csv")
1506288207652:trip
1506288213457:trip %>% glimpse
1506288300211:colnames(trip) <- c("id","duration","start_date","start_station_name","start_station_id","end_date","end_station_nanme","end_station_id","bike_id","subscription_type","zip_code")
1506288351084:trip %>% glimpse
1506288422752:install.packages('tibbletime')
1506288436005:library(tibbletime)
1506288442176:devtools::install_github("business-science/tibbletime")
1506288603893:library(tibbletime)
1506288624260:install.packages("tibbletime")
1506288633024:library(tibbletime)
1506288659381:source("config/settings.R")
1506288672218:library(tibbletime)
1506288678855:# read data
1506288678856:station <- read_csv("data/201608_station_data.csv")
1506288679968:station <- station %>%
1506288679968:mutate(installation = mdy(installation)) %>%
1506288679969:arrange(station_id)
1506288681024:colnames(station) <- c("id","name","lat","long","dock_count","city","installation_date")
1506288682284:trip <- read_csv("data/201608_trip_data.csv")
1506288684200:colnames(trip) <- c("id","duration","start_date","start_station_name","start_station_id","end_date","end_station_nanme","end_station_id","bike_id","subscription_type","zip_code")
1506288702586:?as_tbl_time
1506288711387:trip %>% glimpse
1506288717452:trip <- trip %>%
1506288717454:mutate(start_date = mdy_hm(start_date),
1506288717468:end_date = mdy_hm(end_date))
1506288720982:trip %>% glimpse
1506288959089:trip
1506289036969:##  ............................................................................
1506289036971:##  Time - Based                                                            ####
1506289036972:trip %>%
1506289036973:as_tbl_time(index = start_date) %>%
1506289036973:time_summarise(period = "daily")
1506289085284:?count
1506289100072:mtcars %>% count(cyl)
1506289156330:?n()
1506289176357:##  ............................................................................
1506289176359:##  Time - Based                                                            ####
1506289176360:trip %>%
1506289176361:as_tbl_time(index = start_date) %>%
1506289176362:time_summarise(period = "daily",
1506289176362:num_trips = n())
1506289279699:##  ............................................................................
1506289279701:##  Time - Based                                                            ####
1506289279702:trip %>%
1506289279703:as_tbl_time(index = start_date) %>%
1506289279704:time_summarise(period = "daily",
1506289279705:num_trips = n()) %>%
1506289279705:ggplot(aes(start_date, num_trips)) +
1506289279706:geom_point() +
1506289279706:geom_smooth()
1506289326206:##  ............................................................................
1506289326208:##  Time - Based                                                            ####
1506289326208:trip %>%
1506289326209:as_tbl_time(index = start_date) %>%
1506289326209:time_summarise(period = "daily",
1506289326210:num_trips = n()) %>%
1506289326210:ggplot(aes(start_date, num_trips)) +
1506289326210:geom_point() +
1506289326211:geom_smooth() +
1506289326212:ggtitle("Trips Each Day") +
1506289326213:ylab("Total Number of Bicycle Trips") +
1506289326215:xlab("Date")
1506289442821:trip %>%
1506289442823:as_tbl_time(index = start_date) %>%
1506289442823:time_summarise(period = "weekly",
1506289442824:num_trips = n())
1506289475028:?wday
1506289531137:trip %>%
1506289531138:mutate(day = wday(start_date)) %>%
1506289531139:count(day)
1506289543700:trip %>%
1506289543701:mutate(day = wday(start_date, label = T)) %>%
1506289543701:count(day)
1506289601130:trip %>%
1506289601132:mutate(day = wday(start_date, label = T, abbr = F)) %>%
1506289601133:count(day)
1506289685900:?ggtitle
1506289725919:trip %>%
1506289725920:mutate(day = wday(start_date, label = T, abbr = F)) %>%
1506289725920:count(day) %>%
1506289725921:ggplot(aes(day, n)) +
1506289725921:geom_bar(stat = "identity") +
1506289725922:labs(x = "Week Day",
1506289725922:y = "Number of Trips",
1506289725923:title = "Number of Trips across a Week")
1506289786923:install.packages("ggvis")
1506289792323:library(ggvis)
1506289841180:trip %>%
1506289841182:mutate(day = wday(start_date, label = T, abbr = F)) %>%
1506289841185:count(day) %>%
1506289841188:ggvis(~ day, ~ n) %>%
1506289841189:layer_bars(stat = "identity")
1506289849207:?layer_bars
1506289946727:?compute_bin
1506289954181:trip %>%
1506289954184:mutate(day = wday(start_date, label = T, abbr = F)) %>%
1506289954184:count(day) %>%
1506289954185:ggvis(~ day, ~ n) %>%
1506289954186:layer_bars()
1506290078330:trip %>%
1506290078333:mutate(day = wday(start_date, label = T, abbr = F)) %>%
1506290078334:count(day) %>%
1506290078334:ggplot(aes(day, n)) +
1506290078335:geom_bar(stat = "identity") +
1506290078336:labs(x = "Week Day",
1506290078336:y = "Number of Trips",
1506290078337:title = "Number of Trips across a Week")
1506290114805:trips %>% glimpse
1506290120340:trip %>% glimpse
1506290169175:?as_period
1506290242706:trips %>%
1506290242709:as_tbl_time(period = "minute",
1506290242710:num_tips = n())
1506290248299:trip %>%
1506290248300:as_tbl_time(period = "minute",
1506290248301:num_tips = n())
1506290301054:trip %>%
1506290301055:as_tbl_time(index = start_date) %>%
1506290301056:time_summarise(period = "munite",
1506290301057:num_trips = n())
1506290307826:trip %>%
1506290307827:as_tbl_time(index = start_date) %>%
1506290307828:time_summarise(period = "minute",
1506290307828:num_trips = n())
1506290349695:?minute
1506290389384:trip$start_date[1]
1506290394614:trip$start_date[1] %>% minute
1506290425977:?hs
1506290428148:??hs
1506290477014:?mdy
1506290531548:?format
1506290562031:trip$start_date[1] %>% format("%H:%M")
1506290596126:trip %>%
1506290596128:mutate(time = format(start_date, "%H:%M"))
1506290606049:trip %>%
1506290606050:mutate(time = format(start_date, "%H:%M")) %>% glimpse
1506290622385:trip %>%
1506290622387:mutate(time = format(start_date, "%H:%M")) %>%
1506290622388:count(time)
1506290660088:trip %>%
1506290660089:mutate(time = format(start_date, "%H:%M")) %>%
1506290660090:count(time) %>%
1506290660090:ggplot(aes(time, n)) +
1506290660091:geom_bar()
1506290668712:?stat_bin
1506290674708:trip %>%
1506290674710:mutate(time = format(start_date, "%H:%M")) %>%
1506290674711:count(time) %>%
1506290674712:ggplot(aes(time, n)) +
1506290674712:geom_bar() +stat_bin()
1506290684619:GeomBar
1506290688764:geom_bar()
1506290704410:?geom_bar
1506290723793:?stat_count
1506290768813:trip %>%
1506290768814:mutate(time = format(start_date, "%H:%M")) %>%
1506290768816:count(time) %>%
1506290768817:ggplot(aes(time, n)) +
1506290768819:geom_bar()
1506290779145:trip %>%
1506290779146:mutate(time = format(start_date, "%H:%M")) %>%
1506290779146:count(time) %>%
1506290779147:ggplot(aes(time)) +
1506290779147:geom_bar()
1506290804702:trip %>%
1506290804703:mutate(time = format(start_date, "%H:%M")) %>%
1506290804704:count(time) %>%
1506290804704:ggplot(aes(time, n)) +
1506290804705:geom_bar(stat = "identity")
1506290940439:?wday
1506290946799:?whour
1506290949552:?hour
1506290957393:?minute
1506290980096:?`hour<-,Period-method`
1506290985240:?hours
1506291006210:?hms
1506291035184:trip$start_date[1] %>% hm
1506291045889:trip$start_date[1] %>% ms
1506291055983:trip$start_date[1] %>% lubridate::hms()
1506291084652:trip$start_date[1] %>% format("%H:%M") %>%  lubridate::hms()
1506291088118:trip$start_date[1] %>% format("%H:%M")
1506291097501:ms(c("09:10", "09:02", "1:10"))
1506291111350:trip$start_date[1] %>% format("%H:%M") %>% ms
1506291125058:ms(c("09:10", "09:02", "1:10"))
1506291139396:hm("6,5")
1506291146751:hm(c("09:10", "09:02", "1:10"))
1506291155971:%>% class
1506291160059:hm(c("09:10", "09:02", "1:10") %>% class
1506291168343:hm(c("09:10", "09:02", "1:10")) %>% class
1506291185453:hm("00:10")
1506291194782:trip$start_date[1] %>% format("%H:%M") %>% hm
1506291215822:trip %>%
1506291215823:mutate(time = format(start_date, "%H:%M")) %>%
1506291215824:mutate(time = hm(time)) %>%
1506291215825:count(time)
1506291262347:hm(c("09:10", "09:02", "1:10"), quiet = T)
1506291268394:hm(c("09:10", "09:02", "1:10"))
1506291282772:hms("7 6 5", "3:23:::2", "2 : 23 : 33", "Finished in 9 hours, 20 min and 4 seconds")
1506291297928:hm("7 6")
1506291314750:hm("7 6", quiet = T)
1506291326188:?hm
1506291396139:trip %>%
1506291396140:mutate(time = format(start_date, "%H:%M"))
1506291402273:trip %>%
1506291402275:mutate(time = format(start_date, "%H:%M")) %>% glimpse
1506291410704:trip %>%
1506291410705:mutate(time = format(start_date, "%H:%M")) %>%
1506291410705:mutate(time = hm(time)) %>% glimpse
1506291463914:?geom_line
1506291481171:trip %>%
1506291481172:mutate(time = format(start_date, "%H:%M")) %>%
1506291481172:mutate(time = hm(time)) %>%
1506291481173:count(time) %>%
1506291481173:ggplot(aes(time, n)) +
1506291481173:geom_line()
1506291488002:trip %>%
1506291488002:mutate(time = format(start_date, "%H:%M")) %>%
1506291488003:mutate(time = hm(time)) %>%
1506291488003:count(time) %>%
1506291493644:trip %>%
1506291493644:mutate(time = format(start_date, "%H:%M")) %>%
1506291493645:mutate(time = hm(time)) %>%
1506291493645:count(time)
1506291505751:trip %>%
1506291505753:mutate(time = format(start_date, "%H:%M")) %>%
1506291505755:count(time) %>%
1506291505757:ggplot(aes(time, n)) +
1506291505771:geom_line()
1506291510855:y
1506291522836:trip %>%
1506291522837:mutate(time = format(start_date, "%H:%M")) %>%
1506291522845:count(time)
1506291581934:?zoo::as.Date.ts
1506291702093:trip %>%
1506291702096:mutate(time = format(start_date, "%H:%M")) %>%
1506291702098:count(time) %>%
1506291702100:ggplot(aes(time, n)) +
1506291702102:geom_path()
1506291708166:yes
1506291722489:?geom_line
1506291743857:trip %>%
1506291743858:mutate(time = format(start_date, "%H:%M")) %>%
1506291743859:count(time) %>%
1506291743860:ggplot(aes(time)) +
1506291743862:geom_bar()
1506291863905:?axis
1506291901194:?ggplot2::xlab
1506291928625:trip %>%
1506291928629:mutate(time = format(start_date, "%H:%M")) %>%
1506291928630:count(time) %>%
1506291928631:ggplot(aes(time,n)) +
1506291928632:geom_bar(stat = "identity")
1506291946289:time
1506292036492:trip$start_date[1]
1506292041233:trip$start_date[1] %>% hour %>% class()
1506292065550:trip$start_date[1] %>% (hour(.) + minute(.))
1506292074849:a = trip$start_date[1]
1506292076728:hour(a)
1506292078937:minute(a)
1506292086477:hour(a) + minute(a)
1506292089967:hour(a) + minute(a) =1
1506292092525:hour(a) + minute(a) +1
1506292094927:?hour
1506292105813:x <- ymd("2012-03-26")
1506292110539:hour)x
1506292113391:hour(x)
1506292119469:hour(x ) <-  2
1506292120758:x
1506292159848:x %>% class
1506292167144:x <- ymd("2012-03-26")
1506292168790:x %>% class
1506292324705:?time_collapse
1506292337761:data(FB)
1506292337780:FB <- as_tbl_time(FB, date)
1506292337791:# Collapse to weekly dates
1506292337792:time_collapse(FB, period = "weekly")
1506292393625:trip %>%
1506292393628:as_tbl_time(index = start_date) %>%
1506292393629:time_collapse(period = "hour")
1506292399294:trip %>%
1506292399295:as_tbl_time(index = start_date) %>%
1506292399295:time_collapse(period = "hourly")
1506292475102:?timespan
1506292483746:duration(3690, "seconds")
1506292483754:period(3690, "seconds")
1506292491650:months(6) + days(1)
1506292496578:months(6) + days(1) %>% class
1506292511067:a =
1506292511068:months(6) + days(1)
1506292514016:class(a)
1506292571423:trip %>%
1506292571425:mutate(time = hour(start_date) + minute(start_date)) %>% glimpse
1506292602436:interval(ymd_hms("2009-08-09 13:01:30"), ymd_hms("2009-08-09 12:00:00"))
1506292607271:%>% class
1506292613527:interval(ymd_hms("2009-08-09 13:01:30"), ymd_hms("2009-08-09 12:00:00")) %>% class
1506292664917:period(c(1, -60), c("hour", "minute"))
1506292674497:period(c(1, -60), c("hour", "minute")) %>% class
1506292740608:c("hour", "minute")) %>% glimpse
1506292748740:trip %>%
1506292748740:mutate(time = period(c(hour(start_date), minute(start_date)),
1506292748741:c("hour", "minute"))) %>% glimpse
1506292763458:a
1506292770320:a = trip$start_date[1]
1506292803405:period(c(hour(a), minute(a)), c("hour", "minute"))
1506292826951:period (second = 90, minute = 5)
1506292856992:trip %>%
1506292856993:mutate(time = period(hour = hour(start_date),
1506292856994:minute = minute(start_date))) %>% glimpse
1506292921452:trip %>%
1506292921455:mutate(time = period(hour = hour(start_date),
1506292921455:minute = minute(start_date))) %>% plot(.$time)
1506292956528:trip %>%
1506292956529:mutate(time = period(hour = hour(start_date),
1506292956530:minute = minute(start_date))) %>% count(time)
1506292994625:years(x = 1)
1506292998707:months(x, abbreviate)
1506293005568:months(1, abbreviate)
1506293035785:leap <- ymd("2012-02-29")
1506293035794:"2012-02-29 UTC"
1506293035795:leap %m+% years(1)
1506293228179:trip %>%
1506293228181:mutate(time = hour(start_date) + minute(start_date)/60) %>% glimpse
1506293376750:trip %>%
1506293376754:mutate(time = format(start_date, "%H:%M")) %>%
1506293376755:count(time) %>%
1506293376757:ggplot(aes(time,n)) +
1506293376758:geom_bar(stat = "identity") +
1506293376758:theme(axis.text.x = c(1:14))
1506293383476:trip %>%
1506293383476:mutate(time = format(start_date, "%H:%M")) %>%
1506293383477:count(time) %>%
1506293383478:ggplot(aes(time,n)) +
1506293383479:geom_bar(stat = "identity") +
1506293383481:theme(axis.text.x = "a")
1506293387340:trip %>%
1506293387341:mutate(time = format(start_date, "%H:%M")) %>%
1506293387342:count(time) %>%
1506293387342:ggplot(aes(time,n)) +
1506293387343:geom_bar(stat = "identity") +
1506293387343:theme(axis.text.x = NULL)
1506293411685:trip %>%
1506293411687:mutate(time = format(start_date, "%H:%M")) %>%
1506293411689:count(time) %>%
1506293411690:ggplot(aes(time,n)) +
1506293411692:geom_bar(stat = "identity") +
1506293411693:theme(axis.text.x = element_blank())
1506293454577:trip %>%
1506293454578:mutate(time = format(start_date, "%H:%M")) %>%
1506293454578:count(time) %>%
1506293454579:ggplot(aes(time,n)) +
1506293454579:geom_bar(stat = "identity") +
1506293454580:theme_void()
1506293475152:trip %>%
1506293475153:mutate(time = format(start_date, "%H:%M")) %>%
1506293475153:count(time) %>%
1506293475154:ggplot(aes(time,n)) +
1506293475154:geom_bar(stat = "identity") +
1506293475154:labs(x = "")
1506293598496:?scale_x_time
1506293609017:trip %>%
1506293609018:mutate(time = format(start_date, "%H:%M")) %>%
1506293609019:count(time) %>%
1506293609019:ggplot(aes(time,n)) +
1506293609020:geom_bar(stat = "identity") +
1506293609020:scale_x_time() +
1506293609021:labs(x = "")
1506293628247:last_month <- Sys.Date() - 0:29
1506293628249:df <- data.frame(
1506293628250:date = last_month,
1506293628250:price = runif(30)
1506293628251:)
1506293628253:base <- ggplot(df, aes(date, price)) +
1506293628254:geom_line()
1506293628267:# The date scale will attempt to pick sensible defaults for
1506293628268:# major and minor tick marks. Override with date_breaks, date_labels
1506293628268:# date_minor_breaks arguments.
1506293628269:base + scale_x_date(date_labels = "%b %d")
1506293636800:df
1506293658089:a
1506293660109:a = trip %>%
1506293660110:mutate(time = format(start_date, "%H:%M")) %>%
1506293660110:count(time)
1506293661363:a
1506293671619:base <- ggplot(df, aes(date, price)) +
1506293671620:geom_line()
1506293674343:base
1506293691454:base + scale_x_date(date_breaks = "1 week", date_labels = "%W")
1506293780743:trip %>%
1506293780745:mutate(time = hour(start_date) + minute(start_date)/60) %>%
1506293780746:trip %>%
1506293780747:as_tbl_time(index = start_date)
1506293784107:trip %>%
1506293784108:mutate(time = hour(start_date) + minute(start_date)/60) %>%
1506293784111:trip %>%
1506293784112:as_tbl_time(index = start_date)
1506293798728:trip %>%
1506293798729:as_tbl_time(index = start_date)
1506293832032:?time_nest
1506293840961:base + scale_x_date(date_breaks = "1 week", date_labels = "%W")
1506293848444:data(FB)
1506293848461:FB <- as_tbl_time(FB, date)
1506293848474:# Nest yearly
1506293848474:time_nest(FB, "yearly")
1506293887904:trip %>%
1506293887907:as_tbl_time(index = start_date) %>%
1506293887908:time_nest(period = "hourly")
1506293993050:trip %>%
1506293993052:mutate(time = hour(start_date) + minute(start_date)/60) %>%
1506293993054:ggplot(aes(time)) +
1506293993055:geom_histogram()
1506294032751:trip %>%
1506294032755:mutate(time = hour(start_date) + minute(start_date)/60) %>%
1506294032757:ggplot(aes(time)) +
1506294032758:geom_histogram(bins = 12*60)
1506294076616:trip %>%
1506294076617:mutate(time = hour(start_date) + minute(start_date)/60) %>%
1506294076618:ggplot(aes(time)) +
1506294076618:geom_histogram(bins = 12*60) +
1506294076618:scale_x_continuous(c(0,24))
1506294085309:trip %>%
1506294085310:mutate(time = hour(start_date) + minute(start_date)/60) %>%
1506294085312:ggplot(aes(time)) +
1506294085314:geom_histogram(bins = 12*60) +
1506294085315:xlim(c(0,24))
1506294175564:?annotate
1506294200073:trip %>%
1506294200074:mutate(time = hour(start_date) + minute(start_date)/60) %>%
1506294200075:ggplot(aes(time)) +
1506294200075:geom_histogram(bins = 12*60) +
1506294200076:labs(x = "Daytime 24 Hour Clock",
1506294200076:y = "Number of Trips") +
1506294200077:annotate("text", x = 9, y = 13000, label = "9:00 AM",
1506294200077:color = "orange", size = 7) +
1506294200078:annotate("text", x = 17, y = 13000, label = "5:00 PM",
1506294200079:color = "red", size = 7)
1506294251473:trip %>%
1506294251475:mutate(time = hour(start_date) + minute(start_date)/60) %>%
1506294251476:ggplot(aes(time)) +
1506294251476:geom_histogram(bins = 12*60) +
1506294251477:labs(x = "Daytime 24 Hour Clock",
1506294251477:y = "Number of Trips") +
1506294251477:annotate("text", x = 9, y = 2000, label = "9:00 AM",
1506294251478:color = "orange", size = 7) +
1506294251478:annotate("text", x = 17, y = 2000, label = "5:00 PM",
1506294251479:color = "red", size = 7)
1506294466658:trip %>%
1506294466663:mutate(time = hour(start_date) + minute(start_date)/60) %>%
1506294466664:ggplot(aes(time)) +
1506294466665:geom_histogram(bins = 12*60) +
1506294466665:labs(x = "Daytime 24 Hour Clock",
1506294466666:y = "Number of Trips")
1506294579437:#   ____________________________________________________________________________
1506294579438:#   Duration - Based                                                        ####
1506294579439:trip %>% glimpse
1506294596267:trip <- read_csv("data/201608_trip_data.csv")
1506294600086:colnames(trip) <- c("id","duration","start_date","start_station_name","start_station_id","end_date","end_station_nanme","end_station_id","bike_id","subscription_type","zip_code")
1506294601771:trip <- trip %>%
1506294601772:mutate(start_date = mdy_hm(start_date),
1506294601773:end_date = mdy_hm(end_date))
1506294687261:##  ............................................................................
1506294687263:##  Time - Based                                                            ####
1506294687263:trip %>%
1506294687265:as_tbl_time(index = start_date) %>%
1506294687266:time_summarise(period = "daily",
1506294687267:num_trips = n()) %>%
1506294687268:ggplot(aes(start_date, num_trips)) +
1506294687269:geom_point() +
1506294687269:geom_smooth() +
1506294687270:labs(x = "Date",
1506294687271:y = "Total Number of Bicycle Trips",
1506294687271:title = "Trips Each Day")
1506294740615:##  ............................................................................
1506294740617:##  Time - Based                                                            ####
1506294740619:trip %>%
1506294740621:as_tbl_time(index = start_date) %>%
1506294740622:time_summarise(period = "daily",
1506294740623:num_trips = n()) %>%
1506294740624:ggplot(aes(start_date, num_trips)) +
1506294740624:geom_point() +
1506294740625:geom_line() +
1506294740626:labs(x = "Date",
1506294740627:y = "Total Number of Bicycle Trips",
1506294740634:title = "Trips Each Day")
1506294756641:trip %>%
1506294756642:as_tbl_time(index = start_date) %>%
1506294756643:time_summarise(period = "daily",
1506294756643:num_trips = n())
1506295391434:##  ............................................................................
1506295391437:##  Time - Based                                                            ####
1506295391438:trip %>%
1506295391440:as_tbl_time(index = start_date) %>%
1506295391441:time_summarise(period = "daily",
1506295391442:num_trips = n()) %>%
1506295391443:ggplot(aes(start_date, num_trips)) +
1506295391444:geom_point() +
1506295391445:geom_smooth() +
1506295391446:labs(x = "Date",
1506295391448:y = "Total Number of Bicycle Trips",
1506295391450:title = "Trips Each Day")
1506295576129:##  ............................................................................
1506295576132:##  Time - Based                                                            ####
1506295576133:trip %>%
1506295576135:as_tbl_time(index = start_date) %>%
1506295576136:mutate(day = wday(start_date, label = T, abbr = F)) %>%
1506295576136:time_summarise(period = "daily",
1506295576137:num_trips = n()) %>%
1506295576138:ggplot(aes(start_date, num_trips)) +
1506295576138:geom_point() +
1506295576139:geom_smooth() +
1506295576140:labs(x = "Date",
1506295576146:y = "Total Number of Bicycle Trips",
1506295576148:title = "Trips Each Day")
1506295584725:####
1506295584726:trip %>%
1506295584726:as_tbl_time(index = start_date) %>%
1506295584728:mutate(day = wday(start_date, label = T, abbr = F))
1506295591587:trip %>%
1506295591588:as_tbl_time(index = start_date) %>%
1506295591589:mutate(day = wday(start_date, label = T, abbr = F)) %>%
1506295591589:time_summarise(period = "daily",
1506295591590:num_trips = n()) %>%
1506295598288:trip %>%
1506295598289:as_tbl_time(index = start_date) %>%
1506295598290:mutate(day = wday(start_date, label = T, abbr = F)) %>%
1506295598290:time_summarise(period = "daily",
1506295598291:num_trips = n())
1506295608806:##  ............................................................................
1506295608807:##  Time - Based                                                            ####
1506295608807:trip %>%
1506295608807:as_tbl_time(index = start_date) %>%
1506295608808:mutate(day = wday(start_date, label = T, abbr = F)) %>%
1506295608808:time_summarise(period = "daily",
1506295608809:num_trips = n(), -day) %>%
1506295608809:ggplot(aes(start_date, num_trips)) +
1506295608811:geom_point() +
1506295608812:geom_smooth() +
1506295608813:labs(x = "Date",
1506295608814:y = "Total Number of Bicycle Trips",
1506295608815:title = "Trips Each Day")
1506295620375:time_summarise()
1506295624249:?time_summarise
1506295648958:trip %>%
1506295648959:as_tbl_time(index = start_date) %>%
1506295648960:time_summarise(period = "daily",
1506295648961:num_trips = n(),
1506295648961:day = wday(start_date, label = T, abbr = F))
1506295670862:####
1506295670863:trip %>%
1506295670863:as_tbl_time(index = start_date) %>%
1506295670864:time_summarise(period = "daily",
1506295670864:num_trips = n(),
1506295670865:day = wday(start_date, label = T, abbr = F)) %>%
1506295670865:mutate(day = wday(start_date, label = T, abbr = F))
1506295690243:####
1506295690244:trip %>%
1506295690245:as_tbl_time(index = start_date) %>%
1506295690245:time_summarise(period = "daily",
1506295690246:num_trips = n()) %>%
1506295690246:mutate(day = wday(start_date, label = T, abbr = F))
1506295851146:n <- 750
1506295851582:df <- data.frame(datetime = as.POSIXct('2015-01-01') + (1:n)*3600,
1506295851583:value = rnorm(n))
1506295853199:df
1506295857003:df <- df %>%
1506295857005:mutate(day_of_week = datetime %>% strftime('%A'),
1506295857007:week_nr = datetime %>% strftime('%W')) %>%
1506295857007:mutate(value = ifelse(day_of_week %in% c('Saturday', 'Sunday'),
1506295857008:value - runif(n) * 3, value))
1506295860557:df
1506295898582:ggplot() +
1506295898582:geom_line(data=df, aes(datetime, value)) +
1506295898583:ggtitle('timeseries without weekends highlighted')
1506295916264:y_min = (df$value %>% min) - 1
1506295916480:y_max = (df$value %>% max) + 1
1506295917649:df_highlight <- df %>%
1506295917650:filter(day_of_week %in% c('Saturday', 'Sunday')) %>%
1506295917655:group_by(week_nr) %>%
1506295917656:summarise(xmin = min(datetime), xmax = max(datetime))
1506295920115:dfhi
1506295921206:df_highlight
1506301549026:df
1506301562163:df <- data.frame(datetime = as.POSIXct('2015-01-01') + (1:n)*3600,
1506301562165:value = rnorm(n)) %>%
1506301562167:as_tibble()
1506301562856:df <- df %>%
1506301562856:mutate(day_of_week = datetime %>% strftime('%A'),
1506301562858:week_nr = datetime %>% strftime('%W')) %>%
1506301562859:mutate(value = ifelse(day_of_week %in% c('Saturday', 'Sunday'),
1506301562860:value - runif(n) * 3, value))
1506301565184:df
1506301571409:df <- data.frame(datetime = as.POSIXct('2015-01-01') + (1:n)*3600,
1506301571410:value = rnorm(n)) %>%
1506301571411:as_tibble()
1506301573092:df
1506301586844:?strftime
1506301601933:trips
1506301603609:trip
1506301779225:weather <- read_csv("data/201608_weather_data.csv")
1506301781446:weather
1506301787625:weather %>% glimpse()
1506301907536:station %>% glimpse()
1506301932281:# add trip stat_long and end_long
1506301932283:trip_san_jose <- trip %>%
1506301932285:filter(start_station_id %in% station_san_jose) %>%
1506301932287:filter(end_station_id %in% station_san_jose) %>%
1506301932287:group_by(start_station_id, end_station_id) %>%
1506301932288:summarise(num_trip = n()) %>%
1506301932289:left_join(station %>% select(id, lat, long),
1506301932289:by = c("start_station_id" = "id")) %>%
1506301932290:rename(start_long = long, start_lat = lat) %>%
1506301932291:left_join(station %>% select(id, lat, long),
1506301932291:by = c("end_station_id" = "id")) %>%
1506301932293:rename(end_long = long, end_lat = lat)
1506301934545:# in this part only do analysis on San Jose
1506301934545:station_san_jose <- station %>%
1506301934547:filter(city == "San Jose") %>%
1506301934548:select(id) %>%
1506301934549:t %>%
1506301934550:as.integer()
1506301937746:station_san_jose
1506301943235:# add trip stat_long and end_long
1506301943236:trip_san_jose <- trip %>%
1506301943236:filter(start_station_id %in% station_san_jose) %>%
1506301943237:filter(end_station_id %in% station_san_jose) %>%
1506301943237:group_by(start_station_id, end_station_id) %>%
1506301943238:summarise(num_trip = n()) %>%
1506301943238:left_join(station %>% select(id, lat, long),
1506301943239:by = c("start_station_id" = "id")) %>%
1506301943241:rename(start_long = long, start_lat = lat) %>%
1506301943243:left_join(station %>% select(id, lat, long),
1506301943243:by = c("end_station_id" = "id")) %>%
1506301943244:rename(end_long = long, end_lat = lat)
1506301948746:trip_san_jose
1506301962104:trip_san_jose %>% glimpse()
1506301989248:trip %>% glimpse
1506302186743:# add trip stat_long and end_long
1506302186745:trip_san_jose <- trip %>%
1506302186750:filter(start_station_id %in% station_san_jose) %>%
1506302186752:filter(end_station_id %in% station_san_jose) %>%
1506302186754:group_by(start_station_id, end_station_id) %>%
1506302186755:summarise(num_trip = n()) %>%
1506302186757:left_join(station %>% select(id, lat, long),
1506302186759:by = c("start_station_id" = "id")) %>%
1506302186760:rename(start_long = long, start_lat = lat) %>%
1506302186762:left_join(station %>% select(id, lat, long),
1506302186762:by = c("end_station_id" = "id")) %>%
1506302186763:rename(end_long = long, end_lat = lat)
1506302190220:trip_san_jose
1506302205980:station1 <- station %>%
1506302205982:filter(city == "San Jose") %>%
1506302205984:left_join(trip_san_jose %>%
1506302205985:summarise(num_trip = sum(num_trip)),
1506302205988:by = c("id" = "start_station_id"))
1506302208174:station1
1506302290998:# in this part only do analysis on San Jose
1506302290999:station_id_san_jose <- station %>%
1506302290999:filter(city == "San Jose") %>%
1506302291000:select(id) %>%
1506302291000:t %>%
1506302291001:as.integer()
1506302291910:# add trip stat_long and end_long
1506302291912:trip_san_jose <- trip %>%
1506302291913:filter(start_station_id %in% station_id_san_jose) %>%
1506302291915:filter(end_station_id %in% station_id_san_jose) %>%
1506302291916:group_by(start_station_id, end_station_id) %>%
1506302291917:summarise(num_trip = n()) %>%
1506302291917:left_join(station %>% select(id, lat, long),
1506302291918:by = c("start_station_id" = "id")) %>%
1506302291919:rename(start_long = long, start_lat = lat) %>%
1506302291920:left_join(station %>% select(id, lat, long),
1506302291920:by = c("end_station_id" = "id")) %>%
1506302291921:rename(end_long = long, end_lat = lat)
1506302292604:station_san_jose <- station %>%
1506302292604:filter(city == "San Jose") %>%
1506302292605:left_join(trip_san_jose %>%
1506302292605:summarise(num_trip = sum(num_trip)),
1506302292606:by = c("id" = "start_station_id"))
1506302293463:# number of trips between stations in San Jose
1506302293464:g <-
1506302293465:ggplot(trip_san_jose) +
1506302293465:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat,
1506302293466:size=num_trip, colour=num_trip, alpha=num_trip)) +
1506302293466:geom_point(data=station_san_jose, aes(x=long, y=lat), size=4) +
1506302293467:geom_text_repel(data=station_san_jose,
1506302293467:aes(x=long, y=lat, label=name), size=4) +
1506302293468:theme_light(base_size=10) +
1506302293468:xlab("") +
1506302293469:ylab("") +
1506302293471:scale_colour_gradientn(colors=c("#dddddd", "#20beff"),
1506302293472:limits=c(0, max(trip_san_jose$num_trip)),
1506302293474:name="Number of Trips") +
1506302293476:scale_alpha(limits=c(0, max(trip_san_jose$num_trip)), guide=FALSE) +
1506302293477:scale_size(limits=c(0, max(trip_san_jose$num_trip)), guide=FALSE) +
1506302293479:coord_fixed() +
1506302293480:theme(axis.line=element_blank(),
1506302293481:axis.text.x=element_blank(),
1506302293482:axis.text.y=element_blank(),
1506302293483:axis.ticks=element_blank(),
1506302293485:axis.title.x=element_blank(),
1506302293486:axis.title.y=element_blank(),
1506302293487:panel.grid=element_blank(),
1506302293490:panel.border=element_blank())
1506302296698:g
1506302315516:# number of trips between stations in San Jose
1506302315517:g <-
1506302315519:ggplot(trip_san_jose) +
1506302315521:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat,
1506302315522:size=num_trip, colour=num_trip, alpha=num_trip)) +
1506302315522:geom_point(data=station_san_jose, aes(x=long, y=lat), size=4) +
1506302315523:geom_text_repel(data=station_san_jose,
1506302315524:aes(x=long, y=lat, label=name), size=4) +
1506302315525:theme_light(base_size=10) +
1506302315526:xlab("") +
1506302315527:ylab("") +
1506302315529:scale_colour_gradientn(colors=c("#dddddd", "#20beff"),
1506302315530:limits=c(0, max(trip_san_jose$num_trip)),
1506302315531:name="Number of Trips") +
1506302315533:scale_alpha(limits=c(0, max(trip_san_jose$num_trip)), guide=FALSE) +
1506302315534:scale_size(limits=c(0, max(trip_san_jose$num_trip)), guide=FALSE) +
1506302315534:coord_fixed() +
1506302315535:theme_void()
1506302319669:g
1506302351679:# using leaflet
1506302351681:l <-
1506302351682:leaflet(station) %>%
1506302351684:addTiles() %>%  # Add default OpenStreetMap map tiles
1506302351685:addMarkers(lng = ~ long, lat = ~ lat, label = ~ name)
1506302352641:#   radius = ~ num_trip*0.02,
1506302352642:#   stroke = FALSE,
1506302352643:#   fillOpacity = 0.5,
1506302352643:#   label = ~ name
1506302352643:# ) %>%
1506302352644:# addPolylines(data = trip_san_jose,
1506302352644:#              lng = ~ as.vector(rbind(start_long, end_long)),
1506302352644:#              lat = ~ as.vector(rbind(start_lat, end_lat)),
1506302352645:#              color = "grey"
1506302352645:#                )
1506302352646:l
1506302385735:trip_san_jose
1506302391096:trip
1506302408725:station_san_jose
1506302531073:trip_all <- trip %>%
1506302531075:group_by(start_station_id, end_station_id) %>%
1506302531075:summarise(num_trip = n()) %>%
1506302531076:left_join(station %>% select(id, lat, long),
1506302531078:by = c("start_station_id" = "id")) %>%
1506302531080:rename(start_long = long, start_lat = lat) %>%
1506302531081:left_join(station %>% select(id, lat, long),
1506302531084:by = c("end_station_id" = "id")) %>%
1506302531085:rename(end_long = long, end_lat = lat)
1506302536690:# number of trips between stations in San Jose
1506302536691:g <-
1506302536692:ggplot(trip_all) +
1506302536692:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat,
1506302536693:size=num_trip, colour=num_trip, alpha=num_trip)) +
1506302536694:geom_point(data=station_san_jose, aes(x=long, y=lat), size=4) +
1506302536696:geom_text_repel(data=station_san_jose,
1506302536697:aes(x=long, y=lat, label=name), size=4) +
1506302536699:theme_light(base_size=10) +
1506302536700:xlab("") +
1506302536701:ylab("") +
1506302536702:scale_colour_gradientn(colors=c("#dddddd", "#20beff"),
1506302536703:limits=c(0, max(trip_san_jose$num_trip)),
1506302536705:name="Number of Trips") +
1506302536705:scale_alpha(limits=c(0, max(trip_san_jose$num_trip)), guide=FALSE) +
1506302536706:scale_size(limits=c(0, max(trip_san_jose$num_trip)), guide=FALSE) +
1506302536707:coord_fixed() +
1506302536707:theme_void()
1506302538033:# theme(axis.line=element_blank(),
1506302538035:#       axis.text.x=element_blank(),
1506302538037:#       axis.text.y=element_blank(),
1506302538038:#       axis.ticks=element_blank(),
1506302538039:#       axis.title.x=element_blank(),
1506302538040:#       axis.title.y=element_blank(),
1506302538041:#       panel.grid=element_blank(),
1506302538042:#       panel.border=element_blank())
1506302538042:g
1506302583094:# number of trips between stations in San Jose
1506302583096:g <-
1506302583098:ggplot(trip_san_jose) +
1506302583099:geom_segment(aes(x=start_long, xend=end_long, y=start_lat, yend=end_lat,
1506302583100:size=num_trip, colour=num_trip, alpha=num_trip)) +
1506302583101:geom_point(data=station_san_jose, aes(x=long, y=lat), size=4) +
1506302583103:geom_text_repel(data=station_san_jose,
1506302583105:aes(x=long, y=lat, label=name), size=4) +
1506302583106:theme_light(base_size=10) +
1506302583107:xlab("") +
1506302583113:ylab("") +
1506302583115:scale_colour_gradientn(colors=c("#dddddd", "#20beff"),
1506302583116:limits=c(0, max(trip_san_jose$num_trip)),
1506302583116:name="Number of Trips") +
1506302583117:scale_alpha(limits=c(0, max(trip_san_jose$num_trip)), guide=FALSE) +
1506302583118:scale_size(limits=c(0, max(trip_san_jose$num_trip)), guide=FALSE) +
1506302583118:coord_fixed() +
1506302583119:theme_void()
1506302583963:# theme(axis.line=element_blank(),
1506302583964:#       axis.text.x=element_blank(),
1506302583966:#       axis.text.y=element_blank(),
1506302583967:#       axis.ticks=element_blank(),
1506302583968:#       axis.title.x=element_blank(),
1506302583969:#       axis.title.y=element_blank(),
1506302583970:#       panel.grid=element_blank(),
1506302583971:#       panel.border=element_blank())
1506302583972:g
1506302874134:weather
1506302881284:weather %>% glimpse
1506302929318:weather %>% summarise(Events)
1506302939456:weather$Events %>% summary()
1506302953415:weather %>% count(events)
1506302958563:weather %>% count(Events)
1506303258934:X201608_weather_data_1_ <- read_csv("data/201608_weather_data.csv")
1506303299151:Weather <- read_csv("data/201608_weather_data.csv")
1506303299884:Weather94107 <- Weather[Weather$ZIP==94107,]
1506303312489:Weather94107[is.na(Weather94107)] <- 0
1506303317218:Weather94107
1506303322978:Weather94107 %>% glimpse
1506303350251:weather %>% glimpse
1506303358950:weather %>% count(Events)
1506303451221:weather <- weather %>%
1506303451225:mutate(Events = factor(Events))
1506303458221:weather %>% count(Events)
1506303483704:levels(weather$Events)
1506303509022:?recode
1506303539294:weather <- read_csv("data/201608_weather_data.csv")
1506303839104:# rename
1506303839107:names(weather)
1506303848396:# rename
1506303848401:a <- names(weather)
1506303901913:gsub(" ", "_", a)
1506304018567:?gsub
1506304056618:txt <- "a test of capitalizing"
1506304056620:gsub("(\\w)(\\w*)", "\\U\\1\\L\\2", txt, perl=TRUE)
1506304093180:gsub("(.*[a-z])()([A-Z].*", "\\2", a)
1506304105009:gsub("(.*[a-z])()([A-Z].*)", "\\2", a)
1506304153829:gsub("(.*[a-z])()([A-Z].*)", "\\L\\2", a)
1506304162809:gsub("(.*[a-z])()([A-Z].*)", "\\_\\2", a)
1506304173579:gsub("(.*[a-z])()([A-Z].*)", "\\_", a)
1506304187595:gsub("(.*[a-z])()([A-Z].*)", "\\E_", a)
1506304265559:gsub("(.*[a-z])()([A-Z].*)", "\\1\\_\\2\\3", a)
1506304288816:# rename
1506304288817:a <- names(weather)
1506304289343:a <- gsub(" ", "_", a)
1506304289732:gsub("(.*[a-z])()([A-Z].*)", "\\1\\_\\2\\3", a)
1506304328306:# rename
1506304328311:names(weather) %>%
1506304328312:gsub(" ", "_", .) %>%
1506304328313:gsub("(.*[a-z])()([A-Z].*)", "\\1\\_\\2\\3", .)
1506304333954:# rename
1506304333957:names(weather) %>%
1506304333958:gsub(" ", "_", .) %>%
1506304333958:gsub("(.*[a-z])()([A-Z].*)", "\\1\\_\\2\\3", .) %>%
1506304333959:tolower()
1506304377568:# read data
1506304377569:station <- read_csv("data/201608_station_data.csv")
1506304377770:station <- station %>%
1506304377771:mutate(installation = mdy(installation)) %>%
1506304377772:arrange(station_id)
1506304380117:station
1506304390973:station %>% glimpse
1506304397798:trip
1506304403528:names(trip)
1506304420803:trip <- read_csv("data/201608_trip_data.csv")
1506304429551:trip %>% names()
1506304467469:weather <- read_csv("data/201608_weather_data.csv")
1506304470623:colnames(trip) <- c("id","duration","start_date","start_station_name","start_station_id","end_date","end_station_nanme","end_station_id","bike_id","subscription_type","zip_code")
1506304471169:trip <- trip %>%
1506304471171:mutate(start_date = mdy_hm(start_date),
1506304471171:end_date = mdy_hm(end_date))
1506304473223:# rename
1506304473225:names(weather) %>%
1506304473226:gsub(" ", "_", .) %>%
1506304473227:gsub("(.*[a-z])()([A-Z].*)", "\\1\\_\\2\\3", .) %>%
1506304473228:tolower()
1506304490959:# rename
1506304490960:names(weather) <-
1506304490962:names(weather) %>%
1506304490963:gsub(" ", "_", .) %>%
1506304490965:gsub("(.*[a-z])()([A-Z].*)", "\\1\\_\\2\\3", .) %>%
1506304490966:tolower()
1506304493344:weather
1506304542214:?recodd
1506304544413:?recode
1506304560265:# rename
1506304560267:names(weather) %>%
1506304560269:gsub(" ", "_", .) %>%
1506304560270:gsub("(.*[a-z])()([A-Z].*)", "\\1\\_\\2\\3", .) %>%
1506304560271:tolower()
1506304614048:weather %>% count(events)
1506304706490:a <- weather$events
1506304725763:ifelse(is.na(a), 0, a)
1506304756210:weather %>%
1506304756214:mutate(events = ifelse(is.na(events, "None", events)))
1506304771270:weather %>%
1506304771271:mutate(events = ifelse(is.na(events), "None", events))
1506304778610:weather %>% glimpse
1506304809646:weather %>% count(events)
1506304820914:is.na(weather$events)
1506304833492:weather %>%
1506304833493:mutate(events = ifelse(is.na(events), "None", events))
1506304843633:weather$events
1506304847328:weather <- read_csv("data/201608_weather_data.csv")
1506304848722:# rename
1506304848723:names(weather) <-
1506304848724:names(weather) %>%
1506304848726:gsub(" ", "_", .) %>%
1506304848727:gsub("(.*[a-z])()([A-Z].*)", "\\1\\_\\2\\3", .) %>%
1506304848728:tolower()
1506304850738:weather
1506304858129:weather %>% glimpse
1506304878589:a
1506304894557:ifelse(is.na(a), "noned", a)
1506304899497:weather %>%
1506304899498:mutate(events = ifelse(is.na(events), "None", events))
1506304903497:weather %>% glimpse
1506304924743:a <- weather$events
1506304926305:a
1506304928944:ifelse(is.na(a), 0, a)
1506304938001:weather %>%
1506304938002:mutate(events = ifelse(is.na(events), "0", events))
1506304946489:weather %>% glimpse()
1506304973791:weather <- weather %>%
1506304973793:mutate(events = ifelse(is.na(events), "0", events))
1506305014984:weather <- read_csv("data/201608_weather_data.csv")
1506305015688:# rename
1506305015690:names(weather) <-
1506305015693:names(weather) %>%
1506305015694:gsub(" ", "_", .) %>%
1506305015695:gsub("(.*[a-z])()([A-Z].*)", "\\1\\_\\2\\3", .) %>%
1506305015696:tolower()
1506305016495:weather <- weather %>%
1506305016496:mutate(events = ifelse(is.na(events), "None", events))
1506305022924:weather %>% glimpse
1506305093182:unlist
1506305098445:?unlis
1506305100191:?unlist
1506305111501:l.ex <- list(a = list(1:5, LETTERS[1:5]), b = "Z", c = NA)
1506305111503:unlist(l.ex, recursive = FALSE)
1506305114052:l.ex
1506305162875:weather
1506305178726:trip
1506305317116:trip_daily <- trip %>%
1506305317118:as_tbl_time(index = start_date) %>%
1506305317118:time_summarise(period = "daily",
1506305317119:num_trips = n())
1506305321906:trip_daily
1506305347311:weather
1506305442897:weather %>% mutate(pdt = mdy(pdt))
1506305523765:?dttm
1506305525971:??dttm
1506305532841:?period
1506305555158:trip_daily <- trip %>%
1506305555159:as_tbl_time(index = start_date) %>%
1506305555160:time_summarise(period = "daily",
1506305555162:num_trips = n()) %>%
1506305555162:mutate(start_date = mdy(start_date))
1506305565425:trip_daily
1506305576101:trip_daily <- trip %>%
1506305576102:as_tbl_time(index = start_date) %>%
1506305576102:time_summarise(period = "daily",
1506305576103:num_trips = n())
1506305584648:trip_daily
1506305597367:?mday
1506305623961:mday(trip_daily$start_date)
1506305638795:as.Date()
1506305642153:?format
1506305665463:as.Date(trip_daily$start_date[1])
1506305680008:trip_daily%>%
1506305680010:mutate(start_date = as.Date(start_date))
1506305690232:trip_daily <- trip %>%
1506305690233:as_tbl_time(index = start_date) %>%
1506305690233:time_summarise(period = "daily",
1506305690234:num_trips = n()) %>%
1506305690234:mutate(start_date = as.Date(start_date))
1506305694040:trip_daily
1506305697372:weather
1506305742288:weather <- weather %>%
1506305742290:left_join(trip_daily, by = c("pdt" = "start_date"))
1506305770083:weather <- read_csv("data/201608_weather_data.csv")
1506305770601:# rename
1506305770602:names(weather) <-
1506305770602:names(weather) %>%
1506305770603:gsub(" ", "_", .) %>%
1506305770603:gsub("(.*[a-z])()([A-Z].*)", "\\1\\_\\2\\3", .) %>%
1506305770604:tolower()
1506305771379:weather <- weather %>%
1506305771379:mutate(events = ifelse(is.na(events), "None", events)) %>%
1506305771380:mutate(pdt = mdy(pdt))
1506305773869:weather
1506305778746:trip_daily
1506305782096:weather <- weather %>%
1506305782097:left_join(trip_daily, by = c("pdt" = "start_date"))
1506305791948:weather %>% glimpse
1506305883082:weather %>% count(precipitation_in)
1506305950235:weather %>% count(precipitation_in) %>% select(precipitation_in) %>% t
1506306064220:weather %>% count(precipitation_in) %>% View
1506306158093:weather %>%
1506306158094:mutate(precipitation_in = as.numeric(precipitation_in))
1506306218080:weather <- read_csv("data/201608_weather_data.csv")
1506306219499:# rename
1506306219499:names(weather) <-
1506306219500:names(weather) %>%
1506306219500:gsub(" ", "_", .) %>%
1506306219501:gsub("(.*[a-z])()([A-Z].*)", "\\1\\_\\2\\3", .) %>%
1506306219501:tolower()
1506306220921:weather <- weather %>%
1506306220923:mutate(events = ifelse(is.na(events), "None", events)) %>%
1506306220924:mutate(pdt = mdy(pdt))
1506306221794:weather %>%
1506306221795:mutate(precipitation_in = as.numeric(precipitation_in)) %>%
1506306221796:mutate(precipitation_in = ifelse(is.na(precipitation_in),
1506306221796:0, precipitation_in))
1506306227927:weather %>% View
1506306234512:weather %>% glimpse
1506306250096:weather <- weather %>%
1506306250097:mutate(precipitation_in = as.numeric(precipitation_in)) %>%
1506306250098:mutate(precipitation_in = ifelse(is.na(precipitation_in),
1506306250098:0, precipitation_in))
1506306259582:weather %>% count(precipitation_in)
1506306278275:weather <- weather %>%
1506306278277:left_join(trip_daily, by = c("pdt" = "start_date"))
1506306290104:weather %>% glimpse()
1506306382185:weather <- read_csv("data/201608_weather_data.csv")
1506306382687:# rename
1506306382688:names(weather) <-
1506306382691:names(weather) %>%
1506306382692:gsub(" ", "_", .) %>%
1506306382693:gsub("(.*[a-z])()([A-Z].*)", "\\1\\_\\2\\3", .) %>%
1506306382694:tolower()
1506306383264:weather <- weather %>%
1506306383264:mutate(events = ifelse(is.na(events), "None", events)) %>%
1506306383265:mutate(events = as.factor(events)) %>%
1506306383266:mutate(pdt = mdy(pdt))
1506306384214:weather <- weather %>%
1506306384215:mutate(precipitation_in = as.numeric(precipitation_in)) %>%
1506306384216:mutate(precipitation_in = ifelse(is.na(precipitation_in),
1506306384216:0, precipitation_in))
1506306387263:weather <- weather %>%
1506306387264:left_join(trip_daily, by = c("pdt" = "start_date"))
1506306393112:weather %>% glimpse()
1506306415297:weather %>% count(events, precipitation_in)
1506306454215:?gml
1506306457367:?glm
1506306490641:fit <- lm(data = weather,
1506306490642:formula = num_trips ~ .)
1506306492526:fit
1506306500572:?leap
1506306522884:install.packages(leap)
1506306537421:library(leap)
1506306553707:install.packages("leap")
1506306609302:library(MASS)
1506306644346:step <- stepAIC(fit, direction = "forward")
1506306656129:step$anova
1506306660163:step
1506306668938:fit
1506306688076:step <- stepAIC(fit, direction = "both")
1506306747943:fit <- lm(data = weather,
1506306747944:formula = num_trips ~ . - zip)
1506306750893:fit
1506306780562:weather %>% glimpse
1506306805663:fit <- lm(data = weather,
1506306805664:formula = num_trips ~ . - zip - events - pdt)
1506306807596:step <- stepAIC(fit, direction = "both")
1506306814763:library(leaps)
1506306827497:install.packages("leaps")
1506306835833:library(leaps)
1506306865431:regsubsets()
1506306869158:?regsubsets
1506306876983:data(swiss)
1506306877009:a<-regsubsets(as.matrix(swiss[,-1]),swiss[,1])
1506306877016:summary(a)
1506306930093:l1 <- regsubsets(fit)
1506306981431:l1 <- regsubsets(data = weather,
1506306981434:formulat = num_trips ~ . - zip - enents - pdt)
1506306993361:l1 <- regsubsets(data = weather,
1506306993365:x = num_trips ~ . - zip - enents - pdt)
1506306997723:l1 <- regsubsets(data = weather,
1506306997724:x = num_trips ~ . - zip - events - pdt)
1506307002441:summary(l1)
1506307079127:summary.regsubsets(l1)
1506307111279:l1$nrbar
1506307115160:l1
1506307172560:fit
1506307236905:fit <- lm(data = weather,
1506307236907:formula = num_trips ~ . - zip - events - pdt)
1506307239545:step <- stepAIC(fit, direction = "both")
1506307246047:stepAIC()
1506307250215:?stepAIC
1506307257155:step <- stepAIC(fit, direction = "forward")
1506307265590:step <- stepAIC(fit, direction = "backward")
1506307308819:step(fit)
1506307331600:drop1(fit)
1506307353270:summary(fit)
1506307423256:l1 <- regsubsets(data = weather,
1506307423261:x = num_trips ~ . - zip - events - pdt)
1506307425237:l1
1506307440738:l1 <- regsubsets(data = weather,
1506307440740:x = num_trips ~ . - zip - events - pdt,
1506307440741:method = "forward")
1506307441652:summary(l1)
1506307468360:?regsubsets
1506307491022:l1$last
1506307522115:l1$rss
1506307580996:summary(l1, all.best = F)
1506307602880:coef(l1)
1506307631239:coef(l1, id = fit)
1506307637062:coef(l1, id = "lm")
1506307648032:coef(l1, id = 1:4)
1506307667511:vcov(l1, id = 1:4)
1506307688776:data(swiss)
1506307688794:a<-regsubsets(as.matrix(swiss[,-1]),swiss[,1])
1506307688798:summary(a)
1506307688802:b<-regsubsets(Fertility~.,data=swiss,nbest=2)
1506307688805:summary(b)
1506307716663:l1 <- regsubsets(data = weather,
1506307716664:x = num_trips ~ . - zip - events - pdt,
1506307716664:method = "exhaustive")
1506307717792:vcov(l1, id = 1:4)
1506307844302:fit1 <- lm(data = weather,
1506307844304:formula = num_trips ~ mid_dewpoint_f +
1506307844304:min_humidity + mean_sea_level_pressure_in +
1506307844305:mean_visibility_miles)
1506307853231:wewawther
1506307854860:weather
1506307874574:fit1 <- lm(data = weather,
1506307874575:formula = num_trips ~ mid_dewpoint_f +
1506307874577:min_humidity + mean_sea_level_pressure_in +
1506307874579:mean_visibility_miles)
1506307926818:fit1 <- lm(data = weather,
1506307926820:formula = num_trips ~ mean_temperature_f +
1506307926820:mean_sea_level_pressure_in +
1506307926822:mean_visibility_miles)
1506307929289:fit1
1506307934744:summary(fit1)
1506307972962:plot(fit1)
1506307990532:step <- stepAIC(fit, direction = "backward")
1506308005292:l1 <- regsubsets(data = weather,
1506308005293:x = num_trips ~ . - zip - events - pdt,
1506308005294:method = "exhaustive")
1506308009220:l1 <- regsubsets(data = weather,
1506308009221:x = num_trips ~ . - zip - events - pdt,
1506308009221:method = "forward")
1506308010586:vcov(l1, id = 1:4)
1506308015410:vcov(l1, id = 1:22)
1506308018673:vcov(l1, id = 1:21)
1506308022334:vcov(l1, id = 1:10)
1506308025345:l1 <- regsubsets(data = weather,
1506308025346:x = num_trips ~ . - zip - events - pdt,
1506308025348:method = "forward")
1506308027281:l1
1506308041418:mean_visibility_miles
1506308046770:a<-regsubsets(as.matrix(swiss[,-1]),swiss[,1])
1506308046772:summary(a)
1506308070771:summary(l1)
1506308108307:summary(l1)$matrix
1506308132495:vcov(l1, id = 10)
1506308137867:l1
1506308147800:coef(a, 1:3)
1506308153854:coef(l1, 4)
1506308162247:vcov(l1, 3)
1506308193556:l1$nvmax
1506308205908:l1$intercept
1506308214542:l1$call
1506308233769:l1$method
1506308251917:s1 <- summary(l1)
1506308255864:s1$adjr2
1506308268970:l1
1506308276199:l1 <- regsubsets(data = weather,
1506308276200:x = num_trips ~ . - zip - events - pdt,
1506308276201:method = "forward")
1506308277145:s1 <- summary(l1)
1506308278137:s1$adjr2
1506308308914:l1 <- regsubsets(data = weather,
1506308308915:x = num_trips ~ . - zip - events - pdt,
1506308308916:method = "forward", nvmax = 20)
1506308310401:s1 <- summary(l1)
1506308311314:s1$adjr2
1506308340084:s1$rsq
1506308384498:a<-regsubsets(as.matrix(swiss[,-1]),swiss[,1])
1506308384992:b <- summary(a)
1506308390170:b$rsq
1506309031159:fit <- lm(data = weather %>% filter(zip == "94107"),
1506309031166:formula = num_trips ~ . - zip - events - pdt)
1506309033606:step <- stepAIC(fit, direction = "backward")
1506309049667:l1 <- regsubsets(data = weather %>% filter(zip == "94107"),
1506309049668:x = num_trips ~ . - zip - events - pdt,
1506309049669:method = "forward", nvmax = 20)
1506309050767:s1 <- summary(l1)
1506309060491:l1 <- regsubsets(data = weather %>% filter(zip = "94107"),
1506309060492:x = num_trips ~ . - zip - events - pdt,
1506309060492:method = "forward", nvmax = 20)
1506309075059:weather %>% glimpse()
1506309084985:l1 <- regsubsets(data = weather %>% filter(zip == 94107),
1506309084986:x = num_trips ~ . - zip - events - pdt,
1506309084986:method = "forward", nvmax = 20)
1506309088329:l1 <- regsubsets(data = weather %>% filter(zip = 94107),
1506309088332:x = num_trips ~ . - zip - events - pdt,
1506309088333:method = "forward", nvmax = 20)
1506309100161:weather %>% filter(zip == 94107)
1506309105003:l1 <- regsubsets(data = weather %>% filter(zip == 94107),
1506309105004:x = num_trips ~ . - zip - events - pdt,
1506309105005:method = "forward", nvmax = 20)
1506309127762:weather <- weather %>% filter(zip == 94107)
1506309135993:fit <- lm(data = weather1),
1506309135994:formula = num_trips ~ . - zip - events - pdt)
1506309136769:step <- stepAIC(fit, direction = "backward")
1506309142041:fit <- lm(data = weather1,
1506309142042:formula = num_trips ~ . - zip - events - pdt)
1506309151995:weather <- read_csv("data/201608_weather_data.csv")
1506309152415:# rename
1506309152416:names(weather) <-
1506309152417:names(weather) %>%
1506309152418:gsub(" ", "_", .) %>%
1506309152420:gsub("(.*[a-z])()([A-Z].*)", "\\1\\_\\2\\3", .) %>%
1506309152422:tolower()
1506309152825:weather <- weather %>%
1506309152827:mutate(events = ifelse(is.na(events), "None", events)) %>%
1506309152828:mutate(events = as.factor(events)) %>%
1506309152829:mutate(pdt = mdy(pdt))
1506309153090:weather <- weather %>%
1506309153091:mutate(precipitation_in = as.numeric(precipitation_in)) %>%
1506309153092:mutate(precipitation_in = ifelse(is.na(precipitation_in),
1506309153093:0, precipitation_in))
1506309156273:weather <- weather %>%
1506309156273:left_join(trip_daily, by = c("pdt" = "start_date"))
1506309156891:weather1 <- weather %>% filter(zip == 94107)
1506309158012:fit <- lm(data = weather1,
1506309158013:formula = num_trips ~ . - zip - events - pdt)
1506309161598:fit
1506309169438:step <- stepAIC(fit, direction = "backward")
1506309170151:step$anova
1506309207965:summary(fit)
1506309212785:l1 <- regsubsets(data = weather %>% filter(zip == 94107),
1506309212786:x = num_trips ~ . - zip - events - pdt,
1506309212787:method = "forward", nvmax = 20)
1506309217748:l1 <- regsubsets(data = weather,
1506309217749:x = num_trips ~ . - zip - events - pdt,
1506309217751:method = "forward", nvmax = 20)
1506309219427:s1 <- summary(l1)
1506309220355:s1$rsq
1506309227837:l1 <- regsubsets(data = weather1,
1506309227838:x = num_trips ~ . - zip - events - pdt,
1506309227840:method = "forward", nvmax = 20)
1506309228292:s1 <- summary(l1)
1506309228693:s1$rsq
1506309240679:l2 <- regsubsets(data = weather1,
1506309240680:x = num_trips ~ . - zip - events - pdt,
1506309240681:method = "forward", nvmax = 20)
1506309250934:l1 <- regsubsets(data = weather1,
1506309250935:x = num_trips ~ . - zip - events - pdt,
1506309250936:method = "forward", nvmax = 8)
1506309257794:l1 <- regsubsets(data = weather,
1506309257795:x = num_trips ~ . - zip - events - pdt,
1506309257796:method = "forward", nvmax = 8)
1506309277896:weather1''
1506309280468:weather1
1506309291008:l1 <- regsubsets(data = weather1,
1506309291010:x = num_trips ~ . - zip - events - pdt,
1506309291011:method = "forward", nvmax = 8)
1506309299820:l1 <- regsubsets(data = weather1,
1506309299822:x = num_trips ~ . -zip - events - pdt,
1506309299823:method = "forward", nvmax = 8)
1506309304635:l1
1506309327135:l1 <- regsubsets(data = weather1,
1506309327137:x = num_trips ~ -zip - events - pdt + .,
1506309327138:method = "forward", nvmax = 8)
1506309341968:l1 <- regsubsets(data = weather1,
1506309341968:x = num_trips ~ .,
1506309341969:method = "forward", nvmax = 8)
1506309351571:l1 <- regsubsets(data = weather,
1506309351572:x = num_trips ~ . -zip - events - pdt,
1506309351573:method = "forward", nvmax = 8)
1506309356032:l1 <- regsubsets(data = weather,
1506309356033:x = num_trips ~ . -zip - events - pdt,
1506309356033:method = "forward", nvmax = 15)
1506309356850:s1 <- summary(l1)
1506309357006:s1$rsq
1506309376947:l1 <- regsubsets(data = weather,
1506309376948:x = num_trips ~ . -zip - events - pdt,
1506309376949:method = "exhaustive", nvmax = 15)
1506309377792:s1 <- summary(l1)
1506309377962:s1$rsq
1506309492910:X201608_weather_data_1_ <- read_csv("data/weather.csv")
1506309523332:dir("data/")
1506309535070:X201608_weather_data_1_ <- read_csv("data/201608_weather_data.csv")
1506309539007:ncol(X201608_weather_data_1_)
1506309541499:Weather94107<-Weather[Weather$ZIP==94107,]
1506309549634:Weather94107[is.na(Weather94107)]<-0
1506309551585:Weather94107$Events <- replace(Weather94107$Events, which(Weather94107$Events=="Rain"), 1)
1506309552859:Weather94107$Events <- replace(Weather94107$Events, which(Weather94107$Events=="Fog"), 2)
1506309553994:Weather94107$Events <- replace(Weather94107$Events, which(Weather94107$Events=="Rain-Thunderstorm"), 3)
1506309554819:Weather94107$Events <- replace(Weather94107$Events, which(Weather94107$Events=="Fog-Rain"), 4)
1506309555609:Weather94107$PrecipitationIn <- replace(Weather94107$PrecipitationIn, which(Weather94107$PrecipitationIn=="T"), 1)
1506309559291:X201608_trip_data94107<-X201608_trip_data[X201608_trip_data$`Zip Code`==94107,]
1506309618418:Weather <- X201608_weather_data_1_
1506309618881:Weather94107<-Weather[Weather$ZIP==94107,]
1506309619724:Weather94107[is.na(Weather94107)]<-0
1506309619958:Weather94107$Events <- replace(Weather94107$Events, which(Weather94107$Events=="Rain"), 1)
1506309620301:Weather94107$Events <- replace(Weather94107$Events, which(Weather94107$Events=="Fog"), 2)
1506309620623:Weather94107$Events <- replace(Weather94107$Events, which(Weather94107$Events=="Rain-Thunderstorm"), 3)
1506309620946:Weather94107$Events <- replace(Weather94107$Events, which(Weather94107$Events=="Fog-Rain"), 4)
1506309621265:Weather94107$PrecipitationIn <- replace(Weather94107$PrecipitationIn, which(Weather94107$PrecipitationIn=="T"), 1)
1506309624455:X201608_trip_data94107<-X201608_trip_data[X201608_trip_data$`Zip Code`==94107,]
1506309656219:X201608_trip_data <- trip
1506309656838:X201608_trip_data94107<-X201608_trip_data[X201608_trip_data$`Zip Code`==94107,]
1506309665697:X201608_trip_data94107<-X201608_trip_data[X201608_trip_data$zip_code==94107,]
1506309695799:X201608_trip_data94107$start_date[i]<-unlist(strsplit(X201608_trip_data94107$start_date[i], split=' ', fixed=TRUE))[1]
1506309699201:for(i in 1:length(X201608_trip_data94107$start_date)){
1506309699203:X201608_trip_data94107$start_date[i]<-unlist(strsplit(X201608_trip_data94107$start_date[i], split=' ', fixed=TRUE))[1]
1506309699204:}
1506309708883:X201608_trip_data94107<-X201608_trip_data[X201608_trip_data$zip_code==94107,]
1506309709312:View(X201608_trip_data94107)
1506309734673:i = 2
1506309735400:X201608_trip_data
1506309739288:X201608_trip_data94107$start_date[i]<-
1506309739289:unlist(strsplit(X201608_trip_data94107$start_date[i], split=' ', fixed=TRUE))[1]
1506309857619:weather1
1506309869673:weather1 %>% glimpse
1506309899071:weather1 <- weather %>%
1506309899072:filter(zip == 94107) %>%
1506309899072:select(-zip, -pdt, -events)
1506309904095:weather1
1506309907712:?select
1506309952214:weather1 <- weather %>%
1506309952215:filter(zip == 94107) %>%
1506309952216:select(-c(zip, pdt, events))
1506309965149:weather1 <- weather %>%
1506309965150:filter(zip == 94107) %>%
1506309965150:select(-zip)
1506309972639:weather1
1506309986697:weather1 <- weather %>%
1506309986698:filter(zip == 94107) %>%
1506309986698:select(-events)
1506309993387:weather
1506310000873:weather %>% glimpse()
1506310027788:weather1 <- weather %>%
1506310027789:filter(zip == 94107) %>%
1506310027790:select(-zip)
1506310043699:weather
1506310057876:weather1 <- weather %>%
1506310057877:filter(zip == 94107) %>%
1506310057878:select(pdt)
1506310073708:weather %>%
1506310073709:filter(zip == 94107) %>%
1506310073709:select(pdt)
1506310079956:weather %>%
1506310079956:filter(zip == 94107) %>%
1506310079957:select(pdt)
1506310084500:weather %>%
1506310084500:filter(zip == 94107)
1506310091830:weather %>%
1506310091831:filter(zip == 94107) %>%
1506310091832:select(zip)
1506310104641:weather %>%
1506310104643:select(zip) %>%
1506310104644:filter(zip == 94107)
1506310137418:weather1 <-
1506310137419:weather %>%
1506310137420:filter(zip == 94107) %>%
1506310137421:filter(max_temperature_f < 100)
1506310162792:library(dplyr)
1506310193589:detach(MASS)
1506310201686:detach(name = "MASS")
1506310229688:detach("package:MASS", unload = T)
1506310263307:weather1 <-
1506310263308:weather %>%
1506310263308:filter(zip == 94107) %>%
1506310263309:select(-zip, -pdt, -events)
1506310266752:weather1
1506310269931:weather1 %>% glimpse
1506310294514:l1 <- regsubsets(data = weather1,
1506310294516:x = num_trips ~ . -zip - events - pdt,
1506310294518:method = "forward", nvmax = 15)
1506310301192:l1 <- regsubsets(data = weather1,
1506310301193:x = num_trips ~ .,
1506310301194:method = "forward", nvmax = 15)
1506310495201:plot(l1, scale = "adjr2")
1506310582839:?step
1506310651161:l1 <- regsubsets(data = weather1,
1506310651173:x = num_trips ~ .,
1506310651175:method = "backward", nvmax = 15)
1506310654809:l1
1506310664104:s1 <- summary(l1)
1506310664669:s1$rsq
1506310685314:weather
1506310689456:weather1
1506310737986:fit
1506310740602:summary(fit)
1506311490157:?load
1506311515393:require(ggse)
1506311879398:read_file("config/settings.R")
1506311897404:read_tsv("config/library.R")
1506311948992:lpckg <- function(somepackage) {
1506311948994:if(!require(somepackage)){
1506311948995:install.packages("somepackage")
1506311948998:library(somepackage)
1506311948998:}
1506311995853:pckgs <- read.delim("config/library.R")
1506311998520:pckgs
1506312003030:pckgs %>% class
1506312037801:?read_delim
1506312048958:read.delim()
1506312055508:?read.delim
1506312075089:pckgs <- read.table("config/library.R")
1506312077830:pckgs
1506312108776:apply(pckgs, 2, lpckg)
1506312127074:install.packages(somepackage)
1506312128813:lpckg <- function(somepackage) {
1506312128814:if(!require(somepackage)){
1506312128815:install.packages(somepackage)
1506312128815:library(somepackage)
1506312128816:}
1506312149146:lcpkg(sql)
1506312161265:lpckg(sqldf)
1506312183802:pckgs <- read.table("config/library.R")
1506312186878:pckgs
1506312193826:pckgs %>% class
1506312199238:pckgs[1] %>% class
1506312205017:pckgs$V1 %>% class
1506312222167:library("tidyverse")
1506312230003:library("dbf")
1506312345379:tripsbyduration = data.table(sqldf("SELECT t.duration, t.start_date as date, t.subscriber_type,
1506312345380:s.id as st_id,
1506312345381:s.city as city
1506312345381:FROM trip t
1506312345382:LEFT JOIN station s ON t.start_station_id=s.id
1506312345382:"))
1506312689923:trip
1506312714239:df
1506312717730:df_highlight
1506312787400:df <- data.frame(datetime = as.POSIXct('2015-01-01') + (1:n)*3600,
1506312787401:value = rnorm(n)) %>%
1506312787403:as_tibble()
1506312788179:df <- df %>%
1506312788180:mutate(day_of_week = datetime %>% strftime('%A'),
1506312788181:week_nr = datetime %>% strftime('%W')) %>%
1506312788181:mutate(value = ifelse(day_of_week %in% c('Saturday', 'Sunday'),
1506312788182:value - runif(n) * 3, value))
1506312790098:df
1506312854103:#   ____________________________________________________________________________
1506312854105:#   Duration - Based                                                        ####
1506312854107:trip_hilighted <-
1506312854108:trip %>%
1506312854108:mutate(day_of_week = start_date %>% strftime("%A"),
1506312854109:week_nr = start_date %>% strftime("%W"))
1506312858645:trip_hilighted
1506312864950:trip_hilighted %>% glimpse()
1506312888632:#   ____________________________________________________________________________
1506312888633:#   Duration - Based                                                        ####
1506312888634:trip<-
1506312888634:trip %>%
1506312888634:mutate(day_of_week = start_date %>% strftime("%A"),
1506312888635:week_nr = start_date %>% strftime("%W"))
1506313015881:trip_hilighted <- trip %>%
1506313015884:filter(day_of_week %in% c('Saturday', 'Sunday')) %>%
1506313015885:group_by(week_nr) %>%
1506313015885:summarise(xmin = min(start_date), xmax = max(start_date))
1506313077229:y_min = (trip$start_date %>% min) - 1
1506313077377:y_max = (trip$start_datetart %>% max) + 1
1506313084159:df
1506313155042:trip_hilighted
1506313196529:##  ............................................................................
1506313196530:##  Time - Based                                                            ####
1506313196531:trip %>%
1506313196531:as_tbl_time(index = start_date) %>%
1506313196532:time_summarise(period = "daily",
1506313196534:num_trips = n()) %>%
1506313196537:mutate(day = wday(start_date, label = T, abbr = F)) %>%
1506313196539:ggplot(aes(start_date, num_trips)) +
1506313196541:geom_line() +
1506313196542:labs(x = "Date",
1506313196544:y = "Total Number of Bicycle Trips",
1506313196545:title = "Trips Each Day")
1506313219346:#
1506313219346:trip %>%
1506313219347:mutate(day = wday(start_date, label = T, abbr = F)) %>%
1506313219348:count(day) %>%
1506313219348:ggplot(aes(day, n)) +
1506313219349:geom_bar(stat = "identity") +
1506313219349:labs(x = "Week Day",
1506313219350:y = "Number of Trips",
1506313219350:title = "Number of Trips across a Week")
1506313235018:trip %>%
1506313235020:mutate(time = hour(start_date) + minute(start_date)/60) %>%
1506313235022:ggplot(aes(time)) +
1506313235023:geom_histogram(bins = 12*60) +
1506313235024:labs(x = "Daytime 24 Hour Clock",
1506313235026:y = "Number of Trips",
1506313235026:title = "Number of Trips in a day")
1506313260969:trip %>% glimpse
1506313285632:ggplot() +
1506313285633:geom_rect(data=df_highlight,
1506313285633:aes(xmin = xmin, xmax = xmax, ymin = y_min, ymax = y_max),
1506313285634:alpha = 0.15) +
1506313285635:geom_line(data=df, aes(datetime, value)) +
1506313285636:ggtitle('timeseries with weekends highlighted')
1506388609108:# number of trips by day
1506388609120:trip %>%
1506388609133:as_tbl_time(index = start_date) %>%
1506388609154:time_summarise(period = "daily",
1506388609157:num_trips = n()) %>%
1506388609160:mutate(day = wday(start_date, label = T, abbr = F)) %>%
1506388609172:ggplot(aes(start_date, num_trips)) +
1506388609182:geom_line() +
1506388609184:labs(x = "Date",
1506388609187:y = "Total Number of Bicycle Trips",
1506388609191:title = "Trips Each Day")
1506388636728:trip
1506388643948:glimpse %>% trip
1506388649497:trip %>% glimpse
1506388842374:?weekdays.Date
1506388859551:weekdays(.leap.seconds)
1506389011320:#   ____________________________________________________________________________
1506389011321:#   Duration - Based                                                        ####
1506389011322:trip<-
1506389011322:trip %>%
1506389011323:mutate(day_of_week = start_date %>% strftime("%A"),
1506389011323:week_nr = start_date %>% strftime("%W"),
1506389011324:weekday = start_date %>% strftime("%u"))
1506389015026:trip %>% glimpse
1506389052669:?if_else
1506389082875:?weekdays
1506389148705:#   ____________________________________________________________________________
1506389148707:#   Duration - Based                                                        ####
1506389148707:trip<-
1506389148708:trip %>%
1506389148708:mutate(day_of_week = start_date %>% strftime("%A"),
1506389148709:week_nr = start_date %>% strftime("%W"),
1506389148709:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506389148710:mutate(weekday = if_else(weekday < 6, "weekday", "weekend"))
1506389154974:trip %>% glimpse
1506389226328:trip %>%
1506389226331:as_tbl_time(index = start_date) %>%
1506389226331:time_summarise(period = "daily",
1506389226332:num_trips = n()) %>%
1506389226332:mutate(day = wday(start_date, label = T, abbr = F))
1506389307847:r %>%
1506389307849:mutate(precipitation_in = as.numeric(precipitation_in)) %>%
1506389307851:mutate(precipitation_in = ifelse(is.na(precipitation_in),
1506389307852:0, precipitation_in))
1506389307857:##  ............................................................................
1506389307858:##  Time - Based                                                            ####
1506389307861:# number of trips by day
1506389307866:trip %>%
1506389307868:as_tbl_time(index = start_date) %>%
1506389307869:time_summarise(period = "daily",
1506389307870:num_trips = n(),
1506389307870:weekday) %>%
1506389307870:mutate(day = wday(start_date, label = T, abbr = F))
1506389536621:trip %>%
1506389536622:as_tbl_time(index = start_date) %>%
1506389536622:time_summarise(period = "daily",
1506389536623:num_trips = n(),
1506389536623:weekday = weekday) %>%
1506389536624:mutate(day_of_week = wday(start_date, label = T, abbr = F))
1506389590627:trip %>%
1506389590629:as_tbl_time(index = start_date) %>%
1506389590630:group_by(weekday)
1506389590740:time_summarise(period = "daily",
1506389590741:num_trips = n()) %>%
1506389590741:mutate(day_of_week = wday(start_date, label = T, abbr = F))
1506389599717:trip
1506389606249:trip %>%
1506389606250:as_tbl_time(index = start_date) %>%
1506389606251:group_by(weekday) %>%
1506389606251:time_summarise(period = "daily",
1506389606252:num_trips = n()) %>%
1506389606253:mutate(day_of_week = wday(start_date, label = T, abbr = F))
1506389656949:# number of trips by day
1506389656951:trip %>%
1506389656953:as_tbl_time(index = start_date) %>%
1506389656954:group_by(weekday) %>%
1506389656954:time_summarise(period = "daily",
1506389656955:num_trips = n()) %>%
1506389656956:mutate(day_of_week = wday(start_date, label = T, abbr = F)) %>%
1506389656957:ggplot(aes(start_date, num_trips, fill = weekday)) +
1506389656958:geom_point() +
1506389656959:labs(x = "Date",
1506389656961:y = "Total Number of Bicycle Trips",
1506389656962:title = "Trips Each Day")
1506389692922:# number of trips by day
1506389692924:trip %>%
1506389692926:as_tbl_time(index = start_date) %>%
1506389692928:group_by(weekday) %>%
1506389692929:time_summarise(period = "daily",
1506389692930:num_trips = n()) %>%
1506389692931:mutate(day_of_week = wday(start_date, label = T, abbr = F)) %>%
1506389692931:ggplot(aes(start_date, num_trips, color = weekday)) +
1506389692933:geom_point() +
1506389692934:labs(x = "Date",
1506389692936:y = "Total Number of Bicycle Trips",
1506389692938:title = "Trips Each Day")
1506389751855:trip %>%
1506389751857:as_tbl_time(index = start_date) %>%
1506389751858:group_by(weekday) %>%
1506389751858:time_summarise(period = "daily",
1506389751858:num_trips = n()) %>%
1506389751859:mutate(day_of_week = wday(start_date, label = T, abbr = F)) %>% arrange(num_trips)
1506389784995:trip %>%
1506389784996:as_tbl_time(index = start_date) %>%
1506389784997:group_by(weekday) %>%
1506389784998:time_summarise(period = "daily",
1506389784998:num_trips = n()) %>%
1506389784998:mutate(day_of_week = wday(start_date, label = T, abbr = F)) %>% View
1506389889461:# number of trips by day
1506389889462:trip %>%
1506389889463:as_tbl_time(index = start_date) %>%
1506389889463:group_by(weekday) %>%
1506389889464:time_summarise(period = "daily",
1506389889464:num_trips = n()) %>%
1506389889465:mutate(day_of_week = wday(start_date, label = T, abbr = F)) %>%
1506389889465:ggplot(aes(start_date, num_trips)) +
1506389889466:geom_point() +
1506389889468:labs(x = "Date",
1506389889469:y = "Total Number of Bicycle Trips",
1506389889471:title = "Trips Each Day")
1506389934379:trip %>%
1506389934380:as_tbl_time(index = start_date) %>%
1506389934381:group_by(weekday) %>%
1506389934383:time_summarise(period = "daily",
1506389934384:num_trips = n()) %>%
1506389934385:mutate(day_of_week = wday(start_date, label = T, abbr = F))
1506389951398:trip %>%
1506389951399:as_tbl_time(index = start_date) %>%
1506389951399:group_by(weekday) %>%
1506389951400:time_summarise(period = "daily",
1506389951400:num_trips = n())
1506389971913:trip %>%
1506389971914:as_tbl_time(index = start_date) %>%
1506389971914:# group_by(weekday) %>%
1506389971915:time_summarise(period = "daily",
1506389971915:num_trips = n()) %>%
1506389971915:mutate(day_of_week = wday(start_date, label = T, abbr = F))
1506390088694:# number of trips by day
1506390088696:trip %>%
1506390088698:as_tbl_time(index = start_date) %>%
1506390088699:time_summarise(period = "daily",
1506390088700:num_trips = n()) %>%
1506390088700:mutate(day_of_week = start_date %>% strftime("%A"),
1506390088701:week_nr = start_date %>% strftime("%W"),
1506390088702:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506390088703:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506390088704:ggplot(aes(start_date, num_trips, color = weekday)) +
1506390088705:geom_point() +
1506390088706:labs(x = "Date",
1506390088708:y = "Total Number of Bicycle Trips",
1506390088710:title = "Trips Each Day")
1506390131586:?geom_map
1506390140714:?geom_smooth
1506390164992:# number of trips by day
1506390164993:trip %>%
1506390164994:as_tbl_time(index = start_date) %>%
1506390164994:time_summarise(period = "daily",
1506390164995:num_trips = n()) %>%
1506390164996:mutate(day_of_week = start_date %>% strftime("%A"),
1506390164997:week_nr = start_date %>% strftime("%W"),
1506390164998:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506390165000:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506390165003:ggplot(aes(start_date, num_trips, color = weekday)) +
1506390165006:geom_point() +
1506390165007:geom_smooth()+
1506390165008:labs(x = "Date",
1506390165011:y = "Total Number of Bicycle Trips",
1506390165012:title = "Trips Each Day")
1506390230097:# number of trips by week days
1506390230100:trip %>%
1506390230101:mutate(day = wday(start_date, label = T, abbr = F)) %>%
1506390230102:count(day) %>%
1506390230103:ggplot(aes(day, n)) +
1506390230104:geom_bar(stat = "identity") +
1506390230104:labs(x = "Week Day",
1506390230105:y = "Number of Trips",
1506390230106:title = "Number of Trips across a Week")
1506390238255:# number of trip in a day
1506390238255:trip %>%
1506390238256:mutate(time = hour(start_date) + minute(start_date)/60) %>%
1506390238258:ggplot(aes(time)) +
1506390238259:geom_histogram(bins = 12*60) +
1506390238260:labs(x = "Daytime 24 Hour Clock",
1506390238262:y = "Number of Trips",
1506390238263:title = "Number of Trips in a day")
1506390315813:# number of trip in a day
1506390315815:trip %>%
1506390315815:mutate(time = hour(start_date) + minute(start_date)/60) %>%
1506390315816:ggplot(aes(time)) +
1506390315817:geom_histogram(bins = 12*60) +
1506390315817:geom_vline(xintercept = 9, color = 'orange')+
1506390315819:geom_vline(xintercept = 17, color = 'red', alpha = 0.7) +
1506390315820:labs(x = "Daytime 24 Hour Clock",
1506390315820:y = "Number of Trips",
1506390315821:title = "Number of Trips in a day")
1506390349489:trip %>%
1506390349490:mutate(time = hour(start_date) + minute(start_date)/60)
1506390362157:trip %>%
1506390362158:mutate(time = hour(start_date) + minute(start_date)/60) %>% glimpse
1506390397967:# number of trip in a day
1506390397969:trip %>%
1506390397969:mutate(time = hour(start_date) + minute(start_date)/60) %>%
1506390397970:ggplot(aes(time)) +
1506390397971:geom_histogram(bins = 12*60) +
1506390397972:geom_vline(xintercept = 9, color = 'orange')+
1506390397974:geom_vline(xintercept = 17, color = 'red', alpha = 0.7) +
1506390397976:annotate("text", x = 9, label = "9:00 AM", color = "orange",
1506390397977:size = 7) +
1506390397978:annotate("text", x = 17, label = "5:00 PM", color = "red",
1506390397982:size = 7) +
1506390397984:labs(x = "Daytime 24 Hour Clock",
1506390397985:y = "Number of Trips",
1506390397991:title = "Number of Trips in a day")
1506390406728:?annotate
1506390423094:# number of trip in a day
1506390423095:trip %>%
1506390423095:mutate(time = hour(start_date) + minute(start_date)/60) %>%
1506390423096:ggplot(aes(time)) +
1506390423096:geom_histogram(bins = 12*60) +
1506390423097:geom_vline(xintercept = 9, color = 'orange')+
1506390423097:geom_vline(xintercept = 17, color = 'red', alpha = 0.7) +
1506390423097:annotate("text", x = 9, y = -2, label = "9:00 AM", color = "orange",
1506390423098:size = 7) +
1506390423098:annotate("text", x = 17, y = -2, label = "5:00 PM", color = "red",
1506390423099:size = 7) +
1506390423099:labs(x = "Daytime 24 Hour Clock",
1506390423100:y = "Number of Trips",
1506390423100:title = "Number of Trips in a day")
1506390440567:# number of trip in a day
1506390440568:trip %>%
1506390440568:mutate(time = hour(start_date) + minute(start_date)/60) %>%
1506390440569:ggplot(aes(time)) +
1506390440571:geom_histogram(bins = 12*60) +
1506390440572:geom_vline(xintercept = 9, color = 'orange')+
1506390440572:geom_vline(xintercept = 17, color = 'red', alpha = 0.7) +
1506390440573:annotate("text", x = 9, y = 0, label = "9:00 AM", color = "orange",
1506390440573:size = 7) +
1506390440574:annotate("text", x = 17, y = 0, label = "5:00 PM", color = "red",
1506390440574:size = 7) +
1506390440574:labs(x = "Daytime 24 Hour Clock",
1506390440575:y = "Number of Trips",
1506390440575:title = "Number of Trips in a day")
1506390677739:?time_summarise
1506390698688:?quarter
1506390765276:# number of trip in a day
1506390765277:trip %>%
1506390765278:mutate(time = hour(start_date) + minute(start_date)/60,
1506390765278:quarter = quaarter(start_date)) %>%
1506390765279:ggplot(aes(time)) +
1506390765279:geom_histogram(bins = 12*60) +
1506390765280:geom_vline(xintercept = 9, color = 'orange')+
1506390765281:geom_vline(xintercept = 17, color = 'red', alpha = 0.7) +
1506390765282:annotate("text", x = 9, y = 0, label = "9:00 AM", color = "orange",
1506390765284:size = 7) +
1506390765286:annotate("text", x = 17, y = 0, label = "5:00 PM", color = "red",
1506390765288:size = 7) +
1506390765289:labs(x = "Daytime 24 Hour Clock",
1506390765290:y = "Number of Trips",
1506390765291:title = "Number of Trips in a day") +
1506390765292:facet_wrap(~quarter)
1506390770393:# number of trip in a day
1506390770394:trip %>%
1506390770395:mutate(time = hour(start_date) + minute(start_date)/60,
1506390770395:quarter = quarter(start_date)) %>%
1506390770396:ggplot(aes(time)) +
1506390770397:geom_histogram(bins = 12*60) +
1506390770399:geom_vline(xintercept = 9, color = 'orange')+
1506390770401:geom_vline(xintercept = 17, color = 'red', alpha = 0.7) +
1506390770401:annotate("text", x = 9, y = 0, label = "9:00 AM", color = "orange",
1506390770402:size = 7) +
1506390770403:annotate("text", x = 17, y = 0, label = "5:00 PM", color = "red",
1506390770403:size = 7) +
1506390770405:labs(x = "Daytime 24 Hour Clock",
1506390770406:y = "Number of Trips",
1506390770406:title = "Number of Trips in a day") +
1506390770408:facet_wrap(~quarter)
1506390780119:# number of trip in a day
1506390780120:trip %>%
1506390780121:mutate(time = hour(start_date) + minute(start_date)/60,
1506390780121:quarter = quarter(start_date)) %>%
1506390780122:ggplot(aes(time)) +
1506390780122:geom_histogram(bins = 12*60) +
1506390780123:geom_vline(xintercept = 9, color = 'orange')+
1506390780123:geom_vline(xintercept = 17, color = 'red', alpha = 0.7) +
1506390780124:labs(x = "Daytime 24 Hour Clock",
1506390780124:y = "Number of Trips",
1506390780125:title = "Number of Trips in a day") +
1506390780125:facet_wrap(~quarter)
1506390801310:?quarters
1506390809242:quarters(.leap.seconds)
1506390959326:trip %>%
1506390959329:mutate(time = hour(start_date) + minute(start_date)/60) %>%
1506390959330:as_tbl_time(index = start_date) %>%
1506390959332:ggplot(aes(time)) +
1506390959334:geom_histogram(bins = 12*60) +
1506390959338:geom_vline(xintercept = 9, color = 'orange')+
1506390959339:geom_vline(xintercept = 17, color = 'red', alpha = 0.7) +
1506390959340:labs(x = "Daytime 24 Hour Clock",
1506390959346:y = "Number of Trips",
1506390959349:title = "Number of Trips in a day")
1506390978705:# number of trip in a day
1506390978708:trip %>%
1506390978710:mutate(time = hour(start_date) + minute(start_date)/60,
1506390978711:quarter = quarter(start_date)) %>%
1506390978711:ggplot(aes(time)) +
1506390978712:geom_histogram(bins = 12*60) +
1506390978713:geom_vline(xintercept = 9, color = 'orange')+
1506390978713:geom_vline(xintercept = 17, color = 'red', alpha = 0.7) +
1506390978714:labs(x = "Daytime 24 Hour Clock",
1506390978715:y = "Number of Trips",
1506390978716:title = "Number of Trips in a day") +
1506390978717:facet_wrap(~quarter)
1506391003343:trip %>%
1506391003346:mutate(time = hour(start_date) + minute(start_date)/60,
1506391003347:quarter = quarter(start_date)) %>%
1506391003348:ggplot(aes(time)) +
1506391003349:geom_histogram(bins = 12*60) +
1506391003349:labs(x = "Daytime 24 Hour Clock",
1506391003350:y = "Number of Trips",
1506391003351:title = "Number of Trips in a day") +
1506391003352:facet_wrap(~quarter)
1506391532071:trip %>% glimpse
1506391706402:trip %>%
1506391706408:as_tbl_time(index = start_date) %>%
1506391706409:time_summarise(period = "daily",
1506391706410:num_trips = n()) %>%
1506391706411:mutate(day_of_week = start_date %>% strftime("%A"),
1506391706411:week_nr = start_date %>% strftime("%W"),
1506391706412:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506391706413:mutate(weekday = if_else(weekday < 6, "weekday", "weekend"))
1506391778743:# number of trips in a day
1506391778745:trip %>%
1506391778745:mutate(time = hour(start_date) + minute(start_date)/60) %>%
1506391778746:ggplot(aes(time)) +
1506391778746:geom_histogram(bins = 12*60) +
1506391778747:geom_vline(xintercept = 9, color = 'orange')+
1506391778748:geom_vline(xintercept = 17, color = 'red', alpha = 0.7) +
1506391778749:annotate("text", x = 9, y = 0, label = "9:00 AM", color = "orange",
1506391778750:size = 7) +
1506391778751:annotate("text", x = 17, y = 0, label = "5:00 PM", color = "red",
1506391778751:size = 7) +
1506391778752:labs(x = "Daytime 24 Hour Clock",
1506391778752:y = "Number of Trips",
1506391778753:title = "Number of Trips in a day")
1506391792024:trip %>%
1506391792026:mutate(time = hour(start_date) + minute(start_date)/60)
1506391839072:# number of trips by week days
1506391839073:trip %>%
1506391839073:mutate(day = wday(start_date, label = T, abbr = F)) %>%
1506391839074:count(day) %>%
1506391839074:ggplot(aes(day, n)) +
1506391839075:geom_bar(stat = "identity") +
1506391839076:labs(x = "Week Day",
1506391839077:y = "Number of Trips",
1506391839078:title = "Number of Trips across a Week")
1506391929784:trip %>%
1506391929787:mutate(time = hour(start_date) + minute(start_date)/60,
1506391929788:quarter = quarter(start_date)) %>%
1506391929789:mutate(weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506391929790:mutate(weekday = if_else(weekday < 6, "weekday", "weekend"))
1506391936743:trip %>%
1506391936744:mutate(time = hour(start_date) + minute(start_date)/60,
1506391936745:quarter = quarter(start_date)) %>%
1506391936746:mutate(weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506391936747:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>% glimpse
1506392022750:# number of trips in a day - facet: quarter
1506392022751:trip %>%
1506392022752:mutate(time = hour(start_date) + minute(start_date)/60,
1506392022752:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506392022753:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506392022753:ggplot(aes(time)) +
1506392022754:geom_histogram(bins = 12*60) +
1506392022755:labs(x = "Daytime 24 Hour Clock",
1506392022757:y = "Number of Trips",
1506392022758:title = "Number of Trips in a day") +
1506392022760:facet_wrap(~weekday)
1506392057320:# number of trips in a day - facet: quarter
1506392057320:trip %>%
1506392057321:mutate(time = hour(start_date) + minute(start_date)/60,
1506392057321:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506392057322:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506392057323:ggplot(aes(time)) +
1506392057324:geom_histogram(bins = 12*60) +
1506392057324:labs(x = "Daytime 24 Hour Clock",
1506392057326:y = "Number of Trips",
1506392057326:title = "Number of Trips in a day") +
1506392057327:facet_grid(~weekday)
1506392147751:# number of trips in a day - facet: quarter
1506392147753:trip %>%
1506392147755:mutate(time = hour(start_date) + minute(start_date)/60,
1506392147755:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506392147756:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506392147757:ggplot(aes(time)) +
1506392147758:geom_histogram(bins = 12*60) +
1506392147759:labs(x = "Daytime 24 Hour Clock",
1506392147760:y = "Number of Trips",
1506392147762:title = "Number of Trips in a day") +
1506392147762:facet_grid(~weekday, scales = "free_y")
1506392156588:?facet_grid
1506392206816:# number of trips in a day - facet: quarter
1506392206818:trip %>%
1506392206819:mutate(time = hour(start_date) + minute(start_date)/60,
1506392206822:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506392206823:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506392206826:ggplot(aes(time)) +
1506392206827:geom_histogram(bins = 12*60) +
1506392206828:labs(x = "Daytime 24 Hour Clock",
1506392206832:y = "Number of Trips",
1506392206833:title = "Number of Trips in a day") +
1506392206834:facet_grid(~weekday, scales = "free_y", space = "free_y")
1506392294446:# number of trips in a day - facet: quarter
1506392294448:trip %>%
1506392294449:mutate(time = hour(start_date) + minute(start_date)/60,
1506392294452:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506392294454:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506392294455:ggplot(aes(time)) +
1506392294456:geom_histogram(bins = 12*60) +
1506392294457:labs(x = "Daytime 24 Hour Clock",
1506392294459:y = "Number of Trips",
1506392294465:title = "Number of Trips in a day") +
1506392294466:facet_grid(~weekday, scales = "free", space = "free")
1506392378446:# number of trips in a day - facet: quarter
1506392378450:trip %>%
1506392378452:mutate(time = hour(start_date) + minute(start_date)/60,
1506392378454:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506392378455:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506392378456:ggplot(aes(time)) +
1506392378456:facet_grid(~weekday, scales = "free", space = "free") +
1506392378458:geom_histogram(bins = 12*60) +
1506392378459:labs(x = "Daytime 24 Hour Clock",
1506392378461:y = "Number of Trips",
1506392378463:title = "Number of Trips in a day")
1506392404861:# number of trips in a day - facet: quarter
1506392404863:trip %>%
1506392404863:mutate(time = hour(start_date) + minute(start_date)/60,
1506392404863:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506392404864:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506392404864:ggplot(aes(time)) +
1506392404865:geom_histogram(bins = 12*60) +
1506392404865:labs(x = "Daytime 24 Hour Clock",
1506392404866:y = "Number of Trips",
1506392404868:title = "Number of Trips in a day") +
1506392404869:facet_wrap(~weekday, scales = "free", space = "free")
1506392414594:# number of trips in a day - facet: quarter
1506392414595:trip %>%
1506392414596:mutate(time = hour(start_date) + minute(start_date)/60,
1506392414596:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506392414597:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506392414597:ggplot(aes(time)) +
1506392414598:geom_histogram(bins = 12*60) +
1506392414598:labs(x = "Daytime 24 Hour Clock",
1506392414599:y = "Number of Trips",
1506392414599:title = "Number of Trips in a day") +
1506392414600:facet_wrap(~weekday, scales = "free")
1506392588476:# number of trips in a day
1506392588479:trip %>%
1506392588482:mutate(time = hour(start_date) + minute(start_date)/60) %>%
1506392588486:ggplot(aes(time)) +
1506392588488:geom_histogram(bins = 12*60) +
1506392588491:geom_vline(xintercept = 9, color = 'orange')+
1506392588494:geom_vline(xintercept = 17, color = 'red', alpha = 0.7) +
1506392588495:annotate("text", x = 9, y = 0, label = "9:00 AM", color = "orange",
1506392588498:size = 7) +
1506392588500:annotate("text", x = 17, y = 0, label = "5:00 PM", color = "red",
1506392588502:size = 7) +
1506392588503:labs(x = "Daytime 24 Hour Clock",
1506392588505:y = "Number of Trips",
1506392588506:title = "Number of Trips in a day")
1506392598499:# number of trips in a day - facet: quarter
1506392598500:trip %>%
1506392598501:mutate(time = hour(start_date) + minute(start_date)/60,
1506392598501:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506392598502:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506392598503:ggplot(aes(time)) +
1506392598504:geom_histogram(bins = 12*60) +
1506392598506:labs(x = "Daytime 24 Hour Clock",
1506392598507:y = "Number of Trips",
1506392598509:title = "Number of Trips in a day") +
1506392598510:facet_wrap(~weekday, scales = "free")
1506392603889:trip %>%
1506392603890:as_tbl_time(index = start_date) %>%
1506392603891:time_summarise(period = "daily",
1506392603891:num_trips = n()) %>%
1506392603892:mutate(day_of_week = start_date %>% strftime("%A"),
1506392603894:week_nr = start_date %>% strftime("%W"),
1506392603896:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506392603897:mutate(weekday = if_else(weekday < 6, "weekday", "weekend"))
1506392625772:# number of trips in a day - facet: quarter
1506392625773:trip %>%
1506392625774:mutate(time = hour(start_date) + minute(start_date)/60,
1506392625774:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506392625775:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506392625777:ggplot(aes(time)) +
1506392625779:geom_histogram(bins = 12*60) +
1506392625780:labs(x = "Daytime 24 Hour Clock",
1506392625782:y = "Number of Trips",
1506392625783:title = "Number of Trips in a day") +
1506392625784:facet_wrap(~weekday, scales = "free")
1506392694992:# number of trips in a day - facet: quarter
1506392694993:trip %>%
1506392694994:mutate(time = hour(start_date) + minute(start_date)/60,
1506392694995:quarter = quarter(start_date))%>%
1506392694996:ggplot(aes(time)) +
1506392694997:geom_histogram(bins = 12*60) +
1506392694998:labs(x = "Daytime 24 Hour Clock",
1506392695000:y = "Number of Trips",
1506392695002:title = "Number of Trips in a day") +
1506392695003:facet_wrap(~quarter)
1506392706196:# number of trip in a day - facet: weekday
1506392706197:trip %>%
1506392706198:mutate(time = hour(start_date) + minute(start_date)/60,
1506392706199:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506392706201:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506392706203:ggplot(aes(time)) +
1506392706204:geom_histogram(bins = 12*60) +
1506392706204:labs(x = "Daytime 24 Hour Clock",
1506392706205:y = "Number of Trips",
1506392706205:title = "Number of Trips in a day") +
1506392706206:facet_wrap(~weekday, scales = "free")
1506392780320:# number of trips by week days
1506392780321:trip %>%
1506392780323:mutate(day = wday(start_date, label = T, abbr = F)) %>%
1506392780324:count(day) %>%
1506392780324:ggplot(aes(day, n)) +
1506392780325:geom_bar(stat = "identity") +
1506392780326:labs(x = "Week Day",
1506392780326:y = "Number of Trips",
1506392780327:title = "Number of Trips across a Week")
1506392784600:# number of trips by day
1506392784601:trip %>%
1506392784602:as_tbl_time(index = start_date) %>%
1506392784604:time_summarise(period = "daily",
1506392784605:num_trips = n()) %>%
1506392784606:mutate(day_of_week = start_date %>% strftime("%A"),
1506392784606:week_nr = start_date %>% strftime("%W"),
1506392784607:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506392784608:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506392784608:ggplot(aes(start_date, num_trips, color = weekday)) +
1506392784609:geom_point() +
1506392784609:geom_smooth()+
1506392784610:labs(x = "Date",
1506392784610:y = "Total Number of Bicycle Trips",
1506392784612:title = "Trips Each Day")
1506392791468:# number of trips in a day
1506392791469:trip %>%
1506392791470:mutate(time = hour(start_date) + minute(start_date)/60) %>%
1506392791471:ggplot(aes(time)) +
1506392791471:geom_histogram(bins = 12*60) +
1506392791472:geom_vline(xintercept = 9, color = 'orange')+
1506392791472:geom_vline(xintercept = 17, color = 'red', alpha = 0.7) +
1506392791473:annotate("text", x = 9, y = 0, label = "9:00 AM", color = "orange",
1506392791473:size = 7) +
1506392791474:annotate("text", x = 17, y = 0, label = "5:00 PM", color = "red",
1506392791474:size = 7) +
1506392791474:labs(x = "Daytime 24 Hour Clock",
1506392791475:y = "Number of Trips",
1506392791475:title = "Number of Trips in a day")
1506392794433:# number of trip in a day - facet: weekday
1506392794434:trip %>%
1506392794435:mutate(time = hour(start_date) + minute(start_date)/60,
1506392794437:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506392794438:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506392794439:ggplot(aes(time)) +
1506392794440:geom_histogram(bins = 12*60) +
1506392794440:labs(x = "Daytime 24 Hour Clock",
1506392794441:y = "Number of Trips",
1506392794441:title = "Number of Trips in a day") +
1506392794442:facet_wrap(~weekday, scales = "free")
1506392876809:#   ____________________________________________________________________________
1506392876812:#   Duration - Based                                                        ####
1506392876813:trip %>% glimpse
1506393028416:#   ____________________________________________________________________________
1506393028417:#   Duration - Based                                                        ####
1506393028418:trip %>%
1506393028418:mutate(duration_minutes = duration/60) %>%
1506393028419:ggplot(aes(duration_minutes)) +
1506393028419:geom_histogram()
1506393062440:#   ____________________________________________________________________________
1506393062441:#   Duration - Based                                                        ####
1506393062441:trip %>%
1506393062442:mutate(duration_minutes = duration/60) %>%
1506393062443:ggplot(aes(duration_minutes)) +
1506393062444:geom_histogram() +
1506393062446:xlim(0,60)
1506393078510:#   ____________________________________________________________________________
1506393078512:#   Duration - Based                                                        ####
1506393078513:trip %>%
1506393078515:mutate(duration_minutes = duration/60) %>%
1506393078516:ggplot(aes(duration_minutes)) +
1506393078517:geom_histogram(bins = 60) +
1506393078517:xlim(0,60)
1506393098794:#   ____________________________________________________________________________
1506393098795:#   Duration - Based                                                        ####
1506393098796:trip %>%
1506393098796:mutate(duration_minutes = duration/60) %>%
1506393098796:ggplot(aes(duration_minutes)) +
1506393098797:geom_histogram(bins = 60) +
1506393098797:xlim(0,60) +
1506393098798:theme_bw()
1506393104822:#   ____________________________________________________________________________
1506393104822:#   Duration - Based                                                        ####
1506393104823:trip %>%
1506393104823:mutate(duration_minutes = duration/60) %>%
1506393104824:ggplot(aes(duration_minutes)) +
1506393104824:geom_histogram(bins = 60) +
1506393104825:xlim(0,60) +
1506393104826:theme_minimal()
1506393132374:#   ____________________________________________________________________________
1506393132375:#   Duration - Based                                                        ####
1506393132375:trip %>%
1506393132376:mutate(duration_minutes = duration/60) %>%
1506393132377:ggplot(aes(duration_minutes), fill = "white") +
1506393132377:geom_histogram(bins = 60) +
1506393132378:xlim(0,60) +
1506393132380:theme_minimal()
1506393152709:#   ____________________________________________________________________________
1506393152710:#   Duration - Based                                                        ####
1506393152710:trip %>%
1506393152711:mutate(duration_minutes = duration/60) %>%
1506393152711:ggplot(aes(duration_minutes)) +
1506393152712:geom_histogram(bins = 60, fill = "white", color = "black") +
1506393152712:xlim(0,60) +
1506393152713:theme_minimal()
1506393196808:stat_bin()
1506393255961:#   ____________________________________________________________________________
1506393255964:#   Duration - Based                                                        ####
1506393255965:trip %>%
1506393255966:mutate(duration_minutes = duration/60) %>%
1506393255967:ggplot(aes(duration_minutes)) +
1506393255968:geom_histogram(bins = 60, fill = "white", color = "black") +
1506393255969:xlim(0,60) +
1506393255970:theme_minimal() +
1506393255970:labs(x = "Minutes",
1506393255971:y = "Number of Trips",
1506393255972:title = "Trip Duration")
1506393378664:# trip duration - by weekday
1506393378666:trip %>%
1506393378668:mutate(duration_minutes = duration/60,
1506393378670:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506393378671:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506393378672:ggplot(aes(duration_minutes)) +
1506393378672:geom_histogram(bins = 60, fill = "white", color = "black") +
1506393378673:xlim(0,60) +
1506393378674:theme_minimal() +
1506393378675:labs(x = "Minutes",
1506393378676:y = "Number of Trips",
1506393378679:title = "Trip Duration") +
1506393378682:facet_wrap(~weekday, scales = "free")
1506393477431:# trip duration - by weekday
1506393477434:trip %>%
1506393477436:mutate(duration_minutes = duration/60,
1506393477437:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506393477438:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506393477439:ggplot(aes(duration_minutes)) +
1506393477440:geom_histogram(bins = 60, fill = "white", color = "black") +
1506393477441:xlim(0,60) +
1506393477443:theme_minimal() +
1506393477445:labs(x = "Minutes",
1506393477446:y = "Number of Trips",
1506393477447:title = "Trip Duration") +
1506393477452:facet_wrap(~weekday, scales = "free", nrow = 2)
1506393502153:# trip duration - by weekday
1506393502154:trip %>%
1506393502155:mutate(duration_minutes = duration/60,
1506393502155:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506393502155:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506393502156:ggplot(aes(duration_minutes)) +
1506393502156:geom_histogram(bins = 60, fill = "white", color = "black") +
1506393502157:xlim(0,60) +
1506393502157:labs(x = "Minutes",
1506393502158:y = "Number of Trips",
1506393502159:title = "Trip Duration") +
1506393502160:facet_wrap(~weekday, scales = "free", nrow = 2)
1506393508816:# trip duration - in generall
1506393508817:trip %>%
1506393508818:mutate(duration_minutes = duration/60) %>%
1506393508818:ggplot(aes(duration_minutes)) +
1506393508819:geom_histogram(bins = 60, fill = "white", color = "black") +
1506393508820:xlim(0,60) +
1506393508821:labs(x = "Minutes",
1506393508823:y = "Number of Trips",
1506393508824:title = "Trip Duration")
1506393511871:# trip duration - by weekday
1506393511871:trip %>%
1506393511872:mutate(duration_minutes = duration/60,
1506393511872:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506393511873:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506393511873:ggplot(aes(duration_minutes)) +
1506393511874:geom_histogram(bins = 60, fill = "white", color = "black") +
1506393511874:xlim(0,60) +
1506393511875:labs(x = "Minutes",
1506393511876:y = "Number of Trips",
1506393511877:title = "Trip Duration") +
1506393511878:facet_wrap(~weekday, scales = "free", nrow = 2)
1506393580399:# trip duration - by weekday
1506393580406:trip %>%
1506393580407:mutate(duration_minutes = duration/60,
1506393580408:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506393580409:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506393580411:ggplot(aes(duration_minutes)) +
1506393580413:geom_histogram(bins = 60, fill = "white", color = "black") +
1506393580414:xlim(0,100) +
1506393580415:labs(x = "Minutes",
1506393580416:y = "Number of Trips",
1506393580417:title = "Trip Duration") +
1506393580419:facet_wrap(~weekday, scales = "free", nrow = 2)
1506393594776:# trip duration - by weekday
1506393594777:trip %>%
1506393594778:mutate(duration_minutes = duration/60,
1506393594779:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506393594780:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506393594781:ggplot(aes(duration_minutes)) +
1506393594784:geom_histogram(bins = 100, fill = "white", color = "black") +
1506393594786:xlim(0,100) +
1506393594787:labs(x = "Minutes",
1506393594788:y = "Number of Trips",
1506393594789:title = "Trip Duration") +
1506393594789:facet_wrap(~weekday, scales = "free", nrow = 2)
1506393725482:# trip duration - in generall
1506393725483:trip %>%
1506393725485:mutate(duration_minutes = duration/60) %>%
1506393725487:ggplot(aes(duration_minutes)) +
1506393725489:geom_histogram(bins = 60, fill = "white", color = "black") +
1506393725492:xlim(0,60) +
1506393725493:labs(x = "Minutes",
1506393725494:y = "Number of Trips",
1506393725495:title = "Trip Duration")
1506393825380:trip %>%
1506393825383:mutate(duration_minutes = duration/60,
1506393825385:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506393825386:mutate(weekday = if_else(weekday < 6, "weekday", "weekend"))
1506393831384:trip %>%
1506393831385:mutate(duration_minutes = duration/60,
1506393831385:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506393831386:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>% glimpse
1506393858226:?time_summarise
1506394025226:# mean trips duration ~ weekday
1506394025227:trip %>%
1506394025228:mutate(duration_minutes = duration/60,
1506394025228:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506394025229:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506394025229:group_by(day_of_week) %>%
1506394025230:summarise(mean_duration_minutes = mean(duration)/60)
1506394079344:# mean trips duration ~ weekday
1506394079347:trip %>%
1506394079347:mutate(duration_minutes = duration/60,
1506394079348:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506394079349:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506394079349:group_by(day_of_week) %>%
1506394079350:summarise(mean_duration_minutes = mean(duration)/60) %>%
1506394079350:ggplot(aes(day_of_week)) +
1506394079351:geom_bar(stat = "identity")
1506394094505:# mean trips duration ~ weekday
1506394094506:trip %>%
1506394094507:mutate(duration_minutes = duration/60,
1506394094508:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506394094508:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506394094509:group_by(day_of_week) %>%
1506394094510:summarise(mean_duration_minutes = mean(duration)/60) %>%
1506394094510:ggplot(aes(day_of_week, mean_duration_minutes)) +
1506394094511:geom_bar(stat = "identity")
1506394156061:weekdays("Monday")
1506394185510:weekdays %>% help()
1506394193710:?weekdays
1506394203485:.leap.seconds
1506394209093:weekdays(.leap.seconds)
1506394229893:weekdays(.leap.seconds) %>% factor()
1506394247875:format()
1506394314385:as_tbl_time(index = start_date) %>%
1506394314388:time_summarise(period = "munite")
1506394327896:# mean trips duration ~ weekday
1506394327897:trip %>%
1506394327897:mutate(duration_minutes = duration/60,
1506394327898:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506394327898:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506394327899:group_by(day_of_week) %>%
1506394327900:summarise(mean_duration_minutes = mean(duration)/60) %>%
1506394327901:ggplot(aes(x = factor(day_of_week, weekdays(as.Date('1970-01-03') + 1:7)),
1506394327904:y = mean_duration_minutes)) +
1506394327906:geom_bar(stat = "identity")
1506394360153:# mean trips duration ~ weekday
1506394360155:trip %>%
1506394360156:mutate(duration_minutes = duration/60,
1506394360158:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506394360159:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506394360160:group_by(day_of_week) %>%
1506394360161:summarise(mean_duration_minutes = mean(duration)/60) %>%
1506394360161:ggplot(aes(x = factor(day_of_week, weekdays(as.Date('1970-01-03') + 1:7)),
1506394360162:y = mean_duration_minutes)) +
1506394360163:geom_path()
1506394379284:?geom_path
1506394392070:# mean trips duration ~ weekday
1506394392071:trip %>%
1506394392072:mutate(duration_minutes = duration/60,
1506394392072:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506394392073:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506394392073:group_by(day_of_week) %>%
1506394392073:summarise(mean_duration_minutes = mean(duration)/60) %>%
1506394392074:ggplot(aes(x = factor(day_of_week, weekdays(as.Date('1970-01-03') + 1:7)),
1506394392074:y = mean_duration_minutes)) +
1506394392075:geom_line()
1506394400252:>geom_line()
1506394403778:?geom_line
1506394412928:# mean trips duration ~ weekday
1506394412929:trip %>%
1506394412931:mutate(duration_minutes = duration/60,
1506394412933:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506394412934:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506394412934:group_by(day_of_week) %>%
1506394412935:summarise(mean_duration_minutes = mean(duration)/60) %>%
1506394412936:ggplot(aes(x = factor(day_of_week, weekdays(as.Date('1970-01-03') + 1:7)),
1506394412936:y = mean_duration_minutes)) +
1506394412937:geom_line(stat = "identity")
1506394435766:trip %>%
1506394435767:mutate(duration_minutes = duration/60,
1506394435768:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506394435769:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506394435769:group_by(day_of_week) %>%
1506394435770:summarise(mean_duration_minutes = mean(duration)/60)
1506394457021:# mean trips duration ~ weekday
1506394457023:trip %>%
1506394457024:mutate(duration_minutes = duration/60,
1506394457025:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506394457027:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506394457029:group_by(day_of_week) %>%
1506394457030:summarise(mean_duration_minutes = mean(duration)/60) %>%
1506394457030:ggplot(aes(factor(day_of_week, weekdays(as.Date('1970-01-03') + 1:7)),
1506394457031:mean_duration_minutes)) +
1506394457032:geom_line(stat = "identity")
1506394476250:# mean trips duration ~ weekday
1506394476251:trip %>%
1506394476251:mutate(duration_minutes = duration/60,
1506394476252:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506394476252:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506394476253:group_by(day_of_week) %>%
1506394476253:summarise(mean_duration_minutes = mean(duration)/60) %>%
1506394476254:ggplot(aes(factor(day_of_week, weekdays(as.Date('1970-01-03') + 1:7)),
1506394476255:mean_duration_minutes)) +
1506394476257:geom_line()
1506394523843:# mean trips duration ~ weekday
1506394523845:trip %>%
1506394523846:mutate(duration_minutes = duration/60,
1506394523847:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506394523847:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506394523848:group_by(day_of_week) %>%
1506394523850:summarise(mean_duration_minutes = mean(duration)/60) %>%
1506394523851:ggplot(aes(factor(day_of_week, weekdays(as.Date('1970-01-03') + 1:7)),
1506394523854:mean_duration_minutes,
1506394523855:group = 1)) +
1506394523856:geom_line()
1506394648685:mean_duration_minutes) +
1506394654248:# mean trips duration ~ weekday
1506394654249:trip %>%
1506394654249:mutate(duration_minutes = duration/60,
1506394654250:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506394654251:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506394654251:group_by(day_of_week) %>%
1506394654252:summarise(mean_duration_minutes = mean(duration)/60) %>%
1506394654252:ggplot(aes(factor(day_of_week, weekdays(as.Date('1970-01-03') + 1:7)),
1506394654254:mean_duration_minutes)) +
1506394654255:geom_bar(stat = "identity")
1506394779073:# mean trips duration ~ weekday
1506394779075:trip %>%
1506394779076:mutate(duration_minutes = duration/60,
1506394779077:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506394779077:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506394779078:group_by(day_of_week) %>%
1506394779078:summarise(mean_duration_minutes = mean(duration)/60) %>%
1506394779079:ggplot(aes(factor(day_of_week, weekdays(as.Date('1970-01-03') + 1:7)),
1506394779079:mean_duration_minutes)) +
1506394779080:geom_bar(stat = "identity") +
1506394779081:coord_flip() +
1506394779082:labs(x = "",
1506394779083:y = "Mean Trip Duration",
1506394779083:title = "Mean Trip Duration ~ Weekdays")
1506394821236:# mean trips duration ~ weekday
1506394821237:trip %>%
1506394821238:mutate(duration_minutes = duration/60,
1506394821244:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506394821248:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506394821250:group_by(day_of_week) %>%
1506394821251:summarise(mean_duration_minutes = mean(duration)/60) %>%
1506394821252:ggplot(aes(factor(day_of_week, weekdays(as.Date('1970-01-03') + 1:7)),
1506394821253:mean_duration_minutes)) +
1506394821254:geom_bar(stat = "identity", width = 0.5) +
1506394821263:coord_flip() +
1506394821264:labs(x = "",
1506394821265:y = "Mean Trip Duration",
1506394821265:title = "Mean Trip Duration ~ Weekdays")
1506394842570:# mean trips duration ~ weekday
1506394842571:trip %>%
1506394842571:mutate(duration_minutes = duration/60,
1506394842572:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506394842572:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506394842573:group_by(day_of_week) %>%
1506394842573:summarise(mean_duration_minutes = mean(duration)/60) %>%
1506394842573:ggplot(aes(factor(day_of_week, weekdays(as.Date('1970-01-03') + 1:7)),
1506394842574:mean_duration_minutes)) +
1506394842574:geom_bar(stat = "identity", width = 0.5, fill = "white") +
1506394842575:coord_flip() +
1506394842576:labs(x = "",
1506394842576:y = "Mean Trip Duration",
1506394842578:title = "Mean Trip Duration ~ Weekdays")
1506394851208:# mean trips duration ~ weekday
1506394851210:trip %>%
1506394851212:mutate(duration_minutes = duration/60,
1506394851213:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506394851214:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506394851215:group_by(day_of_week) %>%
1506394851216:summarise(mean_duration_minutes = mean(duration)/60) %>%
1506394851216:ggplot(aes(factor(day_of_week, weekdays(as.Date('1970-01-03') + 1:7)),
1506394851217:mean_duration_minutes)) +
1506394851217:geom_bar(stat = "identity", width = 0.5, fill = "white", color = "black") +
1506394851218:coord_flip() +
1506394851219:labs(x = "",
1506394851221:y = "Mean Trip Duration",
1506394851222:title = "Mean Trip Duration ~ Weekdays")
1506394904141:# trip duration - facet: weekday
1506394904143:trip %>%
1506394904144:mutate(duration_minutes = duration/60,
1506394904146:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506394904147:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506394904149:ggplot(aes(duration_minutes)) +
1506394904152:geom_histogram(bins = 100, fill = "white", color = "black") +
1506394904153:xlim(0,100) +
1506394904154:labs(x = "Minutes",
1506394904155:y = "Number of Trips",
1506394904156:title = "Trip Duration by weekday") +
1506394904157:facet_wrap(~weekday, scales = "free", nrow = 2)
1506394908797:# trip duration - in generall
1506394908798:trip %>%
1506394908798:mutate(duration_minutes = duration/60) %>%
1506394908799:ggplot(aes(duration_minutes)) +
1506394908799:geom_histogram(bins = 60, fill = "white", color = "black") +
1506394908800:xlim(0,60) +
1506394908800:labs(x = "Minutes",
1506394908801:y = "Number of Trips",
1506394908801:title = "Trip Duration")
1506394918226:# mean trips duration ~ weekday
1506394918227:trip %>%
1506394918228:mutate(duration_minutes = duration/60,
1506394918228:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506394918229:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506394918229:group_by(day_of_week) %>%
1506394918230:summarise(mean_duration_minutes = mean(duration)/60) %>%
1506394918231:ggplot(aes(factor(day_of_week, weekdays(as.Date('1970-01-03') + 1:7)),
1506394918231:mean_duration_minutes)) +
1506394918232:geom_bar(stat = "identity", width = 0.5, fill = "white", color = "black") +
1506394918232:coord_flip() +
1506394918233:labs(x = "",
1506394918233:y = "Mean Trip Duration",
1506394918234:title = "Mean Trip Duration ~ Weekdays")
1506395398448:weather %>% glimpse
1506395653339:fit1 <- lm(data = weather,
1506395653344:formula = num_trips ~
1506395653346:mean_temperature_f +
1506395653347:mean_visibility_miles +
1506395653348:mean_humidity +
1506395653348:mean_wind_speed_mph)
1506395657085:summary(fit1)
1506395693200:fit1 <- lm(data = weather,
1506395693202:formula = num_trips ~
1506395693202:mean_temperature_f +
1506395693203:precipitation_in +
1506395693203:mean_visibility_miles +
1506395693204:mean_humidity +
1506395693204:mean_wind_speed_mph )
1506395695020:summary(fit1)
1506395819714:weather <- read_csv("data/201608_weather_data.csv")
1506395821103:# rename
1506395821104:names(weather) <-
1506395821105:names(weather) %>%
1506395821105:gsub(" ", "_", .) %>%
1506395821106:gsub("(.*[a-z])()([A-Z].*)", "\\1\\_\\2\\3", .) %>%
1506395821106:tolower()
1506395825795:weather %>% names()
1506395832588:trip<- trip %>%
1506395832589:mutate(day_of_week = start_date %>% strftime("%A"),
1506395832590:week_nr = start_date %>% strftime("%W"),
1506395832591:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506395832591:mutate(weekday = if_else(weekday < 6, "weekday", "weekend"))
1506395835530:weather <- read_csv("data/201608_weather_data.csv")
1506395838935:weather %>% names()
1506395852145:names(weather) %>%
1506395852146:gsub(" ", "_", .)
1506395860953:kday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506395860955:mutate(weekday = if_else(weekday < 6, "weekday", "weekend"))
1506395860956:weather <- read_csv("data/201608_weather_data.csv")
1506395860976:# rename
1506395860977:names(weather) <-
1506395860977:names(weather) %>%
1506395860978:gsub(" ", "_", .) %>%
1506395860979:gsub("(.*[a-z])()([A-Z].*)", "\\1\\_\\2\\3", .)
1506395867660:weather <- read_csv("data/201608_weather_data.csv")
1506395872617:names(weather) %>%
1506395872618:gsub(" ", "_", .) %>%
1506395872619:gsub("(.*[a-z])()([A-Z].*)", "\\1\\_\\2\\3", .)
1506395927935:weather <- read_csv("data/201608_weather_data.csv")
1506395931128:names(weather) %>%
1506395931129:gsub(" ", "_", .) %>%
1506395931130:gsub("(.*[a-z])([A-Z].*)", "\\1\\_\\2", .)
1506395949756:a
1506395952804:a = "MeanDew_Point_F"
1506395976369:gsub("(.*[a-z])([A-Z].*)", "\\1\\_\\2",a)
1506395991688:a %>% gsub(" ", "_", .) %>%
1506395991689:gsub("(.*[a-z])([A-Z].*)", "\\1\\_\\2", .)
1506395998147:weather <- read_csv("data/201608_weather_data.csv")
1506395999081:# rename
1506395999083:names(weather) <-
1506395999084:names(weather) %>%
1506395999085:gsub(" ", "_", .) %>%
1506395999087:gsub("(.*[a-z])([A-Z].*)", "\\1\\_\\2", .) %>%
1506395999088:tolower()
1506396004816:names(weather)
1506396016964:a
1506396038743:a %>%
1506396038744:gsub(" ", "_", .) %>%
1506396038745:gsub("(.*[a-z])([A-Z].*)", "\\1\\_\\2", .)
1506396048530:a %>%
1506396048531:gsub(" ", "_", .) %>%
1506396048531:gsub("(.*[a-z])([A-Z].*)", "\\1\\_\\2", .) %>%
1506396048532:tolower
1506396059112:names(weather)
1506396064293:weather <- read_csv("data/201608_weather_data.csv")
1506396066637:names(weather)
1506396077549:names(weather) %>%
1506396077550:gsub(" ", "_", .)
1506396081272:names(weather) %>%
1506396081274:gsub(" ", "_", .) %>%
1506396081275:gsub("(.*[a-z])([A-Z].*)", "\\1\\_\\2", .)
1506396117491:a %>%
1506396117493:gsub("(.*[a-z])([A-Z].*)", "\\1\\_\\2", .) %>%
1506396117494:gsub(" ", "_", .) %>%
1506396117495:tolower
1506396120778:weather <- read_csv("data/201608_weather_data.csv")
1506396123175:# rename
1506396123176:names(weather) <-
1506396123178:names(weather) %>%
1506396123179:gsub("(.*[a-z])([A-Z].*)", "\\1\\_\\2", .) %>%
1506396123180:gsub(" ", "_", .) %>%
1506396123181:tolower()
1506396128707:names(weather)
1506396144578:# rename
1506396144579:names(weather) <-
1506396144581:names(weather) %>%
1506396144582:gsub(" ", "_", .) %>%
1506396144584:gsub("(.*[a-z])([A-Z].*)", "\\1\\_\\2", .) %>%
1506396144586:tolower()
1506396146834:weather
1506396153017:names(weather)
1506396172735:weather <- read_csv("data/201608_weather_data.csv")
1506396176435:weather %>% names
1506396184416:a = names(weather) %>%
1506396184417:gsub(" ", "_", .) %>%
1506396184418:gsub("(.*[a-z])([A-Z].*)", "\\1\\_\\2", .)
1506396186735:a
1506396204424:names(weather) %>%
1506396204425:gsub(" ", "_", .) %>%
1506396204427:gsub("(.*[a-z])([A-Z].*)", "\\1\\_\\2", .)
1506396211313:a = names(weather)
1506396221530:a %>%
1506396221531:gsub("(.*[a-z])([A-Z].*)", "\\1\\_\\2", .)
1506396238338:a %>%
1506396238340:gsub("(.*[a-z])([A-Z])", "\\1\\_\\2", .) %>%
1506396238341:gsub(" ", "_", .) %>%
1506396238342:tolower
1506396258719:a %>%
1506396258720:gsub("(.*[a-z])([A-Z])(.*)", "\\1\\_\\2\\3", .) %>%
1506396258721:gsub(" ", "_", .) %>%
1506396258722:tolower
1506396281334:weather <- read_csv("data/201608_weather_data.csv")
1506396286865:a = names(weather)
1506396288026:a
1506396374116:a %>%
1506396374122:gsub("(.*[a-z])([A-Z].*)", "\\1\\_\\2", .)
1506396497123:a %>%
1506396497126:gsub("?(.*[a-z])([A-Z].*)", "\\1\\_\\2", .)
1506396603251:x <- c("ThisText", "NextText", "LongerCamelCaseText")
1506396604215:x
1506396606261:substr(tolower(gsub("([A-Z])","\\.\\1",x)),2,.Machine$integer.max)
1506396610218:substr(tolower(gsub("([A-Z])","\\_\\1",x)),2,.Machine$integer.max)
1506396623213:?substr
1506396629236:substr(tolower(gsub("([A-Z])","\\_\\1",a)),2,.Machine$integer.max)
1506396662952:.Machine$integer.max
1506396675902:tolower(gsub("([A-Z])","\\_\\1",a))
1506396731290:substr(tolower(gsub("([A-Z])","\\_\\1",a)),2, 10)
1506396808495:substr(gsub("(.*[a-z])([A-Z].*)", "\\1\\_\\2", a), 2, 10)
1506396815745:substr(gsub("(.*[a-z])([A-Z].*)", "\\1\\_\\2", a), 1, 10)
1506396824488:substr(gsub("(.*[a-z])([A-Z].*)", "\\1\\_\\2", a), 1, 55)
1506396868507:substr(gsub("(.*[a-z])([A-Z])", "\\1\\_\\2", a), 2, 10)
1506396873898:substr(gsub("(.*[a-z])([A-Z])", "\\1\\_\\2", a), 2, 100)
1506396878412:substr(gsub("(.*[a-z])([A-Z])", "\\1\\_\\2", a), 1, 100)
1506396897803:substr(gsub("([a-z])([A-Z])", "\\1\\_\\2", a), 1, 100)
1506396910378:weather <- read_csv("data/201608_weather_data.csv")
1506396910955:# rename
1506396910957:names(weather) <-
1506396910958:names(weather) %>%
1506396910958:gsub(" ", "_", .) %>%
1506396910958:gsub("([a-z])([A-Z])", "\\1\\_\\2", .) %>%
1506396910959:tolower()
1506396916180:names(weather)
1506396934980:weather <- read_csv("data/201608_weather_data.csv")
1506396935018:# rename
1506396935019:names(weather) <-
1506396935019:names(weather) %>%
1506396935020:gsub(" ", "_", .) %>%
1506396935020:gsub("([a-z])([A-Z])", "\\1\\_\\2", .) %>%
1506396935021:tolower()
1506396935023:weather <- weather %>%
1506396935023:mutate(events = ifelse(is.na(events), "None", events)) %>%
1506396935024:mutate(events = as.factor(events)) %>%
1506396935025:mutate(pdt = mdy(pdt))
1506396935110:weather <- weather %>%
1506396935110:mutate(precipitation_in = as.numeric(precipitation_in)) %>%
1506396935111:mutate(precipitation_in = ifelse(is.na(precipitation_in),
1506396935111:0, precipitation_in))
1506396944326:fit1 <- lm(data = weather,
1506396944327:formula = num_trips ~
1506396944327:mean_temperature_f +
1506396944328:precipitation_in +
1506396944329:mean_visibility_miles +
1506396944329:mean_humidity +
1506396944330:mean_wind_speed_mph +
1506396944330:cloud_cover +
1506396944331:)
1506396956455:weather %>% names()
1506396967500:fit1 <- lm(data = weather,
1506396967501:formula = num_trips ~
1506396967502:mean_temperature_f +
1506396967503:precipitation_in +
1506396967504:mean_dew_point_f +
1506396967506:mean_visibility_miles +
1506396967508:mean_humidity +
1506396967509:mean_wind_speed_mph +
1506396967510:cloud_cover
1506396967510:)
1506396992518:weather <- weather %>%
1506396992519:left_join(trip_daily, by = c("pdt" = "start_date"))
1506396994997:fit1 <- lm(data = weather,
1506396994998:formula = num_trips ~
1506396994999:mean_temperature_f +
1506396994999:precipitation_in +
1506396995000:mean_dew_point_f +
1506396995001:mean_visibility_miles +
1506396995002:mean_humidity +
1506396995003:mean_wind_speed_mph +
1506396995004:cloud_cover
1506396995005:)
1506397000427:summary(fit1)
1506397206545:formula = "num_trips ~
1506397206551:mean_temperature_f +
1506397206554:precipitation_in +
1506397206555:mean_dew_point_f +
1506397206556:mean_visibility_miles +
1506397206556:mean_humidity +
1506397206558:mean_wind_speed_mph +
1506397206559:cloud_cover"
1506397217137:fit1 <- lm(data = weather,
1506397217139:formula = formula)
1506397220472:fit1
1506397241464:formula = "num_trips ~ mean_temperature_f +
1506397241467:precipitation_in +
1506397241468:mean_dew_point_f +
1506397241469:mean_visibility_miles +
1506397241469:mean_humidity +
1506397241470:mean_wind_speed_mph +
1506397241470:cloud_cover"
1506397288298:l1 <- regsubsets(fit1, direction = "forward")
1506397336302:l1 <- regsubsets(data = weather,
1506397336305:formula = formula,
1506397336305:method = "backward", nvmax = 15)
1506397340620:l1 <- regsubsets(data = weather,
1506397340621:x = formula,
1506397340622:method = "backward", nvmax = 15)
1506397345617:?regsubsets
1506397352487:formula
1506397375299:l1 <- regsubsets(data = weather,
1506397375302:x = num_trips ~ .,
1506397375305:method = "backward", nvmax = 15)
1506397387013:l1 <- regsubsets(data = weather,
1506397387014:x = formula,
1506397387014:method = "backward", nvmax = 15)
1506397423012:l1 <- regsubsets(data = weather,
1506397423013:formula,
1506397423014:method = "backward", nvmax = 15)
1506397436198:l1 <- regsubsets(data = weather,
1506397436200:num_trips ~
1506397436201:mean_temperature_f +
1506397436202:precipitation_in +
1506397436202:mean_dew_point_f +
1506397436203:mean_visibility_miles +
1506397436203:mean_humidity +
1506397436204:mean_wind_speed_mph +
1506397436204:cloud_cover,
1506397436205:method = "backward", nvmax = 15)
1506397438373:l1
1506397453449:summary(l1)
1506397511916:l1 <- regsubsets(data = weather,
1506397511920:num_trips ~
1506397511921:mean_temperature_f +
1506397511922:precipitation_in +
1506397511925:mean_visibility_miles +
1506397511927:mean_humidity +
1506397511928:mean_wind_speed_mph +
1506397511929:cloud_cover,
1506397511930:method = "backward", nvmax = 15)
1506397512382:summary(l1)
1506397527416:fit1 <- lm(data = weather,
1506397527419:formula = formula)
1506397531616:summary(fit1)
1506397552852:l1 <- regsubsets(data = weather,
1506397552853:num_trips ~
1506397552853:mean_temperature_f +
1506397552854:precipitation_in +
1506397552854:mean_visibility_miles +
1506397552854:mean_humidity +
1506397552855:mean_wind_speed_mph +
1506397552856:cloud_cover,
1506397552856:method = "forward", nvmax = 15)
1506397553265:summary(l1)
1506397660066:s1 <- summary(l1)
1506397665124:s1$adjr2
1506397674858:s1$rss
1506397679817:s1$rsq
1506397684421:s1$bic
1506397691809:s1$cp
1506397701730:?regsubsets
1506397839894:# select one will smallest Mallow's Cp
1506397839897:formula = "num_trips ~
1506397839900:mean_temperature_f +
1506397839902:mean_visibility_miles +
1506397839902:precipitation_in +
1506397839903:cloud_cover"
1506397852329:fit1 <- lm(data = weather,
1506397852331:formula = formula)
1506397856375:summary(fit1)
1506397882283:plot(fit1)
1506398012724:?log
1506398020407:# select one will smallest Mallow's Cp
1506398020409:formula = "num_trips ~
1506398020410:log(mean_temperature_f) +
1506398020411:mean_visibility_miles +
1506398020412:precipitation_in +
1506398020412:cloud_cover"
1506398021569:fit1 <- lm(data = weather,
1506398021571:formula = formula)
1506398022169:summary(fit1)
1506398026658:plot(fit1)
1506398098318:# select one will smallest Mallow's Cp
1506398098320:formula = "num_trips ~
1506398098321:I(mean_temperature_f^2) +
1506398098322:mean_visibility_miles +
1506398098322:precipitation_in +
1506398098324:cloud_cover"
1506398099792:fit1 <- lm(data = weather,
1506398099794:formula = formula)
1506398100376:summary(fit1)
1506398104755:plot(fit1)
1506398173988:summary(fit1)
1506398175423:?lm
1506398207027:s2 <- summary(fit1)
1506398217969:s2$fstatistic
1506398303247:# select one will smallest Mallow's Cp
1506398303249:formula = "num_trips ~
1506398303251:mean_temperature_f +
1506398303252:mean_visibility_miles +
1506398303252:precipitation_in +
1506398303253:cloud_cover"
1506398303799:fit1 <- lm(data = weather,
1506398303800:formula = formula)
1506398304381:s2 <- summary(fit1)
1506398309244:s2
1506398527887:?plot
1506398539130:?plot.lm
1506398554964:plot(fit1, 1:4)
1506398587380:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506398588019:plot(fit1, 1:4)
1506398598224:plot(fit1)
1506398642847:plot(lm(data = wea her, formula = num_trips ~ mean_teamperature_f))
1506398647800:plot(lm(data = weather, formula = num_trips ~ mean_teamperature_f))
1506398675395:lm(data = weather, formula = num_trips ~ mean_teamperature_f)
1506398686239:?lm
1506398703616:plot(lm(data = weather,
1506398703617:formula = num_trips ~ mean_teamperature_f))
1506398708769:weather
1506398717490:plot(lm(data = weather,
1506398717491:formula = num_trips ~ mean_temperature_f))
1506398729757:plot(fit1)
1506398756078:plot(lm(data = weather,
1506398756079:formula = num_trips ~ mean_visibility_miles))
1506398757689:plot(lm(data = weather,
1506398757690:formula = num_trips ~ precipitation_in))
1506398759741:plot(lm(data = weather,
1506398759742:formula = num_trips ~ cloud_cover))
1506398788088:hist(fit1$residuals)
1506398877117:s2
1506398919553:s2$residuals
1506398931261:weather$num_trips
1506398964533:# number of trips by week days
1506398964535:trip %>%
1506398964535:mutate(day = wday(start_date, label = T, abbr = F)) %>%
1506398964536:count(day) %>%
1506398964537:ggplot(aes(day, n)) +
1506398964537:geom_bar(stat = "identity") +
1506398964539:labs(x = "Week Day",
1506398964540:y = "Number of Trips",
1506398964541:title = "Number of Trips across a Week")
1506398970526:# number of trips by day
1506398970527:trip %>%
1506398970528:as_tbl_time(index = start_date) %>%
1506398970528:time_summarise(period = "daily",
1506398970529:num_trips = n()) %>%
1506398970529:mutate(day_of_week = start_date %>% strftime("%A"),
1506398970529:week_nr = start_date %>% strftime("%W"),
1506398970530:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506398970530:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506398970531:ggplot(aes(start_date, num_trips, color = weekday)) +
1506398970531:geom_point() +
1506398970532:geom_smooth()+
1506398970532:labs(x = "Date",
1506398970533:y = "Total Number of Bicycle Trips",
1506398970533:title = "Trips Each Day")
1506399157680:weather %>% glimpse
1506399167074:weather <- read_csv("data/201608_weather_data.csv")
1506399167693:# rename
1506399167693:names(weather) <-
1506399167694:names(weather) %>%
1506399167695:gsub(" ", "_", .) %>%
1506399167695:gsub("([a-z])([A-Z])", "\\1\\_\\2", .) %>%
1506399167696:tolower()
1506399168176:weather <- weather %>%
1506399168176:mutate(events = ifelse(is.na(events), "None", events)) %>%
1506399168177:mutate(events = as.factor(events)) %>%
1506399168178:mutate(pdt = mdy(pdt))
1506399168616:weather <- weather %>%
1506399168616:mutate(precipitation_in = as.numeric(precipitation_in)) %>%
1506399168617:mutate(precipitation_in = ifelse(is.na(precipitation_in),
1506399168617:0, precipitation_in))
1506399171660:weather <- weather %>%
1506399171664:mutate(events = ifelse(is.na(events), "None", events)) %>%
1506399171665:mutate(events = as.factor(events)) %>%
1506399171665:mutate(pdt = mdy(pdt))
1506399175436:weather <- read_csv("data/201608_weather_data.csv")
1506399175952:# rename
1506399175953:names(weather) <-
1506399175955:names(weather) %>%
1506399175957:gsub(" ", "_", .) %>%
1506399175958:gsub("([a-z])([A-Z])", "\\1\\_\\2", .) %>%
1506399175959:tolower()
1506399176418:weather <- weather %>%
1506399176419:mutate(events = ifelse(is.na(events), "None", events)) %>%
1506399176420:mutate(events = as.factor(events)) %>%
1506399176421:mutate(pdt = mdy(pdt))
1506399177019:weather <- weather %>%
1506399177020:mutate(precipitation_in = as.numeric(precipitation_in)) %>%
1506399177021:mutate(precipitation_in = ifelse(is.na(precipitation_in),
1506399177022:0, precipitation_in))
1506399184224:weather <- weather %>%
1506399184225:left_join(trip_daily, by = c("pdt" = "start_date"))
1506399189689:weather %>% glimpse
1506399227374:weather <- weather %>%
1506399227375:mutate(day_of_week = start_date %>% strftime("%A"),
1506399227377:week_nr = start_date %>% strftime("%W"),
1506399227379:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506399227379:mutate(weekday = if_else(weekday < 6, "weekday", "weekend"))
1506399236918:weather <- weather %>%
1506399236919:mutate(day_of_week = pdt %>% strftime("%A"),
1506399236920:week_nr = pdt %>% strftime("%W"),
1506399236920:weekday = pdt %>% strftime("%u") %>% as.numeric) %>%
1506399236920:mutate(weekday = if_else(weekday < 6, "weekday", "weekend"))
1506399239087:weather %>% glimpse
1506399287501:?gml
1506399289252:?glm
1506399335042:l1 <- regsubsets(data = weather,
1506399335046:num_trips ~
1506399335047:mean_temperature_f +
1506399335048:weekday +
1506399335049:precipitation_in +
1506399335049:mean_visibility_miles +
1506399335050:mean_humidity +
1506399335051:mean_wind_speed_mph +
1506399335052:cloud_cover,
1506399335052:method = "forward", nvmax = 15)
1506399339348:s1 <- summary(l1)
1506399340701:s1
1506399352061:weather %>% glimpse
1506399390199:s1$cp
1506399447310:# select one will smallest Mallow's Cp
1506399447312:formula = "num_trips ~
1506399447314:weekday +
1506399447315:mean_temperature_f +
1506399447318:precipitation_in +
1506399447320:mean_visibility_miles +
1506399447321:mean_wind_speed_mph"
1506399448747:fit1 <- glm(data = weather,
1506399448748:formula = formula)
1506399449313:s2 <- summary(fit1)
1506399450583:s2
1506399465169:plot(fit1)
1506399480098:s2$df.residual
1506399487584:s2$deviance.resid
1506399516903:summary(s2)
1506399522664:s2
1506399558599:fit1 <- glm(data = weather,
1506399558600:formula = formula,
1506399558601:family = gaussian)
1506399560927:s2 <- summary(fit1)
1506399562219:s2
1506399610827:plot(fit1)
1506399616738:dev.off
1506399619608:dev.off()
1506399621259:plot(fit1)
1506399766786:weather %>% count(weekday)
1506399769911:weather_weekday <- weather %>%
1506399769912:mutate(weekday == "weekday")
1506399770145:weather_weekend <- weather %>%
1506399770145:mutate(weekday = "weekend")
1506399777184:l1 <- regsubsets(data = weather_weekday,
1506399777186:num_trips ~
1506399777188:mean_temperature_f +
1506399777190:precipitation_in +
1506399777190:mean_visibility_miles +
1506399777191:mean_humidity +
1506399777192:mean_wind_speed_mph +
1506399777192:cloud_cover,
1506399777193:method = "forward", nvmax = 15)
1506399777943:s1 <- summary(l1)
1506399778289:s1$cp
1506399787827:s1
1506399799086:l1$d
1506399837739:# select one will smallest Mallow's Cp
1506399837740:formula1 = "num_trips ~
1506399837740:mean_temperature_f +
1506399837741:mean_visibility_miles +
1506399837741:precipitation_in +
1506399837741:cloud_cover"
1506399852715:fit1 <- lm(data = weather_weekday,
1506399852716:formula = formula1)
1506399855604:s2 <- summary(fit1)
1506399857208:s2
1506399875663:plot(fit1)
1506399894987:weather_weekday %>% Vew
1506399897704:weather_weekday %>% View
1506399942671:weather_weekday <- weather %>%
1506399942673:filter(weekday == "weekday")
1506399944714:weather_weekend <- weather %>%
1506399944715:filter(weekday = "weekend")
1506399948477:weather_weekend <- weather %>%
1506399948477:filter(weekday == "weekend")
1506399951879:weather_weekday %>% View
1506399970186:l1 <- regsubsets(data = weather_weekday,
1506399970187:num_trips ~
1506399970188:mean_temperature_f +
1506399970188:precipitation_in +
1506399970190:mean_visibility_miles +
1506399970191:mean_humidity +
1506399970192:mean_wind_speed_mph +
1506399970193:cloud_cover,
1506399970195:method = "forward", nvmax = 15)
1506399970840:s1 <- summary(l1)
1506399971207:s1$cp
1506399977529:s1
1506400009614:# select one will smallest Mallow's Cp
1506400009615:formula1 = "num_trips ~
1506400009616:mean_temperature_f +
1506400009616:precipitation_in +
1506400009616:mean_visibility_miles +
1506400009617:mean_wind_speed_mph"
1506400010463:fit1 <- lm(data = weather_weekday,
1506400010464:formula = formula1)
1506400012669:s2 <- summary(fit1)
1506400014599:s2
1506400032822:plot(fit1)
1506400049577:plot(lm(data = weather_weekday,
1506400049578:formula = num_trips ~ mean_temperature_f))
1506400055103:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506400056415:plot(lm(data = weather_weekday,
1506400056415:formula = num_trips ~ mean_temperature_f))
1506400066861:plot(lm(data = weather_weekday,
1506400066862:formula = num_trips ~ mean_visibility_miles))
1506400068374:plot(lm(data = weather_weekday,
1506400068374:formula = num_trips ~ precipitation_in))
1506400070433:plot(lm(data = weather_weekday,
1506400070434:formula = num_trips ~ cloud_cover))
1506400126278:# number of trip in a day - facet: weekday
1506400126281:trip %>%
1506400126282:mutate(time = hour(start_date) + minute(start_date)/60,
1506400126284:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506400126285:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506400126286:ggplot(aes(time)) +
1506400126287:geom_histogram(bins = 12*60) +
1506400126288:labs(x = "Daytime 24 Hour Clock",
1506400126288:y = "Number of Trips",
1506400126289:title = "Number of Trips in a day") +
1506400126290:facet_wrap(~weekday, scales = "free")
1506400137383:# number of trips in a day
1506400137383:trip %>%
1506400137384:mutate(time = hour(start_date) + minute(start_date)/60) %>%
1506400137385:ggplot(aes(time)) +
1506400137385:geom_histogram(bins = 12*60) +
1506400137386:geom_vline(xintercept = 9, color = 'orange')+
1506400137386:geom_vline(xintercept = 17, color = 'red', alpha = 0.7) +
1506400137387:annotate("text", x = 9, y = 0, label = "9:00 AM", color = "orange",
1506400137388:size = 7) +
1506400137388:annotate("text", x = 17, y = 0, label = "5:00 PM", color = "red",
1506400137390:size = 7) +
1506400137391:labs(x = "Daytime 24 Hour Clock",
1506400137394:y = "Number of Trips",
1506400137396:title = "Number of Trips in a day")
1506400140304:# number of trips by week days
1506400140305:trip %>%
1506400140306:mutate(day = wday(start_date, label = T, abbr = F)) %>%
1506400140307:count(day) %>%
1506400140307:ggplot(aes(day, n)) +
1506400140308:geom_bar(stat = "identity") +
1506400140310:labs(x = "Week Day",
1506400140311:y = "Number of Trips",
1506400140313:title = "Number of Trips across a Week")
1506400153300:# number of trips by day
1506400153302:trip %>%
1506400153304:as_tbl_time(index = start_date) %>%
1506400153305:time_summarise(period = "daily",
1506400153305:num_trips = n()) %>%
1506400153306:mutate(day_of_week = start_date %>% strftime("%A"),
1506400153306:week_nr = start_date %>% strftime("%W"),
1506400153307:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506400153308:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506400153309:ggplot(aes(start_date, num_trips, color = weekday)) +
1506400153310:geom_point() +
1506400153311:geom_smooth()+
1506400153312:labs(x = "Date",
1506400153313:y = "Total Number of Bicycle Trips",
1506400153314:title = "Trips Each Day")
1506400228013:?quarter
1506400233444:x <- ymd(c("2012-03-26", "2012-05-04", "2012-09-23", "2012-12-31"))
1506400233458:quarter(x)
1506400244395:x <- ymd(c("2012-01-26", "2012-05-04", "2012-09-23", "2012-12-31"))
1506400244404:quarter(x)
1506400250208:x <- ymd(c("2012-02-26", "2012-05-04", "2012-09-23", "2012-12-31"))
1506400250218:quarter(x)
1506400282579:?getSeason
1506400517338:install.packages("itsmr")
1506400522392:library(itsmr)
1506400534796:y = season(deaths,12)
1506400534805:plotc(deaths,y)
1506400541137:y
1506400568435:install.packages("TSA")
1506400576198:library(TSA)
1506400591261:data(tempdub)
1506400594990:tempdub
1506400601487:month.=season(tempdub) # the period sign is included to make the printout from
1506400604330:month.
1506400623024:season(tempdub)
1506400659921:?season
1506400717749:install.packages("hydroTSM")
1506400724894:library(hydroTSM)
1506400732227:?seasonalfunction
1506400750341:install.packages("spacetime")
1506400788586:library(zoo)
1506400788592:yq <- as.yearqtr(as.yearmon(DF$dates, "%m/%d/%Y") + 1/12)
1506400788598:DF$Season <- factor(format(yq, "%q"), levels = 1:4,
1506400788600:labels = c("winter", "spring", "summer", "fall"))
1506400927395:plot(fit1)
1506400931281:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506400931662:plot(fit1)
1506401038479:summary(fit1)
1506401130892:# weekday
1506401130894:l2 <- regsubsets(data = weather_weekend,
1506401130896:num_trips ~
1506401130897:mean_temperature_f +
1506401130897:precipitation_in +
1506401130898:mean_visibility_miles +
1506401130898:mean_humidity +
1506401130899:mean_wind_speed_mph +
1506401130899:cloud_cover,
1506401130900:method = "forward", nvmax = 15)
1506401131856:s2 <- summary(l2)
1506401132620:s2
1506401135409:s2$cp
1506401188771:# select one will smallest Mallow's Cp
1506401188772:formula2 = "num_trips ~
1506401188774:mean_temperature_f +
1506401188774:cloud_cover +
1506401188775:precipitation_in +
1506401188775:mean_humidity"
1506401189529:fit2 <- lm(data = weather_weekend,
1506401189530:formula = formula2)
1506401190499:summary.fit2 <- summary(fit2)
1506401191112:summary.fit2
1506401196779:plot(fit2)
1506401213177:# number of trips by day
1506401213178:trip %>%
1506401213179:as_tbl_time(index = start_date) %>%
1506401213180:time_summarise(period = "daily",
1506401213181:num_trips = n()) %>%
1506401213182:mutate(day_of_week = start_date %>% strftime("%A"),
1506401213184:week_nr = start_date %>% strftime("%W"),
1506401213184:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506401213185:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506401213186:ggplot(aes(start_date, num_trips, color = weekday)) +
1506401213187:geom_point() +
1506401213188:geom_smooth()+
1506401213189:labs(x = "Date",
1506401213190:y = "Total Number of Bicycle Trips",
1506401213191:title = "Trips Each Day")
1506401236245:plot(fit2)
1506401328467:source('~/Documents/Harrisburg/500_52/Project/bay_area_bike_share/src/EDA.R')
1506401347877:source('~/Documents/Harrisburg/500_52/Project/bay_area_bike_share/src/weather_based.R')
1506401382146:g
1506401383780:l
1506401783122:devtools::install_github('yihui/xaringan')
1506401799835:library(xaringan)
1506402262496:?getFlowPlot
1506402276126:??getFlowPlot
1506403075156:ls
1506403076578:ls()
1506403636411:dir()
1506404135391:git
1506404145661:gitgadget::assign_work()
1506404160661:gitgadget::create_repo()
1506404167457:?gitgadget
1506482262764:source('~/Documents/Harrisburg/500_52/Project/bay_area_bike_share/src/EDA.R')
1506482392468:# linear regression on num_of_trips ~ weather variables
1506482392469:trip_daily <- trip %>%
1506482392469:as_tbl_time(index = start_date) %>%
1506482392470:time_summarise(period = "daily",
1506482392471:num_trips = n()) %>%
1506482392471:mutate(start_date = as.Date(start_date))
1506482394329:weather <- weather %>%
1506482394329:left_join(trip_daily, by = c("pdt" = "start_date"))
1506482394331:weather <- weather %>%
1506482394331:mutate(day_of_week = pdt %>% strftime("%A"),
1506482394332:week_nr = pdt %>% strftime("%W"),
1506482394332:weekday = pdt %>% strftime("%u") %>% as.numeric) %>%
1506482394333:mutate(weekday = if_else(weekday < 6, "weekday", "weekend"))
1506482394352:weather_weekday <- weather %>%
1506482394352:filter(weekday == "weekday")
1506482394504:weather_weekend <- weather %>%
1506482394504:filter(weekday == "weekend")
1506482396044:# weekday
1506482396045:l1 <- regsubsets(data = weather_weekday,
1506482396046:num_trips ~
1506482396046:mean_temperature_f +
1506482396046:precipitation_in +
1506482396047:mean_visibility_miles +
1506482396047:mean_humidity +
1506482396048:mean_wind_speed_mph +
1506482396048:cloud_cover,
1506482396048:method = "forward", nvmax = 15)
1506482396901:s1 <- summary(l1)
1506482397547:s1
1506482398781:s1$cp
1506482462409:plot(l1)
1506482468919:# select one will smallest Mallow's Cp
1506482468920:formula1 = "num_trips ~
1506482468920:mean_temperature_f +
1506482468921:precipitation_in +
1506482468922:mean_visibility_miles +
1506482468924:mean_wind_speed_mph"
1506482469366:fit1 <- lm(data = weather_weekday,
1506482469367:formula = formula1)
1506482476199:plot(fit1)
1506482656289:fit1$df.residual
1506482662183:summary.fit1 <- summary(fit1)
1506482662746:summary.fit1
1506482676382:summary.fit1$fstatistic
1506483300255:boxplot(weather$num_trips)
1506483351215:shapiro.test(residuals(fit1))
1506483454720:weather1 <- weather %>%
1506483454721:select(weekday, mean_temperature_f, precipitation_in, mean_visibility_miles,
1506483454722:mean_humidity, mean_wind_speed_mph, cloud_cover)
1506483464139:pairs(weather)
1506483466657:pairs(weather1)
1506483475526:pairs
1506483494225:pairs(as.data.frame(weather1))
1506483509892:plot(as.data.frame(weather1))
1506483538990:weather1 <- weather %>%
1506483538991:select(weekday, mean_temperature_f, precipitation_in, mean_visibility_miles,
1506483538991:mean_humidity, mean_wind_speed_mph, cloud_cover) %>%
1506483538992:mutate(weekday = factor(weekday))
1506483542328:weather1
1506483545828:weather1 %>% glimpse
1506483563863:weather1 <- weather %>%
1506483563864:select(weekday, mean_temperature_f, precipitation_in, mean_visibility_miles,
1506483563865:mean_humidity, mean_wind_speed_mph, cloud_cover) %>%
1506483563866:mutate(weekday = as.numeric(factor(weekday)))
1506483566028:weather1 %>% glimpse
1506483574796:plot(as.data.frame(weather1))
1506483636501:weather1 <- weather %>%
1506483636504:select(weekday, mean_temperature_f, precipitation_in, mean_visibility_miles,
1506483636504:mean_humidity, mean_wind_speed_mph, cloud_cover, num_trips) %>%
1506483636505:mutate(weekday = as.numeric(factor(weekday)))
1506483637477:plot(as.data.frame(weather1))
1506483712303:weather1 <- weather_weekday %>%
1506483712306:select(weekday, mean_temperature_f, precipitation_in, mean_visibility_miles,
1506483712307:mean_humidity, mean_wind_speed_mph, cloud_cover, num_trips) %>%
1506483712308:mutate(weekday = as.numeric(factor(weekday)))
1506483713168:plot(as.data.frame(weather1))
1506483835222:boxplot(weather1$num_trips)
1506484202384:plot(fit1)
1506484295454:# weekday
1506484295456:l1 <- regsubsets(data = weather_weekday,
1506484295457:num_trips ~
1506484295460:mean_temperature_f +
1506484295462:precipitation_in +
1506484295464:mean_visibility_miles +
1506484295464:mean_humidity +
1506484295465:mean_wind_speed_mph +
1506484295466:cloud_cover,
1506484295467:method = "forward", nvmax = 15)
1506484296061:s1 <- summary(l1)
1506484296401:s1
1506484296773:s1$cp
1506484297245:# select one will smallest Mallow's Cp
1506484297246:formula1 = "num_trips ~
1506484297246:mean_temperature_f +
1506484297247:precipitation_in +
1506484297247:mean_visibility_miles +
1506484297248:mean_wind_speed_mph"
1506484298770:fit1 <- lm(data = weather_weekday,
1506484298772:formula = formula1)
1506484308045:plot(fit1)
1506484314492:# weekdend
1506484314493:l2 <- regsubsets(data = weather_weekend,
1506484314495:num_trips ~
1506484314497:mean_temperature_f +
1506484314498:precipitation_in +
1506484314498:mean_visibility_miles +
1506484314501:mean_humidity +
1506484314502:mean_wind_speed_mph +
1506484314503:cloud_cover,
1506484314503:method = "forward", nvmax = 15)
1506484315002:s2 <- summary(l2)
1506484315313:s2
1506484315652:s2$cp
1506484316042:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506484322388:# select one will smallest Mallow's Cp
1506484322389:formula2 = "num_trips ~
1506484322390:mean_temperature_f +
1506484322390:cloud_cover +
1506484322391:precipitation_in +
1506484322392:mean_humidity"
1506484323192:fit2 <- lm(data = weather_weekend,
1506484323193:formula = formula2)
1506484324288:summary.fit2 <- summary(fit2)
1506484325159:summary.fit2
1506484327076:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506484327705:plot(fit2)
1506484431210:vif(fit1)
1506484437399:library(car)
1506484440636:vif(fit1)
1506484475496:plot(x=fitted(fit1),y=rstudent(fit1))
1506484476695:abline(h=3,col="red",lty=2)
1506484478003:abline(h=-3,col="red",lty=2)
1506484553308:plot(fit1)
1506485191309:l <- regsubsets(data = weather,
1506485191315:num_trips ~
1506485191316:weekdays +
1506485191316:mean_temperature_f +
1506485191317:precipitation_in +
1506485191317:mean_visibility_miles +
1506485191318:mean_humidity +
1506485191318:mean_wind_speed_mph +
1506485191319:cloud_cover,
1506485191319:method = "forward", nvmax = 15)
1506485210697:weather
1506485218668:l <- regsubsets(data = weather,
1506485218670:num_trips ~
1506485218671:weekday +
1506485218672:mean_temperature_f +
1506485218673:precipitation_in +
1506485218673:mean_visibility_miles +
1506485218674:mean_humidity +
1506485218674:mean_wind_speed_mph +
1506485218675:cloud_cover,
1506485218675:method = "forward", nvmax = 15)
1506485219710:s1 <- summary(l1)
1506485230329:s
1506485232511:s <- summary(l)
1506485232711:s
1506485293192:weather <- weather %>%   mutate(weekday = as.numeric(factor(weekday)))
1506485297418:weather %>% glimpse
1506485317655:source('~/Documents/Harrisburg/500_52/Project/bay_area_bike_share/src/EDA.R')
1506485325887:# linear regression on num_of_trips ~ weather variables
1506485325889:trip_daily <- trip %>%
1506485325893:as_tbl_time(index = start_date) %>%
1506485325895:time_summarise(period = "daily",
1506485325896:num_trips = n()) %>%
1506485325898:mutate(start_date = as.Date(start_date))
1506485327742:weather <- weather %>%
1506485327744:left_join(trip_daily, by = c("pdt" = "start_date"))
1506485328231:weather <- weather %>%
1506485328232:mutate(day_of_week = pdt %>% strftime("%A"),
1506485328232:week_nr = pdt %>% strftime("%W"),
1506485328233:weekday = pdt %>% strftime("%u") %>% as.numeric) %>%
1506485328233:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506485328234:mutate(weekday = as.numeric(factor(weekday)) - )
1506485334769:weather <- weather %>%
1506485334770:mutate(day_of_week = pdt %>% strftime("%A"),
1506485334770:week_nr = pdt %>% strftime("%W"),
1506485334771:weekday = pdt %>% strftime("%u") %>% as.numeric) %>%
1506485334771:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506485334772:mutate(weekday = as.numeric(factor(weekday)) - 1)
1506485339696:weather %>% glimpse
1506485346322:l <- regsubsets(data = weather,
1506485346323:num_trips ~
1506485346324:weekday +
1506485346324:mean_temperature_f +
1506485346325:precipitation_in +
1506485346326:mean_visibility_miles +
1506485346326:mean_humidity +
1506485346327:mean_wind_speed_mph +
1506485346327:cloud_cover,
1506485346328:method = "forward", nvmax = 15)
1506485347952:s <- summary(l)
1506485348851:s
1506485350202:s$cp
1506485390695:source('~/Documents/Harrisburg/500_52/Project/bay_area_bike_share/src/EDA.R')
1506485397552:# linear regression on num_of_trips ~ weather variables
1506485397553:trip_daily <- trip %>%
1506485397554:as_tbl_time(index = start_date) %>%
1506485397554:time_summarise(period = "daily",
1506485397555:num_trips = n()) %>%
1506485397555:mutate(start_date = as.Date(start_date))
1506485399452:weather <- weather %>%
1506485399452:left_join(trip_daily, by = c("pdt" = "start_date"))
1506485405657:weather <- weather %>%
1506485405659:mutate(day_of_week = pdt %>% strftime("%A"),
1506485405659:week_nr = pdt %>% strftime("%W"),
1506485405660:weekday = pdt %>% strftime("%u") %>% as.numeric) %>%
1506485405660:mutate(weekday = if_else(weekday < 6, "weekday", "weekend"))
1506485410093:weather %>%
1506485410094:mutate(weekday = as.numeric(factor(weekday)) - 1)
1506485420116:weather %>%
1506485420117:select(weekday)
1506485425440:weather %>%
1506485425442:select(weekday) %>%
1506485425443:mutate(weekday = as.numeric(factor(weekday)) - 1)
1506485449651:weather %>%
1506485449652:select(weekday) %>%
1506485449652:mutate(weekday = as.factor(as.numeric(factor(weekday)) - 1))
1506485462693:weather <- weather %>%
1506485462694:select(weekday) %>%
1506485462694:mutate(weekday = as.factor(as.numeric(factor(weekday)) - 1))
1506485469300:l <- regsubsets(data = weather,
1506485469301:num_trips ~
1506485469302:weekday +
1506485469302:mean_temperature_f +
1506485469302:precipitation_in +
1506485469303:mean_visibility_miles +
1506485469303:mean_humidity +
1506485469304:mean_wind_speed_mph +
1506485469304:cloud_cover,
1506485469305:method = "forward", nvmax = 15)
1506485476323:source('~/Documents/Harrisburg/500_52/Project/bay_area_bike_share/src/EDA.R')
1506485491722:# linear regression on num_of_trips ~ weather variables
1506485491724:trip_daily <- trip %>%
1506485491724:as_tbl_time(index = start_date) %>%
1506485491725:time_summarise(period = "daily",
1506485491725:num_trips = n()) %>%
1506485491727:mutate(start_date = as.Date(start_date))
1506485493735:weather <- weather %>%
1506485493735:left_join(trip_daily, by = c("pdt" = "start_date"))
1506485493737:weather <- weather %>%
1506485493738:mutate(day_of_week = pdt %>% strftime("%A"),
1506485493738:week_nr = pdt %>% strftime("%W"),
1506485493739:weekday = pdt %>% strftime("%u") %>% as.numeric) %>%
1506485493739:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506485493739:mutate(weekday = as.factor(as.numeric(factor(weekday)) - 1))
1506485497477:l <- regsubsets(data = weather,
1506485497478:num_trips ~
1506485497478:weekday +
1506485497478:mean_temperature_f +
1506485497479:precipitation_in +
1506485497479:mean_visibility_miles +
1506485497480:mean_humidity +
1506485497480:mean_wind_speed_mph +
1506485497480:cloud_cover,
1506485497481:method = "forward", nvmax = 15)
1506485498529:s <- summary(l)
1506485499075:s
1506485503689:s$cp
1506485638037:formula = "num_trips ~
1506485638049:weekday +
1506485638050:mean_temperature_f +
1506485638050:precipitation_in +
1506485638051:mean_visibility_miles +
1506485638051:mean_wind_speed_mph"
1506485645038:fit <- lm(data = weather_weekend,
1506485645039:formula = formula)
1506485650397:fit <- lm(data = weather,
1506485650398:formula = formula)
1506485655805:summary.fit <- summary(fit)
1506485657980:summary.fit
1506485669454:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506485670493:plot(fit2)
1506485753255:dev.off()
1506485767924:qqPlot(fit,labels = row.names(states),id.method = "identify",simulate = TRUE,main = "Q-Q Plot")
1506485806255:qqPlot(fit,
1506485806258:id.method = "identify",simulate = TRUE,main = "Q-Q Plot")
1506485925811:plot(fit)
1506486084730:pairs(weather)
1506486098730:pairs(weather %>% select(-weekday))
1506486106317:weather %>% glimpse
1506486180042:weather %>% select(weekday, mean_temperature_f,
1506486180046:percipitation_in, mean_wind_speed_mph,
1506486180046:mean_visibility_miles) %>% pairs
1506486189177:weather %>% select(weekday, mean_temperature_f,
1506486189178:precipitation_in, mean_wind_speed_mph,
1506486189179:mean_visibility_miles) %>% pairs
1506486210893:weather %>% select(weekday, mean_temperature_f,
1506486210895:precipitation_in, mean_wind_speed_mph,
1506486210896:mean_visibility_miles, num_trips) %>% pairs
1506486434672:summary.fit
1506486455063:formula = "num_trips ~
1506486455064:weekday +
1506486455064:mean_temperature_f +
1506486455065:precipitation_in +
1506486455065:mean_visibility_miles"
1506486455644:fit <- lm(data = weather,
1506486455644:formula = formula)
1506486456211:summary.fit <- summary(fit)
1506486456592:summary.fit
1506486462864:plot(fit2)
1506486585418:crPlots(fit)
1506486676795:qqPlot(fit,labels = row.names(num_trips),id.method = "identify",simulate = TRUE,main = "Q-Q Plot")
1506486695801:qqPlot(fit,id.method = "identify",simulate = TRUE,main = "Q-Q Plot")
1506486728215:plot(x=fitted(fit),y=rstudent(fit))
1506486728301:abline(h=3,col="red",lty=2)
1506486728302:abline(h=-3,col="red",lty=2)
1506486752743:plot(fit)
1506486872303:fitted(fit)
1506487029814:fitted(fit) %>% summary
1506487047231:fitted(fit) %>% boxplot()
1506487105985:fit
1506487237142:histogram(residuals(fit))
1506487244124:hist(residuals(fit))
1506487403854:crPlots(fit)
1506487482627:weather %>% glimpse()
1506487535868:plot(fit)
1506487570361:plot(x=fitted(fit),y=rstudent(fit))
1506487570911:abline(h=3,col="red",lty=2)
1506487572397:abline(h=-3,col="red",lty=2)
1506487755083:pairs(weather)
1506487770431:weather %>% select(weekday, mean_temperature_f,
1506487770432:precipitation_in, mean_wind_speed_mph,
1506487770432:mean_visibility_miles, num_trips) %>% pairs
1506487798289:formula = "num_trips ~
1506487798290:weekday +
1506487798290:mean_temperature_f +
1506487798291:log(precipitation_in) +
1506487798291:mean_visibility_miles"
1506487799300:fit <- lm(data = weather,
1506487799301:formula = formula)
1506487799869:summary.fit <- summary(fit)
1506487800252:summary.fit
1506487827809:formula = "num_trips ~
1506487827811:weekday +
1506487827813:mean_temperature_f +
1506487827814:I(precipitation_in^2) +
1506487827816:mean_visibility_miles"
1506487828535:fit <- lm(data = weather,
1506487828536:formula = formula)
1506487829090:summary.fit <- summary(fit)
1506487829608:summary.fit
1506487840658:formula = "num_trips ~
1506487840659:weekday +
1506487840660:mean_temperature_f +
1506487840661:I(precipitation_in)^2 +
1506487840662:mean_visibility_miles"
1506487841204:fit <- lm(data = weather,
1506487841205:formula = formula)
1506487841441:summary.fit <- summary(fit)
1506487841816:summary.fit
1506487856722:?I
1506487917143:weather$precipitation_in %>% head()
1506487925523:weather$precipitation_in %>% order()
1506487930769:weather$precipitation_in %>% sort()
1506487941128:?sort
1506487947765:weather$precipitation_in %>% sort(decreasing = T)
1506487964678:weather$precipitation_in %>% sort(decreasing = T) %>% haed
1506487968015:weather$precipitation_in %>% sort(decreasing = T) %>% head()
1506487974294:a = weather$precipitation_in %>% sort(decreasing = T) %>% head()
1506487980639:I(a)^2
1506487987055:1.38^2
1506487992776:I(a^2)
1506488036337:s$cp
1506488052051:s
1506488104115:formula = "num_trips ~
1506488104118:weekday +
1506488104118:mean_temperature_f +
1506488104119:I(precipitation_in)^2 +
1506488104119:mean_visibility_miles +
1506488104119:mean_wind_speed_mph +
1506488104120:cloud_cover"
1506488104672:fit <- lm(data = weather,
1506488104674:formula = formula)
1506488105504:summary.fit <- summary(fit)
1506488105960:summary.fit
1506488227466:s$cp
1506488266162:?regsubsets
1506488274992:l <- regsubsets(data = weather,
1506488274993:num_trips ~
1506488274994:weekday +
1506488274996:mean_temperature_f +
1506488274997:precipitation_in +
1506488274998:mean_visibility_miles +
1506488274999:mean_humidity +
1506488274999:mean_wind_speed_mph +
1506488275000:cloud_cover,
1506488275000:method = "exhaustive", nvmax = 15)
1506488275725:s <- summary(l)
1506488276233:s
1506488283039:s$cp
1506488651432:?poly
1506488711237:formula = "num_trips ~
1506488711238:weekday +
1506488711239:mean_temperature_f +
1506488711239:poly(precipitation_in, 2) +
1506488711240:mean_visibility_miles +
1506488711241:mean_wind_speed_mph +
1506488711242:cloud_cover"
1506488712522:fit <- lm(data = weather,
1506488712523:formula = formula)
1506488713505:summary.fit <- summary(fit)
1506488714038:summary.fit
1506488734230:crPlots(fit)
1506488737822:plot(x=fitted(fit),y=rstudent(fit))
1506488738345:abline(h=3,col="red",lty=2)
1506488739496:abline(h=-3,col="red",lty=2)
1506488745722:fit <- lm(data = weather,
1506488745723:formula = formula)
1506488746490:summary.fit <- summary(fit)
1506488746958:summary.fit
1506488748731:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506488748934:plot(fit)
1506488770288:formula = "num_trips ~
1506488770290:weekday +
1506488770292:log(mean_temperature_f) +
1506488770293:precipitation_in +
1506488770294:mean_visibility_miles +
1506488770295:mean_wind_speed_mph +
1506488770295:cloud_cover"
1506488770971:fit <- lm(data = weather,
1506488770972:formula = formula)
1506488771623:summary.fit <- summary(fit)
1506488772005:summary.fit
1506488772853:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506488773171:plot(fit)
1506488781877:formula = "num_trips ~
1506488781877:weekday +
1506488781878:mean_temperature_f +
1506488781879:precipitation_in +
1506488781881:mean_visibility_miles +
1506488781882:mean_wind_speed_mph +
1506488781884:cloud_cover"
1506488782452:fit <- lm(data = weather,
1506488782453:formula = formula)
1506488782739:summary.fit <- summary(fit)
1506488783057:summary.fit
1506488792096:plot(fit)
1506488845043:formula = "num_trips ~
1506488845044:polym(weekday +
1506488845045:mean_temperature_f +
1506488845045:precipitation_in +
1506488845045:mean_visibility_miles +
1506488845046:mean_wind_speed_mph +
1506488845047:cloud_cover,2)"
1506488846127:fit <- lm(data = weather,
1506488846129:formula = formula)
1506488862440:formula = "num_trips ~
1506488862441:weekday +
1506488862442:mean_temperature_f^2 +
1506488862442:precipitation_in +
1506488862443:mean_visibility_miles +
1506488862443:mean_wind_speed_mph +
1506488862444:cloud_cover"
1506488863126:fit <- lm(data = weather,
1506488863127:formula = formula)
1506488863625:summary.fit <- summary(fit)
1506488864163:summary.fit
1506488874417:formula = "num_trips ~
1506488874419:weekday +
1506488874420:I(mean_temperature_f)^2 +
1506488874421:precipitation_in +
1506488874422:mean_visibility_miles +
1506488874422:mean_wind_speed_mph +
1506488874423:cloud_cover"
1506488875062:fit <- lm(data = weather,
1506488875063:formula = formula)
1506488875392:summary.fit <- summary(fit)
1506488875907:summary.fit
1506488884021:formula = "num_trips ~
1506488884022:weekday +
1506488884022:I(mean_temperature_f^2) +
1506488884023:precipitation_in +
1506488884023:mean_visibility_miles +
1506488884026:mean_wind_speed_mph +
1506488884026:cloud_cover"
1506488884454:fit <- lm(data = weather,
1506488884455:formula = formula)
1506488884891:summary.fit <- summary(fit)
1506488885245:summary.fit
1506488897479:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506488897771:plot(fit)
1506489006585:boxTidwell(formula, data=weather)
1506489014456:boxTidwell(x = formula, data=weather)
1506489027168:boxTidwell(num_trips ~
1506489027169:weekday +
1506489027171:I(mean_temperature_f^2) +
1506489027172:precipitation_in +
1506489027174:mean_visibility_miles +
1506489027175:mean_wind_speed_mph +
1506489027176:cloud_cover, data=weather)
1506489035603:boxTidwell(num_trips ~
1506489035603:weekday +
1506489035605:mean_temperature_f +
1506489035606:precipitation_in +
1506489035607:mean_visibility_miles +
1506489035609:mean_wind_speed_mph +
1506489035610:cloud_cover, data=weather)
1506489061880:?boxTidwell
1506489103087:boxTidwell(num_trips ~
1506489103090:mean_temperature_f +
1506489103091:precipitation_in +
1506489103093:mean_visibility_miles +
1506489103094:mean_wind_speed_mph +
1506489103096:cloud_cover, data=weather)
1506489114921:boxTidwell(num_trips ~
1506489114924:mean_temperature_f +
1506489114926:mean_visibility_miles +
1506489114929:mean_wind_speed_mph +
1506489114931:cloud_cover, data=weather)
1506489121128:boxTidwell(num_trips ~
1506489121129:mean_temperature_f +
1506489121130:mean_visibility_miles +
1506489121130:mean_wind_speed_mph, data=weather)
1506489163156:boxTidwell(num_trips ~
1506489163158:weekday +
1506489163161:I(mean_temperature_f^2) +
1506489163162:precipitation_in +
1506489163163:mean_visibility_miles +
1506489163164:mean_wind_speed_mph +
1506489163165:cloud_cover, data=
1506489163166:weather %>% select(weekday, mean_temperature_f,
1506489163167:precipitation_in, mean_wind_speed_mph,
1506489163168:mean_visibility_miles, num_trips) )
1506489174516:boxTidwell(num_trips ~
1506489174517:weekday +
1506489174518:I(mean_temperature_f^2) +
1506489174518:precipitation_in +
1506489174518:mean_visibility_miles +
1506489174519:mean_wind_speed_mph +
1506489174519:cloud_cover,
1506489174520:data=
1506489174520:weather %>% select(weekday, mean_temperature_f,
1506489174520:precipitation_in, mean_wind_speed_mph,
1506489174521:mean_visibility_miles, num_trips) )
1506489191037:boxTidwell(num_trips ~
1506489191039:weekday +
1506489191040:I(mean_temperature_f^2) +
1506489191042:precipitation_in +
1506489191044:mean_visibility_miles +
1506489191045:mean_wind_speed_mph,
1506489191045:data=
1506489191046:weather %>% select(weekday, mean_temperature_f,
1506489191047:precipitation_in, mean_wind_speed_mph,
1506489191047:mean_visibility_miles, num_trips) )
1506489205341:boxTidwell(num_trips ~
1506489205342:I(mean_temperature_f^2) +
1506489205343:precipitation_in +
1506489205344:mean_visibility_miles +
1506489205345:mean_wind_speed_mph,
1506489205348:data=
1506489205349:weather %>% select(mean_temperature_f,
1506489205350:precipitation_in, mean_wind_speed_mph,
1506489205351:mean_visibility_miles, num_trips) )
1506489218163:boxTidwell(num_trips ~
1506489218164:mean_temperature_f +
1506489218165:mean_wind_speed_mph,
1506489218165:data=
1506489218165:weather %>% select(mean_temperature_f,
1506489218166:precipitation_in, mean_wind_speed_mph,
1506489218166:mean_visibility_miles, num_trips) )
1506489224506:mean_temperature_f,
1506489226388:boxTidwell(num_trips ~
1506489226389:mean_temperature_f,
1506489226389:data=
1506489226391:weather %>% select(mean_temperature_f,
1506489226392:precipitation_in, mean_wind_speed_mph,
1506489226392:mean_visibility_miles, num_trips) )
1506489270604:formula = "num_trips ~
1506489270606:weekday +
1506489270614:I(mean_temperature_f^(-2.56)) +
1506489270615:precipitation_in +
1506489270616:mean_visibility_miles +
1506489270616:mean_wind_speed_mph +
1506489270617:cloud_cover"
1506489271650:fit <- lm(data = weather,
1506489271651:formula = formula)
1506489272121:summary.fit <- summary(fit)
1506489272622:summary.fit
1506489297449:formula = "num_trips ~
1506489297450:weekday +
1506489297450:mean_temperature_f +
1506489297451:precipitation_in +
1506489297451:mean_visibility_miles +
1506489297451:mean_wind_speed_mph +
1506489297452:cloud_cover"
1506489298223:fit <- lm(data = weather,
1506489298225:formula = formula)
1506489298702:summary.fit <- summary(fit)
1506489298976:summary.fit
1506489385693:formula = "sqrt(num_trips) ~
1506489385695:weekday +
1506489385707:mean_temperature_f +
1506489385708:precipitation_in +
1506489385710:mean_visibility_miles +
1506489385711:mean_wind_speed_mph +
1506489385712:cloud_cover"
1506489386162:fit <- lm(data = weather,
1506489386164:formula = formula)
1506489386597:summary.fit <- summary(fit)
1506489387066:summary.fit
1506489395345:plot(fit)
1506489589246:?box.cox
1506489632448:weather %>% select(weekday, mean_temperature_f,
1506489632451:precipitation_in, mean_wind_speed_mph,
1506489632452:mean_visibility_miles, num_trips)
1506489639692:# Box Cox Method, univariate
1506489639698:summary(p1 <- powerTransform(cycles ~ len + amp + load, Wool))
1506489639794:# fit linear model with transformed response:
1506489639795:coef(p1, round=TRUE)
1506489639797:summary(m1 <- lm(bcPower(cycles, p1$roundlam) ~ len + amp + load, Wool))
1506489678717:?Wool
1506489708055:p1 <- powerTransform(formula, weather)
1506489719817:formula
1506489735873:p1 <- powerTransform(num_trips ~
1506489735874:weekday +
1506489735875:mean_temperature_f +
1506489735878:precipitation_in +
1506489735879:mean_visibility_miles +
1506489735881:mean_wind_speed_mph +
1506489735882:cloud_cover, weather)
1506489748510:summary(p1)
1506489761637:coef(p1, round=TRUE)
1506489780895:p1$roundlam
1506489842753:m1 <- lm(bcPower(num_trips, p1$roundlam) ~ weekday +
1506489842759:mean_temperature_f +
1506489842760:precipitation_in +
1506489842766:mean_visibility_miles +
1506489842772:mean_wind_speed_mph +
1506489842778:cloud_cover, data = weather)
1506489847157:summary(m1)
1506489851674:plot(m1)
1506489893577:?bcPower
1506489918061:formula = "sqrt(num_trips) ~
1506489918064:weekday +
1506489918065:mean_temperature_f +
1506489918065:precipitation_in +
1506489918066:mean_visibility_miles +
1506489918070:mean_wind_speed_mph +
1506489918072:cloud_cover"
1506489919035:fit <- lm(data = weather,
1506489919039:formula = formula)
1506489919656:summary.fit <- summary(fit)
1506489920198:summary.fit
1506489938462:plot(fit)
1506489964800:plot(m1)
1506490005199:plot(x=fitted(fit),y=rstudent(fit))
1506490005508:abline(h=3,col="red",lty=2)
1506490005732:abline(h=-3,col="red",lty=2)
1506490082439:l <- regsubsets(data = weather,
1506490082443:num_trips ~
1506490082444:weekday +
1506490082445:mean_temperature_f +
1506490082445:precipitation_in +
1506490082446:mean_visibility_miles +
1506490082448:mean_humidity +
1506490082449:mean_wind_speed_mph +
1506490082450:cloud_cover,
1506490082453:method = "exhaustive", nvmax = 15)
1506490083042:s <- summary(l)
1506490084036:s
1506490084598:s$cp
1506490099113:l <- regsubsets(data = weather,
1506490099114:num_trips ~
1506490099114:weekday +
1506490099117:mean_temperature_f +
1506490099117:precipitation_in +
1506490099118:mean_visibility_miles +
1506490099120:mean_humidity +
1506490099123:mean_wind_speed_mph +
1506490099125:cloud_cover,
1506490099126:method = "forward", nvmax = 15)
1506490099563:s <- summary(l)
1506490099906:s
1506490100317:s$cp
1506490111584:formula = "sqrt(num_trips) ~
1506490111591:weekday1 +
1506490111593:mean_temperature_f +
1506490111596:precipitation_in +
1506490111597:mean_visibility_miles +
1506490111599:mean_wind_speed_mph +
1506490111600:cloud_cover"
1506490111951:fit <- lm(data = weather,
1506490111953:formula = formula)
1506490114623:formula = "sqrt(num_trips) ~
1506490114623:weekday +
1506490114624:mean_temperature_f +
1506490114625:precipitation_in +
1506490114626:mean_visibility_miles +
1506490114626:mean_wind_speed_mph +
1506490114627:cloud_cover"
1506490115641:fit <- lm(data = weather,
1506490115643:formula = formula)
1506490134264:formula = "sqrt(num_trips) ~
1506490134267:weekday +
1506490134268:mean_temperature_f +
1506490134268:precipitation_in +
1506490134269:mean_visibility_miles +
1506490134270:mean_wind_speed_mph"
1506490134858:fit <- lm(data = weather,
1506490134859:formula = formula)
1506490135858:summary.fit <- summary(fit)
1506490136209:summary.fit
1506490149717:formula = "num_trips ~
1506490149718:weekday +
1506490149719:mean_temperature_f +
1506490149719:precipitation_in +
1506490149720:mean_visibility_miles +
1506490149720:mean_wind_speed_mph"
1506490150198:fit <- lm(data = weather,
1506490150199:formula = formula)
1506490151003:summary.fit <- summary(fit)
1506490152622:summary.fit
1506490168160:plot(fit)
1506490200722:formula = "num_trips ~
1506490200727:weekday +
1506490200728:mean_temperature_f +
1506490200731:precipitation_in +
1506490200732:mean_visibility_miles +
1506490200733:mean_wind_speed_mph"
1506490201489:fit <- lm(data = weather,
1506490201490:formula = formula)
1506490204286:summary.fit <- summary(fit)
1506490204848:summary.fit
1506490205612:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506490206089:plot(fit)
1506490210372:crPlots(fit)
1506490214257:plot(x=fitted(fit),y=rstudent(fit))
1506490215049:abline(h=3,col="red",lty=2)
1506490215927:abline(h=-3,col="red",lty=2)
1506490235473:formula = "sqrt(num_trips) ~
1506490235474:weekday +
1506490235475:mean_temperature_f +
1506490235475:precipitation_in +
1506490235477:mean_visibility_miles +
1506490235478:mean_wind_speed_mph"
1506490236495:fit <- lm(data = weather,
1506490236496:formula = formula)
1506490237281:summary.fit <- summary(fit)
1506490237695:summary.fit
1506490238180:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506490238795:plot(fit)
1506490240169:weather %>% select(weekday, mean_temperature_f,
1506490240170:precipitation_in, mean_wind_speed_mph,
1506490240171:mean_visibility_miles, num_trips) %>% pairs
1506490245157:plot(x=fitted(fit),y=rstudent(fit))
1506490246494:abline(h=3,col="red",lty=2)
1506490247836:abline(h=-3,col="red",lty=2)
1506490329175:plot(fit)
1506490336433:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506490339164:plot(fit)
1506490360573:plot(x=fitted(fit),y=rstudent(fit))
1506490361064:abline(h=3,col="red",lty=2)
1506490361574:abline(h=-3,col="red",lty=2)
1506490379306:which(fitted(fit) >3)
1506490399566:which(rstudent(fit) >3)
1506490442265:hat.plot <- function(fit){
1506490442270:p <- length(coefficients(fit))
1506490442273:n <- length(fitted(fit))
1506490442275:plot(hatvalues(fit),main = "Index Plot of Hat Values")
1506490442277:abline(h=c(2,3)*p/n,col="red",lty=2)
1506490442279:identify(1:n, hatvalues(fit), names(hatvalues(fit)))
1506490442281:#
1506490442282:}
1506490442794:hat.plot(fit)
1506490458566:dev.off
1506490462158:dev.off()
1506490469011:hat.plot <- function(fit){
1506490469013:p <- length(coefficients(fit))
1506490469014:n <- length(fitted(fit))
1506490469016:plot(hatvalues(fit),main = "Index Plot of Hat Values")
1506490469018:abline(h=c(2,3)*p/n,col="red",lty=2)
1506490469019:identify(1:n, hatvalues(fit), names(hatvalues(fit)))
1506490469021:#
1506490469022:}
1506490469493:hat.plot(fit)
1506490574092:?xaringan::moon_reader
1506566711275:m1
1506566717766:plot(m1)
1506566736287:summary(m1)
1506566740137:summary(fit)
1506566749976:plot(fit)
1506566760860:formula = "(num_trips) ~
1506566760866:weekday +
1506566760866:mean_temperature_f +
1506566760869:precipitation_in +
1506566760870:mean_visibility_miles +
1506566760870:mean_wind_speed_mph"
1506566761183:fit <- lm(data = weather,
1506566761187:formula = formula)
1506566761574:summary.fit <- summary(fit)
1506566761841:summary.fit
1506566764063:plot(fit)
1506566774606:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506566774826:plot(fit)
1506566779309:formula = "sqrt(num_trips) ~
1506566779309:weekday +
1506566779310:mean_temperature_f +
1506566779311:precipitation_in +
1506566779311:mean_visibility_miles +
1506566779313:mean_wind_speed_mph"
1506566779631:fit <- lm(data = weather,
1506566779632:formula = formula)
1506566780082:summary.fit <- summary(fit)
1506566780667:summary.fit
1506566784017:plot(fit)
1506566835281:l <- regsubsets(data = weather,
1506566835285:sqrt(num_trips) ~
1506566835286:weekday +
1506566835289:mean_temperature_f +
1506566835293:precipitation_in +
1506566835296:mean_visibility_miles +
1506566835299:mean_humidity +
1506566835301:mean_wind_speed_mph +
1506566835302:cloud_cover,
1506566835304:method = "forward", nvmax = 15)
1506566836907:s <- summary(l)
1506566837854:s
1506566843630:s$cp
1506566868560:l <- regsubsets(data = weather,
1506566868562:num_trips ~
1506566868564:weekday +
1506566868567:mean_temperature_f +
1506566868567:precipitation_in +
1506566868568:mean_visibility_miles +
1506566868569:mean_humidity +
1506566868569:mean_wind_speed_mph +
1506566868570:cloud_cover,
1506566868571:method = "forward", nvmax = 15)
1506566868975:s <- summary(l)
1506566869216:s
1506566869972:s$cp
1506566879309:formula = "num_trips ~
1506566879311:weekday +
1506566879311:mean_temperature_f +
1506566879312:precipitation_in +
1506566879313:mean_visibility_miles +
1506566879313:mean_wind_speed_mph"
1506566879841:fit <- lm(data = weather,
1506566879843:formula = formula)
1506566880798:summary.fit <- summary(fit)
1506566881048:summary.fit
1506566884930:weather %>% select(weekday, mean_temperature_f,
1506566884933:precipitation_in, mean_wind_speed_mph,
1506566884936:mean_visibility_miles, num_trips) %>% pairs
1506566895538:plot(x=fitted(fit),y=rstudent(fit))
1506566895748:abline(h=3,col="red",lty=2)
1506566896277:abline(h=-3,col="red",lty=2)
1506566898774:which(rstudent(fit) >3)
1506566904640:which(rstudent(fitted) >3)
1506566912575:which(rstudent(fit) >3)
1506566938217:rstudent(fit)
1506566947683:which(rstudent(fit) > 3)
1506566962332:which(rstudent[rstudent(fit) > 3])
1506566980290:rstudent(fit) %>% class
1506566996018:which(rstudent(fit) > 3)
1506567005518:rstudent(fit)[2]
1506567015095:rstudent(fit)[[1]]
1506567017434:rstudent(fit)[[2]]
1506567051045:?rstudent
1506567097871:a <- rstudent(fit)
1506567113495:a > 1
1506567132853:which(abs(a) > 3)
1506567177869:weather1 <- weather_weekday %>%
1506567177871:select(weekday, mean_temperature_f, precipitation_in, mean_visibility_miles,
1506567177874:mean_humidity, mean_wind_speed_mph, cloud_cover, num_trips) %>%
1506567177874:plot(as.data.frame(weather1))
1506567201839:weather1 %>% weather %>% slice(which(abs(a) > 3))
1506567209790:weather1 <- weather %>% slice(which(abs(a) > 3))
1506567216578:weather <- weather %>% slice(which(abs(a) > 3))
1506567224726:l <- regsubsets(data = weather,
1506567224727:num_trips ~
1506567224729:weekday +
1506567224730:mean_temperature_f +
1506567224732:precipitation_in +
1506567224733:mean_visibility_miles +
1506567224734:mean_humidity +
1506567224735:mean_wind_speed_mph +
1506567224735:cloud_cover,
1506567224736:method = "forward", nvmax = 15)
1506567229550:fit <- lm(data = weather,
1506567229551:formula = formula)
1506567230420:summary.fit <- summary(fit)
1506567231427:summary.fit
1506567238858:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506567239540:plot(fit)
1506567260483:source('~/Documents/Harrisburg/500_52/Project/bay_area_bike_share/src/EDA.R')
1506567277556:# linear regression on num_of_trips ~ weather variables
1506567277559:trip_daily <- trip %>%
1506567277561:as_tbl_time(index = start_date) %>%
1506567277563:time_summarise(period = "daily",
1506567277564:num_trips = n()) %>%
1506567277565:mutate(start_date = as.Date(start_date))
1506567279534:weather <- weather %>%
1506567279535:left_join(trip_daily, by = c("pdt" = "start_date"))
1506567279538:weather <- weather %>%
1506567279539:mutate(day_of_week = pdt %>% strftime("%A"),
1506567279540:week_nr = pdt %>% strftime("%W"),
1506567279540:weekday = pdt %>% strftime("%u") %>% as.numeric) %>%
1506567279541:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506567279542:mutate(weekday = as.factor(as.numeric(factor(weekday)) - 1))
1506567279568:weather_weekday <- weather %>%
1506567279568:filter(weekday == "weekday")
1506567279572:weather_weekend <- weather %>%
1506567279573:filter(weekday == "weekend")
1506567280308:# weekday
1506567280308:l1 <- regsubsets(data = weather_weekday,
1506567280309:num_trips ~
1506567280311:mean_temperature_f +
1506567280312:precipitation_in +
1506567280314:mean_visibility_miles +
1506567280315:mean_humidity +
1506567280316:mean_wind_speed_mph +
1506567280316:cloud_cover,
1506567280317:method = "forward", nvmax = 15)
1506567281257:s1 <- summary(l1)
1506567281791:s1
1506567282798:s1$cp
1506567283393:# select one will smallest Mallow's Cp
1506567283393:formula1 = "num_trips ~
1506567283394:mean_temperature_f +
1506567283394:precipitation_in +
1506567283395:mean_visibility_miles +
1506567283395:mean_wind_speed_mph"
1506567287637:fit1 <- lm(data = weather_weekday,
1506567287638:formula = formula1)
1506567288179:summary.fit1 <- summary(fit1)
1506567288443:summary.fit1
1506567295668:# weekdend
1506567295670:l2 <- regsubsets(data = weather_weekend,
1506567295672:num_trips ~
1506567295673:mean_temperature_f +
1506567295675:precipitation_in +
1506567295675:mean_visibility_miles +
1506567295676:mean_humidity +
1506567295676:mean_wind_speed_mph +
1506567295677:cloud_cover,
1506567295677:method = "forward", nvmax = 15)
1506567297201:s2 <- summary(l2)
1506567298841:s2
1506567299593:s2$cp
1506567302272:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506567302663:plot(fit1)d
1506567307492:plot(fit1)
1506567320939:l <- regsubsets(data = weather,
1506567320940:num_trips ~
1506567320940:weekday +
1506567320941:mean_temperature_f +
1506567320941:precipitation_in +
1506567320942:mean_visibility_miles +
1506567320942:mean_humidity +
1506567320943:mean_wind_speed_mph +
1506567320943:cloud_cover,
1506567320944:method = "forward", nvmax = 15)
1506567321765:s <- summary(l)
1506567322198:s
1506567323036:s$cp
1506567323630:formula = "num_trips ~
1506567323632:weekday +
1506567323633:mean_temperature_f +
1506567323635:precipitation_in +
1506567323636:mean_visibility_miles +
1506567323637:mean_wind_speed_mph"
1506567324252:fit <- lm(data = weather,
1506567324253:formula = formula)
1506567325712:summary.fit <- summary(fit)
1506567326479:summary.fit
1506567327240:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506567328228:plot(fit)
1506567337220:formula = "sqrt(num_trips) ~
1506567337222:weekday +
1506567337223:mean_temperature_f +
1506567337224:precipitation_in +
1506567337224:mean_visibility_miles +
1506567337225:mean_wind_speed_mph"
1506567337706:fit <- lm(data = weather,
1506567337707:formula = formula)
1506567338336:summary.fit <- summary(fit)
1506567338738:summary.fit
1506567339672:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506567340040:plot(fit)
1506567352576:plot(x=fitted(fit),y=rstudent(fit))
1506567352853:abline(h=3,col="red",lty=2)
1506567353214:abline(h=-3,col="red",lty=2)
1506567356663:a <- rstudent(fit)
1506567359024:weather1 <- weather %>% slice(which(abs(a) 3))
1506567367030:weather1 <- weather %>% slice(which(abs(a) < 3))
1506567373543:fit <- lm(data = weather1,
1506567373544:formula = formula)
1506567374095:summary.fit <- summary(fit)
1506567374318:summary.fit
1506567376963:plot(fit)
1506567388522:dev.off()
1506567393244:plot(fit)
1506567415249:plot(x=fitted(fit),y=rstudent(fit))
1506567416035:abline(h=3,col="red",lty=2)
1506567417002:abline(h=-3,col="red",lty=2)
1506567421629:a <- rstudent(fit)
1506567426884:weather1 <- weather1 %>% slice(which(abs(a) < 3))
1506567432830:fit <- lm(data = weather1,
1506567432831:formula = formula)
1506567433153:summary.fit <- summary(fit)
1506567433460:summary.fit
1506567435736:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506567436201:plot(fit)
1506567444249:a <- rstudent(fit)
1506567445047:weather1 <- weather1 %>% slice(which(abs(a) < 3))
1506567447373:fit <- lm(data = weather1,
1506567447375:formula = formula)
1506567448098:summary.fit <- summary(fit)
1506567448272:summary.fit
1506567452697:plot(fit)
1506567459595:plot(x=fitted(fit),y=rstudent(fit))
1506567459977:abline(h=3,col="red",lty=2)
1506567461294:abline(h=-3,col="red",lty=2)
1506567518934:dev.off()
1506567535020:boxplot(weather %>% select(num_trips))
1506567567117:weather %>% ggplot(aes(weekday, num_trips)) + geom_boxplot()
1506567585361:?boxplot
1506567591579:?outlier
1506567607090:weather %>% ggplot(aes(num_trips)) + geom_boxplot()
1506567634819:weather %>% ggplot() + geom_boxplot(aes(x = num_trips))
1506567640675:weather %>% ggplot() + geom_boxplot(aes(y = num_trips))
1506567646965:?geom_boxplot
1506567656572:p <- ggplot(mpg, aes(class, hwy))
1506567656577:p + geom_boxplot()
1506567684755:y <- rnorm(100)
1506567684757:df <- data.frame(
1506567684757:x = 1,
1506567684758:y0 = min(y),
1506567684758:y25 = quantile(y, 0.25),
1506567684758:y50 = median(y),
1506567684759:y75 = quantile(y, 0.75),
1506567684759:y100 = max(y)
1506567684760:)
1506567685876:y
1506567686688:df
1506567694257:ggplot(df, aes(x)) +
1506567694259:geom_boxplot(
1506567694259:aes(ymin = y0, lower = y25, middle = y50, upper = y75, ymax = y100),
1506567694260:stat = "identity"
1506567694260:)
1506567827420:?outlier.test
1506567833778:?outlier
1506567955564:weather %>% glimpse
1506567961011:x <- weather[weekday == "0"]$num_trips
1506567966138:x <- weather[,weekday == "0"]$num_trips
1506567998231:x <- weather %>% filter(weekday == "0") %>% select(num_trips)
1506567999504:x
1506568015217:outlier(x)
1506568022701:psych::outlier(x)
1506568034305:x %>% as_vector()
1506568041984:x %>% as.vector()
1506568049598:x %>% as.array()
1506568056534:x %>% t
1506568064773:x %>% t %>% as.vector()
1506568076617:x %>% t %>% as.vector() %>% psych::outlier()
1506568102339:d2 <- outlier(psych::sat.act)
1506568110389:d2 <- psych::outlier(psych::sat.act)
1506568126105:library(psych)
1506568134474:sat.act
1506568162847:d2 <- psych::outlier(psych::sat.act)
1506568164160:d2
1506568177030:psych::outlier(psych::sat.act)
1506568188361:d2 <- outlier(sat.act)
1506568188456:#combine with the data frame and plot it with the outliers highlighted in blue
1506568188456:sat.d2 <- data.frame(sat.act,d2)
1506568195494:sat.d2
1506568198760:d2
1506568210020:pairs.panels(sat.d2,bg=c("yellow","blue")[(d2 > 25)+1],pch=21)
1506568229196:outlier(x)
1506568232494:outlier(a)
1506568241709:psych::outlier(psych::sat.act) %>% outlier
1506568252155:outlier(d2)
1506568263868:psych::outlier(psych::sat.act)
1506568271696:outlier(psych::outlier(psych::sat.act))
1506568275680:psych::outlier(psych::sat.act) %>% outlier
1506568291932:outlier(fit)
1506568296869:outlier(x)
1506568297500:x
1506568303414:outlier(weather1)
1506568380597:lh <- quantile(x ,probs=0.25)	Lower hinge (first quartile)
1506568385271:lh <- quantile(x ,probs=0.25)
1506568391152:lh <- quantile(x %>% t ,probs=0.25)
1506568394549:lh
1506568410477:uh <- quantile(x %>% t, probs=0.75)
1506568411582:step<- 1.5 * (uh-lh)
1506568413912:step
1506568429313:lh <- quantile(x %>% t %>% as.vector() ,probs=0.25)
1506568429647:uh <- quantile(x %>% t %>% as.vector(), probs=0.75)
1506568429885:step<- 1.5 * (uh-lh)
1506568433237:step
1506568438245:lh
1506568441163:uh
1506568447055:uh-lh
1506568489401:lr <- lh - step
1506568490668:lr
1506568508922:uh <- uh + step
1506568513276:uh <- quantile(x %>% t %>% as.vector(), probs=0.75)
1506568515864:ur <- uh + step
1506568518523:ur
1506568523877:x %>% t %>% as.vector()
1506568528642:x %>% t %>% as.vector()[1]
1506568533765:x %>% t %>% as.vector() %>% .[1]
1506568546399:x %>% t %>% as.vector() %>% .[2]
1506568566185:t <- x %>% t %>% as.vector()
1506568566744:t
1506568577041:quantile(t, probs = 0.5)
1506568584241:quantile(t, probs = 0.5) %>% class
1506568593463:?quantile
1506568603458:lh <- quantile(x %>% t %>% as.vector(), probs=0.25, names = F)
1506568603786:uh <- quantile(x %>% t %>% as.vector(), probs=0.75, names = F)
1506568604196:step<- 1.5 * (uh-lh)
1506568604727:lr <- lh - step
1506568604892:ur <- uh + step
1506568606411:lr
1506568607378:ur
1506568695868:weather %>% ggplot(aes(weekday, num_trips)) + geom_boxplot()
1506568747049:return(c(lr, ur))
1506568771084:lh <- quantile(x %>% t %>% as.vector(), probs=0.25, names = F)
1506568772481:d_o <- function(x){
1506568772481:lh <- quantile(x %>% t %>% as.vector(), probs=0.25, names = F)
1506568772482:uh <- quantile(x %>% t %>% as.vector(), probs=0.75, names = F)
1506568772482:step<- 1.5 * (uh-lh)
1506568772483:lr <- lh - step
1506568772483:ur <- uh + step
1506568772483:return(c(lr, ur))
1506568772484:}
1506568781415:d_o(x)
1506568794271:x1 <- weather %>% filter(weekday == "0") %>% select(num_trips)
1506568794452:x2 <- weather %>% filter(weekday == "1") %>% select(num_trips)
1506568906353:weather <- weather %>%
1506568906354:filter(
1506568906355:(weekday == "0" & num_trips  %in% d_o(x1))|
1506568906355:(weekday == "1" & num_trips %in% d_o(x2)))
1506568922341:weather %>% ggplot(aes(weekday, num_trips)) + geom_boxplot()
1506568929949:weather %>% glimpse
1506568948874:source('~/Documents/Harrisburg/500_52/Project/bay_area_bike_share/src/EDA.R')
1506568958039:trip_daily <- trip %>%
1506568958043:as_tbl_time(index = start_date) %>%
1506568958044:time_summarise(period = "daily",
1506568958044:num_trips = n()) %>%
1506568958045:mutate(start_date = as.Date(start_date))
1506568960619:weather <- weather %>%
1506568960620:left_join(trip_daily, by = c("pdt" = "start_date"))
1506568960626:weather <- weather %>%
1506568960627:mutate(day_of_week = pdt %>% strftime("%A"),
1506568960627:week_nr = pdt %>% strftime("%W"),
1506568960628:weekday = pdt %>% strftime("%u") %>% as.numeric) %>%
1506568960628:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506568960629:mutate(weekday = as.factor(as.numeric(factor(weekday)) - 1))
1506568960667:weather_weekday <- weather %>%
1506568960668:filter(weekday == "weekday")
1506568960689:weather_weekend <- weather %>%
1506568960690:filter(weekday == "weekend")
1506568966755:weather1 <- weather %>%
1506568966756:filter(
1506568966756:(weekday == "0" & num_trips  %in% d_o(x1)) | (weekday == "1" & num_trips %in% d_o(x2)))
1506568972665:weather %>% glimpse
1506568976142:weather1
1506569010433:weather %>% ggplot(aes(weekday, num_trips)) + geom_boxplot()
1506569022727:?boxplot
1506569054958:out <- boxplot(weather$num_trips)
1506569062924:out$out
1506569067385:out$group
1506569084330:out
1506569099091:out$stats
1506569116983:out <- weather %>% ggplot(aes(weekday, num_trips)) + geom_boxplot()
1506569118018:out
1506569120896:class(out)
1506569128168:?geom_boxplot
1506569160163:boxplot.stats(x1)
1506569163616:x1 <- weather %>% filter(weekday == "0") %>% select(num_trips)
1506569163803:x2 <- weather %>% filter(weekday == "1") %>% select(num_trips)
1506569165366:x1
1506569168429:x2
1506569171602:boxplot.stats(x1)
1506569190763:x1 <- weather %>% filter(weekday == "0") %>% select(num_trips) %>% t %>% as.vector()
1506569194267:boxplot.stats(x1)
1506569266694:weather_weekday <- weather %>%
1506569266696:filter(weekday == "weekday")
1506569266884:weather_weekend <- weather %>%
1506569266885:filter(weekday == "weekend")
1506569322566:weather_weekday <- weather_weekday %>%
1506569322568:slice(boxplot.stats(x1)$out)
1506569329014:boxplot.stats(x1)$out
1506569365390:weather_weekday <- weather_weekday %>%
1506569365392:slice(boxplot.stats(x1)$out)
1506569365626:weather_weekend <- weather_weekend %>%
1506569365626:slice(boxplot.stats(x2)$out)
1506569369139:weather_weekend <- weather_weekend %>%
1506569369140:slice(boxplot.stats(x2)$out)
1506569370581:x2
1506569398349:x2 <- weather %>% filter(weekday == "1") %>% select(num_trips) %>% t %>% as.vector()
1506569407895:weather_weekend <- weather_weekend %>%
1506569407897:slice(boxplot.stats(x2)$out)
1506569423610:weather1 <- rbind(weather_weekday, weather_weekend)
1506569430618:weather1 %>% ggplot(aes(weekday, num_trips)) + geom_boxplot()
1506569435521:weather1
1506569439427:weather_weekday
1506569447931:?slice
1506569456994:weather_weekday <- weather %>%
1506569456995:filter(weekday == "weekday")
1506569457184:weather_weekend <- weather %>%
1506569457185:filter(weekday == "weekend")
1506569459921:weather_weekday
1506569464139:weather
1506569479250:weather_weekday <- weather %>%
1506569479251:filter(weekday == "0")
1506569479431:weather_weekend <- weather %>%
1506569479433:filter(weekday == "1")
1506569483148:weather_weekday
1506569502500:weather %>% View
1506569535990:weather %>% glimpse
1506569574172:weather1 %>% ggplot(aes(weekday, num_trips)) + geom_boxplot()
1506569579665:wether1
1506569582395:weather_weekday
1506569587430:weather_weekday <- weather_weekday %>%
1506569587433:slice(boxplot.stats(x1)$out)
1506569587868:weather_weekend <- weather_weekend %>%
1506569587869:slice(boxplot.stats(x2)$out)
1506569588367:weather1 <- rbind(weather_weekday, weather_weekend)
1506569590977:weather1 %>% ggplot(aes(weekday, num_trips)) + geom_boxplot()
1506569614750:fit <- lm(data = weather1,
1506569614752:formula = formula)
1506569615444:summary.fit <- summary(fit)
1506569616008:summary.fit
1506569619582:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506569620361:plot(fit)
1506569630826:weather
1506569643834:weather1
1506569669806:weather_weekday <- weather %>%
1506569669807:filter(weekday == "0")
1506569670969:weather_weekend <- weather %>%
1506569670971:filter(weekday == "1")
1506569673867:weather_weekday <- weather_weekday %>%
1506569673868:slice(-boxplot.stats(x1)$out)
1506569674436:weather_weekend <- weather_weekend %>%
1506569674437:slice(-boxplot.stats(x2)$out)
1506569677416:weather_weekday
1506569681524:weather1 <- rbind(weather_weekday, weather_weekend)
1506569688490:l <- regsubsets(data = weather1,
1506569688492:num_trips ~
1506569688493:weekday +
1506569688495:mean_temperature_f +
1506569688496:precipitation_in +
1506569688496:mean_visibility_miles +
1506569688497:mean_humidity +
1506569688497:mean_wind_speed_mph +
1506569688498:cloud_cover,
1506569688500:method = "forward", nvmax = 15)
1506569689055:s <- summary(l)
1506569689429:s
1506569689666:s$cp
1506569707878:weather_weekend
1506569727828:weather_weekend <- weather %>%
1506569727828:filter(weekday == "1")
1506569731026:weather_weekend
1506569744603:x2 <- weather %>% filter(weekday == "1") %>% select(num_trips) %>% t %>% as.vector()
1506569745858:x2
1506569748313:x1 <- weather %>% filter(weekday == "0") %>% select(num_trips) %>% t %>% as.vector()
1506569750194:x1
1506569759901:d_o <- function(x){
1506569759902:lh <- quantile(x %>% t %>% as.vector(), probs=0.25, names = F)
1506569759903:uh <- quantile(x %>% t %>% as.vector(), probs=0.75, names = F)
1506569759905:step<- 1.5 * (uh-lh)
1506569759907:lr <- lh - step
1506569759909:ur <- uh + step
1506569759910:return(c(lr, ur))
1506569759910:}
1506569771670:boxplot.stats(x1)$out
1506569776296:boxplot.stats(x2)$out
1506569782619:weather_weekend %>%
1506569782620:slice(-boxplot.stats(x2)$out)
1506569788003:weather_weekday %>%
1506569788005:slice(-boxplot.stats(x1)$out)
1506569800442:weather_weekday
1506569808098:boxplot.stats(x1)$out
1506569821885:x1
1506569850466:boxplot.stats(x1)
1506569855120:boxplot.stats(x2)
1506569864872:boxplot.stats(x2)$out
1506569871671:weather_weekend %>%
1506569871672:slice(-boxplot.stats(x2)$out)
1506569901722:weather_weekday <- weather_weekday %>%
1506569901723:row_number(-boxplot.stats(x1)$out)
1506569912093:x <- c(5, 1, 3, 2, 2, NA)
1506569912094:row_number(x)
1506569936042:weather_weekday
1506569942677:weather_weekday %>% slice(1,2,3)
1506569949239:weather_weekday %>% slice(c(1,2,3))
1506569958088:weather_weekday %>% slice(c(-1, -3))
1506569970828:x <- c(5, 1, 3, 2, 2, NA)
1506569970830:row_number(x)
1506569978518:-boxplot.stats(x2)$out
1506569990104:boxplot.stats(x2)$out
1506570008733:x1
1506570011272:x2
1506570027286:plot(x1)
1506570029498:plot(x2)
1506570079585:weather %>% filter(weekday == "0") %>% select(num_trips) %>% plot
1506570085841:weather %>% filter(weekday == "0") %>% select(num_trips)
1506570100780:weather %>% filter(weekday == "0") %>% select(num_trips) %>% plot(.$num_trips)
1506570113839:b = weather %>% filter(weekday == "0") %>% select(num_trips)
1506570115490:plot(b)
1506570125614:b
1506570136168:b %>% as.numeric()
1506570140397:b %>% t %>% as.numeric()
1506570173091:weather %>% filter(weekday == "0") %>% select(num_trips) %>% ggplot(aes(num_trips)) +geom_point()
1506570191328:weather %>% filter(weekday == "0") %>% select(num_trips) %>% ggplot(aes(y = num_trips)) +geom_point()
1506570197600:?geom_point
1506570266688:weather %>% filter(weekday == "0") %>% select(num_trips, pdt) %>% ggplot(aes(pdt, num_trips)) +geom_point()
1506570306664:weather %>% filter(weekday == "0") %>% select(num_trips, pdt, zip) %>% ggplot(aes(pdt, num_trips)) +geom_point() +facet_wrap(~zip)
1506570383091:weather %>% filter(weekday == "0") %>% select(num_trips, pdt, zip) %>% ggplot(aes(pdt, num_trips, fill = zip)) +geom_point()
1506570424382:weather <- weather %>% mutate(zip = factor(zip))
1506570450845:weather %>% filter(weekday == "0") %>% select(num_trips, pdt, zip) %>% ggplot(aes(pdt, num_trips, fill = zip)) +geom_point()
1506570472817:weather %>% filter(weekday == "0") %>% select(num_trips, pdt, zip) %>% ggplot(aes(pdt, num_trips, color = zip)) +geom_point()
1506570488114:weather %>% filter(weekday == "0") %>% select(num_trips, pdt, zip) %>% ggplot(aes(pdt, num_trips, fill = zip)) +geom_point()
1506570494874:weather %>% View()
1506570535143:weather %>% select(num_trips, pdt, zip) %>% ggplot(aes(pdt, num_trips, color = zip)) + geom_point()
1506570556729:weather %>% select(num_trips, pdt, zip) %>% ggplot(aes(pdt, num_trips, color = zip)) + geom_point() + facet_wrap(~zip)
1506570595395:test <- weather %>% filter(zip = "94041")
1506570599328:test <- weather %>% filter(zip == "94041")
1506570608979:test %>% select(num_trips, pdt, zip) %>% ggplot(aes(pdt, num_trips)) + geom_point()
1506570614458:test
1506570617983:weather
1506570644241:weather %>% filter(zip = "94047") %>% select(num_trips, pdt, zip) %>% ggplot(aes(pdt, num_trips)) + geom_point()
1506570648818:weather %>% filter(zip == "94047") %>% select(num_trips, pdt, zip) %>% ggplot(aes(pdt, num_trips)) + geom_point()
1506570653040:weather %>% filter(zip == "94041") %>% select(num_trips, pdt, zip) %>% ggplot(aes(pdt, num_trips)) + geom_point()
1506570664406:weather %>% count(zip)
1506570698565:weather %>% group_by(zip) %>% summarise(all = sum(num_trips))
1506570735275:# linear regression on num_of_trips ~ weather variables
1506570735276:trip_daily <- trip %>%
1506570735278:as_tbl_time(index = start_date) %>%
1506570735280:time_summarise(period = "daily",
1506570735282:num_trips = n()) %>%
1506570735284:mutate(start_date = as.Date(start_date))
1506570739286:trip_daily
1506570754807:trip
1506570771867:# linear regression on num_of_trips ~ weather variables
1506570771868:trip_daily <- trip %>%
1506570771869:as_tbl_time(index = start_date) %>%
1506570771869:group_by(zip_code) %>%
1506570771870:time_summarise(period = "daily",
1506570771870:num_trips = n()) %>%
1506570771871:mutate(start_date = as.Date(start_date))
1506570776669:trip_daily
1506570792894:trip %>% glimpse
1506570803678:trip %>% count(zip_code)
1506570832289:trip %>% count(zip_code) %>% View
1506570874103:trip %>% count(zip_code) %>% arrange(desc(n))
1506570895771:station %>% glimpse
1506570914283:weather %>% glimpse
1506572734440:t1 <- ("this, is a . very goo")
1506572735251:gsub((.*, )|(\\..*), , t1)
1506572749179:gsub('(.*, )|(\\..*)', ", t1)
1506572755916:)
1506572767782:t1 <- ("this, is a . very goo")
1506572781282:gsub('(.*, )|(\\..*)', "", t1)
1506572808180:gsub('(.*, )|(\\..*)', \\", t1)
1506572811916:gsub('(.*, )|(\\..*)', \", t1)
1506572814836:gsub('(.*, )|(\\..*)', ", t1)
1506572818942:""
1506572822884:"
1506572853174:?gsug
1506572855534:?gsub
1506572879804:gsub('(.*, )|(\\..*)', """, t1)
1506572882557:)
1506572889036:gsub('(.*, )|(\\..*)', "\\"", t1)
1506572892193:)
1506572962604:gsub('(.*, )|(\\..*)', "\"", t1)
1506572968771:gsub('(.*, )|(\\..*)', """, t1)
1506572975813:gsub('(.*, )|(\\..*)', "\"", t1)
1506572983093:gsub('(.*,)|(\\..*)', "\"", t1)
1506572985927:t1
1506573012447:gsub('(.*),|(\\..*)', "\"", t1)
1506573019291:gsub('(.*)|,(\\..*)', "\"", t1)
1506573043230:gsub('(.*)(,)|(\\..*)', "\"", t1)
1506573052242:gsub('(.*)|(,)|(\\..*)', "\"", t1)
1506573057068:gsub('(.*)&(,)|(\\..*)', "\"", t1)
1506573067370:gsub('(.*)($,)|(\\..*)', "\"", t1)
1506573070372:gsub('(.*)(,)|(\\..*)', "\"", t1)
1506573084296:gsub('(.*)(, )|(\\..*)', "\"", t1)
1506573106707:gsub('(.*, )|(\\..*)', "\\"", t1)
1506573113643:gsub('(.*)(, )|(\\..*)', "\"", t1)
1506573137144:gsub('(.*, )|(\\..*)', "\".*\"", t1)
1506573150478:\".*\"
1506573155607:s = """
1506573161458:s = "\""
1506573162463:s
1506573180017:(['"])
1506573241601:gsub('(.*, )|(\\..*)', "(\".+")", t1)
1506573245368:)
1506573284033:gsub('(.*, )|(\\..*)', (\".+"), t1)
1506573301968:gsub('(.*, )|(\\..*)', '(\".+")', t1)
1506573308685:gsub('(.*, )|(\\..*)', '"', t1)
1506573320119:gsub('(.*, )|(\\..*)', ", t1)
1506573328167:gsub('(.*, )|(\\..*)', \", t1)
1506573332299:gsub('(.*, )|(\\..*)', \\", t1)
1506573341824:gsub('(.*, )|(\\..*)', '\\"', t1)
1506573344661:gsub('(.*, )|(\\..*)', '\"', t1)
1506573347430:gsub('(.*, )|(\\..*)', '"', t1)
1506573355874:gsub('(.*, )|(\\.*)', '"', t1)
1506573359784:gsub('(.*, )|(\\..*)', '"', t1)
1506573381321:gsub('(.*, )|(\\..*)', '"', t1) %>% print
1506573401702:gsub('(.*, )|(\\..*)', '"', t1) %>% paste(. "another")
1506573405772:gsub('(.*, )|(\\..*)', '"', t1) %>% paste(. ,"another")
1506573413731:gsub('(.*, )|(\\..*)', '"', t1) %>% paste(. ,"n")
1506654351343:weather <- read_csv("data/201608_weather_data.csv")
1506654353481:# rename
1506654353489:names(weather) <-
1506654353491:names(weather) %>%
1506654353499:gsub(" ", "_", .) %>%
1506654353506:gsub("([a-z])([A-Z])", "\\1\\_\\2", .) %>%
1506654353508:tolower()
1506654354398:weather <- weather %>%
1506654354399:mutate(events = ifelse(is.na(events), "None", events)) %>%
1506654354401:mutate(events = as.factor(events)) %>%
1506654354402:mutate(pdt = mdy(pdt))
1506654356237:weather <- weather %>%
1506654356242:mutate(precipitation_in = as.numeric(precipitation_in)) %>%
1506654356246:mutate(precipitation_in = ifelse(is.na(precipitation_in),
1506654356254:0, precipitation_in))
1506654362949:weather %>% view
1506654373989:weather %>% glimpse()
1506654420429:# only select the weather that for the SF. zip = 94107
1506654420433:weather <- weather %>%
1506654420440:filter(zip == 94107)
1506654422181:weather %>% glimpse()
1506654460916:# number of trips by day
1506654460917:trip %>%
1506654460920:as_tbl_time(index = start_date) %>%
1506654460923:time_summarise(period = "daily",
1506654460924:num_trips = n()) %>%
1506654460926:mutate(day_of_week = start_date %>% strftime("%A"),
1506654460928:week_nr = start_date %>% strftime("%W"),
1506654460933:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506654460935:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506654460936:ggplot(aes(start_date, num_trips, color = weekday)) +
1506654460939:geom_point() +
1506654460941:geom_smooth()+
1506654460945:labs(x = "Date",
1506654460947:y = "Total Number of Bicycle Trips",
1506654460948:title = "Trips Each Day")
1506654490470:trip %>%
1506654490474:as_tbl_time(index = start_date) %>%
1506654490477:time_summarise(period = "daily",
1506654490478:num_trips = n()) %>%
1506654490480:mutate(day_of_week = start_date %>% strftime("%A"),
1506654490481:week_nr = start_date %>% strftime("%W"),
1506654490482:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506654490483:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>% glips
1506654505649:trip %>%
1506654505651:as_tbl_time(index = start_date) %>%
1506654505652:time_summarise(period = "daily",
1506654505652:num_trips = n()) %>%
1506654505653:mutate(day_of_week = start_date %>% strftime("%A"),
1506654505654:week_nr = start_date %>% strftime("%W"),
1506654505655:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506654505655:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>% glimpse()
1506654549928:trips %>% glimpse()
1506654555385:trip %>% glimpse()
1506654565347:station %>% glimpse()
1506654615014:station %>% count(city)
1506654636724:station %>% View
1506654661145:#   ____________________________________________________________________________
1506654661146:#   Read data                                                               ####
1506654661147:station <- read_csv("data/201608_station_data.csv")
1506654661851:station <- station %>%
1506654661852:mutate(installation = mdy(installation)) %>%
1506654661853:arrange(station_id)
1506654662637:colnames(station) <- c("id","name","lat","long","dock_count","city","installation_date")
1506654671010:station %>% count(city)
1506654682145:#   ____________________________________________________________________________
1506654682147:#   Read data                                                               ####
1506654682148:station <- read_csv("data/201608_station_data.csv")
1506654684188:station %>% count(city)
1506654689965:station %>% View
1506654766415:#   ____________________________________________________________________________
1506654766417:#   Read data                                                               ####
1506654766418:station <- read_csv("data/201608_station_data.csv")
1506654766678:station <- station %>%
1506654766680:mutate(installation = mdy(installation)) %>%
1506654766681:arrange(station_id)
1506654767323:colnames(station) <- c("id","name","lat","long","dock_count","city","installation_date")
1506654980427:scation_in_city <- function(cityname) {
1506654980435:station %>%
1506654980436:filter(city == cityname) %>%
1506654980437:select(id) %>%
1506654980438:t %>%
1506654980439:as.integer()
1506654980440:}
1506655004151:scation_in_city <- function(cityname) {
1506655004153:station %>%
1506655004153:filter(city == cityname) %>%
1506655004154:select(id) %>%
1506655004154:t %>%
1506655004154:as.integer()
1506655004155:}
1506655008744:stationincity
1506655023289:StatFunction
1506655037788:# in this part only do analysis on San Jose
1506655037796:station_id_san_jose <- station_in_city("San Jose")
1506655052902:station_in_city <- function(cityname) {
1506655052903:station %>%
1506655052904:filter(city == cityname) %>%
1506655052904:select(id) %>%
1506655052905:t %>%
1506655052906:as.integer()
1506655052906:}
1506655055626:# in this part only do analysis on San Jose
1506655055627:station_id_san_jose <- station_in_city("San Jose")
1506655107319:c(2,5)  %in% c(1:10)
1506655115275:# add trip stat_long and end_long
1506655115276:trip_san_jose <- trip %>%
1506655115278:filter(start_station_id %in% station_id_san_jose) %>%
1506655115279:filter(end_station_id %in% station_id_san_jose) %>%
1506655115279:group_by(start_station_id, end_station_id) %>%
1506655115280:summarise(num_trip = n()) %>%
1506655115282:left_join(station %>% select(id, lat, long),
1506655115284:by = c("start_station_id" = "id")) %>%
1506655115287:rename(start_long = long, start_lat = lat) %>%
1506655115289:left_join(station %>% select(id, lat, long),
1506655115290:by = c("end_station_id" = "id")) %>%
1506655115291:rename(end_long = long, end_lat = lat)
1506655119258:trip_san_jose
1506655145885:# add trip stat_long and end_long
1506655145887:trip_san_jose <- trip %>%
1506655145889:filter(c(start_station_id, end_station_id) %in% station_id_san_jose) %>%
1506655145891:# filter(end_station_id %in% station_id_san_jose) %>%
1506655145892:group_by(start_station_id, end_station_id) %>%
1506655145892:summarise(num_trip = n()) %>%
1506655145893:left_join(station %>% select(id, lat, long),
1506655145894:by = c("start_station_id" = "id")) %>%
1506655145895:rename(start_long = long, start_lat = lat) %>%
1506655145895:left_join(station %>% select(id, lat, long),
1506655145896:by = c("end_station_id" = "id")) %>%
1506655145896:rename(end_long = long, end_lat = lat)
1506655153976:station_id_san_jose
1506655158430:station_id_san_jose %>% class
1506655169514:c(2,4)  %in% station_id_san_jose
1506655176579:trip_san_jose <- trip %>%
1506655176580:filter(c(start_station_id, end_station_id) %in% station_id_san_jose)
1506655295195:trip %>% glimpse()
1506655315980:# linear regression on num_of_trips ~ weather variables
1506655315981:# numbers of trip every day in SF
1506655315981:station_id_sf <- station_in_city("San Francisco")
1506655333042:trip_daily <- trip %>%
1506655333043:select(start_station_id %in% station_id_sf) %>%
1506655333045:as_tbl_time(index = start_date) %>%
1506655333047:time_summarise(period = "daily",
1506655333048:num_trips = n()) %>%
1506655333048:mutate(start_date = as.Date(start_date))
1506655336701:# linear regression on num_of_trips ~ weather variables
1506655336702:# numbers of trip every day in SF
1506655336702:station_id_sf <- station_in_city("San Francisco")
1506655337131:trip_daily <- trip %>%
1506655337132:select(start_station_id %in% station_id_sf) %>%
1506655337133:as_tbl_time(index = start_date) %>%
1506655337133:time_summarise(period = "daily",
1506655337135:num_trips = n()) %>%
1506655337135:mutate(start_date = as.Date(start_date))
1506655345790:station_id_sf
1506655361089:trip_daily <- trip %>%
1506655361090:filter(start_station_id %in% station_id_sf) %>%
1506655361091:as_tbl_time(index = start_date) %>%
1506655361091:time_summarise(period = "daily",
1506655361092:num_trips = n()) %>%
1506655361092:mutate(start_date = as.Date(start_date))
1506655366626:trip_daily
1506655377756:weather <- read_csv("data/201608_weather_data.csv")
1506655378004:# rename
1506655378005:names(weather) <-
1506655378005:names(weather) %>%
1506655378006:gsub(" ", "_", .) %>%
1506655378006:gsub("([a-z])([A-Z])", "\\1\\_\\2", .) %>%
1506655378007:tolower()
1506655378811:weather <- weather %>%
1506655378813:mutate(events = ifelse(is.na(events), "None", events)) %>%
1506655378821:mutate(events = as.factor(events)) %>%
1506655378823:mutate(pdt = mdy(pdt))
1506655379435:weather <- weather %>%
1506655379436:mutate(precipitation_in = as.numeric(precipitation_in)) %>%
1506655379436:mutate(precipitation_in = ifelse(is.na(precipitation_in),
1506655379437:0, precipitation_in))
1506655380026:# only select the weather that for the SF. zip = 94107
1506655380032:weather <- weather %>%
1506655380046:filter(zip == 94107)
1506655386188:weather <- weather %>%
1506655386190:left_join(trip_daily, by = c("pdt" = "start_date"))
1506655387802:weather <- weather %>%
1506655387802:mutate(day_of_week = pdt %>% strftime("%A"),
1506655387803:week_nr = pdt %>% strftime("%W"),
1506655387804:weekday = pdt %>% strftime("%u") %>% as.numeric) %>%
1506655387804:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506655387806:mutate(weekday = as.factor(as.numeric(factor(weekday)) - 1)) %>%
1506655387807:mutate(zip = factor(zip))
1506655389142:weather_weekday <- weather %>%
1506655389144:filter(weekday == "0")
1506655389273:weather_weekend <- weather %>%
1506655389273:filter(weekday == "1")
1506655411407:weather
1506655425496:weather %>% glimpse()
1506655481713:x1 <- weather %>% filter(weekday == "0") %>% select(num_trips) %>% t %>% as.vector()
1506655483432:x1
1506655527332:weather %>% ggplot(aes(pdt, num_trips, color = weekday)) + geom_point()
1506655547607:l <- regsubsets(data = weather1,
1506655547608:num_trips ~
1506655547609:weekday +
1506655547610:mean_temperature_f +
1506655547612:precipitation_in +
1506655547613:mean_visibility_miles +
1506655547615:mean_humidity +
1506655547616:mean_wind_speed_mph +
1506655547618:cloud_cover,
1506655547621:method = "forward", nvmax = 15)
1506655550613:l <- regsubsets(data = weather,
1506655550614:num_trips ~
1506655550614:weekday +
1506655550615:mean_temperature_f +
1506655550615:precipitation_in +
1506655550616:mean_visibility_miles +
1506655550617:mean_humidity +
1506655550619:mean_wind_speed_mph +
1506655550620:cloud_cover,
1506655550620:method = "forward", nvmax = 15)
1506655551772:s <- summary(l)
1506655552125:s
1506655552391:s$cp
1506655592592:formula = "sqrt(num_trips) ~
1506655592594:weekday +
1506655592594:mean_temperature_f +
1506655592596:mean_visibility_miles +
1506655592597:precipitation_in"
1506655595937:fit <- lm(data = weather,
1506655595937:formula = formula)
1506655597216:summary.fit <- summary(fit)
1506655597388:summary.fit
1506655604569:plot(fit)
1506655657046:weather[c(273, 308),]
1506655878216:install.packages("chron")
1506655902329:library(chron)
1506655911319:is.holiday(weather$pdt)
1506655918939:?is.holiday
1506655931629:.Holidays
1506655969663:install.packages("timeDate")
1506656022490:library(timdDate)
1506656024724:library(timeDate)
1506656052940:holidayNERC()
1506656061687:holidayNYSE()
1506656175653:?holidayDate
1506656187857:USNewYearsDay()
1506656203023:listHolidays()
1506656226050:USMemorialDay(year = 2016)
1506656477890:holidayNYSE()
1506656501008:USChristmasDay()
1506656542583:holiday(year = getRmetricsOptions("currentYear"), Holiday = "Easter")
1506656549590:?holiday
1506656567327:holiday(year = getRmetricsOptions("2016"), Holiday = "Easter")
1506656573454:holiday(year = 2016, Holiday = "Easter")
1506656606392:holiday(year = 2016, Holiday = "USNewYork")
1506656618292:holiday(year = 2016, Holiday = "USNewYearsDay")
1506656654990:holiday()
1506656662956:holiday
1506656703975:holiday(year = 2016, Holiday = c("USNewYearsDay", "USGoodFriday"))
1506656748999:# weekdend
1506656749000:l2 <- regsubsets(data = weather_weekend,
1506656749002:num_trips ~
1506656749003:mean_temperature_f +
1506656749004:precipitation_in +
1506656749006:mean_visibility_miles +
1506656749008:mean_humidity +
1506656749010:mean_wind_speed_mph +
1506656749011:cloud_cover,
1506656749012:method = "forward", nvmax = 15)
1506656750050:s2 <- summary(l2)
1506656750419:s2
1506656752306:s2$cp
1506656811274:# select one will smallest Mallow's Cp
1506656811277:formula2 = "num_trips ~
1506656811280:mean_temperature_f +
1506656811280:mean_visibility_miles +
1506656811281:cloud_cover +
1506656811281:mean_humidity"
1506656811946:fit2 <- lm(data = weather_weekend,
1506656811947:formula = formula2)
1506656812669:summary.fit2 <- summary(fit2)
1506656812799:summary.fit2
1506656817932:plot(fit2)
1506656840151:weather_weekend[c(11, 99, 100)]
1506656842283:weather_weekend[c(11, 99, 100),]
1506657053517:# weekdend
1506657053521:l2 <- regsubsets(data = weather_weekend %>% slice(-c(99, 100)),
1506657053524:num_trips ~
1506657053526:mean_temperature_f +
1506657053528:precipitation_in +
1506657053529:mean_visibility_miles +
1506657053530:mean_humidity +
1506657053531:mean_wind_speed_mph +
1506657053532:cloud_cover,
1506657053533:method = "forward", nvmax = 15)
1506657054392:s2 <- summary(l2)
1506657055074:s2
1506657059254:s2$cp
1506657068075:# select one will smallest Mallow's Cp
1506657068076:formula2 = "num_trips ~
1506657068077:mean_temperature_f +
1506657068077:mean_visibility_miles +
1506657068078:cloud_cover +
1506657068078:mean_humidity"
1506657069972:fit2 <- lm(data = weather_weekend,
1506657069973:formula = formula2)
1506657072060:summary.fit2 <- summary(fit2)
1506657072229:summary.fit2
1506657075840:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506657076559:plot(fit2)
1506657091112:fit2 <- lm(data = weather_weekend %>% slice(-c(99, 100)),
1506657091114:formula = formula2)
1506657091489:summary.fit2 <- summary(fit2)
1506657091669:summary.fit2
1506657094459:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506657094621:plot(fit2)
1506657145191:# select one will smallest Mallow's Cp
1506657145195:formula2 = "num_trips ~
1506657145198:mean_temperature_f +
1506657145199:cloud_cover +
1506657145199:precipitation_in"
1506657145807:fit2 <- lm(data = weather_weekend %>% slice(-c(99, 100)),
1506657145809:formula = formula2)
1506657146256:summary.fit2 <- summary(fit2)
1506657146355:summary.fit2
1506657148743:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506657148893:plot(fit2)
1506657170428:# select one will smallest Mallow's Cp
1506657170429:formula2 = "sqrt(num_trips) ~
1506657170429:mean_temperature_f +
1506657170430:cloud_cover +
1506657170430:precipitation_in"
1506657170632:fit2 <- lm(data = weather_weekend %>% slice(-c(99, 100)),
1506657170634:formula = formula2)
1506657171009:summary.fit2 <- summary(fit2)
1506657171214:summary.fit2
1506657174423:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506657174574:plot(fit2)
1506657263042:# select one will smallest Mallow's Cp
1506657263043:formula2 = "(num_trips) ~
1506657263044:mean_temperature_f +
1506657263045:cloud_cover +
1506657263046:precipitation_in"
1506657263197:fit2 <- lm(data = weather_weekend %>% slice(-c(99, 100)),
1506657263198:formula = formula2)
1506657263490:summary.fit2 <- summary(fit2)
1506657263996:summary.fit2
1506657268850:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506657269349:plot(fit2)
1506657305032:fitted(fit2)
1506657380799:weather1 %>% ggplot(aes(weekday, num_trips)) + geom_boxplot()
1506657392976:weather1 <- weather %>%
1506657392978:filter(
1506657392978:(weekday == "0" & num_trips  %in% d_o(x1)) | (weekday == "1" & num_trips %in% d_o(x2)))
1506657470122:allnolidays <- c(USNewYearsDay, USInaugurationDay, USMLKingsBirthday, USLincolnsBirthday, USWashingtonsBirthday, USMemorialDay, USIndependenceDay, USLaborDay, USColumbusDay, USElectionDay, USVeteransDay, USThanksgivingDay, USChristmasDay, USCPulaskisBirthday, USGoodFriday)
1506657477489:allnolidays
1506657489754:allholidays <- c(USNewYearsDay, USInaugurationDay, USMLKingsBirthday, USLincolnsBirthday, USWashingtonsBirthday, USMemorialDay, USIndependenceDay, USLaborDay, USColumbusDay, USElectionDay, USVeteransDay, USThanksgivingDay, USChristmasDay, USCPulaskisBirthday, USGoodFriday)
1506657511776:USNewYearsDay(2-15)
1506657522301:USNewYearsDay(c(2015, 2016))
1506657541760:USNewYearsDay(2015:2016)
1506657555699:?purrr
1506657635687:allholidays[1]
1506657639872:allholidays[1](2015)
1506657650204:do(allholidays[1], 2015)
1506657666842:apply(2015, allholidays[2])
1506657680447:sapply(2015, allholidays[2])
1506657697947:allholidays[1][[1]]
1506657707871:allholidays[[3]]
1506657711373:allholidays[[3]](2015)
1506657733579:?sapply
1506657754425:sapply(c(2015, 2016), allholidays[[3]])
1506657780213:sapply(c(2015, 2016), allholidays[[3]], simplify = "array")
1506657786925:sapply(c(2015, 2016), allholidays[[3]], simplify = "vector")
1506657827411:sapply(c(2015, 2016), allholidays[[3]], simplify = T)
1506657835591:vapply(c(2015, 2016), allholidays[[3]], simplify = T)
1506657851582:lapply(c(2015, 2016), allholidays[[3]], simplify = T)
1506657860424:apply(c(2015, 2016), allholidays[[3]], simplify = T)
1506657863329:vapply(c(2015, 2016), allholidays[[3]], simplify = T)
1506657884460:tapply(c(2015, 2016), allholidays[[3]], simplify = T)
1506657898659:mapply(c(2015, 2016), allholidays[[3]], simplify = T)
1506657901785:sapply(c(2015, 2016), allholidays[[3]], simplify = T)
1506657934278:sapply(c(2015, 2016), allholidays[[1:5]], simplify = T)
1506657940730:sapply(c(2015, 2016), allholidays[[8]], simplify = T)
1506657948420:sapply(c(2015, 2016), allholidays[[8]], simplify = T)[1]
1506657952617:sapply(c(2015, 2016), allholidays[[8]], simplify = T)[[2]]
1506657964347:sapply(c(2015, 2016), allholidays[[8]], simplify = T) %>% unlist
1506658063314:?append
1506658075496:append(1:3, 4)
1506658081481:append(1:3, 41)
1506658108808:holidaydates <- c()
1506658109222:for (i in 1:length(allholidays)) {
1506658109223:x <- allholidays[[i]](c(2015:2016))
1506658109225:holidaydates <- append(holidaydates, x)
1506658109226:}
1506658113239:holidaydates
1506658153475:holidaydates %>% class
1506658225787:weather1 <- weather %>%
1506658225790:mutate(weekday = ifelse(
1506658225791:pdt %in% holidaydates, "1", weekday
1506658225794:))
1506658248355:weather$pdt %in% holidaydates
1506658260323:holidaydates[1]
1506658264633:holidaydates[[1]]
1506658273218:holidaydates %>% as.array()
1506658281619:holidaydates %>% class
1506658287000:holidaydates %>% as.timeDate()
1506658291285:holidaydates %>% as.Date()
1506658309775:holidaydates <- holidaydates %>%
1506658309778:as.Date()
1506658310553:weather1 <- weather %>%
1506658310554:mutate(weekday = ifelse(
1506658310556:pdt %in% holidaydates, "1", weekday
1506658310558:))
1506658313918:weather1
1506658322256:weather1 %>% glimpse()
1506658342438:weather %>% glimpse()
1506658362490:weather1 <- weather %>%
1506658362494:mutate(weekday = ifelse(
1506658362495:pdt %in% holidaydates, 1, weekday
1506658362501:))
1506658368390:weather1 %>% glimpse()
1506658406218:weather <- read_csv("data/201608_weather_data.csv")
1506658406450:# rename
1506658406451:names(weather) <-
1506658406454:names(weather) %>%
1506658406454:gsub(" ", "_", .) %>%
1506658406455:gsub("([a-z])([A-Z])", "\\1\\_\\2", .) %>%
1506658406457:tolower()
1506658406644:weather <- weather %>%
1506658406645:mutate(events = ifelse(is.na(events), "None", events)) %>%
1506658406648:mutate(events = as.factor(events)) %>%
1506658406652:mutate(pdt = mdy(pdt))
1506658407042:weather <- weather %>%
1506658407043:mutate(precipitation_in = as.numeric(precipitation_in)) %>%
1506658407044:mutate(precipitation_in = ifelse(is.na(precipitation_in),
1506658407044:0, precipitation_in))
1506658408293:# only select the weather that for the SF. zip = 94107
1506658408294:weather <- weather %>%
1506658408296:filter(zip == 94107)
1506658412021:weather <- weather %>%
1506658412027:left_join(trip_daily, by = c("pdt" = "start_date"))
1506658413216:weather <- weather %>%
1506658413219:mutate(day_of_week = pdt %>% strftime("%A"),
1506658413220:week_nr = pdt %>% strftime("%W"),
1506658413222:weekday = pdt %>% strftime("%u") %>% as.numeric) %>%
1506658413223:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506658413225:mutate(weekday = as.factor(as.numeric(factor(weekday)) - 1))
1506658417258:weather %>% glimpse
1506658444818:weather %>% mutate(weekday = as.character(weekday))
1506658452791:weather1 <- weather %>%
1506658452794:mutate(weekday = ifelse(
1506658452795:pdt %in% holidaydates, "1", weekday
1506658452798:))
1506658457325:weather1 %>% glimpse()
1506658472673:weather %>% glimpse()
1506658496492:weather <- weather %>% mutate(weekday = as.character(weekday))
1506658499897:weather1 <- weather %>%
1506658499901:mutate(weekday = ifelse(
1506658499907:pdt %in% holidaydates, "1", weekday
1506658499908:))
1506658504094:weather1 %>% glimpse()
1506658516759:l <- regsubsets(data = weather,
1506658516763:num_trips ~
1506658516766:weekday +
1506658516771:mean_temperature_f +
1506658516773:precipitation_in +
1506658516774:mean_visibility_miles +
1506658516775:mean_humidity +
1506658516775:mean_wind_speed_mph +
1506658516776:cloud_cover,
1506658516778:method = "forward", nvmax = 15)
1506658517272:s <- summary(l)
1506658517480:s
1506658517745:s$cp
1506658536662:formula = "sqrt(num_trips) ~
1506658536664:weekday +
1506658536665:mean_temperature_f +
1506658536666:mean_visibility_miles +
1506658536667:precipitation_in"
1506658537145:fit <- lm(data = weather,
1506658537146:formula = formula)
1506658537945:summary.fit <- summary(fit)
1506658538107:summary.fit
1506658540185:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506658540579:plot(fit)
1506658550011:weather %>% select(weekday, mean_temperature_f,
1506658550012:precipitation_in, mean_wind_speed_mph,
1506658550016:mean_visibility_miles, num_trips) %>% pairs
1506658555289:fit <- lm(data = weather1,
1506658555290:formula = formula)
1506658556330:summary.fit <- summary(fit)
1506658556659:summary.fit
1506658558580:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506658558982:plot(fit)
1506658587747:l <- regsubsets(data = weather1,
1506658587751:num_trips ~
1506658587752:weekday +
1506658587754:mean_temperature_f +
1506658587757:precipitation_in +
1506658587760:mean_visibility_miles +
1506658587762:mean_humidity +
1506658587764:mean_wind_speed_mph +
1506658587765:cloud_cover,
1506658587767:method = "forward", nvmax = 15)
1506658588225:s <- summary(l)
1506658588559:s
1506658588853:s$cp
1506658614633:formula = "sqrt(num_trips) ~
1506658614638:weekday +
1506658614640:mean_temperature_f +
1506658614643:mean_visibility_miles +
1506658614643:mean_wind_speed_mph +
1506658614644:precipitation_in"
1506658615861:fit <- lm(data = weather1,
1506658615862:formula = formula)
1506658616279:summary.fit <- summary(fit)
1506658616449:summary.fit
1506658617942:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506658618407:plot(fit)
1506658645072:formula = "(num_trips) ~
1506658645076:weekday +
1506658645078:mean_temperature_f +
1506658645079:mean_visibility_miles +
1506658645079:mean_wind_speed_mph +
1506658645083:precipitation_in"
1506658645453:fit <- lm(data = weather1,
1506658645455:formula = formula)
1506658645701:summary.fit <- summary(fit)
1506658646012:summary.fit
1506658650144:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506658654078:plot(fit)
1506658672694:formula = "sqrt(num_trips) ~
1506658672697:weekday +
1506658672698:mean_temperature_f +
1506658672701:mean_visibility_miles +
1506658672702:mean_wind_speed_mph +
1506658672703:precipitation_in"
1506658672945:fit <- lm(data = weather1,
1506658672946:formula = formula)
1506658673254:summary.fit <- summary(fit)
1506658673588:summary.fit
1506658674008:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506658674436:plot(fit)
1506658716866:fit <- lm(data = weather,
1506658716867:formula = formula)
1506658717270:summary.fit <- summary(fit)
1506658717731:summary.fit
1506658718661:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506658719220:plot(fit)
1506658740442:fit <- lm(data = weather1,
1506658740447:formula = formula)
1506658741340:summary.fit <- summary(fit)
1506658741910:summary.fit
1506658742613:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506658744068:plot(fit)
1506658777204:plot(x=fitted(fit),y=rstudent(fit))
1506658778145:abline(h=3,col="red",lty=2)
1506658779102:abline(h=-3,col="red",lty=2)
1506658779734:a <- rstudent(fit)
1506658987502:holidaydates
1506659138229:holidays <- function(year) {
1506659138232:allholidays <- c(USNewYearsDay, USInaugurationDay, USMLKingsBirthday, USLincolnsBirthday, USWashingtonsBirthday, USMemorialDay, USIndependenceDay, USLaborDay, USColumbusDay, USElectionDay, USVeteransDay, USThanksgivingDay, USChristmasDay, USCPulaskisBirthday, USGoodFriday)
1506659138234:holidaydates <- c()
1506659138235:for (i in 1:length(allholidays)) {
1506659138236:x <- allholidays[[i]](year)
1506659138238:holidaydates <- append(holidaydates, x)
1506659138239:}
1506659138241:holidaydates <- holidaydates %>%
1506659138242:as.Date()
1506659138243:reaturn(holidaydates)
1506659138245:}
1506659145209:holidays(2013)
1506659149949:return(holidaydates)
1506659150667:holidays <- function(year) {
1506659150670:allholidays <- c(USNewYearsDay, USInaugurationDay, USMLKingsBirthday, USLincolnsBirthday, USWashingtonsBirthday, USMemorialDay, USIndependenceDay, USLaborDay, USColumbusDay, USElectionDay, USVeteransDay, USThanksgivingDay, USChristmasDay, USCPulaskisBirthday, USGoodFriday)
1506659150674:holidaydates <- c()
1506659150676:for (i in 1:length(allholidays)) {
1506659150677:x <- allholidays[[i]](year)
1506659150679:holidaydates <- append(holidaydates, x)
1506659150680:}
1506659150682:holidaydates <- holidaydates %>%
1506659150682:as.Date()
1506659150683:return(holidaydates)
1506659150686:}
1506659151118:holidays(2013)
1506659165223:holidays(c(2013,2014))
1506659199841:sort(holidays(c(2014,2015)))
1506659215916:holidays <- function(year) {
1506659215919:allholidays <- c(USNewYearsDay, USInaugurationDay, USMLKingsBirthday, USLincolnsBirthday, USWashingtonsBirthday, USMemorialDay, USIndependenceDay, USLaborDay, USColumbusDay, USElectionDay, USVeteransDay, USThanksgivingDay, USChristmasDay, USCPulaskisBirthday, USGoodFriday)
1506659215922:holidaydates <- c()
1506659215922:for (i in 1:length(allholidays)) {
1506659215923:x <- allholidays[[i]](year)
1506659215924:holidaydates <- append(holidaydates, x)
1506659215924:}
1506659215926:holidaydates <- holidaydates %>%
1506659215927:as.Date()
1506659215929:return(sort(holidaydates))
1506659215930:}
1506659216270:holidays(c(2013,2014))
1506659336777:holidays <- function(year) {
1506659336781:allholidays <- c(USNewYearsDay, USMLKingsBirthday, USMemorialDay, USIndependenceDay, USLaborDay, USElectionDay, USVeteransDay, USThanksgivingDay, USChristmasDay)
1506659336783:holidaydates <- c()
1506659336785:for (i in 1:length(allholidays)) {
1506659336786:x <- allholidays[[i]](year)
1506659336787:holidaydates <- append(holidaydates, x)
1506659336788:}
1506659336791:holidaydates <- holidaydates %>%
1506659336793:as.Date()
1506659336796:return(sort(holidaydates))
1506659336798:}
1506659337694:holidays(c(2013,2014))
1506659372476:holidaydates <- holidays(c(2015, 2016))
1506659374066:weather1 <- weather %>%
1506659374071:mutate(weekday = ifelse(
1506659374074:pdt %in% holidaydates, "1", weekday
1506659374075:))
1506659379834:formula = "sqrt(num_trips) ~
1506659379836:weekday +
1506659379838:mean_temperature_f +
1506659379839:mean_visibility_miles +
1506659379851:mean_wind_speed_mph +
1506659379854:precipitation_in"
1506659381320:fit <- lm(data = weather1,
1506659381320:formula = formula)
1506659381931:summary.fit <- summary(fit)
1506659382153:summary.fit
1506659384634:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506659384800:plot(fit)
1506659410975:weaher1[c(72, 64), ]
1506659415790:weather1[c(72, 64), ]
1506659454452:holidaydates
1506659468190:weather1[c(72, 64), ] %>% glimpse
1506659509137:weather <- read_csv("data/201608_weather_data.csv")
1506659509324:# rename
1506659509324:names(weather) <-
1506659509325:names(weather) %>%
1506659509326:gsub(" ", "_", .) %>%
1506659509326:gsub("([a-z])([A-Z])", "\\1\\_\\2", .) %>%
1506659509327:tolower()
1506659509493:weather <- weather %>%
1506659509495:mutate(events = ifelse(is.na(events), "None", events)) %>%
1506659509496:mutate(events = as.factor(events)) %>%
1506659509497:mutate(pdt = mdy(pdt))
1506659510165:weather <- weather %>%
1506659510166:mutate(precipitation_in = as.numeric(precipitation_in)) %>%
1506659510168:mutate(precipitation_in = ifelse(is.na(precipitation_in),
1506659510170:0, precipitation_in))
1506659510401:# only select the weather that for the SF. zip = 94107
1506659510402:weather <- weather %>%
1506659510404:filter(zip == 94107)
1506659518127:weather <- weather %>%
1506659518130:left_join(trip_daily, by = c("pdt" = "start_date"))
1506659518351:weather <- weather %>%
1506659518352:mutate(day_of_week = pdt %>% strftime("%A"),
1506659518353:week_nr = pdt %>% strftime("%W"),
1506659518353:weekday = pdt %>% strftime("%u") %>% as.numeric) %>%
1506659518354:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506659518355:mutate(weekday = as.character(as.numeric(factor(weekday)) - 1)) %>%
1506659518358:mutate(zip = factor(zip))
1506659524881:weather %>% glimpse()
1506659529898:holidaydates <- holidays(c(2015, 2016))
1506659530610:weather1 <- weather %>%
1506659530611:mutate(weekday = ifelse(
1506659530612:pdt %in% holidaydates, "1", weekday
1506659530613:))
1506659543589:l <- regsubsets(data = weather,
1506659543592:num_trips ~
1506659543593:weekday +
1506659543594:mean_temperature_f +
1506659543597:precipitation_in +
1506659543597:mean_visibility_miles +
1506659543598:mean_humidity +
1506659543599:mean_wind_speed_mph +
1506659543599:cloud_cover,
1506659543601:method = "forward", nvmax = 15)
1506659544515:s <- summary(l)
1506659544699:s
1506659545522:s$cp
1506659549041:formula = "sqrt(num_trips) ~
1506659549043:weekday +
1506659549046:mean_temperature_f +
1506659549047:mean_visibility_miles +
1506659549049:mean_wind_speed_mph +
1506659549051:precipitation_in"
1506659579254:holidaydates <- holidays(c(2015, 2016))
1506659580023:weather1 <- weather %>%
1506659580025:mutate(weekday = ifelse(
1506659580025:pdt %in% holidaydates, "1", weekday
1506659580026:))
1506659582417:l <- regsubsets(data = weather1,
1506659582419:num_trips ~
1506659582420:weekday +
1506659582420:mean_temperature_f +
1506659582421:precipitation_in +
1506659582422:mean_visibility_miles +
1506659582423:mean_humidity +
1506659582424:mean_wind_speed_mph +
1506659582425:cloud_cover,
1506659582426:method = "forward", nvmax = 15)
1506659583243:l <- regsubsets(data = weather1,
1506659583243:num_trips ~
1506659583244:weekday +
1506659583244:mean_temperature_f +
1506659583245:precipitation_in +
1506659583245:mean_visibility_miles +
1506659583247:mean_humidity +
1506659583249:mean_wind_speed_mph +
1506659583250:cloud_cover,
1506659583251:method = "forward", nvmax = 15)
1506659584139:s <- summary(l)
1506659584474:s
1506659585296:s$cp
1506659625052:formula = "sqrt(num_trips) ~
1506659625053:weekday +
1506659625054:mean_temperature_f +
1506659625054:mean_visibility_miles +
1506659625055:mean_wind_speed_mph +
1506659625056:precipitation_in"
1506659625644:fit <- lm(data = weather1,
1506659625647:formula = formula)
1506659626933:summary.fit <- summary(fit)
1506659627096:summary.fit
1506659630637:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506659630849:plot(fit)
1506659638862:formula = "(num_trips) ~
1506659638863:weekday +
1506659638864:mean_temperature_f +
1506659638865:mean_visibility_miles +
1506659638869:mean_wind_speed_mph +
1506659638871:precipitation_in"
1506659639283:fit <- lm(data = weather1,
1506659639285:formula = formula)
1506659640473:summary.fit <- summary(fit)
1506659640652:summary.fit
1506659641445:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506659641875:plot(fit)
1506659651788:l <- regsubsets(data = weather,
1506659651790:num_trips ~
1506659651791:weekday +
1506659651793:mean_temperature_f +
1506659651794:precipitation_in +
1506659651796:mean_visibility_miles +
1506659651798:mean_humidity +
1506659651800:mean_wind_speed_mph +
1506659651801:cloud_cover,
1506659651802:method = "forward", nvmax = 15)
1506659652530:s <- summary(l)
1506659653118:s
1506659653713:s$cp
1506659667342:formula = "sqrt(num_trips) ~
1506659667344:weekday +
1506659667345:mean_temperature_f +
1506659667347:mean_visibility_miles +
1506659667347:precipitation_in"
1506659672922:formula = "(num_trips) ~
1506659672925:weekday +
1506659672927:mean_temperature_f +
1506659672929:mean_visibility_miles +
1506659672930:precipitation_in"
1506659673770:fit <- lm(data = weather,
1506659673771:formula = formula)
1506659674451:summary.fit <- summary(fit)
1506659675022:summary.fit
1506659678262:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506659678423:plot(fit)
1506659701568:fitted(fit)
1506659731910:l <- regsubsets(data = weather,
1506659731915:sqrt(num_trips) ~
1506659731916:weekday +
1506659731917:mean_temperature_f +
1506659731918:precipitation_in +
1506659731918:mean_visibility_miles +
1506659731919:mean_humidity +
1506659731919:mean_wind_speed_mph +
1506659731920:cloud_cover,
1506659731921:method = "forward", nvmax = 15)
1506659733300:s <- summary(l)
1506659733793:s
1506659734453:s$cp
1506659778346:formula = "sqrt(num_trips) ~
1506659778350:weekday +
1506659778351:mean_temperature_f +
1506659778351:precipitation_in +
1506659778352:mean_visibility_miles +
1506659778354:mean_humidity"
1506659788510:l <- regsubsets(data = weather1,
1506659788512:sqrt(num_trips) ~
1506659788512:weekday +
1506659788513:mean_temperature_f +
1506659788513:precipitation_in +
1506659788514:mean_visibility_miles +
1506659788514:mean_humidity +
1506659788515:mean_wind_speed_mph +
1506659788515:cloud_cover,
1506659788516:method = "forward", nvmax = 15)
1506659789133:s <- summary(l)
1506659789418:s
1506659789614:s$cp
1506659819716:formula = "sqrt(num_trips) ~
1506659819717:weekday +
1506659819717:mean_temperature_f +
1506659819718:mean_visibility_miles +
1506659819718:precipitation_in +
1506659819719:mean_wind_speed_mph"
1506659820464:fit <- lm(data = weather,
1506659820465:formula = formula)
1506659823299:summary.fit <- summary(fit)
1506659823449:summary.fit
1506659832126:formula = "sqrt(num_trips) ~
1506659832127:weekday +
1506659832127:mean_temperature_f +
1506659832128:mean_visibility_miles +
1506659832128:precipitation_in"
1506659832713:fit <- lm(data = weather,
1506659832715:formula = formula)
1506659833148:summary.fit <- summary(fit)
1506659833675:summary.fit
1506659840827:fit <- lm(data = weather1,
1506659840830:formula = formula)
1506659841834:summary.fit <- summary(fit)
1506659843292:summary.fit
1506659848520:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506659848686:plot(fit)
1506659885308:weather[c(64, 72), ]
1506659889467:weather[c(64, 72), ] %>% glimpse()
1506659906870:holidaydates
1506659924812:weather %>% glimpse()
1506659943702:weather1 <- weather %>%
1506659943704:mutate(weekday = ifelse(
1506659943706:pdt %in% holidaydates, "1", weekday
1506659943707:))
1506660063958:allholidays <- c(USNewYearsDay, USMLKingsBirthday, USMemorialDay, USIndependenceDay, USLaborDay, USThanksgivingDay, USChristmasDay)
1506660065637:holidays <- function(year) {
1506660065638:allholidays <- c(USNewYearsDay, USMLKingsBirthday, USMemorialDay, USIndependenceDay, USLaborDay, USThanksgivingDay, USChristmasDay)
1506660065640:holidaydates <- c()
1506660065641:for (i in 1:length(allholidays)) {
1506660065644:x <- allholidays[[i]](year)
1506660065645:holidaydates <- append(holidaydates, x)
1506660065647:}
1506660065648:holidaydates <- holidaydates %>%
1506660065649:as.Date()
1506660065650:return(sort(holidaydates))
1506660065650:}
1506660072129:holidaydates <- holidays(c(2015, 2016))
1506660072645:weather1 <- weather %>%
1506660072646:mutate(weekday = ifelse(
1506660072649:pdt %in% holidaydates, "1", weekday
1506660072650:))
1506660079240:l <- regsubsets(data = weather1,
1506660079242:sqrt(num_trips) ~
1506660079243:weekday +
1506660079243:mean_temperature_f +
1506660079244:precipitation_in +
1506660079244:mean_visibility_miles +
1506660079245:mean_humidity +
1506660079245:mean_wind_speed_mph +
1506660079246:cloud_cover,
1506660079246:method = "forward", nvmax = 15)
1506660079707:s <- summary(l)
1506660079885:s
1506660080590:s$cp
1506660117402:formula = "sqrt(num_trips) ~
1506660117403:weekday +
1506660117403:mean_temperature_f +
1506660117404:mean_visibility_miles +
1506660117404:precipitation_in +
1506660117405:mean_wind_speed_mph"
1506660119096:fit <- lm(data = weather1,
1506660119098:formula = formula)
1506660119437:summary.fit <- summary(fit)
1506660119611:summary.fit
1506660127534:formula = "sqrt(num_trips) ~
1506660127535:weekday +
1506660127535:mean_temperature_f +
1506660127536:mean_visibility_miles +
1506660127536:precipitation_in"
1506660128042:fit <- lm(data = weather1,
1506660128043:formula = formula)
1506660128506:summary.fit <- summary(fit)
1506660128991:summary.fit
1506660137707:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506660137893:plot(fit)
1506660158920:weather1[c(168, 115, 88)]
1506660160898:weather1[c(168, 115, 88),]
1506660199612:?holiday
1506660253838:USThanksgivingDay(2015)
1506660261538:USThanksgivingDay(2015) %>% as.Date()
1506660267449:USThanksgivingDay(2015) %>% as.Date() %>% wday
1506660325056:weather1[c(168, 115, 88),] %>% glimpse
1506660482547:weather %>% ggplot(aes(weekday, num_trips)) +GeomPoint
1506660486398:weather %>% ggplot(aes(weekday, num_trips)) + geom_path()
1506660491214:weather %>% ggplot(aes(weekday, num_trips)) + geom_point()
1506660522008:weather %>% ggplot(aes(pdt, num_trips, color = weekday)) + geom_point()
1506660538478:weather1 %>% ggplot(aes(pdt, num_trips, color = weekday)) + geom_point()
1506660593030:allholidays <- c(USNewYearsDay, USMLKingsBirthday, USMemorialDay, USIndependenceDay, USLaborDay, USThanksgivingDay, USChristmasDay, USElectionDay, USGoodFriday)
1506660595473:holidays <- function(year) {
1506660595474:allholidays <- c(USNewYearsDay, USMLKingsBirthday, USMemorialDay, USIndependenceDay, USLaborDay, USThanksgivingDay, USChristmasDay, USElectionDay, USGoodFriday)
1506660595475:holidaydates <- c()
1506660595475:for (i in 1:length(allholidays)) {
1506660595476:x <- allholidays[[i]](year)
1506660595477:holidaydates <- append(holidaydates, x)
1506660595477:}
1506660595478:holidaydates <- holidaydates %>%
1506660595478:as.Date() %>% append("2015-11-24")
1506660595479:return(sort(holidaydates))
1506660595480:}
1506660604657:holidaydates <- holidays(c(2015, 2016))
1506660604960:weather1 <- weather %>%
1506660604961:mutate(weekday = ifelse(
1506660604961:pdt %in% holidaydates, "1", weekday
1506660604962:))
1506660618584:weather1 %>% ggplot(aes(pdt, num_trips, color = weekday)) + geom_point()
1506660652634:allholidays <- c(USNewYearsDay, USMLKingsBirthday, USMemorialDay, USIndependenceDay, USLaborDay, USThanksgivingDay, USChristmasDay, USPresidentsDay)
1506660654530:holidays <- function(year) {
1506660654531:allholidays <- c(USNewYearsDay, USMLKingsBirthday, USMemorialDay, USIndependenceDay, USLaborDay, USThanksgivingDay, USChristmasDay, USPresidentsDay)
1506660654532:holidaydates <- c()
1506660654533:for (i in 1:length(allholidays)) {
1506660654535:x <- allholidays[[i]](year)
1506660654536:holidaydates <- append(holidaydates, x)
1506660654538:}
1506660654540:holidaydates <- holidaydates %>%
1506660654540:as.Date() %>% append("2015-11-24")
1506660654542:return(sort(holidaydates))
1506660654544:}
1506660660553:holidaydates <- holidays(c(2015, 2016))
1506660660946:weather1 <- weather %>%
1506660660947:mutate(weekday = ifelse(
1506660660948:pdt %in% holidaydates, "1", weekday
1506660660948:))
1506660670140:holidaydates
1506660678555:weather1 %>% ggplot(aes(pdt, num_trips, color = weekday)) + geom_point()
1506660714718:formula = "sqrt(num_trips) ~
1506660714721:weekday +
1506660714723:mean_temperature_f +
1506660714724:mean_visibility_miles +
1506660714724:precipitation_in"
1506660715266:fit <- lm(data = weather1,
1506660715267:formula = formula)
1506660715763:summary.fit <- summary(fit)
1506660716402:summary.fit
1506660717472:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506660717677:plot(fit)
1506660755878:weather[c(88, 115, 122)] %>% glimpse
1506660759747:weather[c(88, 115, 122),] %>% glimpse
1506660874263:weather[c(88, 115, 122),]
1506660890672:}
1506660894859:holidaydates <- holidaydates %>%
1506660894861:as.Date() %>% append(c("2015-11-27", "2015-12-24", "2015-12-31"))
1506660896200:holidays <- function(year) {
1506660896201:allholidays <- c(USNewYearsDay, USMLKingsBirthday, USMemorialDay, USIndependenceDay, USLaborDay, USThanksgivingDay, USChristmasDay, USPresidentsDay)
1506660896202:holidaydates <- c()
1506660896203:for (i in 1:length(allholidays)) {
1506660896204:x <- allholidays[[i]](year)
1506660896206:holidaydates <- append(holidaydates, x)
1506660896208:}
1506660896210:holidaydates <- holidaydates %>%
1506660896212:as.Date() %>% append(c("2015-11-27", "2015-12-24", "2015-12-31"))
1506660896213:return(sort(holidaydates))
1506660896214:}
1506660900956:holidays <- function(year) {
1506660900959:allholidays <- c(USNewYearsDay, USMLKingsBirthday, USMemorialDay, USIndependenceDay, USLaborDay, USThanksgivingDay, USChristmasDay, USPresidentsDay)
1506660900961:holidaydates <- c()
1506660900962:for (i in 1:length(allholidays)) {
1506660900964:x <- allholidays[[i]](year)
1506660900965:holidaydates <- append(holidaydates, x)
1506660900965:}
1506660900966:holidaydates <- holidaydates %>%
1506660900967:as.Date() %>% append(c("2015-11-27", "2015-12-24", "2015-12-31"))
1506660900969:return(sort(holidaydates))
1506660900969:}
1506660913183:holidays(2015:2016)
1506660930009:holidays <- function(year) {
1506660930011:allholidays <- c(USNewYearsDay, USMLKingsBirthday, USMemorialDay, USIndependenceDay, USLaborDay, USThanksgivingDay, USChristmasDay, USPresidentsDay)
1506660930013:holidaydates <- c()
1506660930015:for (i in 1:length(allholidays)) {
1506660930017:x <- allholidays[[i]](year)
1506660930018:holidaydates <- append(holidaydates, x)
1506660930019:}
1506660930020:holidaydates <- holidaydates %>%
1506660930021:as.Date() %>% append(as.Date(c("2015-11-27", "2015-12-24", "2015-12-31")))
1506660930022:return(sort(holidaydates))
1506660930023:}
1506660932000:holidays(2015:2016)
1506660958273:holidaydates <- holidays(c(2015, 2016))
1506660959447:weather1 <- weather %>%
1506660959447:mutate(weekday = ifelse(
1506660959448:pdt %in% holidaydates, "1", weekday
1506660959448:))
1506660962236:l <- regsubsets(data = weather1,
1506660962236:sqrt(num_trips) ~
1506660962237:weekday +
1506660962238:mean_temperature_f +
1506660962238:precipitation_in +
1506660962239:mean_visibility_miles +
1506660962239:mean_humidity +
1506660962240:mean_wind_speed_mph +
1506660962240:cloud_cover,
1506660962242:method = "forward", nvmax = 15)
1506660963067:s <- summary(l)
1506660963302:s
1506660963667:s$cp
1506661010059:formula = "sqrt(num_trips) ~
1506661010060:weekday +
1506661010061:mean_temperature_f +
1506661010061:mean_visibility_miles +
1506661010062:mean_wind_speed_mph +
1506661010062:precipitation_in"
1506661012226:fit <- lm(data = weather1,
1506661012228:formula = formula)
1506661012483:summary.fit <- summary(fit)
1506661012720:summary.fit
1506661014031:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506661014526:plot(fit)
1506661024338:plot(x=fitted(fit),y=rstudent(fit))
1506661024619:abline(h=3,col="red",lty=2)
1506661024948:abline(h=-3,col="red",lty=2)
1506661037866:shapiro.test(fitted(fit))
1506661076742:weather1[c(121),]
1506661159852:weather1 %>% ggplot(aes(pdt, num_trips, color =weekday)) + geom_point()
1506661222790:weathe1 %>% select(pdt, num_trips) %>% filter(num_trips < 1000)
1506661227576:weather1 %>% select(pdt, num_trips) %>% filter(num_trips < 1000)
1506661267841:weathe1 %>% filter(weekday == "0") %>%  select(pdt, num_trips) %>% filter(num_trips < 1000)
1506661271586:weather1 %>% filter(weekday == "0") %>%  select(pdt, num_trips) %>% filter(num_trips < 1000)
1506661311429:weather1 %>% filter(weekday == "1") %>%  select(pdt, num_trips) %>% filter(num_trips >1000)
1506661452525:weather1 %>% filter(weekday == "1") %>%  select(pdt, num_trips) %>% filter(num_trips >1000) %>% select(pdt) %>% t
1506661464211:weather1 %>% filter(weekday == "0") %>%  select(pdt, num_trips) %>% filter(num_trips < 1000) %>% select(pdt) %>% t
1506661468311:weather1 %>% filter(weekday == "0") %>%  select(pdt, num_trips) %>% filter(num_trips < 1000) %>% select(pdt) %>% t %>% as.Date
1506661507422:h1 <- weather1 %>% filter(weekday == "0") %>%  select(pdt, num_trips) %>% filter(num_trips < 1000) %>% select(pdt) %>% t %>% as.Date
1506661548830:holidaydates <- holidays(c(2015, 2016)) %>% append(h1)
1506661549442:weather1 <- weather %>%
1506661549444:mutate(weekday = ifelse(
1506661549445:pdt %in% holidaydates, "1", weekday
1506661549446:))
1506661553898:l <- regsubsets(data = weather1,
1506661553899:sqrt(num_trips) ~
1506661553900:weekday +
1506661553902:mean_temperature_f +
1506661553903:precipitation_in +
1506661553905:mean_visibility_miles +
1506661553906:mean_humidity +
1506661553907:mean_wind_speed_mph +
1506661553908:cloud_cover,
1506661553910:method = "forward", nvmax = 15)
1506661554282:s <- summary(l)
1506661554615:s
1506661554882:s$cp
1506661556115:formula = "sqrt(num_trips) ~
1506661556116:weekday +
1506661556117:mean_temperature_f +
1506661556118:mean_visibility_miles +
1506661556119:mean_wind_speed_mph +
1506661556120:precipitation_in"
1506661556664:fit <- lm(data = weather1,
1506661556665:formula = formula)
1506661598618:formula = "sqrt(num_trips) ~
1506661598619:weekday +
1506661598620:mean_temperature_f +
1506661598620:precipitation_in +
1506661598621:cloul_cover +
1506661598621:mean_visibility_miles"
1506661599781:fit <- lm(data = weather1,
1506661599782:formula = formula)
1506661600349:summary.fit <- summary(fit)
1506661600570:summary.fit
1506661605724:formula = "sqrt(num_trips) ~
1506661605726:weekday +
1506661605727:mean_temperature_f +
1506661605727:precipitation_in +
1506661605728:clould_cover +
1506661605729:mean_visibility_miles"
1506661606281:fit <- lm(data = weather1,
1506661606282:formula = formula)
1506661606717:summary.fit <- summary(fit)
1506661606927:summary.fit
1506661620841:formula = "sqrt(num_trips) ~
1506661620842:weekday +
1506661620842:mean_temperature_f +
1506661620842:precipitation_in +
1506661620843:clould_cover +
1506661620843:mean_visibility_miles"
1506661622084:fit <- lm(data = weather1,
1506661622085:formula = formula)
1506661622545:summary.fit <- summary(fit)
1506661630008:formula = "sqrt(num_trips) ~
1506661630011:weekday +
1506661630011:mean_temperature_f +
1506661630012:precipitation_in +
1506661630013:cloud_cover +
1506661630013:mean_visibility_miles"
1506661630444:fit <- lm(data = weather1,
1506661630445:formula = formula)
1506661630890:summary.fit <- summary(fit)
1506661631066:summary.fit
1506661632608:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506661632740:plot(fit)
1506661645374:shapiro.test(fitted(fit))
1506661684516:weather1[c(144,193, 349)]
1506661687373:weather1[c(144,193, 349),]
1506661945938:plot(x=fitted(fit),y=rstudent(fit))
1506661946307:abline(h=3,col="red",lty=2)
1506661946823:abline(h=-3,col="red",lty=2)
1506662077959:# variable selection
1506662077961:l <- regsubsets(data = weather1,
1506662077963:(num_trips) ~
1506662077964:weekday +
1506662077965:mean_temperature_f +
1506662077966:precipitation_in +
1506662077968:mean_visibility_miles +
1506662077969:mean_humidity +
1506662077969:mean_wind_speed_mph +
1506662077970:cloud_cover,
1506662077971:method = "forward", nvmax = 15)
1506662078504:s <- summary(l)
1506662078740:s
1506662079156:s$cp
1506662097143:# fit model
1506662097144:formula = "(num_trips) ~
1506662097145:weekday +
1506662097146:mean_temperature_f +
1506662097147:precipitation_in +
1506662097151:cloud_cover +
1506662097153:mean_visibility_miles"
1506662097672:fit <- lm(data = weather1,
1506662097673:formula = formula)
1506662098144:summary.fit <- summary(fit)
1506662098716:summary.fit
1506662105895:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506662106841:plot(fit)
1506662125861:# fit model
1506662125863:formula = "sqrt(num_trips) ~
1506662125863:weekday +
1506662125864:mean_temperature_f +
1506662125864:precipitation_in +
1506662125865:cloud_cover +
1506662125865:mean_visibility_miles"
1506662126413:fit <- lm(data = weather1,
1506662126414:formula = formula)
1506662126797:summary.fit <- summary(fit)
1506662127181:summary.fit
1506662129033:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506662129679:plot(fit)
1506662180356:fitted(fit)
1506662192279:# fit model
1506662192280:formula = "(num_trips) ~
1506662192282:weekday +
1506662192283:mean_temperature_f +
1506662192284:precipitation_in +
1506662192285:cloud_cover +
1506662192285:mean_visibility_miles"
1506662192477:fit <- lm(data = weather1,
1506662192478:formula = formula)
1506662192788:summary.fit <- summary(fit)
1506662193018:summary.fit
1506662193557:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506662193927:plot(fit)
1506662198593:fitted(fit)
1506662236260:# fit model
1506662236262:formula = "sqrt(num_trips) ~
1506662236263:weekday +
1506662236263:mean_temperature_f +
1506662236264:precipitation_in +
1506662236264:cloud_cover +
1506662236264:mean_visibility_miles"
1506662241121:fit <- lm(data = weather1,
1506662241123:formula = formula)
1506662241583:summary.fit <- summary(fit)
1506662241960:summary.fit
1506662243097:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506662243292:plot(fit)
1506662253081:# variable selection
1506662253082:l <- regsubsets(data = weather,
1506662253083:(num_trips) ~
1506662253085:weekday +
1506662253087:mean_temperature_f +
1506662253087:precipitation_in +
1506662253088:mean_visibility_miles +
1506662253088:mean_humidity +
1506662253088:mean_wind_speed_mph +
1506662253089:cloud_cover,
1506662253089:method = "forward", nvmax = 15)
1506662254130:s <- summary(l)
1506662254621:s
1506662255066:s$cp
1506662269600:# fit model
1506662269601:formula = "sqrt(num_trips) ~
1506662269601:weekday +
1506662269602:mean_temperature_f +
1506662269603:precipitation_in +
1506662269603:mean_visibility_miles"
1506662271842:fit <- lm(data = weather1,
1506662271843:formula = formula)
1506662272134:summary.fit <- summary(fit)
1506662272331:summary.fit
1506662276031:fit <- lm(data = weather,
1506662276032:formula = formula)
1506662276486:summary.fit <- summary(fit)
1506662276662:summary.fit
1506662278983:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506662279152:plot(fit)
1506662290378:# fit model
1506662290381:formula = "(num_trips) ~
1506662290381:weekday +
1506662290382:mean_temperature_f +
1506662290383:precipitation_in +
1506662290383:mean_visibility_miles"
1506662290805:fit <- lm(data = weather,
1506662290807:formula = formula)
1506662291360:summary.fit <- summary(fit)
1506662291599:summary.fit
1506662292232:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506662292430:plot(fit)
1506662302677:# fit model
1506662302678:formula = "sqrt(num_trips) ~
1506662302678:weekday +
1506662302679:mean_temperature_f +
1506662302679:precipitation_in +
1506662302680:mean_visibility_miles"
1506662303000:fit <- lm(data = weather,
1506662303001:formula = formula)
1506662303387:summary.fit <- summary(fit)
1506662303834:summary.fit
1506662304639:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506662305098:plot(fit)
1506662356311:# fit model
1506662356313:formula = "sqrt(num_trips) ~
1506662356313:weekday +
1506662356313:mean_temperature_f +
1506662356314:precipitation_in +
1506662356314:mean_visibility_miles"
1506662356503:fit <- lm(data = weather1,
1506662356504:formula = formula)
1506662356989:summary.fit <- summary(fit)
1506662357354:summary.fit
1506662361478:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506662361868:plot(fit)
1506662385647:residual(fit)
1506662406584:shapiro.test( resid(fit))
1506662473949:fit <- lm(data = weather,
1506662473951:formula = formula)
1506662474456:summary.fit <- summary(fit)
1506662474787:summary.fit
1506662475401:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506662475598:plot(fit)
1506662712539:# variable selection
1506662712541:l <- regsubsets(data = weather,
1506662712549:(num_trips) ~
1506662712551:weekday +
1506662712552:mean_temperature_f +
1506662712553:precipitation_in +
1506662712555:mean_visibility_miles +
1506662712556:mean_humidity +
1506662712557:mean_wind_speed_mph +
1506662712559:cloud_cover,
1506662712560:method = "forward", nvmax = 15)
1506662713138:s <- summary(l)
1506662713548:s
1506662713973:s$cp
1506662747890:# fit model
1506662747891:formula = "sqrt(num_trips) ~
1506662747891:weekday +
1506662747892:mean_temperature_f +
1506662747892:mean_visibility_miles +
1506662747893:precipitation_in"
1506662748618:fit <- lm(data = weather1,
1506662748620:formula = formula)
1506662751341:fit <- lm(data = weather,
1506662751342:formula = formula)
1506662751861:summary.fit <- summary(fit)
1506662752198:summary.fit
1506662755925:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506662756113:plot(fit)
1506662807482:holidaydates <- holidays(c(2015, 2016))
1506662808434:weather1 <- weather %>%
1506662808437:mutate(weekday = ifelse(
1506662808439:pdt %in% holidaydates, "1", weekday
1506662808440:))
1506662839394:fit_holiday_adjust <- lm(weather1, formula)
1506662843365:fit_holiday_adjust <- lm(weather1, formula = formula)
1506662872719:fit_holiday_adjust <- lm(data = weather1, formula = formula)
1506662886394:summary(fit_holiday_adjust)
1506662891764:summary(fit)
1506662906012:s
1506662907767:s$cp
1506662921381:s$rsq
1506662929029:s$which
1506662936872:s$outmat
1506662952970:s$outmat %>% class
1506662966351:s$which %>% class
1506662973718:s$which[1.]
1506662977497:s$which[1,]
1506662986269:s$outmat[1,]
1506663008940:s$which
1506663013314:s$outmat
1506663029223:s$cp
1506663072379:# number of trips by day
1506663072380:trip %>%
1506663072381:as_tbl_time(index = start_date) %>%
1506663072382:time_summarise(period = "daily",
1506663072382:num_trips = n()) %>%
1506663072383:mutate(day_of_week = start_date %>% strftime("%A"),
1506663072384:week_nr = start_date %>% strftime("%W"),
1506663072386:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506663072388:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506663072389:ggplot(aes(start_date, num_trips, color = weekday)) +
1506663072390:geom_point() +
1506663072391:geom_smooth()+
1506663072393:labs(x = "Date",
1506663072394:y = "Total Number of Bicycle Trips",
1506663072394:title = "Trips Each Day")
1506663084959:# number of trips by day
1506663084961:trip %>%
1506663084962:as_tbl_time(index = start_date) %>%
1506663084962:time_summarise(period = "daily",
1506663084962:num_trips = n()) %>%
1506663084963:mutate(day_of_week = start_date %>% strftime("%A"),
1506663084963:week_nr = start_date %>% strftime("%W"),
1506663084964:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506663084964:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506663084964:ggplot(aes(start_date, num_trips, color = weekday)) +
1506663084965:geom_point() +
1506663084965:labs(x = "Date",
1506663084966:y = "Total Number of Bicycle Trips",
1506663084966:title = "Trips Each Day")
1506663103916:# number of trips by day
1506663103917:trip %>%
1506663103918:as_tbl_time(index = start_date) %>%
1506663103918:time_summarise(period = "daily",
1506663103919:num_trips = n()) %>%
1506663103920:mutate(day_of_week = start_date %>% strftime("%A"),
1506663103921:week_nr = start_date %>% strftime("%W"),
1506663103922:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506663103923:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506663103925:ggplot(aes(start_date, num_trips, color = weekday)) +
1506663103927:geom_point() +
1506663103929:geom_smooth()+
1506663103930:labs(x = "Date",
1506663103931:y = "Total Number of Bicycle Trips",
1506663103931:title = "Trips Each Day")
1506663166938:# holiday may affect
1506663166941:weather %>% filter(weekday == "0", num_trips < 1000)
1506663206846:# holiday may affect
1506663206848:weather %>%
1506663206849:filter(weekday == "0", num_trips < 1000) %>%
1506663206851:select(pdt, num_trips)
1506663232907:# holiday may affect
1506663232909:weather %>%
1506663232910:filter(weekday == "0", num_trips < 1000) %>%
1506663232912:select(pdt, num_trips, weekday)
1506663247208:weather <- weather %>%
1506663247209:mutate(day_of_week = pdt %>% strftime("%A"),
1506663247210:week_nr = pdt %>% strftime("%W"),
1506663247210:weekday = pdt %>% strftime("%u") %>% as.numeric) %>%
1506663247211:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506663247211:# mutate(weekday = as.character(as.numeric(factor(weekday)) - 1)) %>%
1506663247212:mutate(zip = factor(zip))
1506663255057:weather %>% glimpse()
1506663261244:# variable selection
1506663261245:l <- regsubsets(data = weather,
1506663261246:num_trips ~
1506663261247:weekday +
1506663261247:mean_temperature_f +
1506663261249:precipitation_in +
1506663261250:mean_visibility_miles +
1506663261251:mean_humidity +
1506663261253:mean_wind_speed_mph +
1506663261254:cloud_cover,
1506663261256:method = "forward", nvmax = 15)
1506663261785:s <- summary(l)
1506663262022:s$outmat
1506663262488:s$cp
1506663264689:# fit model
1506663264689:formula = "sqrt(num_trips) ~
1506663264690:weekday +
1506663264690:mean_temperature_f +
1506663264691:mean_visibility_miles +
1506663264692:precipitation_in"
1506663265448:fit <- lm(data = weather, formula = formula)
1506663265725:summary(fit)
1506663267560:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506663268264:plot(fit)
1506663285359:# holiday may affect
1506663285362:weather %>%
1506663285364:filter(weekday == "weekday", num_trips < 1000) %>%
1506663285365:select(pdt, num_trips, weekday)
1506663295734:# holiday may affect
1506663295734:weather %>%
1506663295735:filter(weekday == "weekday", num_trips < 1000) %>%
1506663295736:select(pdt, num_trips)
1506663367228:weather <- weather %>%
1506663367231:mutate(day_of_week = pdt %>% strftime("%A"),
1506663367232:week_nr = pdt %>% strftime("%W"),
1506663367233:weekday = pdt %>% strftime("%u") %>% as.numeric) %>%
1506663367234:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506663367235:mutate(weekday = as.character(as.numeric(factor(weekday)) - 1)) %>%
1506663367238:mutate(zip = factor(zip))
1506663367793:# variable selection
1506663367794:l <- regsubsets(data = weather,
1506663367794:num_trips ~
1506663367795:weekday +
1506663367795:mean_temperature_f +
1506663367796:precipitation_in +
1506663367796:mean_visibility_miles +
1506663367797:mean_humidity +
1506663367808:mean_wind_speed_mph +
1506663367809:cloud_cover,
1506663367810:method = "forward", nvmax = 15)
1506663368061:s <- summary(l)
1506663368410:s$outmat
1506663368596:s$cp
1506663368763:# fit model
1506663368763:formula = "sqrt(num_trips) ~
1506663368764:weekday +
1506663368764:mean_temperature_f +
1506663368765:mean_visibility_miles +
1506663368765:precipitation_in"
1506663368947:fit <- lm(data = weather, formula = formula)
1506663369264:summary(fit)
1506663369629:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506663370428:plot(fit)
1506663371142:# holiday may affect
1506663371143:weather %>%
1506663371144:filter(weekday == "1", num_trips < 1000) %>%
1506663371144:select(pdt, num_trips)
1506663372390:holidaydates <- holidays(c(2015, 2016))
1506663374877:weather1 <- weather %>%
1506663374878:mutate(weekday = ifelse(
1506663374878:pdt %in% holidaydates, "1", weekday
1506663374894:))
1506663375461:fit_holiday_adjust <- lm(data = weather1, formula = formula)
1506663381895:weather1 <- weather %>%
1506663381896:mutate(weekday = ifelse(
1506663381897:pdt %in% holidaydates, "0", weekday
1506663381897:))
1506663382492:fit_holiday_adjust <- lm(data = weather1, formula = formula)
1506663386648:weather1 <- weather %>%
1506663386649:mutate(weekday = ifelse(
1506663386651:pdt %in% holidaydates, "1", weekday
1506663386652:))
1506663387086:fit_holiday_adjust <- lm(data = weather1, formula = formula)
1506663387531:summary(fit_holiday_adjust)
1506663421352:fit
1506663434878:# fit model
1506663434880:formula <- "(num_trips) ~
1506663434880:weekday +
1506663434882:mean_temperature_f +
1506663434883:mean_visibility_miles +
1506663434885:precipitation_in"
1506663448581:summary(lm(data = weather, formula = formula))
1506663463117:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506663463311:plot(fit)
1506663500153:# fit model
1506663500155:formula <- "num_trips ~
1506663500156:weekday +
1506663500156:mean_temperature_f +
1506663500156:mean_visibility_miles +
1506663500157:precipitation_in"
1506663500766:fit <- lm(data = weather, formula = formula)
1506663500971:summary(fit)
1506663505727:plot(fit)
1506663687869:fit_holiday_adjust <- lm(data = weather1, formula = formula)
1506663688610:summary(fit_holiday_adjust)
1506663689013:plot(fit_holiday_adjust)
1506663761452:# fit model
1506663761455:formula <- "sqrt(num_trips) ~
1506663761457:weekday +
1506663761457:mean_temperature_f +
1506663761458:mean_visibility_miles +
1506663761458:precipitation_in"
1506663761928:fit <- lm(data = weather, formula = formula)
1506663762108:summary(fit)
1506663763035:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506663763372:plot(fit)
1506663768026:fit_holiday_adjust <- lm(data = weather1, formula = formula)
1506663768435:summary(fit_holiday_adjust)
1506663768993:plot(fit_holiday_adjust)
1506663802572:# holidays in a year
1506663802574:holidays <- function(year) {
1506663802577:allholidays <- c(USNewYearsDay, USMLKingsBirthday, USMemorialDay, USIndependenceDay, USLaborDay, USThanksgivingDay, USChristmasDay, USPresidentsDay)
1506663802579:holidaydates <- c()
1506663802580:for (i in 1:length(allholidays)) {
1506663802580:x <- allholidays[[i]](year)
1506663802581:holidaydates <- append(holidaydates, x)
1506663802582:}
1506663802583:holidaydates <- holidaydates %>%
1506663802583:as.Date() %>% append(as.Date(c("2015-11-27", "2015-12-24", "2015-12-31")))
1506663802585:return(sort(holidaydates))
1506663802589:}
1506663806221:holidaydates <- holidays(c(2015, 2016))
1506663806687:weather1 <- weather %>%
1506663806688:mutate(weekday = ifelse(
1506663806689:pdt %in% holidaydates, "1", weekday
1506663806689:))
1506663807105:fit_holiday_adjust <- lm(data = weather1, formula = formula)
1506663807576:summary(fit_holiday_adjust)
1506663807807:plot(fit_holiday_adjust)
1506663929468:plot(x=fitted(fit_holiday_adjust), y=rstudent(fit_holiday_adjust))
1506663930115:abline(h=3,col="red",lty=2)
1506663931091:abline(h=-3,col="red",lty=2)
1506663936761:dev.off()
1506663937238:plot(x=fitted(fit_holiday_adjust), y=rstudent(fit_holiday_adjust))
1506663937509:abline(h=3,col="red",lty=2)
1506663938210:abline(h=-3,col="red",lty=2)
1506663948876:plot(x=fitted(fit_holiday_adjust), y=rstudent(fit_holiday_adjust))
1506663949399:abline(h=2,col="red",lty=2)
1506663950109:abline(h=-2,col="red",lty=2)
1506663965941:abline(h=3,col="red",lty=2)
1506663966711:abline(h=-3,col="red",lty=2)
1506663976768:plot(x=fitted(fit_holiday_adjust), y=rstudent(fit_holiday_adjust))
1506663977428:abline(h=3,col="red",lty=2)
1506663977797:abline(h=-3,col="red",lty=2)
1506663995726:which(rstudent(fit_holiday_adjust) > 3)
1506664005797:which(abs(rstudent(fit_holiday_adjust)) > 3)
1506664014851:which(abs(rstudent(fit_holiday_adjust)) > 3) %>% class
1506664024498:>rstudent
1506664030405:?rstudent
1506664050007:which(abs(rstudent(fit_holiday_adjust, name = F)) > 3) %>%
1506664064247:which(abs(rstudent(fit_holiday_adjust, name = F)) > 3)
1506664100034:which(abs(rstudent(fit_holiday_adjust, unname = t)) > 3)
1506664105123:which(abs(rstudent(fit_holiday_adjust, unname = T)) > 3)
1506664114841:?as.integer
1506664148703:rstudent(fit)
1506664175886:which(abs(rstudent(fit_holiday_adjust)) > 3)
1506664240143:weather1 <- weather1 %>%
1506664240145:slice(-which(abs(rstudent(fit_holiday_adjust)) > 3))
1506664251452:fit_holiday_adjust <- lm(data = weather1, formula = formula)
1506664252174:summary(fit_holiday_adjust)
1506664252765:plot(fit_holiday_adjust)
1506664280595:weather1
1506664291533:plot(x=fitted(fit_holiday_adjust), y=rstudent(fit_holiday_adjust))
1506664292395:abline(h=3,col="red",lty=2)
1506664293332:abline(h=-3,col="red",lty=2)
1506664300453:weather1 <- weather %>%
1506664300455:mutate(weekday = ifelse(
1506664300455:pdt %in% holidaydates, "1", weekday
1506664300455:))
1506664302539:fit_holiday_adjust <- lm(data = weather1, formula = formula)
1506664303046:summary(fit_holiday_adjust)
1506664307153:plot(fit_holiday_adjust)
1506664317508:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506664317826:plot(fit_holiday_adjust)
1506664320520:dev.off()
1506664321357:plot(x=fitted(fit_holiday_adjust), y=rstudent(fit_holiday_adjust))
1506664322212:abline(h=3,col="red",lty=2)
1506664322842:abline(h=-3,col="red",lty=2)
1506664326954:weather1 <- weather1 %>%
1506664326955:slice(-which(abs(rstudent(fit_holiday_adjust)) > 2))
1506664329996:fit_holiday_adjust <- lm(data = weather1, formula = formula)
1506664330369:summary(fit_holiday_adjust)
1506664330810:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506664331533:plot(fit_holiday_adjust)
1506664339341:plot(x=fitted(fit_holiday_adjust), y=rstudent(fit_holiday_adjust))
1506664341650:abline(h=3,col="red",lty=2)
1506664342705:abline(h=-3,col="red",lty=2)
1506664353758:dev.off()
1506664357205:plot(fit_holiday_adjust)
1506664385575:shapiro.test(resid(fit_holiday_adjust))
1506664406365:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506664406635:plot(fit_holiday_adjust)
1506664498239:library(gvlma)
1506664498266:gvmodel <- gvlma(fit)
1506664498269:summary(gvmodel)
1506664506678:install.packages("gvlma")
1506664521840:library(gvlma)
1506664521903:gvmodel <- gvlma(fit_holiday_adjust)
1506664521917:summary(gvmodel)
1506664615685:crPlots(fit_holiday_adjust)
1506664642374:qqPlot(fit_holiday_adjust,labels = row.names(states),id.method = "identify",simulate = TRUE,main = "Q-Q Plot")
1506664650505:qqPlot(fit_holiday_adjust,id.method = "identify",simulate = TRUE,main = "Q-Q Plot")
1506664659968:dev.off()
1506664661175:qqPlot(fit_holiday_adjust,id.method = "identify",simulate = TRUE,main = "Q-Q Plot")
1506664686213:ncvTest(fit_holiday_adjust)
1506664721192:vif(fit_holiday_adjust)
1506664764924:which(abs(rstudent(fit_holiday_adjust))>3)
1506664771854:fit_holiday_adjust
1506664784867:which(abs(rstudent(fit_holiday_adjust))>3)
1506664792538:rstudent(fit_holiday_adjust)
1506664796334:rstudent(fit_holiday_adjust) > 3
1506664808456:which(rstudent(fit_holiday_adjust) > 3)
1506664837906:outlier.test(fit_holiday_adjust)
1506664843648:outlierTest(fit_holiday_adjust)
1506664867506:hat.plot <- function(fit){
1506664867508:p <- length(coefficients(fit))
1506664867508:n <- length(fitted(fit))
1506664867509:plot(hatvalues(fit),main = "Index Plot of Hat Values")
1506664867510:abline(h=c(2,3)*p/n,col="red",lty=2)
1506664867512:identify(1:n, hatvalues(fit), names(hatvalues(fit)))
1506664867513:#
1506664867515:}
1506664867517:hat.plot(fit_holiday_adjust)
1506664985806:cutoff <- 4/(nrow(states-length(fit$coefficients)-2))
1506664985810:#coefficients1
1506664985811:plot(fit,which=4,cook.levels = cutoff)
1506664985882:abline(h=cutoff,lty=2,col="red")
1506665034891:cutoff <- 4/(nrow(nrow(weather1)-length(fit$coefficients)-2))
1506665034893:#coefficients1
1506665034895:plot(fit,which=4,cook.levels = cutoff)
1506665034943:abline(h=cutoff,lty=2,col="red")
1506665040337:cutoff
1506665052085:nrow(weather1)
1506665063258:cutoff <- 4/(nrow(states-length(fit$coefficients)-2))
1506665063264:#coefficients1
1506665063265:plot(fit,which=4,cook.levels = cutoff)
1506665063321:abline(h=cutoff,lty=2,col="red")
1506665086320:cutoff <- 4/(nrow(weather1)-length(fit$coefficients)-2)
1506665086322:#coefficients1
1506665086322:plot(fit,which=4,cook.levels = cutoff)
1506665086360:abline(h=cutoff,lty=2,col="red")
1506665143480:cutoff <- 4/(nrow(weather1)-length(fit_holiday_adjust$coefficients)-2)
1506665143484:#coefficients1
1506665143485:plot(fit_holiday_adjust,which=4,cook.levels = cutoff)
1506665143522:abline(h=cutoff,lty=2,col="red")
1506665218450:plot(fit_holiday_adjust)
1506665273369:influencePlot(fit_holiday_adjust,id.method = "identity", main="Influence Plot",sub="Circle size is proportional to Cook's distance")
1506665320088:weather1 %>% slice(c(118, 173, 174))
1506665334381:weather1 %>% slice(c(118, 173, 174)) %>% glimpse()
1506665416804:weather1 <- weather1 %>% slice(-c(118, 173, 174))
1506665422400:fit_holiday_adjust <- lm(data = weather1, formula = formula)
1506665422810:summary(fit_holiday_adjust)
1506665423023:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506665423482:plot(fit_holiday_adjust)
1506665429656:dev.off()
1506665429918:plot(x=fitted(fit_holiday_adjust), y=rstudent(fit_holiday_adjust))
1506665430189:abline(h=3,col="red",lty=2)
1506665432392:abline(h=-3,col="red",lty=2)
1506665437321:weather1 <- weather1 %>%
1506665437322:slice(-which(abs(rstudent(fit_holiday_adjust)) > 2))
1506665445538:cutoff <- 4/(nrow(weather1)-length(fit_holiday_adjust$coefficients)-2)
1506665445950:#coefficients1
1506665445951:plot(fit_holiday_adjust,which=4,cook.levels = cutoff)
1506665447025:abline(h=cutoff,lty=2,col="red")
1506665447903:influencePlot(fit_holiday_adjust,id.method = "identity", main="Influence Plot",sub="Circle size is proportional to Cook's distance")
1506665714031:# fit model
1506665714035:formula <- "(num_trips) ~
1506665714039:weekday +
1506665714040:mean_temperature_f +
1506665714040:mean_visibility_miles +
1506665714041:precipitation_in"
1506665714331:fit <- lm(data = weather, formula = formula)
1506665714593:summary(fit)
1506665714943:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506665715431:plot(fit)
1506665758069:# fit model
1506665758071:formula <- "sqrt(num_trips) ~
1506665758073:weekday +
1506665758074:mean_temperature_f +
1506665758075:mean_visibility_miles +
1506665758076:precipitation_in"
1506665758499:fit <- lm(data = weather, formula = formula)
1506665758969:summary(fit)
1506665759585:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506665759897:plot(fit)
1506665976456:# fit model
1506665976458:formula <- "(num_trips) ~
1506665976461:weekday +
1506665976462:mean_temperature_f +
1506665976462:mean_visibility_miles +
1506665976463:precipitation_in"
1506665978408:fit <- lm(data = weather, formula = formula)
1506665981059:summary(fit)
1506665986354:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506665986848:plot(fit)
1506666009080:rary(gvlma)
1506666009087:gvmodel <- gvlma(fit)
1506666009449:summary(gvmodel)
1506666111949:qqPlot(fit,id.method = "identify",simulate = TRUE,main = "Q-Q Plot")
1506666129244:ncvTest(fit)
1506666144225:vif(fit)
1506666164832:# fit model
1506666164836:formula <- "(num_trips) ~
1506666164840:weekday +
1506666164841:mean_temperature_f +
1506666164843:precipitation_in +
1506666164844:mean_visibility_miles +
1506666164845:mean_humidity +
1506666164847:mean_wind_speed_mph +
1506666164848:cloud_cover"
1506666166869:fit <- lm(data = weather, formula = formula)
1506666167086:summary(fit)
1506666171180:par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
1506666171424:plot(fit)
1506666181742:vif(fit)
1506666204551:gvmodel <- gvlma(fit)
1506666204592:summary(gvmodel)
1506666211832:fit <- lm(data = weather, formula = formula)
1506666212273:summary(fit)
1506666214381:gvmodel <- gvlma(fit)
1506666214391:summary(gvmodel)
1506666477081:pairs(weather1)
1506666481928:pair(weather1)
1506666484239:?pairs
1506666497500:pairs(x = weather1)
1506666508774:weather1 %>% glimpse
1506666705215:weather <- weather %>%
1506666705222:select(weekday, mean_temperature_f, mean_dew_point_f, mean_humidity,
1506666705222:mean_sea_level_pressure_in, mean_visibility_miles,
1506666705223:mean_wind_speed_mph, precipitation_in, cloud_cover,
1506666705227:num_trips)
1506666712547:weather
1506666754865:weather <- weather %>%
1506666754867:mutate(weekday = as.numeric(weekday))
1506666763440:pair(weatherj)
1506666767770:pairs(weather)
1506666798958:pairs(weather %>% filter(weekday == 0))
1506666979693:holidaydates <- holidays(c(2015, 2016))
1506666987244:weather1 <- weather %>%
1506666987250:mutate(weekday = ifelse(
1506666987252:pdt %in% holidaydates, "1", weekday
1506666987253:))
1506666998095:weather <- weather %>%
1506666998096:select(pdt,weekday, mean_temperature_f, mean_dew_point_f, mean_humidity,
1506666998103:mean_sea_level_pressure_in, mean_visibility_miles,
1506666998106:mean_wind_speed_mph, precipitation_in, cloud_cover,
1506666998106:num_trips)
1506667004996:weather <- read_csv("data/201608_weather_data.csv")
1506667005280:# rename
1506667005283:names(weather) <-
1506667005284:names(weather) %>%
1506667005284:gsub(" ", "_", .) %>%
1506667005285:gsub("([a-z])([A-Z])", "\\1\\_\\2", .) %>%
1506667005286:tolower()
1506667005404:weather <- weather %>%
1506667005406:mutate(events = ifelse(is.na(events), "None", events)) %>%
1506667005410:mutate(events = as.factor(events)) %>%
1506667005415:mutate(pdt = mdy(pdt))
1506667005508:weather <- weather %>%
1506667005509:mutate(precipitation_in = as.numeric(precipitation_in)) %>%
1506667005510:mutate(precipitation_in = ifelse(is.na(precipitation_in),
1506667005512:0, precipitation_in))
1506667005761:# only select the weather that for the SF. zip = 94107
1506667005765:weather <- weather %>%
1506667005768:filter(zip == 94107)
1506667009686:weather <- weather %>%
1506667009691:left_join(trip_daily, by = c("pdt" = "start_date"))
1506667009895:weather <- weather %>%
1506667009896:mutate(day_of_week = pdt %>% strftime("%A"),
1506667009896:week_nr = pdt %>% strftime("%W"),
1506667009897:weekday = pdt %>% strftime("%u") %>% as.numeric) %>%
1506667009897:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506667009898:mutate(weekday = as.character(as.numeric(factor(weekday)) - 1)) %>%
1506667009899:mutate(zip = factor(zip))
1506667013541:weather <- weather %>%
1506667013542:select(pdt, weekday, mean_temperature_f, mean_dew_point_f, mean_humidity,
1506667013544:mean_sea_level_pressure_in, mean_visibility_miles,
1506667013546:mean_wind_speed_mph, precipitation_in, cloud_cover,
1506667013548:num_trips)
1506667021271:weather <- weather %>%
1506667021272:mutate(weekday = as.numeric(weekday))
1506667032620:weather1 <- weather %>%
1506667032621:mutate(weekday = ifelse(
1506667032622:pdt %in% holidaydates, "1", weekday
1506667032624:))
1506667038185:weather1 %>% glimpse
1506667093460:pairs(weather1 %>% filter(weekday == "0") %>% select(-weekday, -pdt))
1506667151917:weather <-
1506667151921:weather1 %>% filter(weekday == "0") %>% select(-weekday, -pdt))
1506667162253:weather2 <- weather1 %>%
1506667162256:filter(weekday == "0") %>% select(-weekday, -pdt))
1506667180152:weather2 <- weather1 %>%
1506667180154:filter(weekday == "0") %>% select(-weekday, -pdt)
1506667204950:fit <- lm(data = weather2, formula = num_trips ~ .)
1506667208901:summary(fit)
1506667221258:vif(fit)
1506667249136:fit <- lm(data = weather2, formula = num_trips ~ . - mean_dew_point_f)
1506667249625:summary(fit)
1506667251670:vif(fit)
1506667278252:plot(fit, 1:4)
1506667558134:gvmodel <- gvlma(fit)
1506667558183:summary(gvmodel)
1506667595298:crPlots(fit)
1506667668598:qqPlot(fit,labels = row.names(weather2$num_trips),id.method = "identify",simulate = TRUE,main = "Q-Q Plot")
1506667679752:dev.off()
1506667680593:qqPlot(fit,labels = row.names(weather2$num_trips),id.method = "identify",simulate = TRUE,main = "Q-Q Plot")
1506667711651:ncvTest(fit)
1506667748836:plot(fit, 1:4)
1506667856753:weather1 <- weather1 %>%
1506667856756:slice(-which(abs(rstudent(fit_holiday_adjust)) > 2))
1506667857291:cutoff <- 4/(nrow(weather1)-length(fit_holiday_adjust$coefficients)-2)
1506667865303:weather2 <- weather1 %>%
1506667865304:filter(weekday == "0") %>% select(-weekday, -pdt)
1506667868252:weather2
1506667876490:fit <- lm(data = weather2, formula = num_trips ~ . - mean_dew_point_f)
1506667876941:summary(fit)
1506667877588:vif(fit)
1506667891014:gvmodel <- gvlma(fit)
1506667891024:summary(gvmodel)
1506667902553:ncvTest(fit)
1506667926754:plot(fit, 1:4)
1506667961281:weather2 %>% ggplot(aes(num_trips)) +geom_point()
1506667972077:plot(weather2$num_trips)
1506667999987:weather2 <- weather2 %>% filter(num_trips>2000)
1506668001867:fit <- lm(data = weather2, formula = num_trips ~ . - mean_dew_point_f)
1506668002302:summary(fit)
1506668002698:vif(fit)
1506668008295:ncvTest(fit)
1506668027057:gvmodel <- gvlma(fit)
1506668027064:summary(gvmodel)
1506668143618:weather
1506668150037:weather <- read_csv("data/201608_weather_data.csv")
1506668150237:# rename
1506668150237:names(weather) <-
1506668150238:names(weather) %>%
1506668150240:gsub(" ", "_", .) %>%
1506668150241:gsub("([a-z])([A-Z])", "\\1\\_\\2", .) %>%
1506668150243:tolower()
1506668150407:weather <- weather %>%
1506668150408:mutate(events = ifelse(is.na(events), "None", events)) %>%
1506668150409:mutate(events = as.factor(events)) %>%
1506668150410:mutate(pdt = mdy(pdt))
1506668151000:weather <- weather %>%
1506668151002:mutate(precipitation_in = as.numeric(precipitation_in)) %>%
1506668151003:mutate(precipitation_in = ifelse(is.na(precipitation_in),
1506668151004:0, precipitation_in))
1506668157051:weather %>% glimpse
1506668202774:weather %>%filter(zip == 94107) %>%  arrange(events) %>% View
1506668238050:weather %>%filter(zip == 94107) %>%  arrange(events) %>% select(pdt, events, num_tips) %>% View
1506668243594:weather %>%filter(zip == 94107) %>%  arrange(events) %>% select(pdt, events) %>% View
1506668257775:weather %>%filter(zip == 94107)%>% select(pdt, events) %>% View
1506668294142:# number of trips by day
1506668294144:trip %>%
1506668294145:as_tbl_time(index = start_date) %>%
1506668294146:time_summarise(period = "daily",
1506668294147:num_trips = n()) %>%
1506668294149:mutate(day_of_week = start_date %>% strftime("%A"),
1506668294149:week_nr = start_date %>% strftime("%W"),
1506668294150:weekday = start_date %>% strftime("%u") %>% as.numeric) %>%
1506668294151:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506668294153:ggplot(aes(start_date, num_trips, color = weekday)) +
1506668294155:geom_point() +
1506668294156:geom_smooth()+
1506668294158:labs(x = "Date",
1506668294161:y = "Total Number of Bicycle Trips",
1506668294162:title = "Trips Each Day")
1506668410610:weather %>%filter(zip == 94107)%>% select(pdt, events, precipitation_in) %>% View
1506668511101:weather %>% ggplot(aes(pdt, precipitation_in, color = events)) +geom_point()
1506668564807:weather %>% ggplot(aes(pdt, precipitation_in, color = events)) +geom_point() +geom_line(aes(y = num_trips))
1506668570908:weather %>% ggplot(aes(pdt, precipitation_in, color = events)) +geom_point()
1506746870668:weather
1506746876922:weather %>% str
1506746898029:weather <- read_csv("data/201608_weather_data.csv")
1506746899166:# rename
1506746899170:names(weather) <-
1506746899174:names(weather) %>%
1506746899177:gsub(" ", "_", .) %>%
1506746899180:gsub("([a-z])([A-Z])", "\\1\\_\\2", .) %>%
1506746899183:tolower()
1506746899787:weather <- weather %>%
1506746899811:mutate(events = ifelse(is.na(events), "None", events)) %>%
1506746899815:mutate(events = as.factor(events)) %>%
1506746899816:mutate(pdt = mdy(pdt))
1506746907054:weather <- weather %>%
1506746907060:mutate(precipitation_in = as.numeric(precipitation_in)) %>%
1506746907067:mutate(precipitation_in = ifelse(is.na(precipitation_in),
1506746907069:0, precipitation_in))
1506746907936:# only select the weather that for the SF. zip = 94107
1506746907940:weather <- weather %>%
1506746907941:filter(zip == 94107)
1506746921483:trip_daily <- trip %>%
1506746921486:filter(start_station_id %in% station_id_sf) %>%
1506746921495:as_tbl_time(index = start_date) %>%
1506746921507:time_summarise(period = "daily",
1506746921511:num_trips = n()) %>%
1506746921519:mutate(start_date = as.Date(start_date))
1506746960759:weather <- weather %>%
1506746960761:left_join(trip_daily, by = c("pdt" = "start_date"))
1506746975092:weather <- weather %>%
1506746975104:mutate(day_of_week = pdt %>% strftime("%A"),
1506746975106:week_nr = pdt %>% strftime("%W"),
1506746975107:weekday = pdt %>% strftime("%u") %>% as.numeric) %>%
1506746975108:mutate(weekday = if_else(weekday < 6, "weekday", "weekend")) %>%
1506746975109:mutate(weekday = as.character(as.numeric(factor(weekday)) - 1)) %>%
1506746975110:mutate(zip = factor(zip))
1506746976999:weather <- weather %>%
1506746977002:select(pdt, weekday, mean_temperature_f, mean_dew_point_f, mean_humidity,
1506746977003:mean_sea_level_pressure_in, mean_visibility_miles,
